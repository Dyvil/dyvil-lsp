(()=>{"use strict";var y,J={10679:(y,j,f)=>{f(11724);var m=f(29966),d=(f(4481),f(55470));console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",$=>{const M=$.data.compile;if(M){const B=(0,m.V3)(M).resolve(new d._([])).toString("js");self.postMessage({compiled:B})}})},79576:(y,j,f)=>{f.d(j,{YN:()=>p,_w:()=>N,d2:()=>C,dm:()=>i,eB:()=>S,gN:()=>T,n$:()=>x,v_:()=>v,wT:()=>u});var h=f(99938),m=f(80778),O=f(4481),d=f(50440),$=f(55470),M=f(87670),B=f(42081);class S extends d.NB{constructor(s,l=[]){super("unit"),this.path=s,this.classes=l,this.diagnostics=[]}report(s){this.diagnostics.push(s)}resolve(s){const l={[S.enclosing]:this};for(const b of this.classes)l[b.name]=b;return super.resolve(new $._(l,s))}lint(s){super.lint(new $._({[S.enclosing]:this},s))}toString(s){return this.classes.map(l=>l.toString(s)).join("\n\n")}}S.enclosing=Symbol("enclosing compilation unit"),S.parser="file",(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],S.prototype,"toString",null);class o extends d.NB{constructor(s,l){super(s),this.name=l,this._references=[]}docComment(){return this.doc?"/**\n"+this.doc.trim().replace(/^/gm," * ")+"\n */\n":""}documentation(){return this.doc}references(){return[this,...this._references]}}class u extends o{constructor(s="<anonymous>",l=[],b=[],P=[]){super("class",s),this.fields=l,this.constructors=b,this.methods=P}asType(){const s=new B.rF(this.name);return s._class=this,s.location=this.location,s}asCompletion(){return{label:this.name,kind:"class"}}toString(s){return d.$S`
    ${this.docComment()}\
    class ${this.name} {
      ${this.fields.map(l=>l.toString(s)).join("\n")}

      ${this.constructors.map(l=>l.toString(s)).join("\n\n")}

      ${this.methods.map(l=>l.toString(s)).join("\n\n")}
    }`}lookup(s,l,...b){for(const P of this.fields)if(P.name===s&&P instanceof l)return P;for(const P of this.methods)if(P.name===s&&P instanceof l&&P.overloads(b[0]))return P;for(const P of this.constructors)if(P instanceof l&&P.overloads(b[0]))return P}list(){return[...this.fields,...this.methods]}resolve(s){const l=new $._({[u.enclosing]:this},s);super.resolve(l);for(const b of this.fields)this.fields.some(P=>P!==b&&P.name===b.name)&&(0,O.Hj)(s,b.location,`duplicate field ${b.name}`);for(const b of this.methods)this.methods.some(P=>P!==b&&P.jsName===b.jsName)&&(0,O.Hj)(s,b.location,`duplicate method ${b.name} with mangled name ${b.jsName}`);return this}}u.enclosing=Symbol("enclosing class"),u.parser="class",(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],u.prototype,"toString",null);class _ extends o{constructor(s,l,b,P){super(s,l),this.parameters=b,this.body=P}resolve(s){this._thisClass||(this._thisClass=s.lookup(u.enclosing,u)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new C("this",this._thisClass.asType()),this._thisParameter.location=this.location);const l=new $._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,s);return super.resolve(l)}overloads(s){return s.length===this.parameters.length&&this.parameters.every((l,b)=>(0,B.BM)(l.type,s[b]))}}class v extends _{constructor(s=[],l=new M.gO){super("constructor","init",s,l)}toString(s){const l="js"===s?"constructor":"init",b=this.parameters.map(X=>X.toString(s)).join(", "),P=this.body.toString(s);return`${this.docComment()}${l}(${b}) ${P}`}documentation(){return this.parameters.length?d.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(s=>"- "+s.documentation()).join("\n")}
    `:this.doc}references(s){return"rename"===s?[]:super.references()}}v.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},v.parser="ctor",(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],v.prototype,"toString",null);class T extends o{constructor(s="<unknown>",l=B.NI,b){super("field",s),this.type=l,this.value=b}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(s){const l=this.value?" = "+this.value.toString(s):"";if("js"===s)return d.$S`
      _${this.name}${l};
      get ${this.name}() { return this._${this.name}; }
      set ${this.name}(value) { this._${this.name} = value; }`;const b=this.type.toString(s);return`${this.docComment()}var ${this.name}: ${b}${l}`}}T.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},T.parser="field",(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],T.prototype,"toString",null);class x extends _{constructor(s="<unknown>",l=[],b=B.NI,P=new M.gO){super("method",s,l,P),this.returnType=b}get jsName(){return this.name+this.parameters.map(s=>"_"+s.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(s=>s.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((s,l)=>`\${${l}:${s.name}}`).join(", ")})`}}documentation(){let s=this.doc||"";return this.parameters.length&&(s+="\n#### Parameters\n"+this.parameters.map(l=>"- "+l.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(s+="\n#### Returns\n`"+this.returnType.toString()+"`"),s}toString(s){const l="js"!==s?"func "+this.name:this.jsName,b=this.parameters.map(V=>V.toString(s)).join(", "),P="js"!==s?": "+this.returnType.toString(s):"",X=this.body.toString(s);return`${this.docComment()}${l}(${b})${P} ${X}`}}x.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},x.parser="method",(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],x.prototype,"toString",null);class i extends d.NB{constructor(s){super("class-completion"),this.name=s}toString(s){return this.name}resolve(s){return(0,O.Hk)(s,this.location,this.name,{extra:i.completions}),super.resolve(s)}}i.completions=[x,v,T].map(I=>I.completion);class p extends o{constructor(s,l,b){super(s,l),this.type=b}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(s){const l=this.type?": "+this.type.toString(s):"";return`${this.docComment()}${this.name}${l}`}}(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],p.prototype,"toString",null);let C=(()=>{class I extends p{constructor(l="<unknown>",b=B.NI){super("parameter",l,b),this.type=b}references(l){return"rename"===l&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(l){return"js"===l?this.name:super.toString(l)}}return I.parser="parameter",I})();class N extends p{constructor(s="<unknown>",l,b=m.iY){super("variable",s,l),this.value=b}documentation(){var s;return`\`var ${this.name}: ${null===(s=this.type)||void 0===s?void 0:s.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(s){if("js"===s)return`let ${this.name} = ${this.value.toString(s)}`;const l=this.type&&this.type.location?": "+this.type.toString(s):"";return`${this.docComment()}var ${this.name}${l} = ${this.value.toString(s)}`}resolve(s){const l=super.resolve(s);return l.type||(l.type=l.value.getType()),l}}N.parser="variable",(0,h.gn)([(0,d.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],N.prototype,"toString",null)},80778:(y,j,f)=>{f.d(j,{ZJ:()=>v,_C:()=>_,iY:()=>T,jR:()=>o,lX:()=>S,o6:()=>u,sW:()=>B,t$:()=>M});var h=f(79576),m=f(4481),O=f(50440),d=f(42081);class $ extends O.NB{constructor(i){super(`expr:${i}`)}getType(){throw new Error(`${this.constructor.name}.getType not implemented`)}}class M extends ${constructor(i){super("literal"),this.representation=i}toString(i){return this.before(i)+this.representation+this.after(i)}getType(){switch(this.representation.charAt(0)){case'"':return new d.MX("string");case"t":case"f":return new d.MX("boolean");default:return new d.MX("int")}}}class B extends ${constructor(i="<unknown>"){super("variable"),this.name=i}toString(i){return this.before(i)+this.name+this.after(i)}definition(){return this._variable}resolve(i){return(0,m.Hk)(i,this.location,this.name)||this._variable||this._variable||(this._variable=i.lookup(this.name,h.YN)||(0,m.Hj)(i,this.location,`variable ${this.name} not found`)),this}getType(){var i,p;return null!==(p=null===(i=this._variable)||void 0===i?void 0:i.type)&&void 0!==p?p:d.NI}}class S extends ${constructor(i="<unknown>",p=[]){super("functionCall"),this.name=i,this.args=p}toString(i){return`${this.before(i)}${this.name}(${this.args.map(p=>p.toString(i)).join(", ")})${this.after(i)}`}definition(i){return"rename"===i?this._class:this._constructor}resolve(i){if(this.args=this.args.map(p=>p.resolve(i)),!this._constructor){const p=i.lookup(this.name,h.wT);if(p){const C=this.args.map(I=>I.getType()),N=p.lookup("init",h.v_,C);N?(this._class=p,this._constructor=N):(0,m.Hj)(i,this.location,`constructor ${this.name}(${C.join(", ")}) not found`)}else(0,m.Hj)(i,this.location,`class or function ${this.name} not found`)}return this}getType(){var i,p;return null!==(p=null===(i=this._class)||void 0===i?void 0:i.asType())&&void 0!==p?p:d.NI}}class o extends ${constructor(i=T,p="<unknown>"){super("propertyAccess"),this.receiver=i,this.property=p}toString(i){return`${this.receiver.toString(i)}.${this.property}`}definition(){return this._field}resolve(i){this.receiver=this.receiver.resolve(i);const p=this.receiver.getType();return(0,m.Hk)(i,this.location,this.property,{lookup:p})||this._field||this._field||(this._field=p.lookup(this.property,h.gN)||(0,m.Hj)(i,this.location,`field ${this.property} not found on ${p}`)),this}getType(){var i;return(null===(i=this._field)||void 0===i?void 0:i.type)||d.NI}}class u extends ${constructor(i=T,p="<unknown>",C=[]){super("methodCall"),this.receiver=i,this.method=p,this.args=C}definition(){return this._method}toString(i){const p=this._method&&"js"===i?this._method.jsName:this.method;return`${this.receiver.toString(i)}.${p}(${this.args.map(C=>C.toString(i)).join(", ")})`}resolve(i){if(this.receiver=this.receiver.resolve(i),this.args=this.args.map(p=>p.resolve(i)),!this._method){const p=this.receiver.getType(),C=this.args.map(N=>N.getType());this._method||(this._method=p.lookup(this.method,h.n$,C)||(0,m.Hj)(i,this.location,`method ${this.method} not found on ${p}`))}return this}getType(){var i;return(null===(i=this._method)||void 0===i?void 0:i.returnType)||d.NI}}class _ extends ${constructor(i=T,p="<unknown>",C=T){super("binary"),this.lhs=i,this.operator=p,this.rhs=C}lint(i){"=="===this.operator&&("expr:literal"===this.lhs.kind&&"true"===this.lhs.representation&&(0,m.Hj)(i,this.range,"`== true` is redundant","warning",this.rhs),"expr:literal"===this.rhs.kind&&"true"===this.rhs.representation&&(0,m.Hj)(i,this.range,"`== true` is redundant","warning",this.lhs)),super.lint(i)}toString(i){return`${this.lhs.toString(i)} ${this.operator} ${this.rhs.toString(i)}`}getType(){switch(this.operator){case"+":const i=this.lhs.getType(),p=this.rhs.getType();return"type:primitive"===i.kind&&"string"===i.name?i:"type:primitive"===p.kind&&"string"===p.name?p:new d.MX("int");case"&&":case"||":case"==":case"!=":case"<":case"<=":case">":case">=":return new d.MX("boolean");case"-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"&":case"|":case"^":return new d.MX("int");default:return d.NI}}}class v extends ${constructor(i=T){super("parenthesized"),this.expression=i}toString(i){return`(${this.expression.toString(i)})`}getType(){return this.expression.getType()}}const T=new class extends ${constructor(){super("error")}getType(){return d.NI}}},11724:(y,j,f)=>{f.d(j,{K9:()=>d.K9,MX:()=>$.MX,NR:()=>O.NR,UX:()=>d.UX,WJ:()=>d.WJ,ZJ:()=>m.ZJ,_C:()=>m._C,_w:()=>h._w,d2:()=>h.d2,dm:()=>h.dm,eB:()=>h.eB,gN:()=>h.gN,gO:()=>d.gO,jR:()=>m.jR,lX:()=>m.lX,n$:()=>h.n$,o6:()=>m.o6,on:()=>d.on,rF:()=>$.rF,rX:()=>d.rX,sW:()=>m.sW,sj:()=>d.sj,t$:()=>m.t$,v_:()=>h.v_,wT:()=>h.wT});var h=f(79576),m=f(80778),O=f(50440),d=f(87670),$=f(42081)},50440:(y,j,f)=>{f.d(j,{$S:()=>M,NB:()=>m,NR:()=>d,fp:()=>B});class m{constructor(o){this.kind=o}definition(o){}documentation(){var o;return null===(o=this.definition())||void 0===o?void 0:o.documentation()}references(o){var u;return(null===(u=this.definition(o))||void 0===u?void 0:u.references(o))||[]}resolve(o){return function O(S,o){for(const[u,_]of Object.entries(S))if("location"!==u&&"kind"!==u&&!u.startsWith("_")&&_)if(Array.isArray(_))for(let v=0;v<_.length;v++)_[v]instanceof m&&(_[v]=o(_[v]));else _ instanceof m&&(S[u]=o(_))}(this,u=>u.resolve(o)),this}link(){for(const[o,u]of Object.entries(this))o.startsWith("_")&&u&&"_references"in u&&u._references.push(this);for(const o of $(this))o.link()}lint(o){for(const u of $(this))u.lint(o)}findByPosition(o){var u;if(!this.range||this.range.includes(o)){for(const _ of $(this)){const v=_.findByPosition(o);if(v)return[this,...v]}if(null!==(u=this.location)&&void 0!==u&&u.includes(o))return[this]}}findEnclosing(o){if(this.range&&this.range.encloses(o)){for(const u of $(this)){const _=u.findEnclosing(o);if(_)return _}return this}}before(o){return this.commentBefore&&"js"!==o?this.commentBefore.endsWith("\n")?this.commentBefore:this.commentBefore+" ":""}after(o){return this.commentAfter&&"js"!==o?" "+this.commentAfter:""}toString(o){return`<${this.kind}>`}}function*d(S){yield S;for(const o of $(S))yield*d(o)}function*$(S){for(const[o,u]of Object.entries(S))if("location"!==o&&"kind"!==o&&!o.startsWith("_")&&u)if(Array.isArray(u))for(let _=0;_<u.length;_++)u[_]instanceof m&&(yield u[_]);else u instanceof m&&(yield u)}function M(S,...o){if(!S[0].startsWith("\n"))throw new Error("must start with a newline");const u=S[0].match(/^\n([ \t]*)/)[1];return S.map((_,v)=>{var T;0===v&&(_=_.substring(1+u.length));const i=(_=_.replace(new RegExp("^"+u,"gm"),"")).substring(_.lastIndexOf("\n")+1).match(/^\s*/)[0];return _+(null!==(T=o[v])&&void 0!==T?T:"").toString().replace(/\n/g,`\n${i}`)}).join("")}function B(){return(S,o,u)=>{const _=u.value;return u.value=function(v){return this.before(v)+_.call(this,v)+this.after(v)},u}}},4481:(y,j,f)=>{f.d(j,{Hj:()=>M,Hk:()=>B,Ly:()=>m,R9:()=>d,e6:()=>O});var h=f(11724);class m{constructor(o,u){this.line=o,this.column=u}}class O{constructor(o,u){this.start=o,this.end=u}includes(o){return this.start.line<=o.line&&o.line<=this.end.line&&(this.start.line<o.line||this.start.column<=o.column)&&(o.line<this.end.line||o.column<=this.end.column)}distance(o){return o.line<this.start.line?o.line-this.start.line:o.line>this.end.line?o.line-this.end.line:o.column<this.start.column?(o.column-this.start.column)/1e3:o.column>this.end.column?(o.column-this.end.column)/1e3:0}encloses(o){return this.includes(o.start)&&this.includes(o.end)}}class d{constructor(o,u,_,v="error",T,x){if(this.path=o,this.location=u,this.message=_,this.severity=v,this.expected=T,this.replacement=x,!u)throw new Error("location is required")}}function M(S,o,u,_="error",v){const T=S.lookup(h.eB.enclosing,h.eB),x=Array.isArray(v)?v:void 0,i=Array.isArray(v)?void 0:v,p=new d(void 0,o,u,_,x,i);T?T.report(p):function $(S){const{path:o,location:{start:{line:u,column:_}},message:v,severity:T}=S;switch(T){case"error":console.error(`${o}:${u}:${_}: error: ${v}`);break;case"warning":console.warn(`${o}:${u}:${_}: warning: ${v}`);break;case"note":console.info(`${o}:${u}:${_}: note: ${v}`)}if(S.expected)for(let x of S.expected)console.log(`- [${x.kind}] ${x.label} ${x.signature||""} - ${x.description||""}`)}(p)}function B(S,o,u,{lookup:_,kind:v,extra:T}={}){if(!u.includes("\xa7"))return!1;const x=u.slice(0,-1),i=(_||S).list().filter(C=>"name"in C).filter(C=>!v||C.kind===v).map(C=>"asCompletion"in C?C.asCompletion():{kind:C.kind,label:C.name});return M(S,o,"input '\xa7' expecting","error",(T?[...i,...T]:i).filter(C=>C.label.startsWith(x))),!0}},99938:(y,j,f)=>{function $(t,e,r,n){var g,c=arguments.length,a=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var k=t.length-1;k>=0;k--)(g=t[k])&&(a=(c<3?g(a):c>3?g(e,r,a):g(e,r))||a);return c>3&&a&&Object.defineProperty(e,r,a),a}function _(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}f.d(j,{gn:()=>$,w6:()=>_}),"function"==typeof SuppressedError&&SuppressedError}},G={};function E(y){var j=G[y];if(void 0!==j)return j.exports;var f=G[y]={exports:{}};return J[y].call(f.exports,f,f.exports,E),f.exports}E.m=J,E.x=()=>{var y=E.O(void 0,[642],()=>E(10679));return E.O(y)},y=[],E.O=(j,f,h,m)=>{if(!f){var d=1/0;for(O=0;O<y.length;O++){for(var[f,h,m]=y[O],$=!0,M=0;M<f.length;M++)(!1&m||d>=m)&&Object.keys(E.O).every(v=>E.O[v](f[M]))?f.splice(M--,1):($=!1,m<d&&(d=m));if($){y.splice(O--,1);var B=h();void 0!==B&&(j=B)}}return j}m=m||0;for(var O=y.length;O>0&&y[O-1][2]>m;O--)y[O]=y[O-1];y[O]=[f,h,m]},E.d=(y,j)=>{for(var f in j)E.o(j,f)&&!E.o(y,f)&&Object.defineProperty(y,f,{enumerable:!0,get:j[f]})},E.f={},E.e=y=>Promise.all(Object.keys(E.f).reduce((j,f)=>(E.f[f](y,j),j),[])),E.u=y=>y+".fdc740bf0b86c27e.js",E.miniCssF=y=>{},E.o=(y,j)=>Object.prototype.hasOwnProperty.call(y,j),(()=>{var y;E.tt=()=>(void 0===y&&(y={createScriptURL:j=>j},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(y=trustedTypes.createPolicy("angular#bundler",y))),y)})(),E.tu=y=>E.tt().createScriptURL(y),E.p="",(()=>{var y={679:1};E.f.i=(m,O)=>{y[m]||importScripts(E.tu(E.p+E.u(m)))};var f=self.webpackChunkweb=self.webpackChunkweb||[],h=f.push.bind(f);f.push=m=>{var[O,d,$]=m;for(var M in d)E.o(d,M)&&(E.m[M]=d[M]);for($&&$(E);O.length;)y[O.pop()]=1;h(m)}})(),(()=>{var y=E.x;E.x=()=>E.e(642).then(y)})(),E.x()})();