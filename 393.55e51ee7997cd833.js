"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[393],{92393:(mt,he,n)=>{n.r(he),n.d(he,{default:()=>Ht}),n(87708);var R=n(58054),d=n(55885),w=n(76972),pe=n(84776),Y=n(38707),x=n(28759),a=n(12829),C=n(70473),ee=n(84761),b=n(81026),G=n(13686),te=n(56160),S=n(13683),Ee=n(61604),J=n(93358),V=n(16003),$=n(84612);function Z(s,e){return C.SF.compare(s.resource,e.resource)}function Me(s,e){const[t]=s.markers,[r]=e.markers;let i=0;return t&&r&&(i=b.ZL.compare(t.marker.severity,r.marker.severity)),0===i&&(i=s.path.localeCompare(e.path)||s.name.localeCompare(e.name)),i}class f{constructor(e,t){this.id=e,this.resource=t,this._markersMap=new te.Y9,this._total=0,this.path=this.resource.fsPath,this.name=(0,C.EZ)(this.resource)}get markers(){return this._cachedMarkers||(this._cachedMarkers=(0,G.xH)([...this._markersMap.values()]).sort(f._compareMarkers)),this._cachedMarkers}has(e){return this._markersMap.has(e)}set(e,t){this.delete(e),(0,G.Of)(t)&&(this._markersMap.set(e,t),this._total+=t.length,this._cachedMarkers=void 0)}delete(e){const t=this._markersMap.get(e);t&&(this._total-=t.length,this._cachedMarkers=void 0,this._markersMap.delete(e))}get total(){return this._total}static _compareMarkers(e,t){return b.ZL.compare(e.marker.severity,t.marker.severity)||C.SF.compare(e.resource,t.resource)||ee.e.compareRangesUsingStarts(e.marker,t.marker)}}class m{get resource(){return this.marker.resource}get range(){return this.marker}get lines(){return this._lines||(this._lines=(0,V.uq)(this.marker.message)),this._lines}constructor(e,t,r=[]){this.id=e,this.marker=t,this.relatedInformation=r}toString(){return JSON.stringify({...this.marker,resource:this.marker.resource.path,relatedInformation:this.relatedInformation.length?this.relatedInformation.map(e=>({...e.raw,resource:e.raw.resource.path})):void 0},null,"\t")}}class F extends m{constructor(e,t,r,i,o,h){super(e.id,e.marker,e.relatedInformation),this.sourceMatches=t,this.codeMatches=r,this.messageMatches=i,this.fileMatches=o,this.ownerMatches=h}}class D{constructor(e,t,r){this.id=e,this.marker=t,this.raw=r}}class B{get resourceMarkers(){return this.cachedSortedResources||(this.cachedSortedResources=[...this.resourcesByUri.values()].sort(Me)),this.cachedSortedResources}constructor(){this.cachedSortedResources=void 0,this._onDidChange=new S.Q5,this.onDidChange=this._onDidChange.event,this._total=0,this.resourcesByUri=new Map}reset(){const e=new Set;for(const t of this.resourcesByUri.values())e.add(t);this.resourcesByUri.clear(),this._total=0,this._onDidChange.fire({removed:e,added:new Set,updated:new Set})}get total(){return this._total}getResourceMarkers(e){return(0,J.M2)(this.resourcesByUri.get(C.SF.getComparisonKey(e,!0)))}setResourceMarkers(e){const t={added:new Set,removed:new Set,updated:new Set};for(const[r,i]of e){if($.g.has(r.scheme))continue;const o=C.SF.getComparisonKey(r,!0);let h=this.resourcesByUri.get(o);if((0,G.Of)(i)){if(h)t.updated.add(h);else{const M=this.id(r.toString());h=new f(M,r.with({fragment:null})),this.resourcesByUri.set(o,h),t.added.add(h)}const u=new Map,E=i.map(M=>{const A=b.H0.makeKey(M),_=u.get(A)||0;u.set(A,_+1);const T=this.id(h.id,A,_,M.resource.toString());let p;return M.relatedInformation&&(p=M.relatedInformation.map((P,De)=>new D(this.id(T,P.resource.toString(),P.startLineNumber,P.startColumn,P.endLineNumber,P.endColumn,De),M,P))),new m(T,M,p)});this._total-=h.total,h.set(r,E),this._total+=h.total}else h&&(this._total-=h.total,h.delete(r),this._total+=h.total,0===h.total?(this.resourcesByUri.delete(o),t.removed.add(h)):t.updated.add(h))}this.cachedSortedResources=void 0,(t.added.size||t.removed.size||t.updated.size)&&this._onDidChange.fire(t)}id(...e){const t=new Ee.Px;for(const r of e)t.hash(r);return`${t.value}`}dispose(){this._onDidChange.dispose(),this.resourcesByUri.clear()}}var j=n(96970);(0,j.Z)('.markers-panel .markers-panel-container{height:100%}.markers-panel .hide{display:none}.markers-panel .markers-panel-container .message-box-container{line-height:22px;padding-left:20px}.markers-panel .markers-panel-container .message-box-container .messageAction{cursor:pointer;margin-left:4px;text-decoration:underline}.markers-panel .markers-panel-container .hidden{display:none}.markers-panel .markers-panel-container .codicon.codicon-light-bulb{color:var(--vscode-editorLightBulb-foreground)}.markers-panel .markers-panel-container .codicon.codicon-lightbulb-autofix{color:var(--vscode-editorLightBulbAutoFix-foreground)}.markers-panel .markers-panel-container .tree-container.hidden{display:none;visibility:hidden}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents{display:flex;line-height:22px;padding-right:10px}.monaco-workbench.hc-black .markers-panel .markers-panel-container .tree-container .monaco-tl-contents,.monaco-workbench.hc-light .markers-panel .markers-panel-container .tree-container .monaco-tl-contents{line-height:20px}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-stats{display:inline-block;margin-left:10px}.markers-panel:not(.wide) .markers-panel-container .tree-container .monaco-tl-contents .resource-label-container{flex:1}.markers-panel.wide .markers-panel-container .tree-container .monaco-tl-contents .count-badge-wrapper{margin-left:10px}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container{flex:1;overflow:hidden}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container>.marker-message-line{overflow:hidden}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container>.marker-message-line>.marker-message{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-message-details-container>.marker-message-line.details-container{display:flex}.markers-panel .markers-panel-container .tree-container .monaco-list:focus .monaco-list-row.focused .monaco-tl-contents .details-container a.monaco-link{color:inherit}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container a.monaco-link .monaco-highlighted-label{text-decoration:underline;text-underline-position:under}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-code:before{content:"("}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-code:after{content:")"}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container .marker-line,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container .marker-source,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .details-container .multiline-actions{margin-left:6px}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-code,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-line,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .marker-source,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .related-info-resource,.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .related-info-resource-separator{opacity:.7}.markers-panel .markers-panel-container .tree-container .monaco-tl-contents .highlight{font-weight:700}.markers-panel .monaco-tl-contents .marker-icon{align-items:center;display:flex;height:22px;justify-content:center;margin:0 6px}.markers-panel .monaco-list-row.focused .monaco-tl-contents>.marker-icon.quickFix,.markers-panel .monaco-list-row.selected .monaco-tl-contents>.marker-icon.quickFix,.markers-panel .monaco-list-row:hover .monaco-tl-contents>.marker-icon.quickFix,.markers-panel .monaco-tl-contents .actions .monaco-action-bar{display:none}.markers-panel .monaco-list-row.focused .monaco-tl-contents .actions .monaco-action-bar,.markers-panel .monaco-list-row.selected .monaco-tl-contents .actions .monaco-action-bar,.markers-panel .monaco-list-row:hover .monaco-tl-contents .actions .monaco-action-bar{display:block}.markers-panel .monaco-tl-contents .actions,.markers-panel .monaco-tl-contents .multiline-actions .monaco-action-bar{height:22px}.markers-panel .monaco-tl-contents .actions .action-label,.markers-panel .monaco-tl-contents .multiline-actions .monaco-action-bar .action-label{padding:2px}.markers-panel .monaco-tl-contents .actions .action-item{margin:0 4px}.markers-panel .monaco-tl-contents .actions .action-item.disabled,.markers-panel .monaco-tl-contents .multiline-actions .action-item.disabled{display:none}.markers-panel .markers-table-container .monaco-table .monaco-table-th{align-items:center;display:flex;font-weight:600;padding-left:10px}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td{align-items:center;display:flex;padding-left:10px}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td .highlight{font-weight:700}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.file,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.message,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.owner{overflow:hidden;text-overflow:ellipsis}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.severity{display:flex}.markers-panel .markers-table-container .monaco-table .monaco-list-row.focused .monaco-table-tr>.monaco-table-td.quickFix>.severity,.markers-panel .markers-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr>.monaco-table-td.quickFix>.severity,.markers-panel .markers-table-container .monaco-table .monaco-list-row:hover .monaco-table-tr>.monaco-table-td.quickFix>.severity{display:none}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.actions{margin-left:-3px}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.actions>.monaco-action-bar .action-item{display:none}.markers-panel .markers-table-container .monaco-table .monaco-list-row.focused .monaco-table-tr>.monaco-table-td.quickFix>.actions>.monaco-action-bar .action-item,.markers-panel .markers-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr>.monaco-table-td.quickFix>.actions>.monaco-action-bar .action-item,.markers-panel .markers-table-container .monaco-table .monaco-list-row:hover .monaco-table-tr>.monaco-table-td.quickFix>.actions>.monaco-action-bar .action-item{display:flex}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.code-label:before,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.monaco-link:before{content:"("}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.code-label:after,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.monaco-link:after{content:")"}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.code-label,.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code>.monaco-link{display:none}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code.code-label>.code-label{display:inline}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.code.code-link>.monaco-link{display:inline;text-decoration:underline}.markers-panel .markers-table-container .monaco-table .monaco-list-row .monaco-table-tr>.monaco-table-td>.file>.file-position{margin-left:6px;opacity:.7}',{});var c=n(6418),H=n(32243),re=n(17324),ie=n(49311),Q=n(82344),Be=n(54922);class g{}g.MARKERS_PANEL_TOGGLE_LABEL=a.NC("problems.view.toggle.label","Toggle Problems (Errors, Warnings, Infos)"),g.MARKERS_PANEL_SHOW_LABEL=a.NC("problems.view.focus.label","Focus Problems (Errors, Warnings, Infos)"),g.PROBLEMS_PANEL_CONFIGURATION_TITLE=a.NC("problems.panel.configuration.title","Problems View"),g.PROBLEMS_PANEL_CONFIGURATION_AUTO_REVEAL=a.NC("problems.panel.configuration.autoreveal","Controls whether Problems view should automatically reveal files when opening them."),g.PROBLEMS_PANEL_CONFIGURATION_VIEW_MODE=a.NC("problems.panel.configuration.viewMode","Controls the default view mode of the Problems view."),g.PROBLEMS_PANEL_CONFIGURATION_SHOW_CURRENT_STATUS=a.NC("problems.panel.configuration.showCurrentInStatus","When enabled shows the current problem in the status bar."),g.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER=a.NC("problems.panel.configuration.compareOrder","Controls the order in which problems are navigated."),g.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_SEVERITY=a.NC("problems.panel.configuration.compareOrder.severity","Navigate problems ordered by severity"),g.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_POSITION=a.NC("problems.panel.configuration.compareOrder.position","Navigate problems ordered by position"),g.MARKERS_PANEL_TITLE_PROBLEMS=a.NC("markers.panel.title.problems","Problems"),g.MARKERS_PANEL_NO_PROBLEMS_BUILT=a.NC("markers.panel.no.problems.build","No problems have been detected in the workspace."),g.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT=a.NC("markers.panel.no.problems.activeFile.build","No problems have been detected in the current file."),g.MARKERS_PANEL_NO_PROBLEMS_FILTERS=a.NC("markers.panel.no.problems.filters","No results found with provided filter criteria."),g.MARKERS_PANEL_ACTION_TOOLTIP_MORE_FILTERS=a.NC("markers.panel.action.moreFilters","More Filters..."),g.MARKERS_PANEL_FILTER_LABEL_SHOW_ERRORS=a.NC("markers.panel.filter.showErrors","Show Errors"),g.MARKERS_PANEL_FILTER_LABEL_SHOW_WARNINGS=a.NC("markers.panel.filter.showWarnings","Show Warnings"),g.MARKERS_PANEL_FILTER_LABEL_SHOW_INFOS=a.NC("markers.panel.filter.showInfos","Show Infos"),g.MARKERS_PANEL_FILTER_LABEL_EXCLUDED_FILES=a.NC("markers.panel.filter.useFilesExclude","Hide Excluded Files"),g.MARKERS_PANEL_FILTER_LABEL_ACTIVE_FILE=a.NC("markers.panel.filter.activeFile","Show Active File Only"),g.MARKERS_PANEL_ACTION_TOOLTIP_FILTER=a.NC("markers.panel.action.filter","Filter Problems"),g.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX=a.NC("markers.panel.action.quickfix","Show fixes"),g.MARKERS_PANEL_FILTER_ARIA_LABEL=a.NC("markers.panel.filter.ariaLabel","Filter Problems"),g.MARKERS_PANEL_FILTER_PLACEHOLDER=a.NC("markers.panel.filter.placeholder","Filter (e.g. text, **/*.ts, !**/node_modules/**)"),g.MARKERS_PANEL_FILTER_ERRORS=a.NC("markers.panel.filter.errors","errors"),g.MARKERS_PANEL_FILTER_WARNINGS=a.NC("markers.panel.filter.warnings","warnings"),g.MARKERS_PANEL_FILTER_INFOS=a.NC("markers.panel.filter.infos","infos"),g.MARKERS_PANEL_SINGLE_ERROR_LABEL=a.NC("markers.panel.single.error.label","1 Error"),g.MARKERS_PANEL_MULTIPLE_ERRORS_LABEL=s=>a.NC("markers.panel.multiple.errors.label","{0} Errors",""+s),g.MARKERS_PANEL_SINGLE_WARNING_LABEL=a.NC("markers.panel.single.warning.label","1 Warning"),g.MARKERS_PANEL_MULTIPLE_WARNINGS_LABEL=s=>a.NC("markers.panel.multiple.warnings.label","{0} Warnings",""+s),g.MARKERS_PANEL_SINGLE_INFO_LABEL=a.NC("markers.panel.single.info.label","1 Info"),g.MARKERS_PANEL_MULTIPLE_INFOS_LABEL=s=>a.NC("markers.panel.multiple.infos.label","{0} Infos",""+s),g.MARKERS_PANEL_SINGLE_UNKNOWN_LABEL=a.NC("markers.panel.single.unknown.label","1 Unknown"),g.MARKERS_PANEL_MULTIPLE_UNKNOWNS_LABEL=s=>a.NC("markers.panel.multiple.unknowns.label","{0} Unknowns",""+s),g.MARKERS_PANEL_AT_LINE_COL_NUMBER=(s,e)=>a.NC("markers.panel.at.ln.col.number","[Ln {0}, Col {1}]",""+s,""+e),g.MARKERS_TREE_ARIA_LABEL_RESOURCE=(s,e,t)=>a.NC("problems.tree.aria.label.resource","{0} problems in file {1} of folder {2}",s,e,t),g.MARKERS_TREE_ARIA_LABEL_MARKER=s=>{const e=s.relatedInformation.length?a.NC("problems.tree.aria.label.marker.relatedInformation"," This problem has references to {0} locations.",s.relatedInformation.length):"";switch(s.marker.severity){case b.ZL.Error:return s.marker.source?a.NC("problems.tree.aria.label.error.marker","Error: {0} at line {1} and character {2}.{3} generated by {4}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e,s.marker.source):a.NC("problems.tree.aria.label.error.marker.nosource","Error: {0} at line {1} and character {2}.{3}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e);case b.ZL.Warning:return s.marker.source?a.NC("problems.tree.aria.label.warning.marker","Warning: {0} at line {1} and character {2}.{3} generated by {4}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e,s.marker.source):a.NC("problems.tree.aria.label.warning.marker.nosource","Warning: {0} at line {1} and character {2}.{3}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e,e);case b.ZL.Info:return s.marker.source?a.NC("problems.tree.aria.label.info.marker","Info: {0} at line {1} and character {2}.{3} generated by {4}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e,s.marker.source):a.NC("problems.tree.aria.label.info.marker.nosource","Info: {0} at line {1} and character {2}.{3}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e);default:return s.marker.source?a.NC("problems.tree.aria.label.marker","Problem: {0} at line {1} and character {2}.{3} generated by {4}",s.marker.source,s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e,s.marker.source):a.NC("problems.tree.aria.label.marker.nosource","Problem: {0} at line {1} and character {2}.{3}",s.marker.message,s.marker.startLineNumber,s.marker.startColumn,e)}},g.MARKERS_TREE_ARIA_LABEL_RELATED_INFORMATION=s=>a.NC("problems.tree.aria.label.relatedinfo.message","{0} at line {1} and character {2} in {3}",s.message,s.startLineNumber,s.startColumn,(0,C.EZ)(s.resource)),g.SHOW_ERRORS_WARNINGS_ACTION_LABEL=a.NC("errors.warnings.show.label","Show Errors and Warnings");var v=g,I=n(12997),X=n(62981),ke=n(52786),ve=n(94485),l=n(97868);(0,j.Z)(".markers-panel-action-filter>.markers-panel-filter-controls>.monaco-action-bar .action-label.markers-filters.checked{background-color:var(--vscode-inputOption-activeBackground);border-color:var(--vscode-inputOption-activeBorder);color:var(--vscode-inputOption-activeForeground)}",{});class ft extends I.JT{constructor(e,t){super(),this.contextKeyService=t,this._onDidChange=this._register(new S.Q5),this.onDidChange=this._onDidChange.event,this._excludedFiles=l.G.ShowExcludedFilesFilterContextKey.bindTo(this.contextKeyService),this._activeFile=l.G.ShowActiveFileFilterContextKey.bindTo(this.contextKeyService),this._showWarnings=l.G.ShowWarningsFilterContextKey.bindTo(this.contextKeyService),this._showErrors=l.G.ShowErrorsFilterContextKey.bindTo(this.contextKeyService),this._showInfos=l.G.ShowInfoFilterContextKey.bindTo(this.contextKeyService),this._showErrors.set(e.showErrors),this._showWarnings.set(e.showWarnings),this._showInfos.set(e.showInfos),this._excludedFiles.set(e.excludedFiles),this._activeFile.set(e.activeFile),this.filterHistory=e.filterHistory}get excludedFiles(){return!!this._excludedFiles.get()}set excludedFiles(e){this._excludedFiles.get()!==e&&(this._excludedFiles.set(e),this._onDidChange.fire({excludedFiles:!0}))}get activeFile(){return!!this._activeFile.get()}set activeFile(e){this._activeFile.get()!==e&&(this._activeFile.set(e),this._onDidChange.fire({activeFile:!0}))}get showWarnings(){return!!this._showWarnings.get()}set showWarnings(e){this._showWarnings.get()!==e&&(this._showWarnings.set(e),this._onDidChange.fire({showWarnings:!0}))}get showErrors(){return!!this._showErrors.get()}set showErrors(e){this._showErrors.get()!==e&&(this._showErrors.set(e),this._onDidChange.fire({showErrors:!0}))}get showInfos(){return!!this._showInfos.get()}set showInfos(e){this._showInfos.get()!==e&&(this._showInfos.set(e),this._onDidChange.fire({showInfos:!0}))}}class O extends H.aU{get quickFixes(){return this._quickFixes}set quickFixes(e){this._quickFixes=e,this.enabled=this._quickFixes.length>0}autoFixable(e){this.class=e?O.AUTO_FIX_CLASS:O.CLASS}constructor(e){super(O.ID,v.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX,O.CLASS,!1),this.marker=e,this._onShowQuickFixes=this._register(new S.Q5),this.onShowQuickFixes=this._onShowQuickFixes.event,this._quickFixes=[]}run(){return this._onShowQuickFixes.fire(),Promise.resolve()}}O.ID="workbench.actions.problems.quickfix",O.CLASS="markers-panel-action-quickfix "+ke.kS.asClassName(X.lA.lightBulb),O.AUTO_FIX_CLASS=O.CLASS+" autofixable";let ue=class extends ve.gU{constructor(e,t){super(null,e,{icon:!0,label:!1}),this.contextMenuService=t}onClick(e){c.zB.stop(e,!0),this.showQuickFixes()}showQuickFixes(){if(!this.element||!this.isEnabled())return;const e=c.i(this.element),t=this.action.quickFixes;t.length&&this.contextMenuService.showContextMenu({getAnchor:()=>({x:e.left+10,y:e.top+e.height+4}),getActions:()=>t})}};ue=(0,d.gn)([(0,d.fM)(1,Be.i)],ue);var He=n(31719),pt=n(70661),Ue=n(32064),Et=n(58571),me=n(76606),be=n(45414),Ge=n(53083),se=n(30030),Mt=n(6989);class $e{constructor(e,t,r){this.globalExpression=(0,se.Qc)(e),this.expressionsByRoot=Mt.Id.forUris(i=>r.extUri.ignorePathCasing(i));for(const i of t)this.expressionsByRoot.set(i.root,{root:i.root,expression:(0,se.Qc)(i.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e);if(t){const r=(0,C.lX)(t.root,e);if(r&&t.expression(r))return!0}return!!this.globalExpression(e.path)}}let N=(()=>{class s{static EMPTY(t){return new s("",[],!1,!1,!1,t)}constructor(t,r,i,o,h,u){this.filter=t,this.showWarnings=!1,this.showErrors=!1,this.showInfos=!1,t=t.trim(),this.showWarnings=i,this.showErrors=o,this.showInfos=h;const E=Array.isArray(r)?r:[],M=Array.isArray(r)?(0,se.jy)():r;for(const{expression:T}of E)for(const p of Object.keys(T))p.endsWith("/**")||(T[`${V.oL(p,"/")}/**`]=T[p]);const A=t.startsWith("!");this.textFilter={text:(A?V.j3(t,"!"):t).trim(),negate:A};const _=(0,se.jy)();if(t){const T=(0,se.Eu)(t,",").map(p=>p.trim()).filter(p=>!!p.length);for(const p of T)if(p.startsWith("!")){const P=V.j3(p,"!");P&&this.setPattern(M,P)}else this.setPattern(_,p)}this.excludesMatcher=new $e(M,E,u),this.includesMatcher=new $e(_,[],u)}setPattern(t,r){"."===r[0]&&(r="*"+r),t[`**/${r}/**`]=!0,t[`**/${r}`]=!0}}return s._filter=Ge.XU,s._messageFilter=Ge.Oh,s})();var kt=n(94927),vt=n(39108),bt=n(29175),Ze=n(48601),Rt=n(84249),y=n(57688),Re=n(9110),oe=n(82927),we=n(26056),wt=n(90290),Ae=n(63342),je=n(15261),Qe=n(67173),z=n(12292),At=n(17088),It=n(7003),Ie=n(37202),Xe=n(76688),St=n(42217),Ct=n(470),Ye=n(69771);let Se=class{constructor(e){this.labelService=e}getWidgetAriaLabel(){return(0,a.NC)("problemsView","Problems View")}getAriaLabel(e){if(e instanceof f){const t=this.labelService.getUriLabel(e.resource,{relative:!0})||e.resource.fsPath;return v.MARKERS_TREE_ARIA_LABEL_RESOURCE(e.markers.length,e.name,Ze.XX(t))}return e instanceof m||e instanceof F?v.MARKERS_TREE_ARIA_LABEL_MARKER(e):e instanceof D?v.MARKERS_TREE_ARIA_LABEL_RELATED_INFORMATION(e.raw):null}};Se=(0,d.gn)([(0,d.fM)(0,oe.e)],Se);let Je=(()=>{class s{constructor(t){this.markersViewState=t}getHeight(t){if(t instanceof m){const r=this.markersViewState.getViewModel(t);return(!r||r.multiline?t.lines.length:1)*s.LINE_HEIGHT}return s.LINE_HEIGHT}getTemplateId(t){return t instanceof f?"rm":t instanceof m?"m":"ri"}}return s.LINE_HEIGHT=22,s})(),Ce=class{constructor(e,t,r,i){this.labels=e,this.labelService=r,this.fileService=i,this.renderedNodes=new Map,this.disposables=new I.SL,this.templateId="rm",t(this.onDidChangeRenderNodeCount,this,this.disposables)}renderTemplate(e){const t=c.R3(e,c.$(".resource-label-container")),r=this.labels.create(t,{supportHighlights:!0}),i=c.R3(e,c.$(".count-badge-wrapper"));return{count:new Rt.Z(i,{},Ct.ku),resourceLabel:r}}renderElement(e,t,r){const i=e.element,o=e.filterData&&e.filterData.uriMatches||[];this.fileService.hasProvider(i.resource)||i.resource.scheme===bt.lg.untitled?r.resourceLabel.setFile(i.resource,{matches:o}):r.resourceLabel.setResource({name:i.name,description:this.labelService.getUriLabel((0,C.XX)(i.resource),{relative:!0}),resource:i.resource},{matches:o}),this.updateCount(e,r),this.renderedNodes.set(e,r)}disposeElement(e){this.renderedNodes.delete(e)}disposeTemplate(e){e.resourceLabel.dispose()}onDidChangeRenderNodeCount(e){const t=this.renderedNodes.get(e);t&&this.updateCount(e,t)}updateCount(e,t){t.count.setCount(e.children.reduce((r,i)=>r+(i.visible?1:0),0))}dispose(){this.disposables.dispose()}};Ce=(0,d.gn)([(0,d.fM)(2,oe.e),(0,d.fM)(3,At.sn)],Ce);let Le=class{constructor(e,t,r){this.markersViewState=e,this.instantiationService=t,this.openerService=r,this.templateId="m"}renderTemplate(e){const t=Object.create(null);return t.markerWidget=new _t(e,this.markersViewState,this.openerService,this.instantiationService),t}renderElement(e,t,r){r.markerWidget.render(e.element,e.filterData)}disposeTemplate(e){e.markerWidget.dispose()}};Le=(0,d.gn)([(0,d.fM)(1,Q.TG),(0,d.fM)(2,z.v4)],Le);const ze=(0,Ie.q5)("markers-view-multi-line-expanded",X.lA.chevronUp,(0,a.NC)("expandedIcon","Icon indicating that multiple lines are shown in the markers view.")),Lt=(0,Ie.q5)("markers-view-multi-line-collapsed",X.lA.chevronDown,(0,a.NC)("collapsedIcon","Icon indicating that multiple lines are collapsed in the markers view.")),qe="problems.action.toggleMultiline";class xt extends ve.gU{render(e){super.render(e),this.updateExpandedAttribute()}updateClass(){super.updateClass(),this.updateExpandedAttribute()}updateExpandedAttribute(){this.element?.setAttribute("aria-expanded",`${this._action.class===ke.kS.asClassName(ze)}`)}}class _t extends I.JT{constructor(e,t,r,i){super(),this.parent=e,this.markersViewModel=t,this._openerService=r,this.disposables=this._register(new I.SL),this.actionBar=this._register(new Re.o(c.R3(e,c.$(".actions")),{actionViewItemProvider:o=>o.id===O.ID?i.createInstance(ue,o):void 0})),this.iconContainer=c.R3(e,c.$("")),this.icon=c.R3(this.iconContainer,c.$("")),this.messageAndDetailsContainer=c.R3(e,c.$(".marker-message-details-container"))}render(e,t){this.actionBar.clear(),this.disposables.clear(),c.PO(this.messageAndDetailsContainer),this.iconContainer.className=`marker-icon ${Ye.Z.toString(b.ZL.toSeverity(e.marker.severity))}`,this.icon.className=`codicon ${Qe.j.className(b.ZL.toSeverity(e.marker.severity))}`,this.renderQuickfixActionbar(e),this.renderMessageAndDetails(e,t),this.disposables.add(c.nm(this.parent,c.tw.MOUSE_OVER,()=>this.markersViewModel.onMarkerMouseHover(e))),this.disposables.add(c.nm(this.parent,c.tw.MOUSE_LEAVE,()=>this.markersViewModel.onMarkerMouseLeave(e)))}renderQuickfixActionbar(e){const t=this.markersViewModel.getViewModel(e);if(t){const r=t.quickFixAction;this.actionBar.push([r],{icon:!0,label:!1}),this.iconContainer.classList.toggle("quickFix",r.enabled),r.onDidChange(({enabled:i})=>{(0,J.Jp)(i)||this.iconContainer.classList.toggle("quickFix",i)},this,this.disposables),r.onShowQuickFixes(()=>{const i=this.actionBar.viewItems[0];i&&i.showQuickFixes()},this,this.disposables)}}renderMultilineActionbar(e,t){const r=this.disposables.add(new Re.o(c.R3(t,c.$(".multiline-actions")),{actionViewItemProvider:u=>{if(u.id===qe)return new xt(void 0,u,{icon:!0})}}));this.disposables.add((0,I.OF)(()=>r.dispose()));const i=this.markersViewModel.getViewModel(e),o=i&&i.multiline,h=new H.aU(qe);h.enabled=!!i&&e.lines.length>1,h.tooltip=o?(0,a.NC)("single line","Show message in single line"):(0,a.NC)("multi line","Show message in multiple lines"),h.class=ke.kS.asClassName(o?ze:Lt),h.run=()=>(i&&(i.multiline=!i.multiline),Promise.resolve()),r.push([h],{icon:!0,label:!1})}renderMessageAndDetails(e,t){const{marker:r,lines:i}=e,o=this.markersViewModel.getViewModel(e),h=!o||o.multiline,u=t&&t.lineMatches||[];this.messageAndDetailsContainer.title=e.marker.message;const E=[];for(let M=0;M<(h?i.length:1);M++){const A=c.R3(this.messageAndDetailsContainer,c.$(".marker-message-line")),_=c.R3(A,c.$(".marker-message"));new y.q(_).set(i[M].length>1e3?`${i[M].substring(0,1e3)}...`:i[M],u[M]),""===i[M]&&(A.style.height=`${Je.LINE_HEIGHT}px`),E.push(A)}this.renderDetails(r,t,E[0]),this.renderMultilineActionbar(e,E[0])}renderDetails(e,t,r){if(r.classList.add("details-container"),(e.source||e.code)&&(new y.q(c.R3(r,c.$(".marker-source"))).set(e.source,t&&t.sourceMatches||[]),e.code))if("string"==typeof e.code)new y.q(c.R3(r,c.$(".marker-code"))).set(e.code,t&&t.codeMatches||[]);else{const u=c.$(".marker-code"),E=new y.q(u),M=e.code.target.toString(!0);this.disposables.add(new Xe.r(r,{href:M,label:u,title:M},void 0,this._openerService)),E.set(e.code.value,t&&t.codeMatches||[])}c.R3(r,c.$("span.marker-line")).textContent=v.MARKERS_PANEL_AT_LINE_COL_NUMBER(e.startLineNumber,e.startColumn)}}let xe=class{constructor(e){this.labelService=e,this.templateId="ri"}renderTemplate(e){const t=Object.create(null);c.R3(e,c.$(".actions")),c.R3(e,c.$(".icon")),t.resourceLabel=new y.q(c.R3(e,c.$(".related-info-resource"))),t.lnCol=c.R3(e,c.$("span.marker-line"));const r=c.R3(e,c.$("span.related-info-resource-separator"));return r.textContent=":",r.style.paddingRight="4px",t.description=new y.q(c.R3(e,c.$(".marker-description"))),t}renderElement(e,t,r){const i=e.element.raw,o=e.filterData&&e.filterData.uriMatches||[],h=e.filterData&&e.filterData.messageMatches||[];r.resourceLabel.set((0,C.EZ)(i.resource),o),r.resourceLabel.element.title=this.labelService.getUriLabel(i.resource,{relative:!0}),r.lnCol.textContent=v.MARKERS_PANEL_AT_LINE_COL_NUMBER(i.startLineNumber,i.startColumn),r.description.set(i.message,h),r.description.element.title=i.message}disposeTemplate(e){}};xe=(0,d.gn)([(0,d.fM)(0,oe.e)],xe);class Ft{constructor(e){this.options=e}filter(e,t){return e instanceof f?this.filterResourceMarkers(e):e instanceof m?this.filterMarker(e,t):this.filterRelatedInformation(e,t)}filterResourceMarkers(e){if($.g.has(e.resource.scheme)||this.options.excludesMatcher.matches(e.resource))return!1;if(this.options.includesMatcher.matches(e.resource))return!0;if(this.options.textFilter.text&&!this.options.textFilter.negate){const t=N._filter(this.options.textFilter.text,(0,C.EZ)(e.resource));if(t)return{visibility:!0,data:{type:0,uriMatches:t||[]}}}return 2}filterMarker(e,t){if(!(this.options.showErrors&&b.ZL.Error===e.marker.severity||this.options.showWarnings&&b.ZL.Warning===e.marker.severity||this.options.showInfos&&b.ZL.Info===e.marker.severity))return!1;if(!this.options.textFilter.text)return!0;const i=[];for(const E of e.lines){const M=N._messageFilter(this.options.textFilter.text,E);i.push(M||[])}const o=e.marker.source?N._filter(this.options.textFilter.text,e.marker.source):void 0,h=e.marker.code?N._filter(this.options.textFilter.text,"string"==typeof e.marker.code?e.marker.code:e.marker.code.value):void 0,u=o||h||i.some(E=>E.length>0);return u&&!this.options.textFilter.negate?{visibility:!0,data:{type:1,lineMatches:i,sourceMatches:o||[],codeMatches:h||[]}}:(!u||!this.options.textFilter.negate||2!==t)&&(!(u||!this.options.textFilter.negate||2!==t)||t)}filterRelatedInformation(e,t){if(!this.options.textFilter.text)return!0;const r=N._filter(this.options.textFilter.text,(0,C.EZ)(e.raw.resource)),i=N._messageFilter(this.options.textFilter.text,Ze.EZ(e.raw.message)),o=r||i;return o&&!this.options.textFilter.negate?{visibility:!0,data:{type:2,uriMatches:r||[],messageMatches:i||[]}}:(!o||!this.options.textFilter.negate||2!==t)&&(!(o||!this.options.textFilter.negate||2!==t)||t)}}let _e=class extends I.JT{constructor(e,t,r,i,o){super(),this.marker=e,this.modelService=t,this.instantiationService=r,this.editorService=i,this.languageFeaturesService=o,this._onDidChange=this._register(new S.Q5),this.onDidChange=this._onDidChange.event,this.modelPromise=null,this.codeActionsPromise=null,this._multiline=!0,this._quickFixAction=null,this._register((0,I.OF)(()=>{this.modelPromise&&this.modelPromise.cancel(),this.codeActionsPromise&&this.codeActionsPromise.cancel()}))}get multiline(){return this._multiline}set multiline(e){this._multiline!==e&&(this._multiline=e,this._onDidChange.fire())}get quickFixAction(){return this._quickFixAction||(this._quickFixAction=this._register(this.instantiationService.createInstance(O,this.marker))),this._quickFixAction}showLightBulb(){this.setQuickFixes(!0)}setQuickFixes(e){var t=this;return(0,R.Z)(function*(){const r=yield t.getCodeActions(e);t.quickFixAction.quickFixes=r?t.toActions(r):[],t.quickFixAction.autoFixable(!!r&&r.hasAutoFix)})()}getCodeActions(e){return null!==this.codeActionsPromise?this.codeActionsPromise:this.getModel(e).then(t=>t?(this.codeActionsPromise||(this.codeActionsPromise=(0,we.PG)(r=>(0,Ae.aI)(this.languageFeaturesService.codeActionProvider,t,new ee.e(this.marker.range.startLineNumber,this.marker.range.startColumn,this.marker.range.endLineNumber,this.marker.range.endColumn),{type:1,triggerAction:je.aQ.ProblemsView,filter:{include:je.yN.QuickFix}},It.Ex.None,r).then(i=>this._register(i)))),this.codeActionsPromise):null)}toActions(e){return e.validActions.map(t=>new H.aU(t.action.command?t.action.command.id:t.action.title,t.action.title,void 0,!0,()=>this.openFileAtMarker(this.marker).then(()=>this.instantiationService.invokeFunction(Ae.LR,t,Ae.UX.FromProblemsView))))}openFileAtMarker(e){const{resource:t,selection:r}={resource:e.resource,selection:e.range};return this.editorService.openEditor({resource:t,options:{selection:r,preserveFocus:!0,pinned:!1,revealIfVisible:!0}},ie.LP).then(()=>{})}getModel(e){const t=this.modelService.getModel(this.marker.resource);return t?Promise.resolve(t):e?(this.modelPromise||(this.modelPromise=(0,we.PG)(r=>new Promise(i=>{this._register(this.modelService.onModelAdded(o=>{(0,C.Xy)(o.uri,this.marker.resource)&&i(o)}))}))),this.modelPromise):Promise.resolve(null)}};_e=(0,d.gn)([(0,d.fM)(1,wt.q),(0,d.fM)(2,Q.TG),(0,d.fM)(3,ie.AR),(0,d.fM)(4,St.p)],_e);let Fe=class extends I.JT{constructor(e=!0,t="tree",r,i){super(),this.contextKeyService=r,this.instantiationService=i,this._onDidChange=this._register(new S.Q5),this.onDidChange=this._onDidChange.event,this._onDidChangeViewMode=this._register(new S.Q5),this.onDidChangeViewMode=this._onDidChangeViewMode.event,this.markersViewStates=new Map,this.markersPerResource=new Map,this.bulkUpdate=!1,this.hoveredMarker=null,this.hoverDelayer=new we.vp(300),this._multiline=!0,this._viewMode="tree",this._multiline=e,this._viewMode=t,this.viewModeContextKey=l.G.MarkersViewModeContextKey.bindTo(this.contextKeyService),this.viewModeContextKey.set(t)}add(e){if(!this.markersViewStates.has(e.id)){const t=this.instantiationService.createInstance(_e,e),r=[t];t.multiline=this.multiline,t.onDidChange(()=>{this.bulkUpdate||this._onDidChange.fire(e)},this,r),this.markersViewStates.set(e.id,{viewModel:t,disposables:r});const i=this.markersPerResource.get(e.resource.toString())||[];i.push(e),this.markersPerResource.set(e.resource.toString(),i)}}remove(e){const t=this.markersPerResource.get(e.toString())||[];for(const r of t){const i=this.markersViewStates.get(r.id);i&&(0,I.B9)(i.disposables),this.markersViewStates.delete(r.id),this.hoveredMarker===r&&(this.hoveredMarker=null)}this.markersPerResource.delete(e.toString())}getViewModel(e){const t=this.markersViewStates.get(e.id);return t?t.viewModel:null}onMarkerMouseHover(e){this.hoveredMarker=e,this.hoverDelayer.trigger(()=>{if(this.hoveredMarker){const t=this.getViewModel(this.hoveredMarker);t&&t.showLightBulb()}})}onMarkerMouseLeave(e){this.hoveredMarker===e&&(this.hoveredMarker=null)}get multiline(){return this._multiline}set multiline(e){let t=!1;this._multiline!==e&&(this._multiline=e,t=!0),this.bulkUpdate=!0,this.markersViewStates.forEach(({viewModel:r})=>{r.multiline!==e&&(r.multiline=e,t=!0)}),this.bulkUpdate=!1,t&&this._onDidChange.fire(void 0)}get viewMode(){return this._viewMode}set viewMode(e){this._viewMode!==e&&(this._viewMode=e,this._onDidChangeViewMode.fire(e),this.viewModeContextKey.set(e))}dispose(){this.markersViewStates.forEach(({disposables:e})=>(0,I.B9)(e)),this.markersViewStates.clear(),this.markersPerResource.clear(),super.dispose()}};Fe=(0,d.gn)([(0,d.fM)(2,w.i6),(0,d.fM)(3,Q.TG)],Fe);var k=n(73317),Nt=n(53091),yt=n(6262),Tt=n(32304),Pt=n(8742),L=n(11113),W=n(73059),Ot=n(18747),et=n(48982),tt=n(86200),rt=n(20565);const U=c.$;let ne=class ht{constructor(e,t){this.markersViewModel=e,this.instantiationService=t,this.templateId=ht.TEMPLATE_ID}renderTemplate(e){const t=c.R3(e,U(".severity")),r=c.R3(t,U("")),i=c.R3(e,U(".actions"));return{actionBar:new Re.o(i,{actionViewItemProvider:h=>h.id===O.ID?this.instantiationService.createInstance(ue,h):void 0,animated:!1}),icon:r}}renderElement(e,t,r,i){const o=u=>{(0,J.Jp)(u)||c.Fx(r.icon,"monaco-table-td").classList.toggle("quickFix",u)};r.icon.title=b.ZL.toString(e.marker.severity),r.icon.className=`marker-icon ${Ye.Z.toString(b.ZL.toSeverity(e.marker.severity))} codicon ${Qe.j.className(b.ZL.toSeverity(e.marker.severity))}`,r.actionBar.clear();const h=this.markersViewModel.getViewModel(e);if(h){const u=h.quickFixAction;r.actionBar.push([u],{icon:!0,label:!1}),o(h.quickFixAction.enabled),u.onDidChange(({enabled:E})=>o(E)),u.onShowQuickFixes(()=>{const E=r.actionBar.viewItems[0];E&&E.showQuickFixes()})}}disposeTemplate(e){}};ne.TEMPLATE_ID="severity",ne=(0,d.gn)([(0,d.fM)(1,Q.TG)],ne);let ae=class dt{constructor(e){this.openerService=e,this.templateId=dt.TEMPLATE_ID}renderTemplate(e){const t=c.R3(e,U(".code")),r=new y.q(t);r.element.classList.add("source-label");const i=new y.q(t);return i.element.classList.add("code-label"),{codeColumn:t,sourceLabel:r,codeLabel:i,codeLink:new Xe.r(t,{href:"",label:""},{},this.openerService)}}renderElement(e,t,r,i){if(r.codeColumn.classList.remove("code-label"),r.codeColumn.classList.remove("code-link"),e.marker.source&&e.marker.code)if("string"==typeof e.marker.code)r.codeColumn.classList.add("code-label"),r.codeColumn.title=`${e.marker.source} (${e.marker.code})`,r.sourceLabel.set(e.marker.source,e.sourceMatches),r.codeLabel.set(e.marker.code,e.codeMatches);else{r.codeColumn.classList.add("code-link"),r.codeColumn.title=`${e.marker.source} (${e.marker.code.value})`,r.sourceLabel.set(e.marker.source,e.sourceMatches);const o=new y.q(U(".code-link-label"));o.set(e.marker.code.value,e.codeMatches),r.codeLink.link={href:e.marker.code.target.toString(),title:e.marker.code.target.toString(),label:o.element}}else r.codeColumn.title="",r.sourceLabel.set("-")}disposeTemplate(e){}};ae.TEMPLATE_ID="code",ae=(0,d.gn)([(0,d.fM)(0,z.v4)],ae);let it=(()=>{class s{constructor(){this.templateId=s.TEMPLATE_ID}renderTemplate(t){const r=c.R3(t,U(".message"));return{columnElement:r,highlightedLabel:new y.q(r)}}renderElement(t,r,i,o){i.columnElement.title=t.marker.message,i.highlightedLabel.set(t.marker.message,t.messageMatches)}disposeTemplate(t){}}return s.TEMPLATE_ID="message",s})(),le=class ut{constructor(e){this.labelService=e,this.templateId=ut.TEMPLATE_ID}renderTemplate(e){const t=c.R3(e,U(".file")),r=new y.q(t);r.element.classList.add("file-label");const i=new y.q(t);return i.element.classList.add("file-position"),{columnElement:t,fileLabel:r,positionLabel:i}}renderElement(e,t,r,i){const o=v.MARKERS_PANEL_AT_LINE_COL_NUMBER(e.marker.startLineNumber,e.marker.startColumn);r.columnElement.title=`${this.labelService.getUriLabel(e.marker.resource,{relative:!1})} ${o}`,r.fileLabel.set(this.labelService.getUriLabel(e.marker.resource,{relative:!0}),e.fileMatches),r.positionLabel.set(o,void 0)}disposeTemplate(e){}};le.TEMPLATE_ID="file",le=(0,d.gn)([(0,d.fM)(0,oe.e)],le);let st=(()=>{class s{constructor(){this.templateId=s.TEMPLATE_ID}renderTemplate(t){const r=c.R3(t,U(".owner"));return{columnElement:r,highlightedLabel:new y.q(r)}}renderElement(t,r,i,o){i.columnElement.title=t.marker.owner,i.highlightedLabel.set(t.marker.owner,t.ownerMatches)}disposeTemplate(t){}}return s.TEMPLATE_ID="owner",s})(),Vt=(()=>{class s{constructor(){this.headerRowHeight=s.HEADER_ROW_HEIGHT}getHeight(t){return s.ROW_HEIGHT}}return s.HEADER_ROW_HEIGHT=24,s.ROW_HEIGHT=24,s})(),Ne=class extends I.JT{constructor(e,t,r,i,o,h,u){super(),this.container=e,this.markersViewModel=t,this.resourceMarkers=r,this.filterOptions=i,this.instantiationService=h,this.labelService=u,this._itemCount=0,this.table=this.instantiationService.createInstance(be.On,"Markers",this.container,new Vt,[{label:"",tooltip:"",weight:0,minimumWidth:36,maximumWidth:36,templateId:ne.TEMPLATE_ID,project:p=>p},{label:(0,a.NC)("codeColumnLabel","Code"),tooltip:"",weight:1,minimumWidth:100,maximumWidth:300,templateId:ae.TEMPLATE_ID,project:p=>p},{label:(0,a.NC)("messageColumnLabel","Message"),tooltip:"",weight:4,templateId:it.TEMPLATE_ID,project:p=>p},{label:(0,a.NC)("fileColumnLabel","File"),tooltip:"",weight:2,templateId:le.TEMPLATE_ID,project:p=>p},{label:(0,a.NC)("sourceColumnLabel","Source"),tooltip:"",weight:1,minimumWidth:100,maximumWidth:300,templateId:st.TEMPLATE_ID,project:p=>p}],[this.instantiationService.createInstance(ne,this.markersViewModel),this.instantiationService.createInstance(ae),this.instantiationService.createInstance(it),this.instantiationService.createInstance(le),this.instantiationService.createInstance(st)],o);const E=this.table.domNode.querySelector(".monaco-list-rows"),M=S.ju.chain(this._register(new rt.Y(E,"mouseover")).event).map(p=>c.Fx(p.target,"monaco-list-row","monaco-list-rows")).filter(p=>!!p).map(p=>parseInt(p.getAttribute("data-index"))).event,A=S.ju.map(this._register(new rt.Y(E,"mouseleave")).event,()=>-1),_=S.ju.latch(S.ju.any(M,A)),T=S.ju.debounce(_,(p,P)=>P,500);this._register(T(p=>{-1!==p&&this.table.row(p)&&this.markersViewModel.onMarkerMouseHover(this.table.row(p))}))}get contextKeyService(){return this.table.contextKeyService}get onContextMenu(){return this.table.onContextMenu}get onDidOpen(){return this.table.onDidOpen}get onDidChangeFocus(){return this.table.onDidChangeFocus}get onDidChangeSelection(){return this.table.onDidChangeSelection}collapseMarkers(){}domFocus(){this.table.domFocus()}filterMarkers(e,t){this.filterOptions=t,this.reset(e)}getFocus(){const e=this.table.getFocus();return e.length>0?[...e.map(t=>this.table.row(t))]:[]}getHTMLElement(){return this.table.getHTMLElement()}getRelativeTop(e){return e?this.table.getRelativeTop(this.table.indexOf(e)):null}getSelection(){const e=this.table.getSelection();return e.length>0?[...e.map(t=>this.table.row(t))]:[]}getVisibleItemCount(){return this._itemCount}isVisible(){return!this.container.classList.contains("hidden")}layout(e,t){this.container.style.height=`${e}px`,this.table.layout(e,t)}reset(e){this.resourceMarkers=e;const t=[];for(const r of this.resourceMarkers)for(const i of r.markers)if(!$.g.has(i.resource.scheme)&&!this.filterOptions.excludesMatcher.matches(i.resource))if(this.filterOptions.includesMatcher.matches(i.resource))t.push(new F(i));else if(this.filterOptions.showErrors&&b.ZL.Error===i.marker.severity||this.filterOptions.showWarnings&&b.ZL.Warning===i.marker.severity||this.filterOptions.showInfos&&b.ZL.Info===i.marker.severity){if(this.filterOptions.textFilter.text){const h=i.marker.source?N._filter(this.filterOptions.textFilter.text,i.marker.source)??void 0:void 0,u=i.marker.code?N._filter(this.filterOptions.textFilter.text,"string"==typeof i.marker.code?i.marker.code:i.marker.code.value)??void 0:void 0,E=N._messageFilter(this.filterOptions.textFilter.text,i.marker.message)??void 0,M=N._messageFilter(this.filterOptions.textFilter.text,this.labelService.getUriLabel(i.resource,{relative:!0}))??void 0,A=N._messageFilter(this.filterOptions.textFilter.text,i.marker.owner)??void 0,_=h||u||E||M||A;(_&&!this.filterOptions.textFilter.negate||!_&&this.filterOptions.textFilter.negate)&&t.push(new F(i,h,u,E,M,A));continue}t.push(new F(i))}this._itemCount=t.length,this.table.splice(0,Number.POSITIVE_INFINITY,t.sort((r,i)=>{let o=b.ZL.compare(r.marker.severity,i.marker.severity);return 0===o&&(o=Z(r.marker,i.marker)),0===o&&(o=ee.e.compareRangesUsingStarts(r.marker,i.marker)),o}))}revealMarkers(e,t,r){if(e){const i=this.resourceMarkers.indexOf(e);if(-1!==i)if(this.hasSelectedMarkerFor(e)){const o=this.table.getSelection();this.table.reveal(o[0],r),t&&this.table.setFocus(o)}else this.table.reveal(i,0),t&&(this.table.setFocus([i]),this.table.setSelection([i]))}else t&&(this.table.setSelection([]),this.table.focusFirst())}setAriaLabel(e){this.table.domNode.ariaLabel=e}setMarkerSelection(e,t){this.isVisible()&&(e&&e.length>0?(this.table.setSelection(e.map(r=>this.findMarkerIndex(r))),this.table.setFocus(t&&t.length>0?t.map(r=>this.findMarkerIndex(r)):[this.findMarkerIndex(e[0])]),this.table.reveal(this.findMarkerIndex(e[0]))):0===this.getSelection().length&&this.getVisibleItemCount()>0&&(this.table.setSelection([0]),this.table.setFocus([0]),this.table.reveal(0)))}toggleVisibility(e){this.container.classList.toggle("hidden",e)}update(e){for(const t of e){const r=this.resourceMarkers.indexOf(t);this.resourceMarkers.splice(r,1,t)}this.reset(this.resourceMarkers)}updateMarker(e){this.table.rerender()}findMarkerIndex(e){for(let t=0;t<this.table.length;t++)if(this.table.row(t).marker===e.marker)return t;return-1}hasSelectedMarkerFor(e){const t=this.getSelection();return!!(t&&t.length>0&&t[0]instanceof m&&e.has(t[0].marker.resource))}};function ot(s){return me.$.map(s.markers,e=>{const t=me.$.from(e.relatedInformation);return{element:e,children:me.$.map(t,i=>({element:i}))}})}Ne=(0,d.gn)([(0,d.fM)(5,Q.TG),(0,d.fM)(6,oe.e)],Ne);let ye=class extends L.S_{constructor(e,t,r,i,o,h,u,E,M,A,_,T,p,P,De){const Ke=new Pt.N(l.s.MARKERS_VIEW_STORAGE_ID,p).getMemento(1,1);super({...e,filterOptions:{ariaLabel:v.MARKERS_PANEL_FILTER_ARIA_LABEL,placeholder:v.MARKERS_PANEL_FILTER_PLACEHOLDER,focusContextKey:l.G.MarkerViewFilterFocusContextKey.key,text:Ke.filter||"",history:Ke.filterHistory||[]}},T,A,o,E,r,t,P,De,h),this.editorService=i,this.markerService=u,this.workspaceContextService=M,this.uriIdentityService=_,this.lastSelectedRelativeTop=0,this.currentActiveResource=null,this.onVisibleDisposables=this._register(new I.SL),this.widgetDisposables=this._register(new I.SL),this.currentHeight=0,this.currentWidth=0,this.cachedFilterStats=void 0,this.currentResourceGotAddedToMarkersData=!1,this.onDidChangeVisibility=this.onDidChangeBodyVisibility,this.panelState=Ke,this.markersModel=this._register(t.createInstance(B)),this.markersViewModel=this._register(t.createInstance(Fe,this.panelState.multiline,this.panelState.viewMode??this.getDefaultViewMode())),this._register(this.onDidChangeVisibility(q=>this.onDidChangeMarkersViewVisibility(q))),this._register(this.markersViewModel.onDidChangeViewMode(q=>this.onDidChangeViewMode())),this.widgetAccessibilityProvider=t.createInstance(Se),this.widgetIdentityProvider={getId:q=>q.id},this.setCurrentActiveEditor(),this.filter=new Ft(N.EMPTY(_)),this.rangeHighlightDecorations=this._register(this.instantiationService.createInstance(pt.rv)),this.filters=this._register(new ft({filterHistory:this.panelState.filterHistory||[],showErrors:!1!==this.panelState.showErrors,showWarnings:!1!==this.panelState.showWarnings,showInfos:!1!==this.panelState.showInfos,excludedFiles:!!this.panelState.useFilesExclude,activeFile:!!this.panelState.activeFile},this.contextKeyService)),this._register(this.configurationService.onDidChangeConfiguration(q=>{this.filters.excludedFiles&&q.affectsConfiguration("files.exclude")&&this.updateFilter()}))}renderBody(e){super.renderBody(e),e.classList.add("markers-panel"),this._register(c.nm(e,"keydown",r=>{this.keybindingService.mightProducePrintableCharacter(new yt.y1(r))&&this.focusFilter()}));const t=c.R3(e,c.$(".markers-panel-container"));this.createArialLabelElement(t),this.createMessageBox(t),this.widgetContainer=c.R3(t,c.$(".widget-container")),this.createWidget(this.widgetContainer),this.updateFilter(),this.renderContent()}getTitle(){return v.MARKERS_PANEL_TITLE_PROBLEMS}layoutBodyContent(e=this.currentHeight,t=this.currentWidth){this.messageBoxContainer&&(this.messageBoxContainer.style.height=`${e}px`),this.widget.layout(e,t),this.currentHeight=e,this.currentWidth=t}focus(){this.widget.getHTMLElement()!==document.activeElement&&(this.hasNoProblems()?this.messageBoxContainer.focus():(this.widget.domFocus(),this.widget.setMarkerSelection()))}focusFilter(){this.filterWidget.focus()}updateBadge(e,t){this.filterWidget.updateBadge(e===t||0===e?void 0:(0,a.NC)("showing filtered problems","Showing {0} of {1}",t,e))}checkMoreFilters(){this.filterWidget.checkMoreFilters(!this.filters.showErrors||!this.filters.showWarnings||!this.filters.showInfos||this.filters.excludedFiles||this.filters.activeFile)}clearFilterText(){this.filterWidget.setFilterText("")}showQuickFixes(e){const t=this.markersViewModel.getViewModel(e);t&&t.quickFixAction.run()}openFileAtElement(e,t,r,i){const{resource:o,selection:h}=e instanceof m?{resource:e.resource,selection:e.range}:e instanceof D?{resource:e.raw.resource,selection:e.raw}:"marker"in e?{resource:e.marker.resource,selection:e.marker.range}:{resource:null,selection:null};return o&&h?(this.editorService.openEditor({resource:o,options:{selection:h,preserveFocus:t,pinned:i,revealIfVisible:!0}},r?ie.O3:ie.LP).then(u=>{u&&t?this.rangeHighlightDecorations.highlightRange({resource:o,range:h},u.getControl()):this.rangeHighlightDecorations.removeHighlightRange()}),!0):(this.rangeHighlightDecorations.removeHighlightRange(),!1)}refreshPanel(e){if(this.isVisible()){const t=this.widget.getSelection().length>0;e?e instanceof m?this.widget.updateMarker(e):e.added.size||e.removed.size?this.resetWidget():this.widget.update([...e.updated]):this.resetWidget(),t&&this.widget.setMarkerSelection(),this.cachedFilterStats=void 0;const{total:r,filtered:i}=this.getFilterStats();this.toggleVisibility(0===r||0===i),this.renderMessage(),this.updateBadge(r,i),this.checkMoreFilters()}}onDidChangeViewState(e){this.refreshPanel(e)}resetWidget(){this.widget.reset(this.getResourceMarkers())}updateFilter(){this.filter.options=new N(this.filterWidget.getFilterText(),this.getFilesExcludeExpressions(),this.filters.showWarnings,this.filters.showErrors,this.filters.showInfos,this.uriIdentityService),this.widget.filterMarkers(this.getResourceMarkers(),this.filter.options),this.cachedFilterStats=void 0;const{total:e,filtered:t}=this.getFilterStats();this.toggleVisibility(0===e||0===t),this.renderMessage(),this.updateBadge(e,t),this.checkMoreFilters()}getDefaultViewMode(){return"table"===this.configurationService.getValue("problems.defaultViewMode")?"table":"tree"}getFilesExcludeExpressions(){if(!this.filters.excludedFiles)return[];const e=this.workspaceContextService.getWorkspace().folders;return e.length?e.map(t=>({root:t.uri,expression:this.getFilesExclude(t.uri)})):this.getFilesExclude()}getFilesExclude(e){return(0,kt.I8)(this.configurationService.getValue("files.exclude",{resource:e}))||{}}getResourceMarkers(){if(!this.filters.activeFile)return this.markersModel.resourceMarkers;let e=[];if(this.currentActiveResource){const t=this.markersModel.getResourceMarkers(this.currentActiveResource);t&&(e=[t])}return e}createMessageBox(e){this.messageBoxContainer=c.R3(e,c.$(".message-box-container")),this.messageBoxContainer.setAttribute("aria-labelledby","markers-panel-arialabel")}createArialLabelElement(e){this.ariaLabelElement=c.R3(e,c.$("")),this.ariaLabelElement.setAttribute("id","markers-panel-arialabel")}createWidget(e){this.widget="table"===this.markersViewModel.viewMode?this.createTable(e):this.createTree(e),this.widgetDisposables.add(this.widget);const t=l.G.MarkerFocusContextKey.bindTo(this.widget.contextKeyService),r=l.G.RelatedInformationFocusContextKey.bindTo(this.widget.contextKeyService);this.widgetDisposables.add(this.widget.onDidChangeFocus(i=>{t.set(i.elements.some(o=>o instanceof m)),r.set(i.elements.some(o=>o instanceof D))})),this.widgetDisposables.add(S.ju.debounce(this.widget.onDidOpen,(i,o)=>o,75,!0)(i=>{this.openFileAtElement(i.element,!!i.editorOptions.preserveFocus,i.sideBySide,!!i.editorOptions.pinned)})),this.widgetDisposables.add(S.ju.any(this.widget.onDidChangeSelection,this.widget.onDidChangeFocus)(()=>{const i=[...this.widget.getSelection(),...this.widget.getFocus()];for(const o of i)o instanceof m&&this.markersViewModel.getViewModel(o)?.showLightBulb()})),this.widgetDisposables.add(this.widget.onContextMenu(this.onContextMenu,this)),this.widgetDisposables.add(this.widget.onDidChangeSelection(this.onSelected,this))}createTable(e){return this.instantiationService.createInstance(Ne,c.R3(e,c.$(".markers-table-container")),this.markersViewModel,this.getResourceMarkers(),this.filter.options,{accessibilityProvider:this.widgetAccessibilityProvider,dnd:this.instantiationService.createInstance(tt.vb,r=>r instanceof F?(0,z.YO)(r.resource,r.range):null),horizontalScrolling:!1,identityProvider:this.widgetIdentityProvider,multipleSelectionSupport:!0,selectionNavigation:!0})}createTree(e){const t=new S.ZD,r=this.instantiationService.createInstance(Tt.RX,this),i=new Je(this.markersViewModel),o=[this.instantiationService.createInstance(Ce,r,t.event),this.instantiationService.createInstance(Le,this.markersViewModel),this.instantiationService.createInstance(xe)],h=this.instantiationService.createInstance(Te,"MarkersView",c.R3(e,c.$(".tree-container.show-file-icons")),i,o,{filter:this.filter,accessibilityProvider:this.widgetAccessibilityProvider,identityProvider:this.widgetIdentityProvider,dnd:this.instantiationService.createInstance(tt.vb,u=>u instanceof f?u.resource:u instanceof m?(0,z.YO)(u.resource,u.range):u instanceof D?(0,z.YO)(u.raw.resource,u.raw):null),expandOnlyOnTwistieClick:u=>u instanceof m&&u.relatedInformation.length>0,overrideStyles:{listBackground:this.getBackgroundColor()},selectionNavigation:!0,multipleSelectionSupport:!0});return t.input=h.onDidChangeRenderNodeCount,h}collapseAll(){this.widget.collapseMarkers()}setMultiline(e){this.markersViewModel.multiline=e}setViewMode(e){this.markersViewModel.viewMode=e}onDidChangeMarkersViewVisibility(e){if(this.onVisibleDisposables.clear(),e){for(const t of this.reInitialize())this.onVisibleDisposables.add(t);this.refreshPanel()}}reInitialize(){const e=[],t=r=>this.markerService.read({resource:r,severities:b.ZL.Error|b.ZL.Warning|b.ZL.Info});return this.markersModel.setResourceMarkers((0,G.vM)(t(),Z).map(r=>[r[0].resource,r])),e.push(S.ju.debounce(this.markerService.onMarkerChanged,(r,i)=>(r=r||new te.Y9,i.forEach(o=>r.set(o,o)),r),64)(r=>{this.markersModel.setResourceMarkers([...r.values()].map(i=>[i,t(i)]))})),e.push(S.ju.any(this.markersModel.onDidChange,this.editorService.onDidActiveEditorChange)(r=>{r?this.onDidChangeModel(r):this.onActiveEditorChanged()})),e.push((0,I.OF)(()=>this.markersModel.reset())),this.markersModel.resourceMarkers.forEach(r=>r.markers.forEach(i=>this.markersViewModel.add(i))),e.push(this.markersViewModel.onDidChange(r=>this.onDidChangeViewState(r))),e.push((0,I.OF)(()=>this.markersModel.resourceMarkers.forEach(r=>this.markersViewModel.remove(r.resource)))),e.push(this.filters.onDidChange(r=>{r.activeFile?this.refreshPanel():(r.excludedFiles||r.showWarnings||r.showErrors||r.showInfos)&&this.updateFilter()})),e.push(this.filterWidget.onDidChangeFilterText(r=>this.updateFilter())),e.push((0,I.OF)(()=>{this.cachedFilterStats=void 0})),e.push((0,I.OF)(()=>this.rangeHighlightDecorations.removeHighlightRange())),e}onDidChangeModel(e){const t=[...e.added,...e.removed,...e.updated],r=[];for(const{resource:i}of t){this.markersViewModel.remove(i);const o=this.markersModel.getResourceMarkers(i);if(o)for(const h of o.markers)this.markersViewModel.add(h);r.push(i)}this.currentResourceGotAddedToMarkersData=this.currentResourceGotAddedToMarkersData||this.isCurrentResourceGotAddedToMarkersData(r),this.refreshPanel(e),this.updateRangeHighlights(),this.currentResourceGotAddedToMarkersData&&(this.autoReveal(),this.currentResourceGotAddedToMarkersData=!1)}onDidChangeViewMode(){this.widgetContainer&&this.widget&&(this.widgetContainer.textContent="",this.widgetDisposables.clear());const e=new Set;for(const r of this.widget.getSelection())r instanceof f?r.markers.forEach(i=>e.add(i)):(r instanceof m||r instanceof F)&&e.add(r);const t=new Set;for(const r of this.widget.getFocus())(r instanceof m||r instanceof F)&&t.add(r);this.createWidget(this.widgetContainer),this.refreshPanel(),e.size>0&&(this.widget.setMarkerSelection(Array.from(e),Array.from(t)),this.widget.domFocus())}isCurrentResourceGotAddedToMarkersData(e){const t=this.currentActiveResource;return!(!t||this.getResourceForCurrentActiveResource())&&e.some(i=>i.toString()===t.toString())}onActiveEditorChanged(){this.setCurrentActiveEditor(),this.filters.activeFile&&this.refreshPanel(),this.autoReveal()}setCurrentActiveEditor(){const e=this.editorService.activeEditor;this.currentActiveResource=e?(0,J.M2)(et.zK.getOriginalUri(e,{supportSideBySide:et.YX.PRIMARY})):null}onSelected(){const e=this.widget.getSelection();e&&e.length>0&&(this.lastSelectedRelativeTop=this.widget.getRelativeTop(e[0])||0)}hasNoProblems(){const{total:e,filtered:t}=this.getFilterStats();return 0===e||0===t}renderContent(){this.cachedFilterStats=void 0,this.resetWidget(),this.toggleVisibility(this.hasNoProblems()),this.renderMessage()}renderMessage(){if(!this.messageBoxContainer||!this.ariaLabelElement)return;c.PO(this.messageBoxContainer);const{total:e,filtered:t}=this.getFilterStats();0===t?(this.messageBoxContainer.style.display="block",this.messageBoxContainer.setAttribute("tabIndex","0"),this.filters.activeFile?this.renderFilterMessageForActiveFile(this.messageBoxContainer):e>0?this.renderFilteredByFilterMessage(this.messageBoxContainer):this.renderNoProblemsMessage(this.messageBoxContainer)):(this.messageBoxContainer.style.display="none",this.setAriaLabel(t===e?(0,a.NC)("No problems filtered","Showing {0} problems",e):(0,a.NC)("problems filtered","Showing {0} of {1} problems",t,e)),this.messageBoxContainer.removeAttribute("tabIndex"))}renderFilterMessageForActiveFile(e){this.currentActiveResource&&this.markersModel.getResourceMarkers(this.currentActiveResource)?this.renderFilteredByFilterMessage(e):this.renderNoProblemsMessageForActiveFile(e)}renderFilteredByFilterMessage(e){c.R3(e,c.$("span")).textContent=v.MARKERS_PANEL_NO_PROBLEMS_FILTERS;const r=c.R3(e,c.$("a.messageAction"));r.textContent=(0,a.NC)("clearFilter","Clear Filters"),r.setAttribute("tabIndex","0"),c.R3(e,c.$("span")).textContent=".",c.mu(r,c.tw.CLICK,()=>this.clearFilters()),c.mu(r,c.tw.KEY_DOWN,o=>{(o.equals(3)||o.equals(10))&&(this.clearFilters(),o.stopPropagation())}),this.setAriaLabel(v.MARKERS_PANEL_NO_PROBLEMS_FILTERS)}renderNoProblemsMessageForActiveFile(e){c.R3(e,c.$("span")).textContent=v.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT,this.setAriaLabel(v.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT)}renderNoProblemsMessage(e){c.R3(e,c.$("span")).textContent=v.MARKERS_PANEL_NO_PROBLEMS_BUILT,this.setAriaLabel(v.MARKERS_PANEL_NO_PROBLEMS_BUILT)}setAriaLabel(e){this.widget.setAriaLabel(e),this.ariaLabelElement.setAttribute("aria-label",e)}clearFilters(){this.filterWidget.setFilterText(""),this.filters.excludedFiles=!1,this.filters.showErrors=!0,this.filters.showWarnings=!0,this.filters.showInfos=!0}autoReveal(e=!1){if(this.filters.activeFile)return;const t=this.configurationService.getValue("problems.autoReveal");if("boolean"==typeof t&&t){const r=this.getResourceForCurrentActiveResource();this.widget.revealMarkers(r,e,this.lastSelectedRelativeTop)}}getResourceForCurrentActiveResource(){return this.currentActiveResource?this.markersModel.getResourceMarkers(this.currentActiveResource):null}updateRangeHighlights(){this.rangeHighlightDecorations.removeHighlightRange(),this.widget.getHTMLElement()===document.activeElement&&this.highlightCurrentSelectedMarkerRange()}highlightCurrentSelectedMarkerRange(){const e=this.widget.getSelection()??[];if(1!==e.length)return;const t=e[0];t instanceof m&&this.rangeHighlightDecorations.highlightRange(t)}onContextMenu(e){const t=e.element;t&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this.contextMenuService.showContextMenu({getAnchor:()=>e.anchor,menuId:k.eH.ProblemsPanelContext,contextKeyService:this.widget.contextKeyService,getActions:()=>this.getMenuActions(t),getActionViewItem:r=>{const i=this.keybindingService.lookupKeybinding(r.id);if(i)return new ve.gU(r,r,{label:!0,keybinding:i.getLabel()})},onHide:r=>{r&&this.widget.domFocus()}}))}getMenuActions(e){const t=[];if(e instanceof m){const r=this.markersViewModel.getViewModel(e);if(r){const i=r.quickFixAction.quickFixes;i.length&&(t.push(...i),t.push(new H.Z0))}}return t}getFocusElement(){return this.widget.getFocus()[0]??void 0}getFocusedSelectedElements(){const e=this.getFocusElement();if(!e)return null;const t=this.widget.getSelection();if(t.includes(e)){const r=[];for(const i of t)i&&r.push(i);return r}return[e]}getAllResourceMarkers(){return this.markersModel.resourceMarkers}getFilterStats(){return this.cachedFilterStats||(this.cachedFilterStats={total:this.markersModel.total,filtered:this.widget?.getVisibleItemCount()??0}),this.cachedFilterStats}toggleVisibility(e){this.widget.toggleVisibility(e),this.layoutBodyContent()}saveState(){this.panelState.filter=this.filterWidget.getFilterText(),this.panelState.filterHistory=this.filters.filterHistory,this.panelState.showErrors=this.filters.showErrors,this.panelState.showWarnings=this.filters.showWarnings,this.panelState.showInfos=this.filters.showInfos,this.panelState.useFilesExclude=this.filters.excludedFiles,this.panelState.activeFile=this.filters.activeFile,this.panelState.multiline=this.markersViewModel.multiline,this.panelState.viewMode=this.markersViewModel.viewMode,super.saveState()}dispose(){super.dispose()}};ye=(0,d.gn)([(0,d.fM)(1,Q.TG),(0,d.fM)(2,W.XH),(0,d.fM)(3,ie.AR),(0,d.fM)(4,He.Ui),(0,d.fM)(5,re.bU),(0,d.fM)(6,b.lT),(0,d.fM)(7,w.i6),(0,d.fM)(8,vt.ec),(0,d.fM)(9,Be.i),(0,d.fM)(10,Ot.v),(0,d.fM)(11,Nt.d),(0,d.fM)(12,Et.Uy),(0,d.fM)(13,z.v4),(0,d.fM)(14,Ue.XE)],ye);let Te=class extends be.PF{constructor(e,t,r,i,o,h,u,E,M,A){super(e,t,r,i,o,h,u,E,A),this.container=t,this.visibilityContextKey=l.G.MarkersTreeVisibilityContextKey.bindTo(u)}collapseMarkers(){this.collapseAll(),this.setSelection([]),this.setFocus([]),this.getHTMLElement().focus(),this.focusFirst()}filterMarkers(){this.refilter()}getVisibleItemCount(){let e=0;const t=this.getNode();for(const r of t.children)for(const i of r.children)r.visible&&i.visible&&e++;return e}isVisible(){return!this.container.classList.contains("hidden")}toggleVisibility(e){this.visibilityContextKey.set(!e),this.container.classList.toggle("hidden",e)}reset(e){this.setChildren(null,me.$.map(e,t=>({element:t,children:ot(t)})))}revealMarkers(e,t,r){e?this.hasElement(e)&&(!this.isCollapsed(e)&&this.hasSelectedMarkerFor(e)?(this.reveal(this.getSelection()[0],r),t&&this.setFocus(this.getSelection())):(this.expand(e),this.reveal(e,0),t&&(this.setFocus([e]),this.setSelection([e])))):t&&(this.setSelection([]),this.focusFirst())}setAriaLabel(e){this.ariaLabel=e}setMarkerSelection(e,t){if(this.isVisible())if(e&&e.length>0)this.setSelection(e.map(r=>this.findMarkerNode(r))),this.setFocus(t&&t.length>0?t.map(r=>this.findMarkerNode(r)):[this.findMarkerNode(e[0])]),this.reveal(this.findMarkerNode(e[0]));else if(0===this.getSelection().length){const r=this.firstVisibleElement,i=r?r instanceof f?r.markers[0]:r instanceof m?r:void 0:void 0;i&&(this.setSelection([i]),this.setFocus([i]),this.reveal(i))}}update(e){for(const t of e)this.setChildren(t,ot(t)),this.rerender(t)}updateMarker(e){this.rerender(e)}findMarkerNode(e){for(const t of this.getNode().children)for(const r of t.children)if(r.element instanceof m&&r.element.marker===e.marker)return r.element;return null}hasSelectedMarkerFor(e){const t=this.getSelection();return!!(t&&t.length>0&&t[0]instanceof m&&e.has(t[0].marker.resource))}dispose(){super.dispose()}layout(e,t){this.container.style.height=`${e}px`,super.layout(e,t)}};Te=(0,d.gn)([(0,d.fM)(5,Q.TG),(0,d.fM)(6,w.i6),(0,d.fM)(7,be.Lw),(0,d.fM)(8,Ue.XE),(0,d.fM)(9,He.Ui)],Te);var s,ge=n(33562),Dt=n(94014),Pe=n(42965),Kt=n(98536),fe=n(86682),Wt=n(48780),nt=n(21462),at=n(57229),ce=n(18196);x.W.registerCommandAndKeybindingRule({id:l.s.MARKER_OPEN_ACTION_ID,weight:200,when:w.Ao.and(l.G.MarkerFocusContextKey),primary:3,mac:{primary:3,secondary:[2066]},handler:(s,e)=>{const t=s.get(W.qC).getActiveViewWithId(l.s.MARKERS_VIEW_ID);t.openFileAtElement(t.getFocusElement(),!1,!1,!0)}}),x.W.registerCommandAndKeybindingRule({id:l.s.MARKER_OPEN_SIDE_ACTION_ID,weight:200,when:w.Ao.and(l.G.MarkerFocusContextKey),primary:2051,mac:{primary:259},handler:(s,e)=>{const t=s.get(W.qC).getActiveViewWithId(l.s.MARKERS_VIEW_ID);t.openFileAtElement(t.getFocusElement(),!1,!0,!0)}}),x.W.registerCommandAndKeybindingRule({id:l.s.MARKER_SHOW_PANEL_ID,weight:200,when:void 0,primary:void 0,handler:(s=(0,R.Z)(function*(e,t){yield e.get(W.qC).openView(l.s.MARKERS_VIEW_ID)}),function(t,r){return s.apply(this,arguments)})}),x.W.registerCommandAndKeybindingRule({id:l.s.MARKER_SHOW_QUICK_FIX,weight:200,when:l.G.MarkerFocusContextKey,primary:2137,handler:(s,e)=>{const t=s.get(W.qC).getActiveViewWithId(l.s.MARKERS_VIEW_ID),r=t.getFocusElement();r instanceof m&&t.showQuickFixes(r)}}),ge.B.as(pe.IP.Configuration).registerConfiguration({id:"problems",order:101,title:v.PROBLEMS_PANEL_CONFIGURATION_TITLE,type:"object",properties:{"problems.autoReveal":{description:v.PROBLEMS_PANEL_CONFIGURATION_AUTO_REVEAL,type:"boolean",default:!0},"problems.defaultViewMode":{description:v.PROBLEMS_PANEL_CONFIGURATION_VIEW_MODE,type:"string",default:"tree",enum:["table","tree"]},"problems.showCurrentInStatus":{description:v.PROBLEMS_PANEL_CONFIGURATION_SHOW_CURRENT_STATUS,type:"boolean",default:!1},"problems.sortOrder":{description:v.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER,type:"string",default:"severity",enum:["severity","position"],enumDescriptions:[v.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_SEVERITY,v.PROBLEMS_PANEL_CONFIGURATION_COMPARE_ORDER_POSITION]}}});const lt=(0,Ie.q5)("markers-view-icon",X.lA.warning,(0,a.NC)("markersViewIcon","View icon of the markers view.")),Bt=ge.B.as(W.IP.ViewContainersRegistry).registerViewContainer({id:l.s.MARKERS_CONTAINER_ID,title:v.MARKERS_PANEL_TITLE_PROBLEMS,icon:lt,hideIfEmpty:!0,order:0,ctorDescriptor:new nt.M(Wt.XV,[l.s.MARKERS_CONTAINER_ID,{mergeViewWithContainerWhenSingleView:!0}]),storageId:l.s.MARKERS_VIEW_STORAGE_ID},1,{doNotRegisterOpenCommand:!0});ge.B.as(W.IP.ViewsRegistry).registerViews([{id:l.s.MARKERS_VIEW_ID,containerIcon:lt,name:v.MARKERS_PANEL_TITLE_PROBLEMS,canToggleVisibility:!1,canMoveView:!0,ctorDescriptor:new nt.M(ye),openCommandActionDescriptor:{id:"workbench.actions.view.problems",mnemonicTitle:(0,a.NC)({key:"miMarker",comment:["&& denotes a mnemonic"]},"&&Problems"),keybindings:{primary:3115},order:0}}],Bt);const ct=ge.B.as(Dt.I.Workbench);(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.table.${l.s.MARKERS_VIEW_ID}.viewAsTree`,title:(0,a.NC)("viewAsTree","View as Tree"),menu:{id:k.eH.ViewTitle,when:w.Ao.and(w.Ao.equals("view",l.s.MARKERS_VIEW_ID),l.G.MarkersViewModeContextKey.isEqualTo("table")),group:"navigation",order:3},icon:X.lA.listTree,viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.setViewMode("tree")})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.table.${l.s.MARKERS_VIEW_ID}.viewAsTable`,title:(0,a.NC)("viewAsTable","View as Table"),menu:{id:k.eH.ViewTitle,when:w.Ao.and(w.Ao.equals("view",l.s.MARKERS_VIEW_ID),l.G.MarkersViewModeContextKey.isEqualTo("tree")),group:"navigation",order:3},icon:X.lA.listFlat,viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.setViewMode("table")})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.${l.s.MARKERS_VIEW_ID}.toggleErrors`,title:(0,a.NC)("toggle errors","Toggle Errors"),category:(0,a.NC)("problems","Problems"),toggled:{condition:l.G.ShowErrorsFilterContextKey,title:(0,a.NC)("errors","Show Errors")},menu:{id:ce.B,group:"1_filter",when:w.Ao.equals("view",l.s.MARKERS_VIEW_ID),order:1},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.filters.showErrors=!e.filters.showErrors})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.${l.s.MARKERS_VIEW_ID}.toggleWarnings`,title:(0,a.NC)("toggle warnings","Toggle Warnings"),category:(0,a.NC)("problems","Problems"),toggled:{condition:l.G.ShowWarningsFilterContextKey,title:(0,a.NC)("warnings","Show Warnings")},menu:{id:ce.B,group:"1_filter",when:w.Ao.equals("view",l.s.MARKERS_VIEW_ID),order:2},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.filters.showWarnings=!e.filters.showWarnings})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.${l.s.MARKERS_VIEW_ID}.toggleInfos`,title:(0,a.NC)("toggle infos","Toggle Infos"),category:(0,a.NC)("problems","Problems"),toggled:{condition:l.G.ShowInfoFilterContextKey,title:(0,a.NC)("Infos","Show Infos")},menu:{id:ce.B,group:"1_filter",when:w.Ao.equals("view",l.s.MARKERS_VIEW_ID),order:3},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.filters.showInfos=!e.filters.showInfos})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.${l.s.MARKERS_VIEW_ID}.toggleActiveFile`,title:(0,a.NC)("toggle active file","Toggle Active File"),category:(0,a.NC)("problems","Problems"),toggled:{condition:l.G.ShowActiveFileFilterContextKey,title:(0,a.NC)("Active File","Show Active File Only")},menu:{id:ce.B,group:"2_filter",when:w.Ao.equals("view",l.s.MARKERS_VIEW_ID),order:1},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.filters.activeFile=!e.filters.activeFile})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.${l.s.MARKERS_VIEW_ID}.toggleExcludedFiles`,title:(0,a.NC)("toggle Excluded Files","Toggle Excluded Files"),category:(0,a.NC)("problems","Problems"),toggled:{condition:l.G.ShowExcludedFilesFilterContextKey,title:(0,a.NC)("Excluded Files","Hide Excluded Files")},menu:{id:ce.B,group:"2_filter",when:w.Ao.equals("view",l.s.MARKERS_VIEW_ID),order:2},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.filters.excludedFiles=!e.filters.excludedFiles})()}}),(0,k.r1)(class extends k.Ke{constructor(){super({id:"workbench.action.problems.focus",title:{value:v.MARKERS_PANEL_SHOW_LABEL,original:"Focus Problems (Errors, Warnings, Infos)"},category:Y.R.View,f1:!0})}run(s){return(0,R.Z)(function*(){s.get(W.qC).openView(l.s.MARKERS_VIEW_ID,!0)})()}}),(0,k.r1)(class extends L.Nx{constructor(){const s=w.Ao.and(fe.PY.isEqualTo(l.s.MARKERS_VIEW_ID),l.G.MarkersTreeVisibilityContextKey,l.G.RelatedInformationFocusContextKey.toNegated());super({id:l.s.MARKER_COPY_ACTION_ID,title:{value:(0,a.NC)("copyMarker","Copy"),original:"Copy"},menu:{id:k.eH.ProblemsPanelContext,when:s,group:"navigation"},keybinding:{weight:200,primary:2081,when:s},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){const t=s.get(Pe.p),r=e.getFocusedSelectedElements()||e.getAllResourceMarkers(),i=[],o=h=>{i.includes(h)||i.push(h)};for(const h of r)h instanceof f?h.markers.forEach(o):h instanceof m&&o(h);i.length&&(yield t.writeText(`[${i}]`))})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.MARKER_COPY_MESSAGE_ACTION_ID,title:{value:(0,a.NC)("copyMessage","Copy Message"),original:"Copy Message"},menu:{id:k.eH.ProblemsPanelContext,when:l.G.MarkerFocusContextKey,group:"navigation"},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){const t=s.get(Pe.p),r=e.getFocusElement();r instanceof m&&(yield t.writeText(r.marker.message))})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.RELATED_INFORMATION_COPY_MESSAGE_ACTION_ID,title:{value:(0,a.NC)("copyMessage","Copy Message"),original:"Copy Message"},menu:{id:k.eH.ProblemsPanelContext,when:l.G.RelatedInformationFocusContextKey,group:"navigation"},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){const t=s.get(Pe.p),r=e.getFocusElement();r instanceof D&&(yield t.writeText(r.raw.message))})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.FOCUS_PROBLEMS_FROM_FILTER,title:(0,a.NC)("focusProblemsList","Focus problems view"),keybinding:{when:l.G.MarkerViewFilterFocusContextKey,weight:200,primary:2066},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.focus()})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.MARKERS_VIEW_FOCUS_FILTER,title:(0,a.NC)("focusProblemsFilter","Focus problems filter"),keybinding:{when:fe.PY.isEqualTo(l.s.MARKERS_VIEW_ID),weight:200,primary:2084},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.focusFilter()})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.MARKERS_VIEW_SHOW_MULTILINE_MESSAGE,title:{value:(0,a.NC)("show multiline","Show message in multiple lines"),original:"Problems: Show message in multiple lines"},category:(0,a.NC)("problems","Problems"),menu:{id:k.eH.CommandPalette,when:w.Ao.has((0,fe.yd)(l.s.MARKERS_VIEW_ID))},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.setMultiline(!0)})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.MARKERS_VIEW_SHOW_SINGLELINE_MESSAGE,title:{value:(0,a.NC)("show singleline","Show message in single line"),original:"Problems: Show message in single line"},category:(0,a.NC)("problems","Problems"),menu:{id:k.eH.CommandPalette,when:w.Ao.has((0,fe.yd)(l.s.MARKERS_VIEW_ID))},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.setMultiline(!1)})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:l.s.MARKERS_VIEW_CLEAR_FILTER_TEXT,title:(0,a.NC)("clearFiltersText","Clear filters text"),category:(0,a.NC)("problems","Problems"),keybinding:{when:l.G.MarkerViewFilterFocusContextKey,weight:200,primary:9},viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){e.clearFilterText()})()}}),(0,k.r1)(class extends L.Nx{constructor(){super({id:`workbench.actions.treeView.${l.s.MARKERS_VIEW_ID}.collapseAll`,title:(0,a.NC)("collapseAll","Collapse All"),menu:{id:k.eH.ViewTitle,when:w.Ao.and(w.Ao.equals("view",l.s.MARKERS_VIEW_ID),l.G.MarkersViewModeContextKey.isEqualTo("tree")),group:"navigation",order:2},icon:X.lA.collapseAll,viewId:l.s.MARKERS_VIEW_ID})}runInView(s,e){return(0,R.Z)(function*(){return e.collapseAll()})()}}),(0,k.r1)(class extends k.Ke{constructor(){super({id:l.s.TOGGLE_MARKERS_VIEW_ACTION_ID,title:v.MARKERS_PANEL_TOGGLE_LABEL})}run(s){return(0,R.Z)(function*(){const e=s.get(W.qC);e.isViewVisible(l.s.MARKERS_VIEW_ID)?e.closeView(l.s.MARKERS_VIEW_ID):e.openView(l.s.MARKERS_VIEW_ID,!0)})()}});let Oe=class extends I.JT{constructor(e,t){super(),this.markerService=e,this.statusbarService=t,this.markersStatusItem=this._register(this.statusbarService.addEntry(this.getMarkersItem(),"status.problems",0,50)),this.markerService.onMarkerChanged(()=>this.markersStatusItem.update(this.getMarkersItem()))}getMarkersItem(){const e=this.markerService.getStatistics(),t=this.getMarkersTooltip(e);return{name:(0,a.NC)("status.problems","Problems"),text:this.getMarkersText(e),ariaLabel:t,tooltip:t,command:"workbench.actions.view.toggleProblems"}}getMarkersTooltip(e){const o=[];return e.errors>0&&o.push((0,a.NC)("totalErrors","Errors: {0}",e.errors)),e.warnings>0&&o.push((0,a.NC)("totalWarnings","Warnings: {0}",e.warnings)),e.infos>0&&o.push((h=>(0,a.NC)("totalInfos","Infos: {0}",h))(e.infos)),0===o.length?(0,a.NC)("noProblems","No Problems"):o.join(", ")}getMarkersText(e){const t=[];return t.push("$(error) "+this.packNumber(e.errors)),t.push("$(warning) "+this.packNumber(e.warnings)),e.infos>0&&t.push("$(info) "+this.packNumber(e.infos)),t.join(" ")}packNumber(e){const t=(0,a.NC)("manyProblems","10K+");return e>9999?t:e>999?e.toString().charAt(0)+"K":e.toString()}};Oe=(0,d.gn)([(0,d.fM)(0,b.lT),(0,d.fM)(1,Kt.iq)],Oe),ct.registerWorkbenchContribution(Oe,3);let Ve=class extends I.JT{constructor(e,t){super(),this.activityService=e,this.markerService=t,this.activity=this._register(new I.XK),this._register(this.markerService.onMarkerChanged(()=>this.updateBadge())),this.updateBadge()}updateBadge(){const{errors:e,warnings:t,infos:r}=this.markerService.getStatistics(),i=e+t+r,o=(0,a.NC)("totalProblems","Total {0} Problems",i);this.activity.value=this.activityService.showViewActivity(l.s.MARKERS_VIEW_ID,{badge:new at.mA(i,()=>o)})}};function Ht(){return{}}Ve=(0,d.gn)([(0,d.fM)(0,at.By),(0,d.fM)(1,b.lT)],Ve),ct.registerWorkbenchContribution(Ve,3)},70661:(mt,he,n)=>{n.d(he,{rv:()=>V,th:()=>Z});var K=n(55885),R=n(55459),d=n(54239),w=n(13683),pe=n(53091),Y=n(6418),x=n(66179),a=n(82344),C=n(12997),ee=n(70473),b=n(49311),G=n(16342),te=n(73317),S=n(36774),Ee=n(76972),J=n(48698);let V=class We extends C.JT{constructor(f){super(),this.editorService=f,this._onHighlightRemoved=this._register(new w.Q5),this.onHighlightRemoved=this._onHighlightRemoved.event,this.rangeHighlightDecorationId=null,this.editor=null,this.editorDisposables=this._register(new C.SL)}removeHighlightRange(){if(this.editor&&this.rangeHighlightDecorationId){const f=this.rangeHighlightDecorationId;this.editor.changeDecorations(m=>{m.removeDecoration(f)}),this._onHighlightRemoved.fire()}this.rangeHighlightDecorationId=null}highlightRange(f,m){m=m??this.getEditor(f),(0,d.CL)(m)?this.doHighlightRange(m,f):(0,d.sd)(m)&&(0,d.CL)(m.activeCodeEditor)&&this.doHighlightRange(m.activeCodeEditor,f)}doHighlightRange(f,m){this.removeHighlightRange(),f.changeDecorations(F=>{this.rangeHighlightDecorationId=F.addDecoration(m.range,this.createRangeHighlightDecoration(m.isWholeLine))}),this.setEditor(f)}getEditor(f){const m=this.editorService.activeEditor?.resource;if(m&&(0,ee.Xy)(m,f.resource)&&(0,d.CL)(this.editorService.activeTextEditorControl))return this.editorService.activeTextEditorControl}setEditor(f){this.editor!==f&&(this.editorDisposables.clear(),this.editor=f,this.editorDisposables.add(this.editor.onDidChangeCursorPosition(m=>{(0===m.reason||3===m.reason||5===m.reason||6===m.reason)&&this.removeHighlightRange()})),this.editorDisposables.add(this.editor.onDidChangeModel(()=>{this.removeHighlightRange()})),this.editorDisposables.add(this.editor.onDidDispose(()=>{this.removeHighlightRange(),this.editor=null})))}createRangeHighlightDecoration(f=!0){return f?We._WHOLE_LINE_RANGE_HIGHLIGHT:We._RANGE_HIGHLIGHT}dispose(){super.dispose(),this.editor?.getModel()&&(this.removeHighlightRange(),this.editor=null)}};V._WHOLE_LINE_RANGE_HIGHLIGHT=G.qx.register({description:"codeeditor-range-highlight-whole",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),V._RANGE_HIGHLIGHT=G.qx.register({description:"codeeditor-range-highlight",stickiness:1,className:"rangeHighlight"}),V=(0,K.gn)([(0,K.fM)(0,b.AR)],V);let $=class extends R.${constructor(f,m,F,D){if(super(),this.editor=f,this.label=m,this._onClick=this._register(new w.Q5),this.onClick=this._onClick.event,this._domNode=(0,Y.$)(".floating-click-widget"),this._domNode.style.padding="6px 11px",this._domNode.style.borderRadius="2px",this._domNode.style.cursor="pointer",F){const B=D.lookupKeybinding(F);B&&(this.label+=` (${B.getLabel()})`)}}getId(){return"editor.overlayWidget.floatingClickWidget"}getDomNode(){return this._domNode}getPosition(){return{preference:1}}render(){(0,Y.PO)(this._domNode),this._domNode.style.backgroundColor=(0,x.BtC)(x.b7$,(0,x.n_1)(x.cvW)),this._domNode.style.color=(0,x.BtC)(x.j5u,(0,x.n_1)(x.NOs)),this._domNode.style.border=`1px solid ${(0,x.n_1)(x.lRK)}`,(0,Y.R3)(this._domNode,(0,Y.$)("")).textContent=this.label,this.onclick(this._domNode,f=>this._onClick.fire()),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}};$=(0,K.gn)([(0,K.fM)(3,pe.d)],$);let Z=class extends C.JT{constructor(f,m,F,D){if(super(),!(f instanceof J.H)){const B=F.createMenu(te.eH.EditorContent,D),j=new C.SL,de=()=>{if(j.clear(),!f.hasModel()||f.getOption(59))return;const c=[];if((0,S.vr)(B,{renderShortTitle:!0,shouldForwardArgs:!0},c),0===c.length)return;const[H]=c,re=m.createInstance($,f,H.label,H.id);j.add(re),j.add(re.onClick(()=>H.run(f.getModel().uri))),re.render()};this._store.add(B),this._store.add(j),this._store.add(B.onDidChange(de)),de()}}};Z.ID="editor.contrib.floatingClickMenu",Z=(0,K.gn)([(0,K.fM)(1,a.TG),(0,K.fM)(2,te.co),(0,K.fM)(3,Ee.i6)],Z)}}]);