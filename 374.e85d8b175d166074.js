(()=>{"use strict";var r,w={56374:(r,g,i)=>{var p=i(77737),c=i(52745);console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",v=>{const f=v.data.compile;if(f){const m=(0,c.V3)(f).resolve(new p._8([])).toString("js");self.postMessage({compiled:m})}})},25447:(r,g,i)=>{i.d(g,{YN:()=>S,_w:()=>k,d2:()=>$,dm:()=>l,eB:()=>m,gN:()=>j,n$:()=>b,v_:()=>y,wT:()=>h});var p=i(84260),c=i(667),v=i(9290),f=i(27426);class m extends c.NB{constructor(t,e){super("unit"),this.path=t,this.classes=e,this.diagnostics=[]}report(t){this.diagnostics.push(t)}resolve(t){const e={[m.enclosing]:this};for(const o of this.classes)e[o.name]=o;return super.resolve(new v._(e,t))}toString(t){return this.classes.map(e=>e.toString(t)).join("\n\n")}}m.enclosing=Symbol("enclosing compilation unit");class a extends c.NB{constructor(t,e){super(t),this.name=e,this._references=[]}documentation(){return this.doc}references(){return[this.location,...this._references.map(t=>t.location)]}}class h extends a{constructor(t,e=[],o=[],_=[]){super("class",t),this.fields=e,this.constructors=o,this.methods=_}asType(){const t=new f.rF(this.name);return t._class=this,t}asCompletion(){return{label:this.name,kind:"class"}}toString(t){return c.$S`
    class ${this.name} {
      ${this.fields.map(e=>e.toString(t)).join("\n")}

      ${this.constructors.map(e=>e.toString(t)).join("\n\n")}

      ${this.methods.map(e=>e.toString(t)).join("\n\n")}
    }`}lookup(t,e,...o){for(const _ of this.fields)if(_.name===t&&_ instanceof e)return _;for(const _ of this.methods)if(_.name===t&&_ instanceof e&&_.overloads(o[0]))return _;for(const _ of this.constructors)if(_ instanceof e&&_.overloads(o[0]))return _}list(){return[...this.fields,...this.methods]}resolve(t){const e=new v._({[h.enclosing]:this},t);super.resolve(e);for(const o of this.fields)this.fields.some(_=>_!==o&&_.name===o.name)&&(0,p.Hj)(t,o.location,`duplicate field ${o.name}`);for(const o of this.methods)this.methods.some(_=>_!==o&&_.jsName===o.jsName)&&(0,p.Hj)(t,o.location,`duplicate method ${o.name} with mangled name ${o.jsName}`);return this}}h.enclosing=Symbol("enclosing class");class l extends c.NB{constructor(t){super("class-completion"),this.name=t}toString(t){return this.name}resolve(t){return(0,p.Hk)(t,this.location,this.name,{extra:n.map(e=>({kind:"keyword",label:e.keyword,snippet:e.snippet}))}),super.resolve(t)}}class u extends a{constructor(t,e,o,_){super(t,e),this.parameters=o,this.body=_}resolve(t){this._thisClass||(this._thisClass=t.lookup(h.enclosing,h)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new $("this",this._thisClass.asType()),this._thisParameter.location=this.location);const e=new v._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,t);return super.resolve(e)}overloads(t){return t.length===this.parameters.length&&this.parameters.every((e,o)=>(0,f.BM)(e.type,t[o]))}}let y=(()=>{class s extends u{constructor(e=[],o){super("constructor","init",e,o)}toString(e){return`${"js"===e?"constructor":"init"}(${this.parameters.map(o=>o.toString(e)).join(", ")}) ${this.body.toString(e)}`}documentation(){return this.parameters.length?c.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(e=>"- "+e.documentation()).join("\n")}
    `:this.doc}references(e){return"rename"===e?[]:super.references()}}return s.keyword="init",s.snippet="init(${1:parameters...}) {\n  ${2:statements...}\n}",s})(),j=(()=>{class s extends a{constructor(e,o,_){super("field",e),this.type=o,this.value=_}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(e){return"js"===e?c.$S`
      _${this.name}${this.value?" = "+this.value.toString(e):""};

      get ${this.name}() {
        return this._${this.name};
      }

      set ${this.name}(value) {
        this._${this.name} = value;
      }`:`var ${this.name}: ${this.type.toString(e)}${this.value?" = "+this.value.toString(e):""}`}}return s.keyword="var",s.snippet="var ${1:name}: ${2:type} = ${3:value}",s})(),b=(()=>{class s extends u{constructor(e,o=[],_,T){super("method",e,o,T),this.returnType=_}get jsName(){return this.name+this.parameters.map(e=>"_"+e.name).join("")}asCompletion(){return{label:this.name,kind:"field",signature:`(${this.parameters.map(e=>e.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((e,o)=>`\${${o}:${e.name}}`).join(", ")})`}}documentation(){let e=this.doc||"";return this.parameters.length&&(e+="\n#### Parameters\n"+this.parameters.map(o=>"- "+o.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(e+="\n#### Returns\n`"+this.returnType.toString()+"`"),e}toString(e){return`${"js"!==e?"func "+this.name:this.jsName}(${this.parameters.map(o=>o.toString(e)).join(", ")})${"js"!==e?": "+this.returnType.toString(e):""} ${this.body.toString(e)}`}}return s.keyword="func",s.snippet="func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}",s})();class S extends a{constructor(t,e,o){super(t,e),this.type=o}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(t){return`${this.name}${this.type?": "+this.type.toString(t):""}`}}class $ extends S{constructor(t,e){super("parameter",t,e)}references(t){return"rename"===t&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(t){return"js"===t?this.name:super.toString(t)}}class k extends S{constructor(t,e,o){super("variable",t,e),this.value=o}documentation(){var t;return`\`var ${this.name}: ${null===(t=this.type)||void 0===t?void 0:t.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(t){return"js"===t?`let ${this.name} = ${this.value.toString(t)}`:`var ${this.name}${this.type?": "+this.type.toString(t):""} = ${this.value.toString(t)}`}resolve(t){const e=super.resolve(t);return e.type||(e.type=e.value.getType()),e}}const n=[b,y,j]},77737:(r,g,i)=>{i.d(g,{_C:()=>j,gO:()=>$.gO,wT:()=>p.wT,dm:()=>p.dm,rF:()=>f.rF,eB:()=>p.eB,on:()=>$.on,v_:()=>p.v_,R9:()=>c.R9,WJ:()=>$.WJ,K9:()=>$.K9,gN:()=>p.gN,lX:()=>l,rX:()=>$.rX,t$:()=>a,n$:()=>p.n$,o6:()=>y,d2:()=>p.d2,ZJ:()=>b,Ly:()=>c.Ly,MX:()=>f.MX,jR:()=>u,e6:()=>c.e6,_8:()=>S._,sj:()=>$.sj,_w:()=>p._w,sW:()=>h,UX:()=>$.UX});var p=i(25447),c=i(84260),v=i(667),f=i(27426);class m extends v.NB{constructor(n){super(`expr:${n}`)}getType(){throw new Error(`${this.constructor.name}.getType not implemented`)}}class a extends m{constructor(n){super("literal"),this.representation=n}toString(){return this.representation}getType(){switch(this.representation.charAt(0)){case'"':return new f.MX("string");case"t":case"f":return new f.MX("boolean");default:return new f.MX("int")}}}class h extends m{constructor(n){super("variable"),this.name=n}toString(){return this.name}definition(){return this._variable}resolve(n){var s;return(0,c.Hk)(n,this.location,this.name)||this._variable||(this._variable||(this._variable=n.lookup(this.name,p.YN)||(0,c.Hj)(n,this.location,`variable ${this.name} not found`)),null===(s=this._variable)||void 0===s||s._references.push(this)),this}getType(){var n,s;return null!==(s=null===(n=this._variable)||void 0===n?void 0:n.type)&&void 0!==s?s:f.NI}}class l extends m{constructor(n,s){super("functionCall"),this.name=n,this.args=s}toString(n){return`${this.name}(${this.args.map(s=>s.toString(n)).join(", ")})`}definition(n){var s;return"rename"===n?null===(s=this._constructor)||void 0===s?void 0:s._thisClass:this._constructor}resolve(n){if(this.args=this.args.map(s=>s.resolve(n)),!this._constructor){const s=n.lookup(this.name,p.wT);if(s){const t=this.args.map(o=>o.getType()),e=s.lookup("init",p.v_,t);e?(this._constructor=e,e._references.push(this),s._references.push(this)):(0,c.Hj)(n,this.location,`constructor ${this.name}(${t.join(", ")}) not found`)}else(0,c.Hj)(n,this.location,`class or function ${this.name} not found`)}return this}getType(){var n,s,t;return null!==(t=null===(s=null===(n=this._constructor)||void 0===n?void 0:n._thisClass)||void 0===s?void 0:s.asType())&&void 0!==t?t:f.NI}}class u extends m{constructor(n,s){super("propertyAccess"),this.object=n,this.property=s}toString(n){return`${this.object.toString(n)}.${this.property}`}definition(){return this._field}resolve(n){var s;this.object=this.object.resolve(n);const t=this.object.getType();return(0,c.Hk)(n,this.location,this.property,{lookup:t})||this._field||(this._field||(this._field=t.lookup(this.property,p.gN)||(0,c.Hj)(n,this.location,`field ${this.property} not found on ${t}`)),null===(s=this._field)||void 0===s||s._references.push(this)),this}getType(){var n;return(null===(n=this._field)||void 0===n?void 0:n.type)||f.NI}}class y extends m{constructor(n,s,t){super("methodCall"),this.object=n,this.method=s,this.args=t}definition(){return this._method}toString(n){const s=this._method&&"js"===n?this._method.jsName:this.method;return`${this.object.toString(n)}.${s}(${this.args.map(t=>t.toString(n)).join(", ")})`}resolve(n){var s;if(this.object=this.object.resolve(n),this.args=this.args.map(t=>t.resolve(n)),!this._method){const t=this.object.getType(),e=this.args.map(o=>o.getType());this._method||(this._method=t.lookup(this.method,p.n$,e)||(0,c.Hj)(n,this.location,`method ${this.method} not found on ${t}`)),null===(s=this._method)||void 0===s||s._references.push(this)}return this}}class j extends m{constructor(n,s,t){super("binary"),this.lhs=n,this.operator=s,this.rhs=t}toString(n){return`${this.lhs.toString(n)} ${this.operator} ${this.rhs.toString(n)}`}getType(){switch(this.operator){case"+":const n=this.lhs.getType(),s=this.rhs.getType();return"type:primitive"===n.kind&&"string"===n.name?n:"type:primitive"===s.kind&&"string"===s.name?s:new f.MX("int");case"&&":case"||":case"==":case"!=":case"<":case"<=":case">":case">=":return new f.MX("boolean");case"-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"&":case"|":case"^":return new f.MX("int");default:return f.NI}}}class b extends m{constructor(n){super("parenthesized"),this.expression=n}toString(n){return`(${this.expression.toString(n)})`}getType(){return this.expression.getType()}}var S=i(9290),$=i(43418)},84260:(r,g,i)=>{i.d(g,{Hj:()=>a,Hk:()=>h,Ly:()=>c,R9:()=>f,e6:()=>v});var p=i(25447);class c{constructor(u,y){this.line=u,this.column=y}}class v{constructor(u,y){this.start=u,this.end=y}includes(u){return this.start.line<=u.line&&this.start.column<=u.column&&u.line<=this.end.line&&u.column<=this.end.column}}class f{constructor(u,y,j,b="error",S){if(this.path=u,this.location=y,this.message=j,this.severity=b,this.expected=S,!y)throw new Error("location is required")}}function a(l,u,y,j="error",b){const S=l.lookup(p.eB.enclosing,p.eB),$=new f(void 0,u,y,j,b);S?S.report($):function m(l){const{path:u,location:{start:{line:y,column:j}},message:b,severity:S}=l;switch(S){case"error":console.error(`${u}:${y}:${j}: error: ${b}`);break;case"warning":console.warn(`${u}:${y}:${j}: warning: ${b}`);break;case"note":console.info(`${u}:${y}:${j}: note: ${b}`)}if(l.expected)for(let $ of l.expected)console.log(`- [${$.kind}] ${$.label} ${$.signature||""} - ${$.description||""}`)}($)}function h(l,u,y,{lookup:j,kind:b,extra:S}={}){if(!y.includes("\xa7"))return!1;const $=y.slice(0,-1),k=(j||l).list().filter(s=>"name"in s).filter(s=>!b||s.kind===b).map(s=>"asCompletion"in s?s.asCompletion():{kind:s.kind,label:s.name});return a(l,u,"input '\xa7' expecting","error",(S?[...k,...S]:k).filter(s=>s.label.startsWith($))),!0}},667:(r,g,i)=>{i.d(g,{$S:()=>f,NB:()=>p});class p{constructor(a){this.kind=a}definition(a){}documentation(){var a;return null===(a=this.definition())||void 0===a?void 0:a.documentation()}references(a){var h;return(null===(h=this.definition(a))||void 0===h?void 0:h.references(a))||[]}resolve(a){return c(this,h=>h.resolve(a)),this}findByPosition(a){var h;let l;return c(this,u=>(l||(l=u.findByPosition(a)),u)),l?[this,...l]:null!==(h=this.location)&&void 0!==h&&h.includes(a)?[this]:void 0}toString(a){return this.kind}}function c(m,a){for(const[h,l]of Object.entries(m))if("location"!==h&&"kind"!==h&&!h.startsWith("_")&&l)if(Array.isArray(l))for(let u=0;u<l.length;u++)l[u]instanceof p&&(l[u]=a(l[u]));else l instanceof p&&(m[h]=a(l))}function f(m,...a){if(!m[0].startsWith("\n"))throw new Error("must start with a newline");const h=m[0].match(/^\n([ \t]*)/)[1];return m.map((l,u)=>{var y;0===u&&(l=l.substring(1+h.length));const b=(l=l.replace(new RegExp("^"+h,"gm"),"")).substring(l.lastIndexOf("\n")+1).match(/^\s*/)[0];return l+(null!==(y=a[u])&&void 0!==y?y:"").toString().replace(/\n/g,`\n${b}`)}).join("")}}},x={};function d(r){var g=x[r];if(void 0!==g)return g.exports;var i=x[r]={exports:{}};return w[r].call(i.exports,i,i.exports,d),i.exports}d.m=w,d.x=()=>{var r=d.O(void 0,[2],()=>d(56374));return d.O(r)},r=[],d.O=(g,i,p,c)=>{if(!i){var f=1/0;for(v=0;v<r.length;v++){for(var[i,p,c]=r[v],m=!0,a=0;a<i.length;a++)(!1&c||f>=c)&&Object.keys(d.O).every(b=>d.O[b](i[a]))?i.splice(a--,1):(m=!1,c<f&&(f=c));if(m){r.splice(v--,1);var h=p();void 0!==h&&(g=h)}}return g}c=c||0;for(var v=r.length;v>0&&r[v-1][2]>c;v--)r[v]=r[v-1];r[v]=[i,p,c]},d.d=(r,g)=>{for(var i in g)d.o(g,i)&&!d.o(r,i)&&Object.defineProperty(r,i,{enumerable:!0,get:g[i]})},d.f={},d.e=r=>Promise.all(Object.keys(d.f).reduce((g,i)=>(d.f[i](r,g),g),[])),d.u=r=>r+".98f25c82a7c4b2ac.js",d.miniCssF=r=>{},d.o=(r,g)=>Object.prototype.hasOwnProperty.call(r,g),(()=>{var r;d.tt=()=>(void 0===r&&(r={createScriptURL:g=>g},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(r=trustedTypes.createPolicy("angular#bundler",r))),r)})(),d.tu=r=>d.tt().createScriptURL(r),d.p="",(()=>{var r={374:1};d.f.i=(c,v)=>{r[c]||importScripts(d.tu(d.p+d.u(c)))};var i=self.webpackChunkweb=self.webpackChunkweb||[],p=i.push.bind(i);i.push=c=>{var[v,f,m]=c;for(var a in f)d.o(f,a)&&(d.m[a]=f[a]);for(m&&m(d);v.length;)r[v.pop()]=1;p(c)}})(),(()=>{var r=d.x;d.x=()=>d.e(2).then(r)})(),d.x()})();