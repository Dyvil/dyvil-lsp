(()=>{"use strict";var W,fe={92271:(W,s,y)=>{var t=y(40426),S=y(13919),O=y(11724),a=y(29966),h=y(4481),p=y(55470);function i(c){return{start:_(c.start),end:_(c.end)}}function _(c){return{line:c.line-1,character:c.column-1}}function u(c){return new h.e6(l(c.start),l(c.end))}function l(c){return{line:c.line+1,column:c.character+1}}const D=Object.values(S.SemanticTokenTypes),F=Object.values(S.SemanticTokenModifiers);class N{constructor(n,e){this.documentService=e,n.connection.languages.semanticTokens.on(o=>this.provideSemanticTokens(o)),n.connection.languages.semanticTokens.onRange(o=>this.provideSemanticTokensRange(o))}provideSemanticTokens(n){const e=this.documentService.getAST(n.textDocument.uri);return e?this.collectSemanticTokens(e):{data:[]}}collectSemanticTokens(n){const e=new $;for(const o of(0,O.NR)(n))switch(o.kind){case"class":e.addNode(o.location,S.SemanticTokenTypes.class);break;case"field":case"expr:propertyAccess":e.addNode(o.location,S.SemanticTokenTypes.property);break;case"method":case"expr:methodCall":case"expr:functionCall":e.addNode(o.location,o instanceof O.lX&&o._constructor?S.SemanticTokenTypes.class:S.SemanticTokenTypes.method);break;case"parameter":e.addNode(o.location,S.SemanticTokenTypes.parameter);break;case"variable":e.addNode(o.location,S.SemanticTokenTypes.variable);break;case"expr:variable":e.addNode(o.location,o instanceof O.sW&&o._variable instanceof O.d2?S.SemanticTokenTypes.parameter:S.SemanticTokenTypes.variable)}return{data:e.data}}provideSemanticTokensRange(n){const e=this.documentService.getAST(n.textDocument.uri);if(!e)return{data:[]};const o=e.findEnclosing(u(n.range));return o?this.collectSemanticTokens(o):{data:[]}}}class ${constructor(){this.data=[],this.prevLine=0,this.prevChar=0}addNode(n,e,o=[]){const R=D.indexOf(e),x=o.map(M=>F.indexOf(M)).reduce((M,m)=>M|1<<m,0),C=n.start.line-1,r=n.start.column-1;this.data.push(C-this.prevLine,r-(C===this.prevLine?this.prevChar:0),n.end.column-n.start.column,R,x),this.prevLine=C,this.prevChar=r}}class w{constructor(n){this.connection=n,n.onInitialize(e=>{var o,R,x,C;const P=e.capabilities;this.hasConfigurationCapability=!(null===(o=P.workspace)||void 0===o||!o.configuration),this.hasWorkspaceFolderCapability=!(null===(R=P.workspace)||void 0===R||!R.workspaceFolders),this.hasDiagnosticRelatedInformationCapability=!(null===(C=null===(x=P.textDocument)||void 0===x?void 0:x.publishDiagnostics)||void 0===C||!C.relatedInformation);const r={capabilities:{textDocumentSync:t.TextDocumentSyncKind.Incremental,completionProvider:{triggerCharacters:["."]},renameProvider:{prepareProvider:!0},referencesProvider:!0,definitionProvider:!0,typeDefinitionProvider:!0,hoverProvider:!0,documentHighlightProvider:!0,documentSymbolProvider:!0,documentFormattingProvider:!0,documentRangeFormattingProvider:!0,codeActionProvider:!0,inlayHintProvider:!0,semanticTokensProvider:{legend:{tokenTypes:D,tokenModifiers:F},full:!0,range:!0}}};return this.hasWorkspaceFolderCapability&&(r.capabilities.workspace={workspaceFolders:{supported:!0}}),r}),n.onInitialized(()=>{this.hasConfigurationCapability&&n.client.register(t.DidChangeConfigurationNotification.type,void 0)})}}class j{constructor(n,e,o,R){this._uri=n,this._languageId=e,this._version=o,this._content=R,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(n){if(n){const e=this.offsetAt(n.start),o=this.offsetAt(n.end);return this._content.substring(e,o)}return this._content}update(n,e){for(let o of n)if(j.isIncremental(o)){const R=v(o.range),x=this.offsetAt(R.start),C=this.offsetAt(R.end);this._content=this._content.substring(0,x)+o.text+this._content.substring(C,this._content.length);const P=Math.max(R.start.line,0),r=Math.max(R.end.line,0);let f=this._lineOffsets;const M=K(o.text,!1,x);if(r-P===M.length)for(let B=0,G=M.length;B<G;B++)f[B+P+1]=M[B];else M.length<1e4?f.splice(P+1,r-P,...M):this._lineOffsets=f=f.slice(0,P+1).concat(M,f.slice(r+1));const m=o.text.length-(C-x);if(0!==m)for(let B=P+1+M.length,G=f.length;B<G;B++)f[B]=f[B]+m}else{if(!j.isFull(o))throw new Error("Unknown change event received");this._content=o.text,this._lineOffsets=void 0}this._version=e}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=K(this._content,!0)),this._lineOffsets}positionAt(n){n=Math.max(Math.min(n,this._content.length),0);let e=this.getLineOffsets(),o=0,R=e.length;if(0===R)return{line:0,character:n};for(;o<R;){let C=Math.floor((o+R)/2);e[C]>n?R=C:o=C+1}let x=o-1;return{line:x,character:n-e[x]}}offsetAt(n){let e=this.getLineOffsets();if(n.line>=e.length)return this._content.length;if(n.line<0)return 0;let o=e[n.line];return Math.max(Math.min(o+n.character,n.line+1<e.length?e[n.line+1]:this._content.length),o)}get lineCount(){return this.getLineOffsets().length}static isIncremental(n){return null!=n&&"string"==typeof n.text&&void 0!==n.range&&(void 0===n.rangeLength||"number"==typeof n.rangeLength)}static isFull(n){return null!=n&&"string"==typeof n.text&&void 0===n.range&&void 0===n.rangeLength}}var I,c;function X(c,n){if(c.length<=1)return c;const e=c.length/2|0,o=c.slice(0,e),R=c.slice(e);X(o,n),X(R,n);let x=0,C=0,P=0;for(;x<o.length&&C<R.length;)n(o[x],R[C])<=0?c[P++]=o[x++]:c[P++]=R[C++];for(;x<o.length;)c[P++]=o[x++];for(;C<R.length;)c[P++]=R[C++];return c}function K(c,n,e=0){const o=n?[e]:[];for(let R=0;R<c.length;R++){let x=c.charCodeAt(R);(13===x||10===x)&&(13===x&&R+1<c.length&&10===c.charCodeAt(R+1)&&R++,o.push(e+R+1))}return o}function v(c){const n=c.start,e=c.end;return n.line>e.line||n.line===e.line&&n.character>e.character?{start:e,end:n}:c}function E(c){const n=v(c.range);return n!==c.range?{newText:c.newText,range:n}:c}(c=I||(I={})).create=function n(R,x,C,P){return new j(R,x,C,P)},c.update=function e(R,x,C){if(R instanceof j)return R.update(x,C),R;throw new Error("TextDocument.update: document must be created by TextDocument.create")},c.applyEdits=function o(R,x){let C=R.getText(),P=X(x.map(E),(M,m)=>{let B=M.range.start.line-m.range.start.line;return 0===B?M.range.start.character-m.range.start.character:B}),r=0;const f=[];for(const M of P){let m=R.offsetAt(M.range.start);if(m<r)throw new Error("Overlapping edit");m>r&&f.push(C.substring(r,m)),M.newText.length&&f.push(M.newText),r=R.offsetAt(M.range.end)}return f.push(C.substr(r)),f.join("")};class A{constructor(n){this.connectionService=n,this.documents=new t.TextDocuments(I),this.astCache=new Map,this.documents.listen(this.connectionService.connection),this.documents.onDidChangeContent(e=>{this.astCache.has(e.document.uri)&&this.astCache.delete(e.document.uri)})}getAST(n){const e="string"==typeof n?n:n.uri,o=this.astCache.get(e);if(o)return o;const R="string"==typeof n?this.documents.get(e):n;if(!R)return;const x=(0,a.V3)(R.getText(),{path:e,comments:!0}).resolve(new p._([]));return x.link(),x.lint(new p._([])),x}}function H(c){switch(c){case"keyword":return t.CompletionItemKind.Keyword;case"operator":return t.CompletionItemKind.Operator;case"class":return t.CompletionItemKind.Class;case"field":return t.CompletionItemKind.Field;case"method":return t.CompletionItemKind.Method;case"variable":case"parameter":return t.CompletionItemKind.Variable;default:return t.CompletionItemKind.Text}}class z{constructor(n,e){this.connectionService=n,this.documentService=e,this.connectionService.connection.onCompletion(o=>this.provideCompletionItems(o))}provideCompletionItems(n){const o=this.documentService.documents.get(n.textDocument.uri);if(!o)return[];const R=o.getText({start:{line:0,character:0},end:n.position}),x=o.getText({start:n.position,end:{line:o.lineCount,character:0}}),P=(0,a.V3)(`${R}\xa7${x}`,{completion:!0}).resolve(new p._([])).diagnostics.find(r=>r.expected);return P&&P.expected?P.expected.map(r=>({kind:H(r.kind),label:r.label,labelDetails:{detail:r.signature,description:r.description},insertText:r.snippet,insertTextFormat:r.snippet?t.InsertTextFormat.Snippet:void 0})):[]}}class U{constructor(n,e){this.connectionService=n,this.documentService=e,this.connectionService.connection.onPrepareRename(o=>this.prepareRename(o)),this.connectionService.connection.onRenameRequest(o=>this.rename(o)),this.connectionService.connection.onTypeDefinition(o=>this.typeDefinition(o)),this.connectionService.connection.onReferences(o=>this.references(o)),this.connectionService.connection.onDefinition(o=>this.definition(o)),this.connectionService.connection.onHover(o=>this.hover(o)),this.connectionService.connection.onDocumentHighlight(o=>this.highlight(o))}prepareRename(n){const e=this.findNode(n);if(!e)return;const o=e.references("rename");return o&&o.length?i(e.location):void 0}rename(n){var e,o,R,x;const C=null===(e=this.findNode(n))||void 0===e?void 0:e.references("rename");if(!C||!C.length)return;const P={changes:{}};for(const r of C){const f=null===(o=r.compilationUnit())||void 0===o?void 0:o.path;f&&(null!==(R=(x=P.changes)[f])&&void 0!==R?R:x[f]=[]).push({range:i(r.location),newText:n.newName})}return P}references(n){var e;const o=null===(e=this.findNode(n))||void 0===e?void 0:e.references("definition");if(o&&o.length)return!n.context.includeDeclaration&&o.length&&o.shift(),o.map(R=>{var x,C;return{uri:null!==(C=null===(x=R.compilationUnit())||void 0===x?void 0:x.path)&&void 0!==C?C:"",range:i(R.location)}})}definition(n){var e,o;const R=null===(e=this.findNode(n))||void 0===e?void 0:e.references("definition");if(!R||!R.length)return;const x=null===(o=R[0].compilationUnit())||void 0===o?void 0:o.path;return x?{uri:x,range:i(R[0].location)}:void 0}typeDefinition(n){const e=this.findNode(n);if(!e)return;const o="type"in e?e.type:"getType"in e&&"function"==typeof e.getType?e.getType():void 0;return o instanceof O.NB&&o.location?{uri:n.textDocument.uri,range:i(o.location)}:void 0}hover(n){var e;const o=null===(e=this.findNode(n))||void 0===e?void 0:e.documentation();return o?{contents:{kind:"markdown",value:o}}:null}highlight(n){var e;const o=null===(e=this.findNode(n))||void 0===e?void 0:e.references();if(o&&o.length)return o.map(R=>({range:i(R.location)}))}findNode(n){const e=n.textDocument.uri,o=new h.Ly(n.position.line+1,n.position.character),R=this.documentService.getAST(e);if(!R)return;const x=R.findByPosition(o);return x?x[x.length-1]:void 0}}var Y=y(99938);function V({severity:c,location:n,message:e,replacement:o}){return{severity:"error"===c?t.DiagnosticSeverity.Error:t.DiagnosticSeverity.Warning,range:i(n),message:e,source:"dyvil",data:{replacement:o?.toString()}}}class ce{constructor(n,e){this.connectionService=n,this.documentService=e,this.connectionService.connection.onDidChangeConfiguration(()=>{this.documentService.documents.all().forEach(o=>this.validateTextDocument(o))}),this.documentService.documents.onDidChangeContent(o=>{this.validateTextDocument(o.document)})}validateTextDocument(n){return(0,Y.mG)(this,void 0,void 0,function*(){const e=this.documentService.getAST(n);if(!e)return;const o=e.diagnostics.map(V);yield this.connectionService.connection.sendDiagnostics({uri:n.uri,diagnostics:o})})}}const te={class:S.SymbolKind.Class,field:S.SymbolKind.Field,constructor:S.SymbolKind.Constructor,method:S.SymbolKind.Method,parameter:S.SymbolKind.Variable,variable:S.SymbolKind.Variable};class ne{constructor(n,e){this.documentService=e,n.connection.onDocumentSymbol(o=>this.provideSymbols(o))}provideSymbols(n){const e=this.documentService.getAST(n.textDocument.uri);return e?this.toSymbols(e):[]}toSymbols(n){const e=Array.from((0,O.pI)(n)).flatMap(o=>this.toSymbols(o));return n instanceof O.gr?[{name:n.name,kind:te[n.kind],range:i(n.range),selectionRange:i(n.location),children:e}]:e}}class ie{constructor(n,e){this.documentService=e,n.connection.onDocumentFormatting(o=>this.handleFormatting(o)),n.connection.onDocumentRangeFormatting(o=>this.handleRangeFormatting(o))}handleFormatting(n){const e=this.documentService.getAST(n.textDocument.uri);return e?this.provideEdits(e):[]}handleRangeFormatting(n){const e=this.documentService.getAST(n.textDocument.uri),o=e?.findEnclosing(u(n.range));return o?this.provideEdits(o):[]}provideEdits(n){const e=[];for(const o of[n])o.range&&e.push({range:i(o.range),newText:o.toString()});return e}}class oe{constructor(n,e){this.documentService=e,n.connection.onCodeAction(o=>this.provideActions(o))}provideActions(n){const e=this.documentService.getAST(n.textDocument.uri);if(!e)return[];const o=[];for(const x of n.context.diagnostics){const C=x.data.replacement;C&&o.push({title:`Replace with \`${C}\``,kind:"quickfix",diagnostics:[x],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:x.range,newText:C}]}}})}const R=e.findEnclosing(u(n.range));if(R){const x=this.provideActionsForNode(n.textDocument.uri,R);o.push(...x)}return o}provideActionsForNode(n,e){if("variable"===e.kind){const o=e;return!o.type||o.type.location?[]:[{title:`Specify type '${o.type}' explicitly`,kind:S.CodeActionKind.RefactorRewrite,edit:{changes:{[n]:[{range:i(o.location),newText:`${o.name}: ${o.type}`}]}}}]}return[]}}class re{constructor(n,e){this.documentService=e,n.connection.languages.inlayHint.on(o=>this.provideInlayHints(o))}provideInlayHints(n){const e=this.documentService.getAST(n.textDocument.uri),o=e?.findEnclosing(u(n.range));if(!o)return[];const R=[];for(const x of(0,O.NR)(o))switch(x.kind){case"variable":{const C=x;if(!C.type||C.type.location)continue;const P=`: ${C.type}`;R.push({kind:S.InlayHintKind.Type,position:_(C.location.end),label:P,paddingLeft:!0,textEdits:[{range:i(C.location),newText:C.name+P}]});break}case"expr:functionCall":{const C=x;if(!C._constructor)continue;this.addParamHints(C.args,C._constructor.parameters,R);break}case"expr:methodCall":{const C=x;if(!C._method)continue;this.addParamHints(C.args,C._method.parameters,R);break}}return R}addParamHints(n,e,o){for(let R=0;R<n.length;R++){const x=n[R],C=e[R];if(!C||!x.range)continue;const P=`${C.name}:`,r=C.documentation();o.push({kind:S.InlayHintKind.Parameter,position:_(x.range.start),label:P,tooltip:r&&{kind:"markdown",value:r},paddingRight:!0})}}}var ee=y(95987);console.log("Running Dyvil Language Server in Web Worker");const d=new ee.BrowserMessageReader(self),g=new ee.BrowserMessageWriter(self),b=(0,ee.createConnection)(d,g);(function se(c){const n=new w(c),e=new A(n);new z(n,e),new ce(n,e),new U(n,e),new N(n,e),new ne(n,e),new ie(n,e),new oe(n,e),new re(n,e)})(b),b.listen()},79576:(W,s,y)=>{y.d(s,{YN:()=>j,_w:()=>X,d2:()=>I,dm:()=>w,eB:()=>_,gN:()=>N,gr:()=>u,n$:()=>$,v_:()=>F,wT:()=>l});var t=y(99938),S=y(80778),O=y(4481),a=y(50440),h=y(55470),p=y(87670),i=y(42081);class _ extends a.NB{constructor(v,E=[]){super("unit"),this.path=v,this.classes=E,this.diagnostics=[]}report(v){this.diagnostics.push(v)}resolve(v){const E={[_.enclosing]:this};for(const A of this.classes)E[A.name]=A;return super.resolve(new h._(E,v))}lint(v){super.lint(new h._({[_.enclosing]:this},v))}toString(v){return this.classes.map(E=>E.toString(v)).join("\n\n")}}_.enclosing=Symbol("enclosing compilation unit"),_.parser="file",(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],_.prototype,"toString",null);class u extends a.NB{constructor(v,E){super(v),this.name=E,this._references=[]}docComment(){return this.doc?"/**\n"+this.doc.trim().replace(/^/gm," * ")+"\n */\n":""}documentation(){return this.doc}references(){return[this,...this._references]}}class l extends u{constructor(v="<anonymous>",E=[],A=[],H=[]){super("class",v),this.fields=E,this.constructors=A,this.methods=H}asType(){const v=new i.rF(this.name);return v._class=this,v.location=this.location,v}asCompletion(){return{label:this.name,kind:"class"}}buildSignature(v){v.addSignature(`class ${this.name} { `);for(let E of[this.fields,this.constructors,this.methods].map(A=>A.sort((H,z)=>H.name.localeCompare(z.name))).flat())E.buildSignature(v),v.addSignature(" ");v.addSignature("}")}toString(v){return a.$S`
    ${this.docComment()}\
    class ${this.name} {
      ${this.fields.map(E=>E.toString(v)).join("\n")}

      ${this.constructors.map(E=>E.toString(v)).join("\n\n")}

      ${this.methods.map(E=>E.toString(v)).join("\n\n")}
    }`}lookup(v,E,...A){for(const H of this.fields)if(H.name===v&&H instanceof E)return H;for(const H of this.methods)if(H.name===v&&H instanceof E&&H.overloads(A[0]))return H;for(const H of this.constructors)if(H instanceof E&&H.overloads(A[0]))return H}list(){return[...this.fields,...this.methods]}resolve(v){const E=new h._({[l.enclosing]:this},v);super.resolve(E);for(const A of this.fields)this.fields.some(H=>H!==A&&H.name===A.name)&&(0,O.Hj)(v,A.location,`duplicate field ${A.name}`);for(const A of this.methods)this.methods.some(H=>H!==A&&H.jsName===A.jsName)&&(0,O.Hj)(v,A.location,`duplicate method ${A.name} with mangled name ${A.jsName}`);return this}}l.enclosing=Symbol("enclosing class"),l.parser="class",(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],l.prototype,"toString",null);class D extends u{constructor(v,E,A,H){super(v,E),this.parameters=A,this.body=H}resolve(v){this._thisClass||(this._thisClass=v.lookup(l.enclosing,l)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new I("this",this._thisClass.asType()),this._thisParameter.location=this.location);const E=new h._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,v);return super.resolve(E)}overloads(v){return v.length===this.parameters.length&&this.parameters.every((E,A)=>(0,i.BM)(E.type,v[A]))}}class F extends D{constructor(v=[],E=new p.gO){super("constructor","init",v,E)}buildSignature(v){v.addSignature("init(");for(let E of this.parameters)E.buildSignature(v);v.addSignature(")"),this.body.buildSignature(v)}toString(v){const E="js"===v?"constructor":"init",A=this.parameters.map(z=>z.toString(v)).join(", "),H=this.body.toString(v);return`${this.docComment()}${E}(${A}) ${H}`}documentation(){return this.parameters.length?a.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(v=>"- "+v.documentation()).join("\n")}
    `:this.doc}references(v){return"rename"===v?[]:super.references()}}F.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},F.parser="ctor",(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],F.prototype,"toString",null);class N extends u{constructor(v="<unknown>",E=i.NI,A){super("field",v),this.type=E,this.value=A}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}buildSignature(v){var E;v.addSignature(`${this.name}:${this.type}`),this.type.buildSignature(v),null===(E=this.value)||void 0===E||E.buildSignature(v)}toString(v){const E=this.value?" = "+this.value.toString(v):"";if("js"===v)return a.$S`
      _${this.name}${E};
      get ${this.name}() { return this._${this.name}; }
      set ${this.name}(value) { this._${this.name} = value; }`;const A=this.type.toString(v);return`${this.docComment()}var ${this.name}: ${A}${E}`}}N.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},N.parser="field",(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],N.prototype,"toString",null);class $ extends D{constructor(v="<unknown>",E=[],A=i.NI,H=new p.gO){super("method",v,E,H),this.returnType=A}get jsName(){return this.name+this.parameters.map(v=>"_"+v.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(v=>v.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((v,E)=>`\${${E}:${v.name}}`).join(", ")})`}}documentation(){let v=this.doc||"";return this.parameters.length&&(v+="\n#### Parameters\n"+this.parameters.map(E=>"- "+E.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(v+="\n#### Returns\n`"+this.returnType.toString()+"`"),v}buildSignature(v){v.addSignature(`${this.name}(`);for(let E of this.parameters)E.buildSignature(v);v.addSignature(`):${this.returnType}`),this.returnType.buildSignature(v),this.body.buildSignature(v)}toString(v){const E="js"!==v?"func "+this.name:this.jsName,A=this.parameters.map(U=>U.toString(v)).join(", "),H="js"!==v?": "+this.returnType.toString(v):"",z=this.body.toString(v);return`${this.docComment()}${E}(${A})${H} ${z}`}}$.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},$.parser="method",(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],$.prototype,"toString",null);class w extends a.NB{constructor(v){super("class-completion"),this.name=v}toString(v){return this.name}resolve(v){return(0,O.Hk)(v,this.location,this.name,{extra:w.completions}),super.resolve(v)}}w.completions=[$,F,N].map(K=>K.completion);class j extends u{constructor(v,E,A){super(v,E),this.type=A}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(v){const E=this.type?": "+this.type.toString(v):"";return`${this.docComment()}${this.name}${E}`}}(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],j.prototype,"toString",null);let I=(()=>{class K extends j{constructor(E="<unknown>",A=i.NI){super("parameter",E,A),this.type=A}references(E){return"rename"===E&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}buildSignature(E){E.addSignature(`${this.name}:${this.type}`),super.buildSignature(E)}toString(E){return"js"===E?this.name:super.toString(E)}}return K.parser="parameter",K})();class X extends j{constructor(v="<unknown>",E,A=S.iY){super("variable",v,E),this.value=A}documentation(){var v;return`\`var ${this.name}: ${null===(v=this.type)||void 0===v?void 0:v.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(v){if("js"===v)return`let ${this.name} = ${this.value.toString(v)}`;const E=this.type&&this.type.location?": "+this.type.toString(v):"";return`${this.docComment()}var ${this.name}${E} = ${this.value.toString(v)}`}resolve(v){const E=super.resolve(v);return E.type||(E.type=E.value.getType()),E}}X.parser="variable",(0,t.gn)([(0,a.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],X.prototype,"toString",null)},80778:(W,s,y)=>{y.d(s,{ZJ:()=>F,_C:()=>D,iY:()=>N,jR:()=>u,lX:()=>_,o6:()=>l,sW:()=>i,t$:()=>p});var t=y(79576),S=y(4481),O=y(50440),a=y(42081);class h extends O.NB{constructor(w){super(`expr:${w}`)}getType(){throw new Error(`${this.constructor.name}.getType not implemented`)}}class p extends h{constructor(w){super("literal"),this.representation=w}toString(w){return this.before(w)+this.representation+this.after(w)}getType(){switch(this.representation.charAt(0)){case'"':return new a.MX("string");case"t":case"f":return new a.MX("boolean");default:return new a.MX("int")}}}class i extends h{constructor(w="<unknown>"){super("variable"),this.name=w}toString(w){return this.before(w)+this.name+this.after(w)}definition(){return this._variable}resolve(w){return(0,S.Hk)(w,this.location,this.name)||this._variable||this._variable||(this._variable=w.lookup(this.name,t.YN)||(0,S.Hj)(w,this.location,`variable ${this.name} not found`)),this}getType(){var w,j;return null!==(j=null===(w=this._variable)||void 0===w?void 0:w.type)&&void 0!==j?j:a.NI}}class _ extends h{constructor(w="<unknown>",j=[]){super("functionCall"),this.name=w,this.args=j}toString(w){return`${this.before(w)}${this.name}(${this.args.map(j=>j.toString(w)).join(", ")})${this.after(w)}`}definition(w){return"rename"===w?this._class:this._constructor}resolve(w){if(this.args=this.args.map(j=>j.resolve(w)),!this._constructor){const j=w.lookup(this.name,t.wT);if(j){const I=this.args.map(K=>K.getType()),X=j.lookup("init",t.v_,I);X?(this._class=j,this._constructor=X):(0,S.Hj)(w,this.location,`constructor ${this.name}(${I.join(", ")}) not found`)}else(0,S.Hj)(w,this.location,`class or function ${this.name} not found`)}return this}getType(){var w,j;return null!==(j=null===(w=this._class)||void 0===w?void 0:w.asType())&&void 0!==j?j:a.NI}}class u extends h{constructor(w=N,j="<unknown>"){super("propertyAccess"),this.receiver=w,this.property=j}toString(w){return`${this.receiver.toString(w)}.${this.property}`}definition(){return this._field}resolve(w){this.receiver=this.receiver.resolve(w);const j=this.receiver.getType();return(0,S.Hk)(w,this.location,this.property,{lookup:j})||this._field||this._field||(this._field=j.lookup(this.property,t.gN)||(0,S.Hj)(w,this.location,`field ${this.property} not found on ${j}`)),this}getType(){var w;return(null===(w=this._field)||void 0===w?void 0:w.type)||a.NI}}class l extends h{constructor(w=N,j="<unknown>",I=[]){super("methodCall"),this.receiver=w,this.method=j,this.args=I}definition(){return this._method}toString(w){const j=this._method&&"js"===w?this._method.jsName:this.method;return`${this.receiver.toString(w)}.${j}(${this.args.map(I=>I.toString(w)).join(", ")})`}resolve(w){if(this.receiver=this.receiver.resolve(w),this.args=this.args.map(j=>j.resolve(w)),!this._method){const j=this.receiver.getType(),I=this.args.map(X=>X.getType());this._method||(this._method=j.lookup(this.method,t.n$,I)||(0,S.Hj)(w,this.location,`method ${this.method} not found on ${j}`))}return this}getType(){var w;return(null===(w=this._method)||void 0===w?void 0:w.returnType)||a.NI}}class D extends h{constructor(w=N,j="<unknown>",I=N){super("binary"),this.lhs=w,this.operator=j,this.rhs=I}lint(w){"=="===this.operator&&("expr:literal"===this.lhs.kind&&"true"===this.lhs.representation&&(0,S.Hj)(w,this.range,"`== true` is redundant","warning",this.rhs),"expr:literal"===this.rhs.kind&&"true"===this.rhs.representation&&(0,S.Hj)(w,this.range,"`== true` is redundant","warning",this.lhs)),super.lint(w)}toString(w){return`${this.lhs.toString(w)} ${this.operator} ${this.rhs.toString(w)}`}getType(){switch(this.operator){case"+":const w=this.lhs.getType(),j=this.rhs.getType();return"type:primitive"===w.kind&&"string"===w.name?w:"type:primitive"===j.kind&&"string"===j.name?j:new a.MX("int");case"&&":case"||":case"==":case"!=":case"<":case"<=":case">":case">=":return new a.MX("boolean");case"-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"&":case"|":case"^":return new a.MX("int");default:return a.NI}}}class F extends h{constructor(w=N){super("parenthesized"),this.expression=w}toString(w){return`(${this.expression.toString(w)})`}getType(){return this.expression.getType()}}const N=new class extends h{constructor(){super("error")}getType(){return a.NI}}},11724:(W,s,y)=>{y.d(s,{K9:()=>h.K9,MX:()=>p.MX,NB:()=>O.NB,NR:()=>O.NR,UX:()=>h.UX,WJ:()=>h.WJ,ZJ:()=>S.ZJ,_C:()=>S._C,_w:()=>t._w,d2:()=>t.d2,dm:()=>t.dm,eB:()=>t.eB,gN:()=>t.gN,gO:()=>h.gO,gr:()=>t.gr,jR:()=>S.jR,lX:()=>S.lX,n$:()=>t.n$,o6:()=>S.o6,on:()=>h.on,pI:()=>O.pI,rF:()=>p.rF,rX:()=>h.rX,sW:()=>S.sW,sj:()=>h.sj,t$:()=>S.t$,v_:()=>t.v_,wT:()=>t.wT});var t=y(79576),S=y(80778),O=y(50440),h=(y(45444),y(87670)),p=y(42081)},50440:(W,s,y)=>{y.d(s,{$S:()=>i,NB:()=>O,NR:()=>h,fp:()=>_,pI:()=>p});var t=y(79576);class O{constructor(l){this.kind=l}compilationUnit(){let l=this._parent;for(;l&&!(l instanceof t.eB);)l=l._parent;return l}buildSignature(l){for(const F of p(this))F.buildSignature(l);const D=this.definition();if(D&&D instanceof t.gr){const F=D.compilationUnit();F&&l.addDependency(F)}}definition(l){}documentation(){var l;return null===(l=this.definition())||void 0===l?void 0:l.documentation()}references(l){var D;return(null===(D=this.definition(l))||void 0===D?void 0:D.references(l))||[]}resolve(l){return function a(u,l){for(const[D,F]of Object.entries(u))if("location"!==D&&"kind"!==D&&!D.startsWith("_")&&F)if(Array.isArray(F))for(let N=0;N<F.length;N++)F[N]instanceof O&&(F[N]=l(F[N]));else F instanceof O&&(u[D]=l(F))}(this,D=>D.resolve(l)),this}link(){for(const[l,D]of Object.entries(this))l.startsWith("_")&&"_parent"!==l&&D&&"_references"in D&&D._references.push(this);for(const l of p(this))l._parent=this,l.link()}unlink(){for(const[l,D]of Object.entries(this))l.startsWith("_")&&"_parent"!==l&&D&&"_references"in D&&D._references.splice(D._references.indexOf(this),1);for(const l of p(this))l.unlink()}lint(l){for(const D of p(this))D.lint(l)}findByPosition(l){var D;if(!this.range||this.range.includes(l)){for(const F of p(this)){const N=F.findByPosition(l);if(N)return[this,...N]}if(null!==(D=this.location)&&void 0!==D&&D.includes(l))return[this]}}findEnclosing(l){if(this.range&&this.range.encloses(l)){for(const D of p(this)){const F=D.findEnclosing(l);if(F)return F}return this}}before(l){return this.commentBefore&&"js"!==l?this.commentBefore.endsWith("\n")?this.commentBefore:this.commentBefore+" ":""}after(l){return this.commentAfter&&"js"!==l?" "+this.commentAfter:""}toString(l){return`<${this.kind}>`}}function*h(u){yield u;for(const l of p(u))yield*h(l)}function*p(u){for(const[l,D]of Object.entries(u))if("location"!==l&&"kind"!==l&&!l.startsWith("_")&&D)if(Array.isArray(D))for(let F=0;F<D.length;F++)D[F]instanceof O&&(yield D[F]);else D instanceof O&&(yield D)}function i(u,...l){if(!u[0].startsWith("\n"))throw new Error("must start with a newline");const D=u[0].match(/^\n([ \t]*)/)[1];return u.map((F,N)=>{var $;0===N&&(F=F.substring(1+D.length));const j=(F=F.replace(new RegExp("^"+D,"gm"),"")).substring(F.lastIndexOf("\n")+1).match(/^\s*/)[0];return F+(null!==($=l[N])&&void 0!==$?$:"").toString().replace(/\n/g,`\n${j}`)}).join("")}function _(){return(u,l,D)=>{const F=D.value;return D.value=function(N){return this.before(N)+F.call(this,N)+this.after(N)},D}}},4481:(W,s,y)=>{y.d(s,{Hj:()=>p,Hk:()=>i,Ly:()=>S,R9:()=>a,e6:()=>O});var t=y(11724);class S{constructor(u,l){this.line=u,this.column=l}}class O{constructor(u,l){this.start=u,this.end=l}includes(u){return this.start.line<=u.line&&u.line<=this.end.line&&(this.start.line<u.line||this.start.column<=u.column)&&(u.line<this.end.line||u.column<=this.end.column)}distance(u){return u.line<this.start.line?u.line-this.start.line:u.line>this.end.line?u.line-this.end.line:u.column<this.start.column?(u.column-this.start.column)/1e3:u.column>this.end.column?(u.column-this.end.column)/1e3:0}encloses(u){return this.includes(u.start)&&this.includes(u.end)}}class a{constructor(u,l,D,F="error",N,$){if(this.path=u,this.location=l,this.message=D,this.severity=F,this.expected=N,this.replacement=$,!l)throw new Error("location is required")}}function p(_,u,l,D="error",F){const N=_.lookup(t.eB.enclosing,t.eB),$=Array.isArray(F)?F:void 0,w=Array.isArray(F)?void 0:F,j=new a(void 0,u,l,D,$,w);N?N.report(j):function h(_){const{path:u,location:{start:{line:l,column:D}},message:F,severity:N}=_;switch(N){case"error":console.error(`${u}:${l}:${D}: error: ${F}`);break;case"warning":console.warn(`${u}:${l}:${D}: warning: ${F}`);break;case"note":console.info(`${u}:${l}:${D}: note: ${F}`)}if(_.expected)for(let $ of _.expected)console.log(`- [${$.kind}] ${$.label} ${$.signature||""} - ${$.description||""}`)}(j)}function i(_,u,l,{lookup:D,kind:F,extra:N}={}){if(!l.includes("\xa7"))return!1;const $=l.slice(0,-1),w=(D||_).list().filter(I=>"name"in I).filter(I=>!F||I.kind===F).map(I=>"asCompletion"in I?I.asCompletion():{kind:I.kind,label:I.name});return p(_,u,"input '\xa7' expecting","error",(N?[...w,...N]:w).filter(I=>I.label.startsWith($))),!0}},95987:(W,s,y)=>{W.exports=y(40426)},40426:function(W,s,y){var t=this&&this.__createBinding||(Object.create?function(i,_,u,l){void 0===l&&(l=u);var D=Object.getOwnPropertyDescriptor(_,u);(!D||("get"in D?!_.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return _[u]}}),Object.defineProperty(i,l,D)}:function(i,_,u,l){void 0===l&&(l=u),i[l]=_[u]}),S=this&&this.__exportStar||function(i,_){for(var u in i)"default"!==u&&!Object.prototype.hasOwnProperty.call(_,u)&&t(_,i,u)};Object.defineProperty(s,"__esModule",{value:!0}),s.createConnection=void 0;const O=y(30306);S(y(49729),s),S(y(30306),s);let a=!1;const h={initialize:i=>{},get shutdownReceived(){return a},set shutdownReceived(i){a=i},exit:i=>{}};s.createConnection=function p(i,_,u,l){let D,F,N,$;return void 0!==i&&"features"===i.__brand&&(D=i,i=_,_=u,u=l),O.ConnectionStrategy.is(i)||O.ConnectionOptions.is(i)?$=i:(F=i,N=_,$=u),(0,O.createConnection)(j=>(0,O.createProtocolConnection)(F,N,j,$),h,D)}},30306:function(W,s,y){var t=this&&this.__createBinding||(Object.create?function(i,_,u,l){void 0===l&&(l=u);var D=Object.getOwnPropertyDescriptor(_,u);(!D||("get"in D?!_.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return _[u]}}),Object.defineProperty(i,l,D)}:function(i,_,u,l){void 0===l&&(l=u),i[l]=_[u]}),S=this&&this.__exportStar||function(i,_){for(var u in i)"default"!==u&&!Object.prototype.hasOwnProperty.call(_,u)&&t(_,i,u)};Object.defineProperty(s,"__esModule",{value:!0}),s.ProposedFeatures=s.NotebookDocuments=s.TextDocuments=s.SemanticTokensBuilder=void 0;const O=y(29469);Object.defineProperty(s,"SemanticTokensBuilder",{enumerable:!0,get:function(){return O.SemanticTokensBuilder}}),S(y(45974),s);const a=y(39059);Object.defineProperty(s,"TextDocuments",{enumerable:!0,get:function(){return a.TextDocuments}});const h=y(92011);Object.defineProperty(s,"NotebookDocuments",{enumerable:!0,get:function(){return h.NotebookDocuments}}),S(y(43330),s),(s.ProposedFeatures||(s.ProposedFeatures={})).all={__brand:"features"}},7238:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CallHierarchyFeature=void 0;const t=y(45974);s.CallHierarchyFeature=O=>class extends O{get callHierarchy(){return{onPrepare:a=>this.connection.onRequest(t.CallHierarchyPrepareRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h),void 0)),onIncomingCalls:a=>{const h=t.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(h,(p,i)=>a(p,i,this.attachWorkDoneProgress(p),this.attachPartialResultProgress(h,p)))},onOutgoingCalls:a=>{const h=t.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(h,(p,i)=>a(p,i,this.attachWorkDoneProgress(p),this.attachPartialResultProgress(h,p)))}}}}},58743:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ConfigurationFeature=void 0;const t=y(45974),S=y(83901);s.ConfigurationFeature=a=>class extends a{getConfiguration(h){return h?S.string(h)?this._getConfiguration({section:h}):this._getConfiguration(h):this._getConfiguration({})}_getConfiguration(h){let p={items:Array.isArray(h)?h:[h]};return this.connection.sendRequest(t.ConfigurationRequest.type,p).then(i=>Array.isArray(i)?Array.isArray(h)?i:i[0]:Array.isArray(h)?[]:null)}}},94433:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagnosticFeature=void 0;const t=y(45974);s.DiagnosticFeature=O=>class extends O{get diagnostics(){return{refresh:()=>this.connection.sendRequest(t.DiagnosticRefreshRequest.type),on:a=>this.connection.onRequest(t.DocumentDiagnosticRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(t.DocumentDiagnosticRequest.partialResult,h))),onWorkspace:a=>this.connection.onRequest(t.WorkspaceDiagnosticRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(t.WorkspaceDiagnosticRequest.partialResult,h)))}}}},5954:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FileOperationsFeature=void 0;const t=y(45974);s.FileOperationsFeature=O=>class extends O{onDidCreateFiles(a){return this.connection.onNotification(t.DidCreateFilesNotification.type,h=>{a(h)})}onDidRenameFiles(a){return this.connection.onNotification(t.DidRenameFilesNotification.type,h=>{a(h)})}onDidDeleteFiles(a){return this.connection.onNotification(t.DidDeleteFilesNotification.type,h=>{a(h)})}onWillCreateFiles(a){return this.connection.onRequest(t.WillCreateFilesRequest.type,(h,p)=>a(h,p))}onWillRenameFiles(a){return this.connection.onRequest(t.WillRenameFilesRequest.type,(h,p)=>a(h,p))}onWillDeleteFiles(a){return this.connection.onRequest(t.WillDeleteFilesRequest.type,(h,p)=>a(h,p))}}},94200:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InlayHintFeature=void 0;const t=y(45974);s.InlayHintFeature=O=>class extends O{get inlayHint(){return{refresh:()=>this.connection.sendRequest(t.InlayHintRefreshRequest.type),on:a=>this.connection.onRequest(t.InlayHintRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h))),resolve:a=>this.connection.onRequest(t.InlayHintResolveRequest.type,(h,p)=>a(h,p))}}}},97140:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InlineValueFeature=void 0;const t=y(45974);s.InlineValueFeature=O=>class extends O{get inlineValue(){return{refresh:()=>this.connection.sendRequest(t.InlineValueRefreshRequest.type),on:a=>this.connection.onRequest(t.InlineValueRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h)))}}}},27810:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkedEditingRangeFeature=void 0;const t=y(45974);s.LinkedEditingRangeFeature=O=>class extends O{onLinkedEditingRange(a){return this.connection.onRequest(t.LinkedEditingRangeRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h),void 0))}}},9466:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MonikerFeature=void 0;const t=y(45974);s.MonikerFeature=O=>class extends O{get moniker(){return{on:a=>{const h=t.MonikerRequest.type;return this.connection.onRequest(h,(p,i)=>a(p,i,this.attachWorkDoneProgress(p),this.attachPartialResultProgress(h,p)))}}}}},92011:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NotebookDocuments=s.NotebookSyncFeature=void 0;const t=y(45974),S=y(39059);s.NotebookSyncFeature=p=>class extends p{get synchronization(){return{onDidOpenNotebookDocument:i=>this.connection.onNotification(t.DidOpenNotebookDocumentNotification.type,_=>{i(_)}),onDidChangeNotebookDocument:i=>this.connection.onNotification(t.DidChangeNotebookDocumentNotification.type,_=>{i(_)}),onDidSaveNotebookDocument:i=>this.connection.onNotification(t.DidSaveNotebookDocumentNotification.type,_=>{i(_)}),onDidCloseNotebookDocument:i=>this.connection.onNotification(t.DidCloseNotebookDocumentNotification.type,_=>{i(_)})}}};class a{onDidOpenTextDocument(i){return this.openHandler=i,t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(i){this.openHandler&&this.openHandler(i)}onDidChangeTextDocument(i){return this.changeHandler=i,t.Disposable.create(()=>{this.changeHandler=i})}changeTextDocument(i){this.changeHandler&&this.changeHandler(i)}onDidCloseTextDocument(i){return this.closeHandler=i,t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(i){this.closeHandler&&this.closeHandler(i)}onWillSaveTextDocument(){return a.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return a.NULL_DISPOSE}onDidSaveTextDocument(){return a.NULL_DISPOSE}}a.NULL_DISPOSE=Object.freeze({dispose:()=>{}}),s.NotebookDocuments=class h{constructor(i){this._cellTextDocuments=i instanceof S.TextDocuments?i:new S.TextDocuments(i),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new t.Emitter,this._onDidChange=new t.Emitter,this._onDidSave=new t.Emitter,this._onDidClose=new t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(i){return this._cellTextDocuments.get(i.document)}getNotebookDocument(i){return this.notebookDocuments.get(i)}getNotebookCell(i){const _=this.notebookCellMap.get(i);return _&&_[0]}findNotebookDocumentForCell(i){const u=this.notebookCellMap.get("string"==typeof i?i:i.document);return u&&u[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(i){const _=new a,u=[];return u.push(this.cellTextDocuments.listen(_)),u.push(i.notebooks.synchronization.onDidOpenNotebookDocument(l=>{this.notebookDocuments.set(l.notebookDocument.uri,l.notebookDocument);for(const D of l.cellTextDocuments)_.openTextDocument({textDocument:D});this.updateCellMap(l.notebookDocument),this._onDidOpen.fire(l.notebookDocument)})),u.push(i.notebooks.synchronization.onDidChangeNotebookDocument(l=>{const D=this.notebookDocuments.get(l.notebookDocument.uri);if(void 0===D)return;D.version=l.notebookDocument.version;const F=D.metadata;let N=!1;const $=l.change;void 0!==$.metadata&&(N=!0,D.metadata=$.metadata);const w=[],j=[],I=[],X=[];if(void 0!==$.cells){const H=$.cells;if(void 0!==H.structure){const z=H.structure.array;if(D.cells.splice(z.start,z.deleteCount,...void 0!==z.cells?z.cells:[]),void 0!==H.structure.didOpen)for(const U of H.structure.didOpen)_.openTextDocument({textDocument:U}),w.push(U.uri);if(H.structure.didClose)for(const U of H.structure.didClose)_.closeTextDocument({textDocument:U}),j.push(U.uri)}if(void 0!==H.data){const z=new Map(H.data.map(U=>[U.document,U]));for(let U=0;U<=D.cells.length;U++){const Y=z.get(D.cells[U].document);if(void 0!==Y){const V=D.cells.splice(U,1,Y);if(I.push({old:V[0],new:Y}),z.delete(Y.document),0===z.size)break}}}if(void 0!==H.textContent)for(const z of H.textContent)_.changeTextDocument({textDocument:z.document,contentChanges:z.changes}),X.push(z.document.uri)}this.updateCellMap(D);const K={notebookDocument:D};N&&(K.metadata={old:F,new:D.metadata});const v=[];for(const H of w)v.push(this.getNotebookCell(H));const E=[];for(const H of j)E.push(this.getNotebookCell(H));const A=[];for(const H of X)A.push(this.getNotebookCell(H));(v.length>0||E.length>0||I.length>0||A.length>0)&&(K.cells={added:v,removed:E,changed:{data:I,textContent:A}}),(void 0!==K.metadata||void 0!==K.cells)&&this._onDidChange.fire(K)})),u.push(i.notebooks.synchronization.onDidSaveNotebookDocument(l=>{const D=this.notebookDocuments.get(l.notebookDocument.uri);void 0!==D&&this._onDidSave.fire(D)})),u.push(i.notebooks.synchronization.onDidCloseNotebookDocument(l=>{const D=this.notebookDocuments.get(l.notebookDocument.uri);if(void 0!==D){this._onDidClose.fire(D);for(const F of l.cellTextDocuments)_.closeTextDocument({textDocument:F});this.notebookDocuments.delete(l.notebookDocument.uri);for(const F of D.cells)this.notebookCellMap.delete(F.document)}})),t.Disposable.create(()=>{u.forEach(l=>l.dispose())})}updateCellMap(i){for(const _ of i.cells)this.notebookCellMap.set(_.document,[_,i])}}},94640:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.attachPartialResult=s.ProgressFeature=s.attachWorkDone=void 0;const t=y(45974),S=y(43706);class O{constructor(N,$){this._connection=N,this._token=$,O.Instances.set(this._token,this)}begin(N,$,w,j){this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:"begin",title:N,percentage:$,message:w,cancellable:j})}report(N,$){let w={kind:"report"};"number"==typeof N?(w.percentage=N,void 0!==$&&(w.message=$)):w.message=N,this._connection.sendProgress(t.WorkDoneProgress.type,this._token,w)}done(){O.Instances.delete(this._token),this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:"end"})}}O.Instances=new Map;class a extends O{constructor(N,$){super(N,$),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class h{constructor(){}begin(){}report(){}done(){}}class p extends h{constructor(){super(),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var u;s.attachWorkDone=function i(F,N){if(void 0===N||void 0===N.workDoneToken)return new h;const $=N.workDoneToken;return delete N.workDoneToken,new O(F,$)},s.ProgressFeature=F=>class extends F{constructor(){super(),this._progressSupported=!1}initialize(N){super.initialize(N),!0===N?.window?.workDoneProgress&&(this._progressSupported=!0,this.connection.onNotification(t.WorkDoneProgressCancelNotification.type,$=>{let w=O.Instances.get($.token);(w instanceof a||w instanceof p)&&w.cancel()}))}attachWorkDoneProgress(N){return void 0===N?new h:new O(this.connection,N)}createWorkDoneProgress(){if(this._progressSupported){const N=(0,S.generateUuid)();return this.connection.sendRequest(t.WorkDoneProgressCreateRequest.type,{token:N}).then(()=>new a(this.connection,N))}return Promise.resolve(new p)}},(u||(u={})).type=new t.ProgressType;class l{constructor(N,$){this._connection=N,this._token=$}report(N){this._connection.sendProgress(u.type,this._token,N)}}s.attachPartialResult=function D(F,N){if(void 0===N||void 0===N.partialResultToken)return;const $=N.partialResultToken;return delete N.partialResultToken,new l(F,$)}},29469:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SemanticTokensBuilder=s.SemanticTokensDiff=s.SemanticTokensFeature=void 0;const t=y(45974);s.SemanticTokensFeature=h=>class extends h{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(t.SemanticTokensRefreshRequest.type),on:p=>{const i=t.SemanticTokensRequest.type;return this.connection.onRequest(i,(_,u)=>p(_,u,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(i,_)))},onDelta:p=>{const i=t.SemanticTokensDeltaRequest.type;return this.connection.onRequest(i,(_,u)=>p(_,u,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(i,_)))},onRange:p=>{const i=t.SemanticTokensRangeRequest.type;return this.connection.onRequest(i,(_,u)=>p(_,u,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(i,_)))}}}};class O{constructor(p,i){this.originalSequence=p,this.modifiedSequence=i}computeDiff(){const p=this.originalSequence.length,i=this.modifiedSequence.length;let _=0;for(;_<i&&_<p&&this.originalSequence[_]===this.modifiedSequence[_];)_++;if(_<i&&_<p){let u=p-1,l=i-1;for(;u>=_&&l>=_&&this.originalSequence[u]===this.modifiedSequence[l];)u--,l--;(u<_||l<_)&&(u++,l++);const D=u-_+1,F=this.modifiedSequence.slice(_,l+1);return 1===F.length&&F[0]===this.originalSequence[u]?[{start:_,deleteCount:D-1}]:[{start:_,deleteCount:D,data:F}]}return _<i?[{start:_,deleteCount:0,data:this.modifiedSequence.slice(_)}]:_<p?[{start:_,deleteCount:p-_}]:[]}}s.SemanticTokensDiff=O,s.SemanticTokensBuilder=class a{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(p,i,_,u,l){let D=p,F=i;this._dataLen>0&&(D-=this._prevLine,0===D&&(F-=this._prevChar)),this._data[this._dataLen++]=D,this._data[this._dataLen++]=F,this._data[this._dataLen++]=_,this._data[this._dataLen++]=u,this._data[this._dataLen++]=l,this._prevLine=p,this._prevChar=i}get id(){return this._id.toString()}previousResult(p){this.id===p&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){return void 0!==this._prevData?{resultId:this.id,edits:new O(this._prevData,this._data).computeDiff()}:this.build()}}},43330:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createConnection=s.combineFeatures=s.combineNotebooksFeatures=s.combineLanguagesFeatures=s.combineWorkspaceFeatures=s.combineWindowFeatures=s.combineClientFeatures=s.combineTracerFeatures=s.combineTelemetryFeatures=s.combineConsoleFeatures=s._NotebooksImpl=s._LanguagesImpl=s.BulkUnregistration=s.BulkRegistration=s.ErrorMessageTracker=void 0;const t=y(45974),S=y(83901),O=y(43706),a=y(94640),h=y(58743),p=y(45108),i=y(7238),_=y(29469),u=y(95601),l=y(5954),D=y(27810),F=y(71397),N=y(97140),$=y(94200),w=y(94433),j=y(92011),I=y(9466);function X(P){if(null!==P)return P}s.ErrorMessageTracker=class K{constructor(){this._messages=Object.create(null)}add(r){let f=this._messages[r];f||(f=0),f++,this._messages[r]=f}sendErrors(r){Object.keys(this._messages).forEach(f=>{r.window.showErrorMessage(f)})}};class v{constructor(){}rawAttach(r){this._rawConnection=r}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(r){}initialize(r){}error(r){this.send(t.MessageType.Error,r)}warn(r){this.send(t.MessageType.Warning,r)}info(r){this.send(t.MessageType.Info,r)}log(r){this.send(t.MessageType.Log,r)}send(r,f){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:r,message:f}).catch(()=>{(0,t.RAL)().console.error("Sending log message failed")})}}const A=(0,u.ShowDocumentFeature)((0,a.ProgressFeature)(class E{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}showErrorMessage(r,...f){return this.connection.sendRequest(t.ShowMessageRequest.type,{type:t.MessageType.Error,message:r,actions:f}).then(X)}showWarningMessage(r,...f){return this.connection.sendRequest(t.ShowMessageRequest.type,{type:t.MessageType.Warning,message:r,actions:f}).then(X)}showInformationMessage(r,...f){return this.connection.sendRequest(t.ShowMessageRequest.type,{type:t.MessageType.Info,message:r,actions:f}).then(X)}}));(s.BulkRegistration||(s.BulkRegistration={})).create=function r(){return new z};class z{constructor(){this._registrations=[],this._registered=new Set}add(r,f){const M=S.string(r)?r:r.method;if(this._registered.has(M))throw new Error(`${M} is already added to this registration`);const m=O.generateUuid();this._registrations.push({id:m,method:M,registerOptions:f||{}}),this._registered.add(M)}asRegistrationParams(){return{registrations:this._registrations}}}(s.BulkUnregistration||(s.BulkUnregistration={})).create=function r(){return new Y(void 0,[])};class Y{constructor(r,f){this._connection=r,this._unregistrations=new Map,f.forEach(M=>{this._unregistrations.set(M.method,M)})}get isAttached(){return!!this._connection}attach(r){this._connection=r}add(r){this._unregistrations.set(r.method,r)}dispose(){let r=[];for(let M of this._unregistrations.values())r.push(M);this._connection.sendRequest(t.UnregistrationRequest.type,{unregisterations:r}).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(r){const f=S.string(r)?r:r.method,M=this._unregistrations.get(f);return!!M&&(this._connection.sendRequest(t.UnregistrationRequest.type,{unregisterations:[M]}).then(()=>{this._unregistrations.delete(f)},B=>{this._connection.console.info(`Un-registering request handler for ${M.id} failed.`)}),!0)}}class V{attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}register(r,f,M){return r instanceof z?this.registerMany(r):r instanceof Y?this.registerSingle1(r,f,M):this.registerSingle2(r,f)}registerSingle1(r,f,M){const m=S.string(f)?f:f.method,B=O.generateUuid();let G={registrations:[{id:B,method:m,registerOptions:M||{}}]};return r.isAttached||r.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,G).then(J=>(r.add({id:B,method:m}),r),J=>(this.connection.console.info(`Registering request handler for ${m} failed.`),Promise.reject(J)))}registerSingle2(r,f){const M=S.string(r)?r:r.method,m=O.generateUuid();return this.connection.sendRequest(t.RegistrationRequest.type,{registrations:[{id:m,method:M,registerOptions:f||{}}]}).then(G=>t.Disposable.create(()=>{this.unregisterSingle(m,M).catch(()=>{this.connection.console.info(`Un-registering capability with id ${m} failed.`)})}),G=>(this.connection.console.info(`Registering request handler for ${M} failed.`),Promise.reject(G)))}unregisterSingle(r,f){return this.connection.sendRequest(t.UnregistrationRequest.type,{unregisterations:[{id:r,method:f}]}).catch(()=>{this.connection.console.info(`Un-registering request handler for ${r} failed.`)})}registerMany(r){let f=r.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,f).then(()=>new Y(this._connection,f.registrations.map(M=>({id:M.id,method:M.method}))),M=>(this.connection.console.info("Bulk registration failed."),Promise.reject(M)))}}const te=(0,l.FileOperationsFeature)((0,p.WorkspaceFoldersFeature)((0,h.ConfigurationFeature)(class ce{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}applyEdit(r){let M=function f(m){return m&&!!m.edit}(r)?r:{edit:r};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,M)}})));class ne{constructor(){this._trace=t.Trace.Off}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}set trace(r){this._trace=r}log(r,f){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:r,verbose:this._trace===t.Trace.Verbose?f:void 0}).catch(()=>{})}}class ie{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}logEvent(r){this.connection.sendNotification(t.TelemetryEventNotification.type,r).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class oe{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}attachWorkDoneProgress(r){return(0,a.attachWorkDone)(this.connection,r)}attachPartialResultProgress(r,f){return(0,a.attachPartialResult)(this.connection,f)}}s._LanguagesImpl=oe;const re=(0,I.MonikerFeature)((0,w.DiagnosticFeature)((0,$.InlayHintFeature)((0,N.InlineValueFeature)((0,F.TypeHierarchyFeature)((0,D.LinkedEditingRangeFeature)((0,_.SemanticTokensFeature)((0,i.CallHierarchyFeature)(oe))))))));class se{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}attachWorkDoneProgress(r){return(0,a.attachWorkDone)(this.connection,r)}attachPartialResultProgress(r,f){return(0,a.attachPartialResult)(this.connection,f)}}s._NotebooksImpl=se;const ee=(0,j.NotebookSyncFeature)(se);function d(P,r){return function(f){return r(P(f))}}function g(P,r){return function(f){return r(P(f))}}function b(P,r){return function(f){return r(P(f))}}function c(P,r){return function(f){return r(P(f))}}function n(P,r){return function(f){return r(P(f))}}function e(P,r){return function(f){return r(P(f))}}function o(P,r){return function(f){return r(P(f))}}function R(P,r){return function(f){return r(P(f))}}s.combineConsoleFeatures=d,s.combineTelemetryFeatures=g,s.combineTracerFeatures=b,s.combineClientFeatures=c,s.combineWindowFeatures=n,s.combineWorkspaceFeatures=e,s.combineLanguagesFeatures=o,s.combineNotebooksFeatures=R,s.combineFeatures=function x(P,r){function f(m,B,G){return m&&B?G(m,B):m||B}return{__brand:"features",console:f(P.console,r.console,d),tracer:f(P.tracer,r.tracer,b),telemetry:f(P.telemetry,r.telemetry,g),client:f(P.client,r.client,c),window:f(P.window,r.window,n),workspace:f(P.workspace,r.workspace,e),languages:f(P.languages,r.languages,o),notebooks:f(P.notebooks,r.notebooks,R)}},s.createConnection=function C(P,r,f){const M=f&&f.console?new(f.console(v)):new v,m=P(M);M.rawAttach(m);const B=f&&f.tracer?new(f.tracer(ne)):new ne,G=f&&f.telemetry?new(f.telemetry(ie)):new ie,J=f&&f.client?new(f.client(V)):new V,pe=f&&f.window?new(f.window(A)):new A,me=f&&f.workspace?new(f.workspace(te)):new te,ye=f&&f.languages?new(f.languages(re)):new re,_e=f&&f.notebooks?new(f.notebooks(ee)):new ee,ue=[M,B,G,J,pe,me,ye,_e];let le,de,he,ae={listen:()=>m.listen(),sendRequest:(k,...T)=>m.sendRequest(S.string(k)?k:k.method,...T),onRequest:(k,T)=>m.onRequest(k,T),sendNotification:(k,T)=>{const q=S.string(k)?k:k.method;return 1===arguments.length?m.sendNotification(q):m.sendNotification(q,T)},onNotification:(k,T)=>m.onNotification(k,T),onProgress:m.onProgress,sendProgress:m.sendProgress,onInitialize:k=>(de=k,{dispose:()=>{de=void 0}}),onInitialized:k=>m.onNotification(t.InitializedNotification.type,k),onShutdown:k=>(le=k,{dispose:()=>{le=void 0}}),onExit:k=>(he=k,{dispose:()=>{he=void 0}}),get console(){return M},get telemetry(){return G},get tracer(){return B},get client(){return J},get window(){return pe},get workspace(){return me},get languages(){return ye},get notebooks(){return _e},onDidChangeConfiguration:k=>m.onNotification(t.DidChangeConfigurationNotification.type,k),onDidChangeWatchedFiles:k=>m.onNotification(t.DidChangeWatchedFilesNotification.type,k),__textDocumentSync:void 0,onDidOpenTextDocument:k=>m.onNotification(t.DidOpenTextDocumentNotification.type,k),onDidChangeTextDocument:k=>m.onNotification(t.DidChangeTextDocumentNotification.type,k),onDidCloseTextDocument:k=>m.onNotification(t.DidCloseTextDocumentNotification.type,k),onWillSaveTextDocument:k=>m.onNotification(t.WillSaveTextDocumentNotification.type,k),onWillSaveTextDocumentWaitUntil:k=>m.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,k),onDidSaveTextDocument:k=>m.onNotification(t.DidSaveTextDocumentNotification.type,k),sendDiagnostics:k=>m.sendNotification(t.PublishDiagnosticsNotification.type,k),onHover:k=>m.onRequest(t.HoverRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),void 0)),onCompletion:k=>m.onRequest(t.CompletionRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onCompletionResolve:k=>m.onRequest(t.CompletionResolveRequest.type,k),onSignatureHelp:k=>m.onRequest(t.SignatureHelpRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),void 0)),onDeclaration:k=>m.onRequest(t.DeclarationRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onDefinition:k=>m.onRequest(t.DefinitionRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onTypeDefinition:k=>m.onRequest(t.TypeDefinitionRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onImplementation:k=>m.onRequest(t.ImplementationRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onReferences:k=>m.onRequest(t.ReferencesRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onDocumentHighlight:k=>m.onRequest(t.DocumentHighlightRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onDocumentSymbol:k=>m.onRequest(t.DocumentSymbolRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onWorkspaceSymbol:k=>m.onRequest(t.WorkspaceSymbolRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onWorkspaceSymbolResolve:k=>m.onRequest(t.WorkspaceSymbolResolveRequest.type,k),onCodeAction:k=>m.onRequest(t.CodeActionRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onCodeActionResolve:k=>m.onRequest(t.CodeActionResolveRequest.type,(T,q)=>k(T,q)),onCodeLens:k=>m.onRequest(t.CodeLensRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onCodeLensResolve:k=>m.onRequest(t.CodeLensResolveRequest.type,(T,q)=>k(T,q)),onDocumentFormatting:k=>m.onRequest(t.DocumentFormattingRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),void 0)),onDocumentRangeFormatting:k=>m.onRequest(t.DocumentRangeFormattingRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),void 0)),onDocumentOnTypeFormatting:k=>m.onRequest(t.DocumentOnTypeFormattingRequest.type,(T,q)=>k(T,q)),onRenameRequest:k=>m.onRequest(t.RenameRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),void 0)),onPrepareRename:k=>m.onRequest(t.PrepareRenameRequest.type,(T,q)=>k(T,q)),onDocumentLinks:k=>m.onRequest(t.DocumentLinkRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onDocumentLinkResolve:k=>m.onRequest(t.DocumentLinkResolveRequest.type,(T,q)=>k(T,q)),onDocumentColor:k=>m.onRequest(t.DocumentColorRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onColorPresentation:k=>m.onRequest(t.ColorPresentationRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onFoldingRanges:k=>m.onRequest(t.FoldingRangeRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onSelectionRanges:k=>m.onRequest(t.SelectionRangeRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),(0,a.attachPartialResult)(m,T))),onExecuteCommand:k=>m.onRequest(t.ExecuteCommandRequest.type,(T,q)=>k(T,q,(0,a.attachWorkDone)(m,T),void 0)),dispose:()=>m.dispose()};for(let k of ue)k.attach(ae);return m.onRequest(t.InitializeRequest.type,k=>{r.initialize(k),S.string(k.trace)&&(B.trace=t.Trace.fromString(k.trace));for(let T of ue)T.initialize(k.capabilities);if(de)return function ve(k){return k instanceof Promise?k:S.thenable(k)?new Promise((T,q)=>{k.then(Q=>T(Q),Q=>q(Q))}):Promise.resolve(k)}(de(k,(new t.CancellationTokenSource).token,(0,a.attachWorkDone)(m,k),void 0)).then(q=>{if(q instanceof t.ResponseError)return q;let Q=q;Q||(Q={capabilities:{}});let Z=Q.capabilities;Z||(Z={},Q.capabilities=Z),null==Z.textDocumentSync?Z.textDocumentSync=S.number(ae.__textDocumentSync)?ae.__textDocumentSync:t.TextDocumentSyncKind.None:!S.number(Z.textDocumentSync)&&!S.number(Z.textDocumentSync.change)&&(Z.textDocumentSync.change=S.number(ae.__textDocumentSync)?ae.__textDocumentSync:t.TextDocumentSyncKind.None);for(let be of ue)be.fillServerCapabilities(Z);return Q});{let T={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let q of ue)q.fillServerCapabilities(T.capabilities);return T}}),m.onRequest(t.ShutdownRequest.type,()=>{if(r.shutdownReceived=!0,le)return le((new t.CancellationTokenSource).token)}),m.onNotification(t.ExitNotification.type,()=>{try{he&&he()}finally{r.exit(r.shutdownReceived?0:1)}}),m.onNotification(t.SetTraceNotification.type,k=>{B.trace=t.Trace.fromString(k.value)}),ae}},95601:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ShowDocumentFeature=void 0;const t=y(45974);s.ShowDocumentFeature=O=>class extends O{showDocument(a){return this.connection.sendRequest(t.ShowDocumentRequest.type,a)}}},39059:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextDocuments=void 0;const t=y(45974);s.TextDocuments=class S{constructor(a){this._configuration=a,this._syncedDocuments=new Map,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(a){this._willSaveWaitUntil=a}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(a){return this._syncedDocuments.get(a)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(a){a.__textDocumentSync=t.TextDocumentSyncKind.Incremental;const h=[];return h.push(a.onDidOpenTextDocument(p=>{const i=p.textDocument,_=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,_);const u=Object.freeze({document:_});this._onDidOpen.fire(u),this._onDidChangeContent.fire(u)})),h.push(a.onDidChangeTextDocument(p=>{const i=p.textDocument,_=p.contentChanges;if(0===_.length)return;const{version:u}=i;if(null==u)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);void 0!==l&&(l=this._configuration.update(l,_,u),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),h.push(a.onDidCloseTextDocument(p=>{let i=this._syncedDocuments.get(p.textDocument.uri);void 0!==i&&(this._syncedDocuments.delete(p.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),h.push(a.onWillSaveTextDocument(p=>{let i=this._syncedDocuments.get(p.textDocument.uri);void 0!==i&&this._onWillSave.fire(Object.freeze({document:i,reason:p.reason}))})),h.push(a.onWillSaveTextDocumentWaitUntil((p,i)=>{let _=this._syncedDocuments.get(p.textDocument.uri);return void 0!==_&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:_,reason:p.reason}),i):[]})),h.push(a.onDidSaveTextDocument(p=>{let i=this._syncedDocuments.get(p.textDocument.uri);void 0!==i&&this._onDidSave.fire(Object.freeze({document:i}))})),t.Disposable.create(()=>{h.forEach(p=>p.dispose())})}}},71397:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TypeHierarchyFeature=void 0;const t=y(45974);s.TypeHierarchyFeature=O=>class extends O{get typeHierarchy(){return{onPrepare:a=>this.connection.onRequest(t.TypeHierarchyPrepareRequest.type,(h,p)=>a(h,p,this.attachWorkDoneProgress(h),void 0)),onSupertypes:a=>{const h=t.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(h,(p,i)=>a(p,i,this.attachWorkDoneProgress(p),this.attachPartialResultProgress(h,p)))},onSubtypes:a=>{const h=t.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(h,(p,i)=>a(p,i,this.attachWorkDoneProgress(p),this.attachPartialResultProgress(h,p)))}}}}},83901:(W,s)=>{function t(u){return"string"==typeof u||u instanceof String}function a(u){return"function"==typeof u}function h(u){return Array.isArray(u)}Object.defineProperty(s,"__esModule",{value:!0}),s.thenable=s.typedArray=s.stringArray=s.array=s.func=s.error=s.number=s.string=s.boolean=void 0,s.boolean=function y(u){return!0===u||!1===u},s.string=t,s.number=function S(u){return"number"==typeof u||u instanceof Number},s.error=function O(u){return u instanceof Error},s.func=a,s.array=h,s.stringArray=function p(u){return h(u)&&u.every(l=>t(l))},s.typedArray=function i(u,l){return Array.isArray(u)&&u.every(l)},s.thenable=function _(u){return u&&a(u.then)}},43706:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.generateUuid=s.parse=s.isUUID=s.v4=s.empty=void 0;class y{constructor(_){this._value=_}asHex(){return this._value}equals(_){return this.asHex()===_.asHex()}}let t=(()=>{class i extends y{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(u){return u[Math.floor(u.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}return i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],i})();function S(){return new t}s.empty=new y("00000000-0000-0000-0000-000000000000"),s.v4=S;const O=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(i){return O.test(i)}s.isUUID=a,s.parse=function h(i){if(!a(i))throw new Error("invalid uuid");return new y(i)},s.generateUuid=function p(){return S().asHex()}},45108:(W,s,y)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WorkspaceFoldersFeature=void 0;const t=y(45974);s.WorkspaceFoldersFeature=O=>class extends O{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(a){super.initialize(a);let h=a.workspace;h&&h.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new t.Emitter,this.connection.onNotification(t.DidChangeWorkspaceFoldersNotification.type,p=>{this._onDidChangeWorkspaceFolders.fire(p.event)}))}fillServerCapabilities(a){super.fillServerCapabilities(a);const h=a.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=!0===h||"string"==typeof h}getWorkspaceFolders(){return this.connection.sendRequest(t.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(t.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}},99938:(W,s,y)=>{function h(d,g,b,c){var o,n=arguments.length,e=n<3?g:null===c?c=Object.getOwnPropertyDescriptor(g,b):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(d,g,b,c);else for(var R=d.length-1;R>=0;R--)(o=d[R])&&(e=(n<3?o(e):n>3?o(g,b,e):o(g,b))||e);return n>3&&e&&Object.defineProperty(g,b,e),e}function D(d,g){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(d,g)}function F(d,g,b,c){return new(b||(b=Promise))(function(e,o){function R(P){try{C(c.next(P))}catch(r){o(r)}}function x(P){try{C(c.throw(P))}catch(r){o(r)}}function C(P){P.done?e(P.value):function n(e){return e instanceof b?e:new b(function(o){o(e)})}(P.value).then(R,x)}C((c=c.apply(d,g||[])).next())})}y.d(s,{gn:()=>h,mG:()=>F,w6:()=>D}),"function"==typeof SuppressedError&&SuppressedError}},ge={};function L(W){var s=ge[W];if(void 0!==s)return s.exports;var y=ge[W]={exports:{}};return fe[W].call(y.exports,y,y.exports,L),y.exports}L.m=fe,L.x=()=>{var W=L.O(void 0,[841,60],()=>L(92271));return L.O(W)},W=[],L.O=(s,y,t,S)=>{if(!y){var a=1/0;for(O=0;O<W.length;O++){for(var[y,t,S]=W[O],h=!0,p=0;p<y.length;p++)(!1&S||a>=S)&&Object.keys(L.O).every(F=>L.O[F](y[p]))?y.splice(p--,1):(h=!1,S<a&&(a=S));if(h){W.splice(O--,1);var i=t();void 0!==i&&(s=i)}}return s}S=S||0;for(var O=W.length;O>0&&W[O-1][2]>S;O--)W[O]=W[O-1];W[O]=[y,t,S]},L.n=W=>{var s=W&&W.__esModule?()=>W.default:()=>W;return L.d(s,{a:s}),s},L.d=(W,s)=>{for(var y in s)L.o(s,y)&&!L.o(W,y)&&Object.defineProperty(W,y,{enumerable:!0,get:s[y]})},L.f={},L.e=W=>Promise.all(Object.keys(L.f).reduce((s,y)=>(L.f[y](W,s),s),[])),L.u=W=>W+"."+{60:"d1c0d352c73f0509",841:"63939124573005c8"}[W]+".js",L.miniCssF=W=>{},L.o=(W,s)=>Object.prototype.hasOwnProperty.call(W,s),L.r=W=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},(()=>{var W;L.tt=()=>(void 0===W&&(W={createScriptURL:s=>s},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(W=trustedTypes.createPolicy("angular#bundler",W))),W)})(),L.tu=W=>L.tt().createScriptURL(W),L.p="",(()=>{var W={271:1};L.f.i=(S,O)=>{W[S]||importScripts(L.tu(L.p+L.u(S)))};var y=self.webpackChunkweb=self.webpackChunkweb||[],t=y.push.bind(y);y.push=S=>{var[O,a,h]=S;for(var p in a)L.o(a,p)&&(L.m[p]=a[p]);for(h&&h(L);O.length;)W[O.pop()]=1;t(S)}})(),(()=>{var W=L.x;L.x=()=>Promise.all([L.e(841),L.e(60)]).then(W)})(),L.x()})();