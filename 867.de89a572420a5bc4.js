"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[867],{92665:(re,E,e)=>{e.r(E),e.d(E,{default:()=>de});var S={};e.r(S),e.d(S,{vs_platform_audioCues_browser_media_break_mp3:()=>x,vs_platform_audioCues_browser_media_diffLineDeleted_mp3:()=>H,vs_platform_audioCues_browser_media_diffLineInserted_mp3:()=>T,vs_platform_audioCues_browser_media_diffLineModified_mp3:()=>$,vs_platform_audioCues_browser_media_error_mp3:()=>j,vs_platform_audioCues_browser_media_foldedAreas_mp3:()=>w,vs_platform_audioCues_browser_media_quickFixes_mp3:()=>W,vs_platform_audioCues_browser_media_taskCompleted_mp3:()=>K,vs_platform_audioCues_browser_media_taskFailed_mp3:()=>R,vs_platform_audioCues_browser_media_terminalBell_mp3:()=>Q,vs_platform_audioCues_browser_media_warning_mp3:()=>z}),e(87708);var B=e(21462),m=e(83772);const x=e.p+"b3058cc400b5bd32.mp3",H=e.p+"d5fb69023d3eb58a.mp3",T=e.p+"5b16204a7be81b12.mp3",$=e.p+"4d7d4330cd8bd26c.mp3",j=e.p+"09cbf65fb69575e7.mp3",w=e.p+"9ce899c12b6d3853.mp3",W=e.p+"63fcab6b98b5d906.mp3",K=e.p+"a79a1ef48b20cc9d.mp3",R=e.p+"403670eb49f8da65.mp3",Q=e.p+"f0aec19de3c166bf.mp3",z=e.p+"a4b50410d084d0f1.mp3";var G=e(99460),J=e(58054),U=e(62981),Z=e(52786),s=e(12829),X=e(62465),k=e(73317),Y=e(79026),V=e(17360);let q=(()=>{class b extends k.Ke{constructor(){super({id:b.ID,title:{value:(0,s.NC)("audioCues.help","Help: List Audio Cues"),original:"Help: List Audio Cues"},f1:!0})}run(a){return(0,J.Z)(function*(){const i=a.get(m.e7),l=a.get(Y.eJ),c=a.get(V.UP),o=a.get(X.F),t=m.y$.allAudioCues.map((n,g)=>({label:o.isScreenReaderOptimized()?`${n.name}${i.isEnabled(n)?"":" ("+(0,s.NC)("disabled","Disabled")+")"}`:`${i.isEnabled(n)?"$(check)":"     "} ${n.name}`,audioCue:n,buttons:[{iconClass:Z.kS.asClassName(U.lA.settingsGear),tooltip:(0,s.NC)("audioCues.help.settings","Enable/Disable Audio Cue")}]}));yield l.pick(t,{activeItem:t[0],onDidFocus:n=>{i.playSound(n.audioCue.sound,!0)},onDidTriggerItemButton:n=>{c.openSettings({query:n.item.audioCue.settingsKey})},placeHolder:(0,s.NC)("audioCues.help.placeholder","Select an audio cue to play")})})()}}return b.ID="audioCues.help",b})();var _=e(84776),N=e(33562),A=e(94014),h=e(55885),v=e(12997),r=e(85003),M=e(86390);let D=class extends v.JT{constructor(d,a){super(),this.audioCueService=a;const i=(0,r.rD)(a.onEnabledChanged(m.y$.onDebugBreak),()=>a.isEnabled(m.y$.onDebugBreak));this._register((0,r.gp)((l,c)=>{if(!i.read(l))return;const o=new Map;c.add((0,v.OF)(()=>{o.forEach(t=>t.dispose()),o.clear()})),c.add(d.onDidNewSession(t=>o.set(t,this.handleSession(t)))),c.add(d.onDidEndSession(t=>{o.get(t)?.dispose(),o.delete(t)})),d.getModel().getSessions().forEach(t=>o.set(t,this.handleSession(t)))},"subscribe to debug sessions"))}handleSession(d){return d.onDidChangeState(a=>{const i=d.getStoppedDetails();i&&"breakpoint"===i.reason&&this.audioCueService.playAudioCue(m.y$.onDebugBreak)})}};D=(0,h.gn)([(0,h.fM)(0,M.tn),(0,h.fM)(1,m.e7)],D);var ee=e(49311),ie=e(13683),I=e(54239),F=e(81026),te=e(83558),ne=e(82344),se=e(75881),ae=e(31719);let P=class extends v.JT{constructor(d,a,i,l){super(),this.editorService=d,this.instantiationService=a,this.audioCueService=i,this._configurationService=l,this.store=this._register(new v.SL),this.features=[this.instantiationService.createInstance(y,m.y$.error,F.ZL.Error),this.instantiationService.createInstance(y,m.y$.warning,F.ZL.Warning),this.instantiationService.createInstance(oe),this.instantiationService.createInstance(L)],this.isEnabledCache=new se.bQ(t=>(0,r.rD)(this.audioCueService.onEnabledChanged(t),()=>this.audioCueService.isEnabled(t)));const c=(0,r.nK)("someAudioCueFeatureIsEnabled",t=>this.features.some(C=>this.isEnabledCache.get(C.audioCue).read(t))),o=(0,r.rD)(this.editorService.onDidActiveEditorChange,t=>{const C=this.editorService.activeTextEditorControl,n=(0,I.QI)(C)?C.getOriginalEditor():(0,I.CL)(C)?C:void 0;return n&&n.hasModel()?{editor:n,model:n.getModel()}:void 0});this._register((0,r.EH)("updateAudioCuesEnabled",t=>{if(this.store.clear(),!c.read(t))return;const C=o.read(t);C&&this.registerAudioCuesForEditor(C.editor,C.model,this.store)}))}registerAudioCuesForEditor(d,a,i){const l=(0,r.rD)(d.onDidChangeCursorPosition,n=>{if(!n||3===n.reason||0===n.reason)return d.getPosition()}),c=(0,r.GT)(l,this._configurationService.getValue("audioCues.debouncePositionChanges")?300:0,i),o=(0,r.kH)(a.onDidChangeContent.bind(a),1e3,i),t=this.features.map(n=>{const g=n.getObservableState(d,a),p=(0,r.nK)(`isPresentInLine:${n.audioCue.name}`,f=>{if(!this.isEnabledCache.get(n.audioCue).read(f))return!1;const O=c.read(f);return!!O&&g.read(f).isPresent(O)});return(0,r.nK)(`typingDebouncedFeatureState:\n${n.audioCue.name}`,f=>n.debounceWhileTyping&&o.read(f)?(c.read(f),p.get()):p.read(f))}),C=(0,r.nK)("states",n=>({lineNumber:c.read(n),featureStates:new Map(this.features.map((g,p)=>[g,t[p].read(n)]))}));i.add((0,r.Sf)("Play Audio Cue",C,({lastValue:n,newValue:g})=>{const p=this.features.filter(f=>g?.featureStates.get(f)&&(!n?.featureStates?.get(f)||g.lineNumber!==n.lineNumber));this.audioCueService.playAudioCues(p.map(f=>f.audioCue))}))}};P=(0,h.gn)([(0,h.fM)(0,ee.AR),(0,h.fM)(1,ne.TG),(0,h.fM)(2,m.e7),(0,h.fM)(3,ae.Ui)],P);let y=class{constructor(d,a,i){this.audioCue=d,this.severity=a,this.markerService=i,this.debounceWhileTyping=!0,this._previousLine=0}getObservableState(d,a){return(0,r.rD)(ie.ju.filter(this.markerService.onMarkerChanged,i=>i.some(l=>l.toString()===a.uri.toString())),()=>({isPresent:i=>{const l=i.lineNumber!==this._previousLine;return this._previousLine=i.lineNumber,this.markerService.read({resource:a.uri}).some(o=>{const t=o.severity===this.severity&&o.startLineNumber<=i.lineNumber&&i.lineNumber<=o.endLineNumber;return l?t:t&&i.lineNumber<=o.endLineNumber&&o.startColumn<=i.column&&o.endColumn>=i.column})}}))}};y=(0,h.gn)([(0,h.fM)(2,F.lT)],y);class oe{constructor(){this.audioCue=m.y$.foldedArea}getObservableState(d,a){const i=te.FoldingController.get(d);return i?(0,r.ln)(i.getFoldingModel()??Promise.resolve(void 0)).map(c=>({isPresent:o=>{const t=c.value?.getRegionAtLine(o.lineNumber);return!!t&&t.isCollapsed&&t.startLineNumber===o.lineNumber}})):(0,r.Dz)({isPresent:()=>!1})}}let L=class{constructor(d){this.debugService=d,this.audioCue=m.y$.break}getObservableState(d,a){return(0,r.rD)(this.debugService.getModel().onDidChangeBreakpoints,()=>({isPresent:i=>this.debugService.getModel().getBreakpoints({uri:a.uri,lineNumber:i.lineNumber}).length>0}))}};L=(0,h.gn)([(0,h.fM)(0,M.tn)],L),N.B.as(A.I.Workbench).registerWorkbenchContribution(P,3),N.B.as(A.I.Workbench).registerWorkbenchContribution(D,3);const u={type:"string",enum:["auto","on","off"],default:"auto",enumDescriptions:[(0,s.NC)("audioCues.enabled.auto","Enable audio cue when a screen reader is attached."),(0,s.NC)("audioCues.enabled.on","Enable audio cue."),(0,s.NC)("audioCues.enabled.off","Disable audio cue.")],tags:["accessibility"]};function de(){return{[m.e7.toString()]:new B.M(m.y6)}}N.B.as(_.IP.Configuration).registerConfiguration({properties:{"audioCues.enabled":{markdownDeprecationMessage:"Deprecated. Use the specific setting for each audio cue instead (`audioCues.*`).",tags:["accessibility"]},"audioCues.volume":{description:(0,s.NC)("audioCues.volume","The volume of the audio cues in percent (0-100)."),type:"number",minimum:0,maximum:100,default:70,tags:["accessibility"]},"audioCues.debouncePositionChanges":{description:(0,s.NC)("audioCues.debouncePositionChanges","Whether or not position changes should be debounced"),type:"boolean",default:!1,tags:["accessibility"]},"audioCues.lineHasBreakpoint":{description:(0,s.NC)("audioCues.lineHasBreakpoint","Plays a sound when the active line has a breakpoint."),...u},"audioCues.lineHasInlineSuggestion":{description:(0,s.NC)("audioCues.lineHasInlineSuggestion","Plays a sound when the active line has an inline suggestion."),...u},"audioCues.lineHasError":{description:(0,s.NC)("audioCues.lineHasError","Plays a sound when the active line has an error."),...u},"audioCues.lineHasFoldedArea":{description:(0,s.NC)("audioCues.lineHasFoldedArea","Plays a sound when the active line has a folded area that can be unfolded."),...u},"audioCues.lineHasWarning":{description:(0,s.NC)("audioCues.lineHasWarning","Plays a sound when the active line has a warning."),...u,default:"off"},"audioCues.onDebugBreak":{description:(0,s.NC)("audioCues.onDebugBreak","Plays a sound when the debugger stopped on a breakpoint."),...u},"audioCues.noInlayHints":{description:(0,s.NC)("audioCues.noInlayHints","Plays a sound when trying to read a line with inlay hints that has no inlay hints."),...u},"audioCues.taskCompleted":{description:(0,s.NC)("audioCues.taskCompleted","Plays a sound when a task is completed."),...u},"audioCues.taskFailed":{description:(0,s.NC)("audioCues.taskFailed","Plays a sound when a task fails (non-zero exit code)."),...u},"audioCues.terminalCommandFailed":{description:(0,s.NC)("audioCues.terminalCommandFailed","Plays a sound when a terminal command fails (non-zero exit code)."),...u},"audioCues.terminalQuickFix":{description:(0,s.NC)("audioCues.terminalQuickFix","Plays a sound when terminal Quick Fixes are available."),...u},"audioCues.diffLineInserted":{description:(0,s.NC)("audioCues.diffLineInserted","Plays a sound when the focus moves to an inserted line in diff review mode or to the next/previous change"),...u},"audioCues.diffLineDeleted":{description:(0,s.NC)("audioCues.diffLineDeleted","Plays a sound when the focus moves to a deleted line in diff review mode or to the next/previous change"),...u},"audioCues.diffLineModified":{description:(0,s.NC)("audioCues.diffLineModified","Plays a sound when the focus moves to a modified line in diff review mode or to the next/previous change"),...u},"audioCues.notebookCellCompleted":{description:(0,s.NC)("audioCues.notebookCellCompleted","Plays a sound when a notebook cell execution is successfully completed."),...u},"audioCues.notebookCellFailed":{description:(0,s.NC)("audioCues.notebookCellFailed","Plays a sound when a notebook cell execution fails."),...u}}}),(0,k.r1)(q),(0,G.l)(S)}}]);