(()=>{"use strict";var a,O={25259:(a,m,i)=>{i(44334);var l=i(92171),_=(i(17129),i(17004));console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",y=>{const v=y.data.compile;if(v){const d=(0,l.V3)(v).resolve(new _._([])).toString("js");self.postMessage({compiled:d})}})},24524:(a,m,i)=>{i.d(m,{YN:()=>b,_w:()=>w,d2:()=>C,dm:()=>S,eB:()=>d,gN:()=>f,n$:()=>k,v_:()=>p,wT:()=>t});var $=i(24395),l=i(17129),c=i(67877),_=i(17004),y=i(49321),v=i(39758);class d extends c.NB{constructor(r,e=[]){super("unit"),this.path=r,this.classes=e,this.diagnostics=[]}report(r){this.diagnostics.push(r)}resolve(r){const e={[d.enclosing]:this};for(const s of this.classes)e[s.name]=s;return super.resolve(new _._(e,r))}lint(r){super.lint(new _._({[d.enclosing]:this},r))}toString(r){return this.classes.map(e=>e.toString(r)).join("\n\n")}}d.enclosing=Symbol("enclosing compilation unit"),d.parser="file";class n extends c.NB{constructor(r,e){super(r),this.name=e,this._references=[]}docComment(){return this.doc?"/**\n"+this.doc.trim().replace(/^/gm," * ")+"\n */\n":""}documentation(){return this.doc}references(){return[this,...this._references]}}class t extends n{constructor(r="<anonymous>",e=[],s=[],h=[]){super("class",r),this.fields=e,this.constructors=s,this.methods=h}asType(){const r=new v.rF(this.name);return r._class=this,r.location=this.location,r}asCompletion(){return{label:this.name,kind:"class"}}toString(r){return c.$S`
    ${this.docComment()}\
    class ${this.name} {
      ${this.fields.map(e=>e.toString(r)).join("\n")}

      ${this.constructors.map(e=>e.toString(r)).join("\n\n")}

      ${this.methods.map(e=>e.toString(r)).join("\n\n")}
    }`}lookup(r,e,...s){for(const h of this.fields)if(h.name===r&&h instanceof e)return h;for(const h of this.methods)if(h.name===r&&h instanceof e&&h.overloads(s[0]))return h;for(const h of this.constructors)if(h instanceof e&&h.overloads(s[0]))return h}list(){return[...this.fields,...this.methods]}resolve(r){const e=new _._({[t.enclosing]:this},r);super.resolve(e);for(const s of this.fields)this.fields.some(h=>h!==s&&h.name===s.name)&&(0,l.Hj)(r,s.location,`duplicate field ${s.name}`);for(const s of this.methods)this.methods.some(h=>h!==s&&h.jsName===s.jsName)&&(0,l.Hj)(r,s.location,`duplicate method ${s.name} with mangled name ${s.jsName}`);return this}}t.enclosing=Symbol("enclosing class"),t.parser="class";class o extends n{constructor(r,e,s,h){super(r,e),this.parameters=s,this.body=h}resolve(r){this._thisClass||(this._thisClass=r.lookup(t.enclosing,t)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new C("this",this._thisClass.asType()),this._thisParameter.location=this.location);const e=new _._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,r);return super.resolve(e)}overloads(r){return r.length===this.parameters.length&&this.parameters.every((e,s)=>(0,v.BM)(e.type,r[s]))}}let p=(()=>{class g extends o{constructor(e=[],s=new y.gO){super("constructor","init",e,s)}toString(e){const s="js"===e?"constructor":"init",h=this.parameters.map(P=>P.toString(e)).join(", "),E=this.body.toString(e);return`${this.docComment()}${s}(${h}) ${E}`}documentation(){return this.parameters.length?c.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(e=>"- "+e.documentation()).join("\n")}
    `:this.doc}references(e){return"rename"===e?[]:super.references()}}return g.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},g.parser="ctor",g})(),f=(()=>{class g extends n{constructor(e="<unknown>",s=v.NI,h){super("field",e),this.type=s,this.value=h}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(e){const s=this.value?" = "+this.value.toString(e):"";if("js"===e)return c.$S`
      _${this.name}${s};
      get ${this.name}() { return this._${this.name}; }
      set ${this.name}(value) { this._${this.name} = value; }`;const h=this.type.toString(e);return`${this.docComment()}var ${this.name}: ${h}${s}`}}return g.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},g.parser="field",g})(),k=(()=>{class g extends o{constructor(e="<unknown>",s=[],h=v.NI,E=new y.gO){super("method",e,s,E),this.returnType=h}get jsName(){return this.name+this.parameters.map(e=>"_"+e.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(e=>e.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((e,s)=>`\${${s}:${e.name}}`).join(", ")})`}}documentation(){let e=this.doc||"";return this.parameters.length&&(e+="\n#### Parameters\n"+this.parameters.map(s=>"- "+s.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(e+="\n#### Returns\n`"+this.returnType.toString()+"`"),e}toString(e){const s="js"!==e?"func "+this.name:this.jsName,h=this.parameters.map(x=>x.toString(e)).join(", "),E="js"!==e?": "+this.returnType.toString(e):"",P=this.body.toString(e);return`${this.docComment()}${s}(${h})${E} ${P}`}}return g.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},g.parser="method",g})();class S extends c.NB{constructor(r){super("class-completion"),this.name=r}toString(r){return this.name}resolve(r){return(0,l.Hk)(r,this.location,this.name,{extra:S.completions}),super.resolve(r)}}S.completions=[k,p,f].map(g=>g.completion);class b extends n{constructor(r,e,s){super(r,e),this.type=s}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(r){const e=this.type?": "+this.type.toString(r):"";return`${this.docComment()}${this.name}${e}`}}let C=(()=>{class g extends b{constructor(e="<unknown>",s=v.NI){super("parameter",e,s),this.type=s}references(e){return"rename"===e&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(e){return"js"===e?this.name:super.toString(e)}}return g.parser="parameter",g})(),w=(()=>{class g extends b{constructor(e="<unknown>",s,h=$.iY){super("variable",e,s),this.value=h}documentation(){var e;return`\`var ${this.name}: ${null===(e=this.type)||void 0===e?void 0:e.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(e){if("js"===e)return`let ${this.name} = ${this.value.toString(e)}`;const s=this.type?": "+this.type.toString(e):"";return`${this.docComment()}var ${this.name}${s} = ${this.value.toString(e)}`}resolve(e){const s=super.resolve(e);return s.type||(s.type=s.value.getType()),s}}return g.parser="variable",g})()},44334:(a,m,i)=>{i.d(m,{K9:()=>c.K9,MX:()=>_.MX,UX:()=>c.UX,WJ:()=>c.WJ,ZJ:()=>l.ZJ,_C:()=>l._C,_w:()=>$._w,d2:()=>$.d2,dm:()=>$.dm,eB:()=>$.eB,gN:()=>$.gN,gO:()=>c.gO,jR:()=>l.jR,lX:()=>l.lX,n$:()=>$.n$,o6:()=>l.o6,on:()=>c.on,rF:()=>_.rF,rX:()=>c.rX,sW:()=>l.sW,sj:()=>c.sj,t$:()=>l.t$,v_:()=>$.v_,wT:()=>$.wT});var $=i(24524),l=i(24395),c=i(49321),_=i(39758)},67877:(a,m,i)=>{i.d(m,{$S:()=>v,NB:()=>l});class l{constructor(n){this.kind=n}definition(n){}documentation(){var n;return null===(n=this.definition())||void 0===n?void 0:n.documentation()}references(n){var t;return(null===(t=this.definition(n))||void 0===t?void 0:t.references(n))||[]}resolve(n){return function c(d,n){for(const[t,o]of Object.entries(d))if("location"!==t&&"kind"!==t&&!t.startsWith("_")&&o)if(Array.isArray(o))for(let p=0;p<o.length;p++)o[p]instanceof l&&(o[p]=n(o[p]));else o instanceof l&&(d[t]=n(o))}(this,t=>t.resolve(n)),this}link(){for(const[n,t]of Object.entries(this))n.startsWith("_")&&t&&"_references"in t&&t._references.push(this);for(const n of y(this))n.link()}lint(n){for(const t of y(this))t.lint(n)}findByPosition(n){var t;if(!this.range||this.range.includes(n)){for(const o of y(this)){const p=o.findByPosition(n);if(p)return[this,...p]}if(null!==(t=this.location)&&void 0!==t&&t.includes(n))return[this]}}findEnclosing(n){if(this.range&&this.range.encloses(n)){for(const t of y(this)){const o=t.findEnclosing(n);if(o)return o}return this}}toString(n){return`<${this.kind}>`}}function*y(d){for(const[n,t]of Object.entries(d))if("location"!==n&&"kind"!==n&&!n.startsWith("_")&&t)if(Array.isArray(t))for(let o=0;o<t.length;o++)t[o]instanceof l&&(yield t[o]);else t instanceof l&&(yield t)}function v(d,...n){if(!d[0].startsWith("\n"))throw new Error("must start with a newline");const t=d[0].match(/^\n([ \t]*)/)[1];return d.map((o,p)=>{var f;0===p&&(o=o.substring(1+t.length));const S=(o=o.replace(new RegExp("^"+t,"gm"),"")).substring(o.lastIndexOf("\n")+1).match(/^\s*/)[0];return o+(null!==(f=n[p])&&void 0!==f?f:"").toString().replace(/\n/g,`\n${S}`)}).join("")}},17129:(a,m,i)=>{i.d(m,{Hj:()=>v,Hk:()=>d,Ly:()=>l,R9:()=>_,e6:()=>c});var $=i(44334);class l{constructor(t,o){this.line=t,this.column=o}}class c{constructor(t,o){this.start=t,this.end=o}includes(t){return this.start.line<=t.line&&t.line<=this.end.line&&(this.start.line<t.line||this.start.column<=t.column)&&(t.line<this.end.line||t.column<=this.end.column)}encloses(t){return this.includes(t.start)&&this.includes(t.end)}}class _{constructor(t,o,p,f="error",k,S){if(this.path=t,this.location=o,this.message=p,this.severity=f,this.expected=k,this.replacement=S,!o)throw new Error("location is required")}}function v(n,t,o,p="error",f){const k=n.lookup($.eB.enclosing,$.eB),S=Array.isArray(f)?f:void 0,b=Array.isArray(f)?void 0:f,C=new _(void 0,t,o,p,S,b);k?k.report(C):function y(n){const{path:t,location:{start:{line:o,column:p}},message:f,severity:k}=n;switch(k){case"error":console.error(`${t}:${o}:${p}: error: ${f}`);break;case"warning":console.warn(`${t}:${o}:${p}: warning: ${f}`);break;case"note":console.info(`${t}:${o}:${p}: note: ${f}`)}if(n.expected)for(let S of n.expected)console.log(`- [${S.kind}] ${S.label} ${S.signature||""} - ${S.description||""}`)}(C)}function d(n,t,o,{lookup:p,kind:f,extra:k}={}){if(!o.includes("\xa7"))return!1;const S=o.slice(0,-1),b=(p||n).list().filter(w=>"name"in w).filter(w=>!f||w.kind===f).map(w=>"asCompletion"in w?w.asCompletion():{kind:w.kind,label:w.name});return v(n,t,"input '\xa7' expecting","error",(k?[...b,...k]:b).filter(w=>w.label.startsWith(S))),!0}}},j={};function u(a){var m=j[a];if(void 0!==m)return m.exports;var i=j[a]={exports:{}};return O[a].call(i.exports,i,i.exports,u),i.exports}u.m=O,u.x=()=>{var a=u.O(void 0,[1],()=>u(25259));return u.O(a)},a=[],u.O=(m,i,$,l)=>{if(!i){var _=1/0;for(c=0;c<a.length;c++){for(var[i,$,l]=a[c],y=!0,v=0;v<i.length;v++)(!1&l||_>=l)&&Object.keys(u.O).every(f=>u.O[f](i[v]))?i.splice(v--,1):(y=!1,l<_&&(_=l));if(y){a.splice(c--,1);var d=$();void 0!==d&&(m=d)}}return m}l=l||0;for(var c=a.length;c>0&&a[c-1][2]>l;c--)a[c]=a[c-1];a[c]=[i,$,l]},u.d=(a,m)=>{for(var i in m)u.o(m,i)&&!u.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:m[i]})},u.f={},u.e=a=>Promise.all(Object.keys(u.f).reduce((m,i)=>(u.f[i](a,m),m),[])),u.u=a=>a+".169a90240858811f.js",u.miniCssF=a=>{},u.o=(a,m)=>Object.prototype.hasOwnProperty.call(a,m),(()=>{var a;u.tt=()=>(void 0===a&&(a={createScriptURL:m=>m},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(a=trustedTypes.createPolicy("angular#bundler",a))),a)})(),u.tu=a=>u.tt().createScriptURL(a),u.p="",(()=>{var a={259:1};u.f.i=(l,c)=>{a[l]||importScripts(u.tu(u.p+u.u(l)))};var i=self.webpackChunkweb=self.webpackChunkweb||[],$=i.push.bind(i);i.push=l=>{var[c,_,y]=l;for(var v in _)u.o(_,v)&&(u.m[v]=_[v]);for(y&&y(u);c.length;)a[c.pop()]=1;$(l)}})(),(()=>{var a=u.x;u.x=()=>u.e(1).then(a)})(),u.x()})();