(()=>{"use strict";var a,P={11612:(a,m,i)=>{i(35618);var l=i(44017),g=(i(74399),i(83981));console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",y=>{const f=y.data.compile;if(f){const d=(0,l.V3)(f).resolve(new g._([])).toString("js");self.postMessage({compiled:d})}})},127:(a,m,i)=>{i.d(m,{YN:()=>w,_w:()=>b,d2:()=>C,dm:()=>S,eB:()=>d,gN:()=>$,n$:()=>k,v_:()=>p,wT:()=>t});var v=i(48709),l=i(74399),c=i(42323),g=i(83981),y=i(46187),f=i(38426);class d extends c.NB{constructor(r,e=[]){super("unit"),this.path=r,this.classes=e,this.diagnostics=[]}report(r){this.diagnostics.push(r)}resolve(r){const e={[d.enclosing]:this};for(const s of this.classes)e[s.name]=s;return super.resolve(new g._(e,r))}toString(r){return this.classes.map(e=>e.toString(r)).join("\n\n")}}d.enclosing=Symbol("enclosing compilation unit"),d.parser="file";class n extends c.NB{constructor(r,e){super(r),this.name=e,this._references=[]}docComment(){return this.doc?"/**\n"+this.doc.trim().replace(/^/gm," * ")+"\n */\n":""}documentation(){return this.doc}references(){return[this,...this._references]}}class t extends n{constructor(r="<anonymous>",e=[],s=[],h=[]){super("class",r),this.fields=e,this.constructors=s,this.methods=h}asType(){const r=new f.rF(this.name);return r._class=this,r.location=this.location,r}asCompletion(){return{label:this.name,kind:"class"}}toString(r){return c.$S`
    ${this.docComment()}\
    class ${this.name} {
      ${this.fields.map(e=>e.toString(r)).join("\n")}

      ${this.constructors.map(e=>e.toString(r)).join("\n\n")}

      ${this.methods.map(e=>e.toString(r)).join("\n\n")}
    }`}lookup(r,e,...s){for(const h of this.fields)if(h.name===r&&h instanceof e)return h;for(const h of this.methods)if(h.name===r&&h instanceof e&&h.overloads(s[0]))return h;for(const h of this.constructors)if(h instanceof e&&h.overloads(s[0]))return h}list(){return[...this.fields,...this.methods]}resolve(r){const e=new g._({[t.enclosing]:this},r);super.resolve(e);for(const s of this.fields)this.fields.some(h=>h!==s&&h.name===s.name)&&(0,l.Hj)(r,s.location,`duplicate field ${s.name}`);for(const s of this.methods)this.methods.some(h=>h!==s&&h.jsName===s.jsName)&&(0,l.Hj)(r,s.location,`duplicate method ${s.name} with mangled name ${s.jsName}`);return this}}t.enclosing=Symbol("enclosing class"),t.parser="class";class o extends n{constructor(r,e,s,h){super(r,e),this.parameters=s,this.body=h}resolve(r){this._thisClass||(this._thisClass=r.lookup(t.enclosing,t)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new C("this",this._thisClass.asType()),this._thisParameter.location=this.location);const e=new g._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,r);return super.resolve(e)}overloads(r){return r.length===this.parameters.length&&this.parameters.every((e,s)=>(0,f.BM)(e.type,r[s]))}}let p=(()=>{class _ extends o{constructor(e=[],s=new y.gO){super("constructor","init",e,s)}toString(e){const s="js"===e?"constructor":"init",h=this.parameters.map(E=>E.toString(e)).join(", "),O=this.body.toString(e);return`${this.docComment()}${s}(${h}) ${O}`}documentation(){return this.parameters.length?c.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(e=>"- "+e.documentation()).join("\n")}
    `:this.doc}references(e){return"rename"===e?[]:super.references()}}return _.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},_.parser="ctor",_})(),$=(()=>{class _ extends n{constructor(e="<unknown>",s=f.NI,h){super("field",e),this.type=s,this.value=h}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(e){const s=this.value?" = "+this.value.toString(e):"";if("js"===e)return c.$S`
      _${this.name}${s};
      get ${this.name}() { return this._${this.name}; }
      set ${this.name}(value) { this._${this.name} = value; }`;const h=this.type.toString(e);return`${this.docComment()}var ${this.name}: ${h}${s}`}}return _.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},_.parser="field",_})(),k=(()=>{class _ extends o{constructor(e="<unknown>",s=[],h=f.NI,O=new y.gO){super("method",e,s,O),this.returnType=h}get jsName(){return this.name+this.parameters.map(e=>"_"+e.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(e=>e.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((e,s)=>`\${${s}:${e.name}}`).join(", ")})`}}documentation(){let e=this.doc||"";return this.parameters.length&&(e+="\n#### Parameters\n"+this.parameters.map(s=>"- "+s.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(e+="\n#### Returns\n`"+this.returnType.toString()+"`"),e}toString(e){const s="js"!==e?"func "+this.name:this.jsName,h=this.parameters.map(x=>x.toString(e)).join(", "),O="js"!==e?": "+this.returnType.toString(e):"",E=this.body.toString(e);return`${this.docComment()}${s}(${h})${O} ${E}`}}return _.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},_.parser="method",_})();class S extends c.NB{constructor(r){super("class-completion"),this.name=r}toString(r){return this.name}resolve(r){return(0,l.Hk)(r,this.location,this.name,{extra:S.completions}),super.resolve(r)}}S.completions=[k,p,$].map(_=>_.completion);class w extends n{constructor(r,e,s){super(r,e),this.type=s}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(r){const e=this.type?": "+this.type.toString(r):"";return`${this.docComment()}${this.name}${e}`}}let C=(()=>{class _ extends w{constructor(e="<unknown>",s=f.NI){super("parameter",e,s),this.type=s}references(e){return"rename"===e&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(e){return"js"===e?this.name:super.toString(e)}}return _.parser="parameter",_})(),b=(()=>{class _ extends w{constructor(e="<unknown>",s,h=v.iY){super("variable",e,s),this.value=h}documentation(){var e;return`\`var ${this.name}: ${null===(e=this.type)||void 0===e?void 0:e.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(e){if("js"===e)return`let ${this.name} = ${this.value.toString(e)}`;const s=this.type?": "+this.type.toString(e):"";return`${this.docComment()}var ${this.name}${s} = ${this.value.toString(e)}`}resolve(e){const s=super.resolve(e);return s.type||(s.type=s.value.getType()),s}}return _.parser="variable",_})()},35618:(a,m,i)=>{i.d(m,{K9:()=>c.K9,MX:()=>g.MX,UX:()=>c.UX,WJ:()=>c.WJ,ZJ:()=>l.ZJ,_C:()=>l._C,_w:()=>v._w,d2:()=>v.d2,dm:()=>v.dm,eB:()=>v.eB,gN:()=>v.gN,gO:()=>c.gO,jR:()=>l.jR,lX:()=>l.lX,n$:()=>v.n$,o6:()=>l.o6,on:()=>c.on,rF:()=>g.rF,rX:()=>c.rX,sW:()=>l.sW,sj:()=>c.sj,t$:()=>l.t$,v_:()=>v.v_,wT:()=>v.wT});var v=i(127),l=i(48709),c=i(46187),g=i(38426)},42323:(a,m,i)=>{i.d(m,{$S:()=>f,NB:()=>l});class l{constructor(n){this.kind=n}definition(n){}documentation(){var n;return null===(n=this.definition())||void 0===n?void 0:n.documentation()}references(n){var t;return(null===(t=this.definition(n))||void 0===t?void 0:t.references(n))||[]}resolve(n){return function c(d,n){for(const[t,o]of Object.entries(d))if("location"!==t&&"kind"!==t&&!t.startsWith("_")&&o)if(Array.isArray(o))for(let p=0;p<o.length;p++)o[p]instanceof l&&(o[p]=n(o[p]));else o instanceof l&&(d[t]=n(o))}(this,t=>t.resolve(n)),this}link(){for(const[n,t]of Object.entries(this))n.startsWith("_")&&t&&"_references"in t&&t._references.push(this);for(const n of y(this))n.link()}findByPosition(n){var t;if(!this.range||this.range.includes(n)){for(const o of y(this)){const p=o.findByPosition(n);if(p)return[this,...p]}if(null!==(t=this.location)&&void 0!==t&&t.includes(n))return[this]}}findEnclosing(n){if(this.range&&this.range.encloses(n)){for(const t of y(this)){const o=t.findEnclosing(n);if(o)return o}return this}}toString(n){return`<${this.kind}>`}}function*y(d){for(const[n,t]of Object.entries(d))if("location"!==n&&"kind"!==n&&!n.startsWith("_")&&t)if(Array.isArray(t))for(let o=0;o<t.length;o++)t[o]instanceof l&&(yield t[o]);else t instanceof l&&(yield t)}function f(d,...n){if(!d[0].startsWith("\n"))throw new Error("must start with a newline");const t=d[0].match(/^\n([ \t]*)/)[1];return d.map((o,p)=>{var $;0===p&&(o=o.substring(1+t.length));const S=(o=o.replace(new RegExp("^"+t,"gm"),"")).substring(o.lastIndexOf("\n")+1).match(/^\s*/)[0];return o+(null!==($=n[p])&&void 0!==$?$:"").toString().replace(/\n/g,`\n${S}`)}).join("")}},74399:(a,m,i)=>{i.d(m,{Hj:()=>f,Hk:()=>d,Ly:()=>l,R9:()=>g,e6:()=>c});var v=i(35618);class l{constructor(t,o){this.line=t,this.column=o}}class c{constructor(t,o){this.start=t,this.end=o}includes(t){return this.start.line<=t.line&&t.line<=this.end.line&&(this.start.line<t.line||this.start.column<=t.column)&&(t.line<this.end.line||t.column<=this.end.column)}encloses(t){return this.includes(t.start)&&this.includes(t.end)}}class g{constructor(t,o,p,$="error",k){if(this.path=t,this.location=o,this.message=p,this.severity=$,this.expected=k,!o)throw new Error("location is required")}}function f(n,t,o,p="error",$){const k=n.lookup(v.eB.enclosing,v.eB),S=new g(void 0,t,o,p,$);k?k.report(S):function y(n){const{path:t,location:{start:{line:o,column:p}},message:$,severity:k}=n;switch(k){case"error":console.error(`${t}:${o}:${p}: error: ${$}`);break;case"warning":console.warn(`${t}:${o}:${p}: warning: ${$}`);break;case"note":console.info(`${t}:${o}:${p}: note: ${$}`)}if(n.expected)for(let S of n.expected)console.log(`- [${S.kind}] ${S.label} ${S.signature||""} - ${S.description||""}`)}(S)}function d(n,t,o,{lookup:p,kind:$,extra:k}={}){if(!o.includes("\xa7"))return!1;const S=o.slice(0,-1),w=(p||n).list().filter(b=>"name"in b).filter(b=>!$||b.kind===$).map(b=>"asCompletion"in b?b.asCompletion():{kind:b.kind,label:b.name});return f(n,t,"input '\xa7' expecting","error",(k?[...w,...k]:w).filter(b=>b.label.startsWith(S))),!0}}},j={};function u(a){var m=j[a];if(void 0!==m)return m.exports;var i=j[a]={exports:{}};return P[a].call(i.exports,i,i.exports,u),i.exports}u.m=P,u.x=()=>{var a=u.O(void 0,[35],()=>u(11612));return u.O(a)},a=[],u.O=(m,i,v,l)=>{if(!i){var g=1/0;for(c=0;c<a.length;c++){for(var[i,v,l]=a[c],y=!0,f=0;f<i.length;f++)(!1&l||g>=l)&&Object.keys(u.O).every($=>u.O[$](i[f]))?i.splice(f--,1):(y=!1,l<g&&(g=l));if(y){a.splice(c--,1);var d=v();void 0!==d&&(m=d)}}return m}l=l||0;for(var c=a.length;c>0&&a[c-1][2]>l;c--)a[c]=a[c-1];a[c]=[i,v,l]},u.d=(a,m)=>{for(var i in m)u.o(m,i)&&!u.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:m[i]})},u.f={},u.e=a=>Promise.all(Object.keys(u.f).reduce((m,i)=>(u.f[i](a,m),m),[])),u.u=a=>a+".b07416fcf7c294c9.js",u.miniCssF=a=>{},u.o=(a,m)=>Object.prototype.hasOwnProperty.call(a,m),(()=>{var a;u.tt=()=>(void 0===a&&(a={createScriptURL:m=>m},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(a=trustedTypes.createPolicy("angular#bundler",a))),a)})(),u.tu=a=>u.tt().createScriptURL(a),u.p="",(()=>{var a={612:1};u.f.i=(l,c)=>{a[l]||importScripts(u.tu(u.p+u.u(l)))};var i=self.webpackChunkweb=self.webpackChunkweb||[],v=i.push.bind(i);i.push=l=>{var[c,g,y]=l;for(var f in g)u.o(g,f)&&(u.m[f]=g[f]);for(y&&y(u);c.length;)a[c.pop()]=1;v(l)}})(),(()=>{var a=u.x;u.x=()=>u.e(35).then(a)})(),u.x()})();