(()=>{"use strict";var W,fe={92271:(W,s,p)=>{var t=p(40426),v=p(13919),P=p(11724),c=p(29966),h=p(4481),_=p(55470);function o(u){return{start:l(u.start),end:l(u.end)}}function l(u){return{line:u.line-1,character:u.column-1}}function a(u){return new h.e6(y(u.start),y(u.end))}function y(u){return{line:u.line+1,column:u.character+1}}const T=Object.values(v.SemanticTokenTypes),E=Object.values(v.SemanticTokenModifiers);class x{constructor(n,e){this.documentService=e,n.connection.languages.semanticTokens.on(i=>this.provideSemanticTokens(i)),n.connection.languages.semanticTokens.onRange(i=>this.provideSemanticTokensRange(i))}provideSemanticTokens(n){const e=this.documentService.getAST(n.textDocument.uri);return e?this.collectSemanticTokens(e):{data:[]}}collectSemanticTokens(n){const e=new q;for(const i of(0,P.NR)(n))switch(i.kind){case"class":e.addNode(i.location,v.SemanticTokenTypes.class);break;case"field":case"expr:propertyAccess":e.addNode(i.location,v.SemanticTokenTypes.property);break;case"method":case"expr:methodCall":case"expr:functionCall":e.addNode(i.location,i instanceof P.lX&&i._constructor?v.SemanticTokenTypes.class:v.SemanticTokenTypes.method);break;case"parameter":e.addNode(i.location,v.SemanticTokenTypes.parameter);break;case"variable":e.addNode(i.location,v.SemanticTokenTypes.variable);break;case"expr:variable":e.addNode(i.location,i instanceof P.sW&&i._variable instanceof P.d2?v.SemanticTokenTypes.parameter:v.SemanticTokenTypes.variable)}return{data:e.data}}provideSemanticTokensRange(n){const e=this.documentService.getAST(n.textDocument.uri);if(!e)return{data:[]};const i=e.findEnclosing(a(n.range));return i?this.collectSemanticTokens(i):{data:[]}}}class q{constructor(){this.data=[],this.prevLine=0,this.prevChar=0}addNode(n,e,i=[]){const R=T.indexOf(e),j=i.map(N=>E.indexOf(N)).reduce((N,g)=>N|1<<g,0),O=n.start.line-1,r=n.start.column-1;this.data.push(O-this.prevLine,r-(O===this.prevLine?this.prevChar:0),n.end.column-n.start.column,R,j),this.prevLine=O,this.prevChar=r}}class D{constructor(n){this.connection=n,n.onInitialize(e=>{var i,R,j,O;const C=e.capabilities;this.hasConfigurationCapability=!(null===(i=C.workspace)||void 0===i||!i.configuration),this.hasWorkspaceFolderCapability=!(null===(R=C.workspace)||void 0===R||!R.workspaceFolders),this.hasDiagnosticRelatedInformationCapability=!(null===(O=null===(j=C.textDocument)||void 0===j?void 0:j.publishDiagnostics)||void 0===O||!O.relatedInformation);const r={capabilities:{textDocumentSync:t.TextDocumentSyncKind.Incremental,completionProvider:{triggerCharacters:["."]},renameProvider:{prepareProvider:!0},referencesProvider:!0,definitionProvider:!0,typeDefinitionProvider:!0,hoverProvider:!0,documentHighlightProvider:!0,documentSymbolProvider:!0,documentFormattingProvider:!0,documentRangeFormattingProvider:!0,codeActionProvider:!0,inlayHintProvider:!0,semanticTokensProvider:{legend:{tokenTypes:T,tokenModifiers:E},full:!0,range:!0}}};return this.hasWorkspaceFolderCapability&&(r.capabilities.workspace={workspaceFolders:{supported:!0}}),r}),n.onInitialized(()=>{this.hasConfigurationCapability&&n.client.register(t.DidChangeConfigurationNotification.type,void 0)})}}class M{constructor(n,e,i,R){this._uri=n,this._languageId=e,this._version=i,this._content=R,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(n){if(n){const e=this.offsetAt(n.start),i=this.offsetAt(n.end);return this._content.substring(e,i)}return this._content}update(n,e){for(let i of n)if(M.isIncremental(i)){const R=k(i.range),j=this.offsetAt(R.start),O=this.offsetAt(R.end);this._content=this._content.substring(0,j)+i.text+this._content.substring(O,this._content.length);const C=Math.max(R.start.line,0),r=Math.max(R.end.line,0);let m=this._lineOffsets;const N=K(i.text,!1,j);if(r-C===N.length)for(let B=0,Y=N.length;B<Y;B++)m[B+C+1]=N[B];else N.length<1e4?m.splice(C+1,r-C,...N):this._lineOffsets=m=m.slice(0,C+1).concat(N,m.slice(r+1));const g=i.text.length-(O-j);if(0!==g)for(let B=C+1+N.length,Y=m.length;B<Y;B++)m[B]=m[B]+g}else{if(!M.isFull(i))throw new Error("Unknown change event received");this._content=i.text,this._lineOffsets=void 0}this._version=e}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=K(this._content,!0)),this._lineOffsets}positionAt(n){n=Math.max(Math.min(n,this._content.length),0);let e=this.getLineOffsets(),i=0,R=e.length;if(0===R)return{line:0,character:n};for(;i<R;){let O=Math.floor((i+R)/2);e[O]>n?R=O:i=O+1}let j=i-1;return{line:j,character:n-e[j]}}offsetAt(n){let e=this.getLineOffsets();if(n.line>=e.length)return this._content.length;if(n.line<0)return 0;let i=e[n.line];return Math.max(Math.min(i+n.character,n.line+1<e.length?e[n.line+1]:this._content.length),i)}get lineCount(){return this.getLineOffsets().length}static isIncremental(n){return null!=n&&"string"==typeof n.text&&void 0!==n.range&&(void 0===n.rangeLength||"number"==typeof n.rangeLength)}static isFull(n){return null!=n&&"string"==typeof n.text&&void 0===n.range&&void 0===n.rangeLength}}var L,u;function X(u,n){if(u.length<=1)return u;const e=u.length/2|0,i=u.slice(0,e),R=u.slice(e);X(i,n),X(R,n);let j=0,O=0,C=0;for(;j<i.length&&O<R.length;)n(i[j],R[O])<=0?u[C++]=i[j++]:u[C++]=R[O++];for(;j<i.length;)u[C++]=i[j++];for(;O<R.length;)u[C++]=R[O++];return u}function K(u,n,e=0){const i=n?[e]:[];for(let R=0;R<u.length;R++){let j=u.charCodeAt(R);(13===j||10===j)&&(13===j&&R+1<u.length&&10===u.charCodeAt(R+1)&&R++,i.push(e+R+1))}return i}function k(u){const n=u.start,e=u.end;return n.line>e.line||n.line===e.line&&n.character>e.character?{start:e,end:n}:u}function F(u){const n=k(u.range);return n!==u.range?{newText:u.newText,range:n}:u}(u=L||(L={})).create=function n(R,j,O,C){return new M(R,j,O,C)},u.update=function e(R,j,O){if(R instanceof M)return R.update(j,O),R;throw new Error("TextDocument.update: document must be created by TextDocument.create")},u.applyEdits=function i(R,j){let O=R.getText(),C=X(j.map(F),(N,g)=>{let B=N.range.start.line-g.range.start.line;return 0===B?N.range.start.character-g.range.start.character:B}),r=0;const m=[];for(const N of C){let g=R.offsetAt(N.range.start);if(g<r)throw new Error("Overlapping edit");g>r&&m.push(O.substring(r,g)),N.newText.length&&m.push(N.newText),r=R.offsetAt(N.range.end)}return m.push(O.substr(r)),m.join("")};class I{constructor(n){this.connectionService=n,this.documents=new t.TextDocuments(L),this.astCache=new Map,this.documents.listen(this.connectionService.connection),this.documents.onDidChangeContent(e=>{this.astCache.has(e.document.uri)&&this.astCache.delete(e.document.uri)})}getAST(n){const e="string"==typeof n?n:n.uri,i=this.astCache.get(e);if(i)return i;const R="string"==typeof n?this.documents.get(e):n;if(!R)return;const j=(0,c.V3)(R.getText(),e).resolve(new _._([]));return j.link(),j.lint(new _._([])),j}}function H(u){switch(u){case"keyword":return t.CompletionItemKind.Keyword;case"operator":return t.CompletionItemKind.Operator;case"class":return t.CompletionItemKind.Class;case"field":return t.CompletionItemKind.Field;case"method":return t.CompletionItemKind.Method;case"variable":case"parameter":return t.CompletionItemKind.Variable;default:return t.CompletionItemKind.Text}}class z{constructor(n,e){this.connectionService=n,this.documentService=e,this.connectionService.connection.onCompletion(i=>this.provideCompletionItems(i))}provideCompletionItems(n){const i=this.documentService.documents.get(n.textDocument.uri);if(!i)return[];const R=i.getText({start:{line:0,character:0},end:n.position}),j=i.getText({start:n.position,end:{line:i.lineCount,character:0}}),C=(0,c.V3)(`${R}\xa7${j}`).resolve(new _._([])).diagnostics.find(r=>r.expected);return C&&C.expected?C.expected.map(r=>({kind:H(r.kind),label:r.label,labelDetails:{detail:r.signature,description:r.description},insertText:r.snippet,insertTextFormat:r.snippet?t.InsertTextFormat.Snippet:void 0})):[]}}class G{constructor(n,e){this.connectionService=n,this.documentService=e,this.connectionService.connection.onPrepareRename(i=>this.prepareRename(i)),this.connectionService.connection.onRenameRequest(i=>this.rename(i)),this.connectionService.connection.onTypeDefinition(i=>this.typeDefinition(i)),this.connectionService.connection.onReferences(i=>this.references(i)),this.connectionService.connection.onDefinition(i=>this.definition(i)),this.connectionService.connection.onHover(i=>this.hover(i)),this.connectionService.connection.onDocumentHighlight(i=>this.highlight(i))}prepareRename(n){const e=this.findNode(n);if(!e)return;const i=e.references("rename");return i&&i.length?o(e.location):void 0}rename(n){var e;const i=null===(e=this.findNode(n))||void 0===e?void 0:e.references("rename");if(i&&i.length)return{changes:{[n.textDocument.uri]:i.map(R=>({range:o(R.location),newText:n.newName}))}}}references(n){var e;const i=null===(e=this.findNode(n))||void 0===e?void 0:e.references("definition");if(i&&i.length)return!n.context.includeDeclaration&&i.length&&i.shift(),i.map(R=>({uri:n.textDocument.uri,range:o(R.location)}))}definition(n){var e;const i=null===(e=this.findNode(n))||void 0===e?void 0:e.references("definition");if(i&&i.length)return{uri:n.textDocument.uri,range:o(i[0].location)}}typeDefinition(n){const e=this.findNode(n);if(!e)return;const i="type"in e?e.type:"getType"in e&&"function"==typeof e.getType?e.getType():void 0;return i instanceof P.NB&&i.location?{uri:n.textDocument.uri,range:o(i.location)}:void 0}hover(n){var e;const i=null===(e=this.findNode(n))||void 0===e?void 0:e.documentation();return i?{contents:{kind:"markdown",value:i}}:null}highlight(n){var e;const i=null===(e=this.findNode(n))||void 0===e?void 0:e.references();if(i&&i.length)return i.map(R=>({range:o(R.location)}))}findNode(n){const e=n.textDocument.uri,i=new h.Ly(n.position.line+1,n.position.character),R=this.documentService.getAST(e);if(!R)return;const j=R.findByPosition(i);return j?j[j.length-1]:void 0}}var J=p(99938);function V({severity:u,location:n,message:e,replacement:i}){return{severity:"error"===u?t.DiagnosticSeverity.Error:t.DiagnosticSeverity.Warning,range:o(n),message:e,source:"dyvil",data:{replacement:i?.toString()}}}class ae{constructor(n,e){this.connectionService=n,this.documentService=e,this.connectionService.connection.onDidChangeConfiguration(()=>{this.documentService.documents.all().forEach(i=>this.validateTextDocument(i))}),this.documentService.documents.onDidChangeContent(i=>{this.validateTextDocument(i.document)})}validateTextDocument(n){return(0,J.mG)(this,void 0,void 0,function*(){const e=this.documentService.getAST(n);if(!e)return;const i=e.diagnostics.map(V);yield this.connectionService.connection.sendDiagnostics({uri:n.uri,diagnostics:i})})}}const te={class:v.SymbolKind.Class,field:v.SymbolKind.Field,constructor:v.SymbolKind.Constructor,method:v.SymbolKind.Method,parameter:v.SymbolKind.Variable,variable:v.SymbolKind.Variable};class ne{constructor(n,e){this.documentService=e,n.connection.onDocumentSymbol(i=>this.provideSymbols(i))}provideSymbols(n){const e=this.documentService.getAST(n.textDocument.uri);return e?this.toSymbols(e):[]}toSymbols(n){const e=Array.from((0,P.pI)(n)).flatMap(i=>this.toSymbols(i));return n instanceof P.gr?[{name:n.name,kind:te[n.kind],range:o(n.range),selectionRange:o(n.location),children:e}]:e}}class oe{constructor(n,e){this.documentService=e,n.connection.onDocumentFormatting(i=>this.handleFormatting(i)),n.connection.onDocumentRangeFormatting(i=>this.handleRangeFormatting(i))}handleFormatting(n){const e=this.documentService.getAST(n.textDocument.uri);return e?this.provideEdits(e):[]}handleRangeFormatting(n){const e=this.documentService.getAST(n.textDocument.uri),i=e?.findEnclosing(a(n.range));return i?this.provideEdits(i):[]}provideEdits(n){const e=[];for(const i of[n])i.range&&e.push({range:o(i.range),newText:i.toString()});return e}}class ie{constructor(n,e){this.documentService=e,n.connection.onCodeAction(i=>this.provideActions(i))}provideActions(n){if(!this.documentService.getAST(n.textDocument.uri))return[];const i=[];for(const R of n.context.diagnostics){const j=R.data.replacement;j&&i.push({title:`Replace with \`${j}\``,kind:"quickfix",diagnostics:[R],isPreferred:!0,edit:{changes:{[n.textDocument.uri]:[{range:R.range,newText:j}]}}})}return i}}class re{constructor(n,e){this.documentService=e,n.connection.languages.inlayHint.on(i=>this.provideInlayHints(i))}provideInlayHints(n){const e=this.documentService.getAST(n.textDocument.uri),i=e?.findEnclosing(a(n.range));if(!i)return[];const R=[];for(const j of(0,P.NR)(i))switch(j.kind){case"variable":{const O=j;if(!O.type||O.type.location)continue;const C=`: ${O.type}`;R.push({kind:v.InlayHintKind.Type,position:l(O.location.end),label:C,paddingLeft:!0,textEdits:[{range:o(O.location),newText:O.name+C}]});break}case"expr:functionCall":{const O=j;if(!O._constructor)continue;this.addParamHints(O.args,O._constructor.parameters,R);break}case"expr:methodCall":{const O=j;if(!O._method)continue;this.addParamHints(O.args,O._method.parameters,R);break}}return R}addParamHints(n,e,i){for(let R=0;R<n.length;R++){const j=n[R],O=e[R];if(!O||!j.range)continue;const C=`${O.name}:`,r=O.documentation();i.push({kind:v.InlayHintKind.Parameter,position:l(j.range.start),label:C,tooltip:r&&{kind:"markdown",value:r},paddingRight:!0})}}}var ee=p(95987);console.log("Running Dyvil Language Server in Web Worker");const d=new ee.BrowserMessageReader(self),f=new ee.BrowserMessageWriter(self),b=(0,ee.createConnection)(d,f);(function se(u){const n=new D(u),e=new I(n);new z(n,e),new ae(n,e),new G(n,e),new x(n,e),new ne(n,e),new oe(n,e),new ie(n,e),new re(n,e)})(b),b.listen()},79576:(W,s,p)=>{p.d(s,{YN:()=>M,_w:()=>X,d2:()=>L,dm:()=>D,eB:()=>l,gN:()=>x,gr:()=>a,n$:()=>q,v_:()=>E,wT:()=>y});var t=p(99938),v=p(80778),P=p(4481),c=p(50440),h=p(55470),_=p(87670),o=p(42081);class l extends c.NB{constructor(k,F=[]){super("unit"),this.path=k,this.classes=F,this.diagnostics=[]}report(k){this.diagnostics.push(k)}resolve(k){const F={[l.enclosing]:this};for(const I of this.classes)F[I.name]=I;return super.resolve(new h._(F,k))}lint(k){super.lint(new h._({[l.enclosing]:this},k))}toString(k){return this.classes.map(F=>F.toString(k)).join("\n\n")}}l.enclosing=Symbol("enclosing compilation unit"),l.parser="file",(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],l.prototype,"toString",null);class a extends c.NB{constructor(k,F){super(k),this.name=F,this._references=[]}docComment(){return this.doc?"/**\n"+this.doc.trim().replace(/^/gm," * ")+"\n */\n":""}documentation(){return this.doc}references(){return[this,...this._references]}}class y extends a{constructor(k="<anonymous>",F=[],I=[],H=[]){super("class",k),this.fields=F,this.constructors=I,this.methods=H}asType(){const k=new o.rF(this.name);return k._class=this,k.location=this.location,k}asCompletion(){return{label:this.name,kind:"class"}}toString(k){return c.$S`
    ${this.docComment()}\
    class ${this.name} {
      ${this.fields.map(F=>F.toString(k)).join("\n")}

      ${this.constructors.map(F=>F.toString(k)).join("\n\n")}

      ${this.methods.map(F=>F.toString(k)).join("\n\n")}
    }`}lookup(k,F,...I){for(const H of this.fields)if(H.name===k&&H instanceof F)return H;for(const H of this.methods)if(H.name===k&&H instanceof F&&H.overloads(I[0]))return H;for(const H of this.constructors)if(H instanceof F&&H.overloads(I[0]))return H}list(){return[...this.fields,...this.methods]}resolve(k){const F=new h._({[y.enclosing]:this},k);super.resolve(F);for(const I of this.fields)this.fields.some(H=>H!==I&&H.name===I.name)&&(0,P.Hj)(k,I.location,`duplicate field ${I.name}`);for(const I of this.methods)this.methods.some(H=>H!==I&&H.jsName===I.jsName)&&(0,P.Hj)(k,I.location,`duplicate method ${I.name} with mangled name ${I.jsName}`);return this}}y.enclosing=Symbol("enclosing class"),y.parser="class",(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],y.prototype,"toString",null);class T extends a{constructor(k,F,I,H){super(k,F),this.parameters=I,this.body=H}resolve(k){this._thisClass||(this._thisClass=k.lookup(y.enclosing,y)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new L("this",this._thisClass.asType()),this._thisParameter.location=this.location);const F=new h._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,k);return super.resolve(F)}overloads(k){return k.length===this.parameters.length&&this.parameters.every((F,I)=>(0,o.BM)(F.type,k[I]))}}class E extends T{constructor(k=[],F=new _.gO){super("constructor","init",k,F)}toString(k){const F="js"===k?"constructor":"init",I=this.parameters.map(z=>z.toString(k)).join(", "),H=this.body.toString(k);return`${this.docComment()}${F}(${I}) ${H}`}documentation(){return this.parameters.length?c.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(k=>"- "+k.documentation()).join("\n")}
    `:this.doc}references(k){return"rename"===k?[]:super.references()}}E.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},E.parser="ctor",(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],E.prototype,"toString",null);class x extends a{constructor(k="<unknown>",F=o.NI,I){super("field",k),this.type=F,this.value=I}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(k){const F=this.value?" = "+this.value.toString(k):"";if("js"===k)return c.$S`
      _${this.name}${F};
      get ${this.name}() { return this._${this.name}; }
      set ${this.name}(value) { this._${this.name} = value; }`;const I=this.type.toString(k);return`${this.docComment()}var ${this.name}: ${I}${F}`}}x.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},x.parser="field",(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],x.prototype,"toString",null);class q extends T{constructor(k="<unknown>",F=[],I=o.NI,H=new _.gO){super("method",k,F,H),this.returnType=I}get jsName(){return this.name+this.parameters.map(k=>"_"+k.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(k=>k.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((k,F)=>`\${${F}:${k.name}}`).join(", ")})`}}documentation(){let k=this.doc||"";return this.parameters.length&&(k+="\n#### Parameters\n"+this.parameters.map(F=>"- "+F.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(k+="\n#### Returns\n`"+this.returnType.toString()+"`"),k}toString(k){const F="js"!==k?"func "+this.name:this.jsName,I=this.parameters.map(G=>G.toString(k)).join(", "),H="js"!==k?": "+this.returnType.toString(k):"",z=this.body.toString(k);return`${this.docComment()}${F}(${I})${H} ${z}`}}q.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},q.parser="method",(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],q.prototype,"toString",null);class D extends c.NB{constructor(k){super("class-completion"),this.name=k}toString(k){return this.name}resolve(k){return(0,P.Hk)(k,this.location,this.name,{extra:D.completions}),super.resolve(k)}}D.completions=[q,E,x].map(K=>K.completion);class M extends a{constructor(k,F,I){super(k,F),this.type=I}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(k){const F=this.type?": "+this.type.toString(k):"";return`${this.docComment()}${this.name}${F}`}}(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],M.prototype,"toString",null);let L=(()=>{class K extends M{constructor(F="<unknown>",I=o.NI){super("parameter",F,I),this.type=I}references(F){return"rename"===F&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(F){return"js"===F?this.name:super.toString(F)}}return K.parser="parameter",K})();class X extends M{constructor(k="<unknown>",F,I=v.iY){super("variable",k,F),this.value=I}documentation(){var k;return`\`var ${this.name}: ${null===(k=this.type)||void 0===k?void 0:k.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(k){if("js"===k)return`let ${this.name} = ${this.value.toString(k)}`;const F=this.type&&this.type.location?": "+this.type.toString(k):"";return`${this.docComment()}var ${this.name}${F} = ${this.value.toString(k)}`}resolve(k){const F=super.resolve(k);return F.type||(F.type=F.value.getType()),F}}X.parser="variable",(0,t.gn)([(0,c.fp)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[String]),(0,t.w6)("design:returntype",String)],X.prototype,"toString",null)},80778:(W,s,p)=>{p.d(s,{ZJ:()=>E,_C:()=>T,iY:()=>x,jR:()=>a,lX:()=>l,o6:()=>y,sW:()=>o,t$:()=>_});var t=p(79576),v=p(4481),P=p(50440),c=p(42081);class h extends P.NB{constructor(D){super(`expr:${D}`)}getType(){throw new Error(`${this.constructor.name}.getType not implemented`)}}class _ extends h{constructor(D){super("literal"),this.representation=D}toString(D){return this.before(D)+this.representation+this.after(D)}getType(){switch(this.representation.charAt(0)){case'"':return new c.MX("string");case"t":case"f":return new c.MX("boolean");default:return new c.MX("int")}}}class o extends h{constructor(D="<unknown>"){super("variable"),this.name=D}toString(D){return this.before(D)+this.name+this.after(D)}definition(){return this._variable}resolve(D){return(0,v.Hk)(D,this.location,this.name)||this._variable||this._variable||(this._variable=D.lookup(this.name,t.YN)||(0,v.Hj)(D,this.location,`variable ${this.name} not found`)),this}getType(){var D,M;return null!==(M=null===(D=this._variable)||void 0===D?void 0:D.type)&&void 0!==M?M:c.NI}}class l extends h{constructor(D="<unknown>",M=[]){super("functionCall"),this.name=D,this.args=M}toString(D){return`${this.before(D)}${this.name}(${this.args.map(M=>M.toString(D)).join(", ")})${this.after(D)}`}definition(D){return"rename"===D?this._class:this._constructor}resolve(D){if(this.args=this.args.map(M=>M.resolve(D)),!this._constructor){const M=D.lookup(this.name,t.wT);if(M){const L=this.args.map(K=>K.getType()),X=M.lookup("init",t.v_,L);X?(this._class=M,this._constructor=X):(0,v.Hj)(D,this.location,`constructor ${this.name}(${L.join(", ")}) not found`)}else(0,v.Hj)(D,this.location,`class or function ${this.name} not found`)}return this}getType(){var D,M;return null!==(M=null===(D=this._class)||void 0===D?void 0:D.asType())&&void 0!==M?M:c.NI}}class a extends h{constructor(D=x,M="<unknown>"){super("propertyAccess"),this.receiver=D,this.property=M}toString(D){return`${this.receiver.toString(D)}.${this.property}`}definition(){return this._field}resolve(D){this.receiver=this.receiver.resolve(D);const M=this.receiver.getType();return(0,v.Hk)(D,this.location,this.property,{lookup:M})||this._field||this._field||(this._field=M.lookup(this.property,t.gN)||(0,v.Hj)(D,this.location,`field ${this.property} not found on ${M}`)),this}getType(){var D;return(null===(D=this._field)||void 0===D?void 0:D.type)||c.NI}}class y extends h{constructor(D=x,M="<unknown>",L=[]){super("methodCall"),this.receiver=D,this.method=M,this.args=L}definition(){return this._method}toString(D){const M=this._method&&"js"===D?this._method.jsName:this.method;return`${this.receiver.toString(D)}.${M}(${this.args.map(L=>L.toString(D)).join(", ")})`}resolve(D){if(this.receiver=this.receiver.resolve(D),this.args=this.args.map(M=>M.resolve(D)),!this._method){const M=this.receiver.getType(),L=this.args.map(X=>X.getType());this._method||(this._method=M.lookup(this.method,t.n$,L)||(0,v.Hj)(D,this.location,`method ${this.method} not found on ${M}`))}return this}getType(){var D;return(null===(D=this._method)||void 0===D?void 0:D.returnType)||c.NI}}class T extends h{constructor(D=x,M="<unknown>",L=x){super("binary"),this.lhs=D,this.operator=M,this.rhs=L}lint(D){"=="===this.operator&&("expr:literal"===this.lhs.kind&&"true"===this.lhs.representation&&(0,v.Hj)(D,this.range,"`== true` is redundant","warning",this.rhs),"expr:literal"===this.rhs.kind&&"true"===this.rhs.representation&&(0,v.Hj)(D,this.range,"`== true` is redundant","warning",this.lhs)),super.lint(D)}toString(D){return`${this.lhs.toString(D)} ${this.operator} ${this.rhs.toString(D)}`}getType(){switch(this.operator){case"+":const D=this.lhs.getType(),M=this.rhs.getType();return"type:primitive"===D.kind&&"string"===D.name?D:"type:primitive"===M.kind&&"string"===M.name?M:new c.MX("int");case"&&":case"||":case"==":case"!=":case"<":case"<=":case">":case">=":return new c.MX("boolean");case"-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"&":case"|":case"^":return new c.MX("int");default:return c.NI}}}class E extends h{constructor(D=x){super("parenthesized"),this.expression=D}toString(D){return`(${this.expression.toString(D)})`}getType(){return this.expression.getType()}}const x=new class extends h{constructor(){super("error")}getType(){return c.NI}}},11724:(W,s,p)=>{p.d(s,{K9:()=>c.K9,MX:()=>h.MX,NB:()=>P.NB,NR:()=>P.NR,UX:()=>c.UX,WJ:()=>c.WJ,ZJ:()=>v.ZJ,_C:()=>v._C,_w:()=>t._w,d2:()=>t.d2,dm:()=>t.dm,eB:()=>t.eB,gN:()=>t.gN,gO:()=>c.gO,gr:()=>t.gr,jR:()=>v.jR,lX:()=>v.lX,n$:()=>t.n$,o6:()=>v.o6,on:()=>c.on,pI:()=>P.pI,rF:()=>h.rF,rX:()=>c.rX,sW:()=>v.sW,sj:()=>c.sj,t$:()=>v.t$,v_:()=>t.v_,wT:()=>t.wT});var t=p(79576),v=p(80778),P=p(50440),c=p(87670),h=p(42081)},50440:(W,s,p)=>{p.d(s,{$S:()=>_,NB:()=>v,NR:()=>c,fp:()=>o,pI:()=>h});class v{constructor(a){this.kind=a}definition(a){}documentation(){var a;return null===(a=this.definition())||void 0===a?void 0:a.documentation()}references(a){var y;return(null===(y=this.definition(a))||void 0===y?void 0:y.references(a))||[]}resolve(a){return function P(l,a){for(const[y,T]of Object.entries(l))if("location"!==y&&"kind"!==y&&!y.startsWith("_")&&T)if(Array.isArray(T))for(let E=0;E<T.length;E++)T[E]instanceof v&&(T[E]=a(T[E]));else T instanceof v&&(l[y]=a(T))}(this,y=>y.resolve(a)),this}link(){for(const[a,y]of Object.entries(this))a.startsWith("_")&&y&&"_references"in y&&y._references.push(this);for(const a of h(this))a.link()}lint(a){for(const y of h(this))y.lint(a)}findByPosition(a){var y;if(!this.range||this.range.includes(a)){for(const T of h(this)){const E=T.findByPosition(a);if(E)return[this,...E]}if(null!==(y=this.location)&&void 0!==y&&y.includes(a))return[this]}}findEnclosing(a){if(this.range&&this.range.encloses(a)){for(const y of h(this)){const T=y.findEnclosing(a);if(T)return T}return this}}before(a){return this.commentBefore&&"js"!==a?this.commentBefore.endsWith("\n")?this.commentBefore:this.commentBefore+" ":""}after(a){return this.commentAfter&&"js"!==a?" "+this.commentAfter:""}toString(a){return`<${this.kind}>`}}function*c(l){yield l;for(const a of h(l))yield*c(a)}function*h(l){for(const[a,y]of Object.entries(l))if("location"!==a&&"kind"!==a&&!a.startsWith("_")&&y)if(Array.isArray(y))for(let T=0;T<y.length;T++)y[T]instanceof v&&(yield y[T]);else y instanceof v&&(yield y)}function _(l,...a){if(!l[0].startsWith("\n"))throw new Error("must start with a newline");const y=l[0].match(/^\n([ \t]*)/)[1];return l.map((T,E)=>{var x;0===E&&(T=T.substring(1+y.length));const D=(T=T.replace(new RegExp("^"+y,"gm"),"")).substring(T.lastIndexOf("\n")+1).match(/^\s*/)[0];return T+(null!==(x=a[E])&&void 0!==x?x:"").toString().replace(/\n/g,`\n${D}`)}).join("")}function o(){return(l,a,y)=>{const T=y.value;return y.value=function(E){return this.before(E)+T.call(this,E)+this.after(E)},y}}},4481:(W,s,p)=>{p.d(s,{Hj:()=>_,Hk:()=>o,Ly:()=>v,R9:()=>c,e6:()=>P});var t=p(11724);class v{constructor(a,y){this.line=a,this.column=y}}class P{constructor(a,y){this.start=a,this.end=y}includes(a){return this.start.line<=a.line&&a.line<=this.end.line&&(this.start.line<a.line||this.start.column<=a.column)&&(a.line<this.end.line||a.column<=this.end.column)}distance(a){return a.line<this.start.line?a.line-this.start.line:a.line>this.end.line?a.line-this.end.line:a.column<this.start.column?(a.column-this.start.column)/1e3:a.column>this.end.column?(a.column-this.end.column)/1e3:0}encloses(a){return this.includes(a.start)&&this.includes(a.end)}}class c{constructor(a,y,T,E="error",x,q){if(this.path=a,this.location=y,this.message=T,this.severity=E,this.expected=x,this.replacement=q,!y)throw new Error("location is required")}}function _(l,a,y,T="error",E){const x=l.lookup(t.eB.enclosing,t.eB),q=Array.isArray(E)?E:void 0,D=Array.isArray(E)?void 0:E,M=new c(void 0,a,y,T,q,D);x?x.report(M):function h(l){const{path:a,location:{start:{line:y,column:T}},message:E,severity:x}=l;switch(x){case"error":console.error(`${a}:${y}:${T}: error: ${E}`);break;case"warning":console.warn(`${a}:${y}:${T}: warning: ${E}`);break;case"note":console.info(`${a}:${y}:${T}: note: ${E}`)}if(l.expected)for(let q of l.expected)console.log(`- [${q.kind}] ${q.label} ${q.signature||""} - ${q.description||""}`)}(M)}function o(l,a,y,{lookup:T,kind:E,extra:x}={}){if(!y.includes("\xa7"))return!1;const q=y.slice(0,-1),D=(T||l).list().filter(L=>"name"in L).filter(L=>!E||L.kind===E).map(L=>"asCompletion"in L?L.asCompletion():{kind:L.kind,label:L.name});return _(l,a,"input '\xa7' expecting","error",(x?[...D,...x]:D).filter(L=>L.label.startsWith(q))),!0}},95987:(W,s,p)=>{W.exports=p(40426)},40426:function(W,s,p){var t=this&&this.__createBinding||(Object.create?function(o,l,a,y){void 0===y&&(y=a);var T=Object.getOwnPropertyDescriptor(l,a);(!T||("get"in T?!l.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return l[a]}}),Object.defineProperty(o,y,T)}:function(o,l,a,y){void 0===y&&(y=a),o[y]=l[a]}),v=this&&this.__exportStar||function(o,l){for(var a in o)"default"!==a&&!Object.prototype.hasOwnProperty.call(l,a)&&t(l,o,a)};Object.defineProperty(s,"__esModule",{value:!0}),s.createConnection=void 0;const P=p(30306);v(p(49729),s),v(p(30306),s);let c=!1;const h={initialize:o=>{},get shutdownReceived(){return c},set shutdownReceived(o){c=o},exit:o=>{}};s.createConnection=function _(o,l,a,y){let T,E,x,q;return void 0!==o&&"features"===o.__brand&&(T=o,o=l,l=a,a=y),P.ConnectionStrategy.is(o)||P.ConnectionOptions.is(o)?q=o:(E=o,x=l,q=a),(0,P.createConnection)(M=>(0,P.createProtocolConnection)(E,x,M,q),h,T)}},30306:function(W,s,p){var t=this&&this.__createBinding||(Object.create?function(o,l,a,y){void 0===y&&(y=a);var T=Object.getOwnPropertyDescriptor(l,a);(!T||("get"in T?!l.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return l[a]}}),Object.defineProperty(o,y,T)}:function(o,l,a,y){void 0===y&&(y=a),o[y]=l[a]}),v=this&&this.__exportStar||function(o,l){for(var a in o)"default"!==a&&!Object.prototype.hasOwnProperty.call(l,a)&&t(l,o,a)};Object.defineProperty(s,"__esModule",{value:!0}),s.ProposedFeatures=s.NotebookDocuments=s.TextDocuments=s.SemanticTokensBuilder=void 0;const P=p(29469);Object.defineProperty(s,"SemanticTokensBuilder",{enumerable:!0,get:function(){return P.SemanticTokensBuilder}}),v(p(45974),s);const c=p(39059);Object.defineProperty(s,"TextDocuments",{enumerable:!0,get:function(){return c.TextDocuments}});const h=p(92011);Object.defineProperty(s,"NotebookDocuments",{enumerable:!0,get:function(){return h.NotebookDocuments}}),v(p(43330),s),(s.ProposedFeatures||(s.ProposedFeatures={})).all={__brand:"features"}},7238:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CallHierarchyFeature=void 0;const t=p(45974);s.CallHierarchyFeature=P=>class extends P{get callHierarchy(){return{onPrepare:c=>this.connection.onRequest(t.CallHierarchyPrepareRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h),void 0)),onIncomingCalls:c=>{const h=t.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(h,(_,o)=>c(_,o,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(h,_)))},onOutgoingCalls:c=>{const h=t.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(h,(_,o)=>c(_,o,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(h,_)))}}}}},58743:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ConfigurationFeature=void 0;const t=p(45974),v=p(83901);s.ConfigurationFeature=c=>class extends c{getConfiguration(h){return h?v.string(h)?this._getConfiguration({section:h}):this._getConfiguration(h):this._getConfiguration({})}_getConfiguration(h){let _={items:Array.isArray(h)?h:[h]};return this.connection.sendRequest(t.ConfigurationRequest.type,_).then(o=>Array.isArray(o)?Array.isArray(h)?o:o[0]:Array.isArray(h)?[]:null)}}},94433:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagnosticFeature=void 0;const t=p(45974);s.DiagnosticFeature=P=>class extends P{get diagnostics(){return{refresh:()=>this.connection.sendRequest(t.DiagnosticRefreshRequest.type),on:c=>this.connection.onRequest(t.DocumentDiagnosticRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(t.DocumentDiagnosticRequest.partialResult,h))),onWorkspace:c=>this.connection.onRequest(t.WorkspaceDiagnosticRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(t.WorkspaceDiagnosticRequest.partialResult,h)))}}}},5954:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FileOperationsFeature=void 0;const t=p(45974);s.FileOperationsFeature=P=>class extends P{onDidCreateFiles(c){return this.connection.onNotification(t.DidCreateFilesNotification.type,h=>{c(h)})}onDidRenameFiles(c){return this.connection.onNotification(t.DidRenameFilesNotification.type,h=>{c(h)})}onDidDeleteFiles(c){return this.connection.onNotification(t.DidDeleteFilesNotification.type,h=>{c(h)})}onWillCreateFiles(c){return this.connection.onRequest(t.WillCreateFilesRequest.type,(h,_)=>c(h,_))}onWillRenameFiles(c){return this.connection.onRequest(t.WillRenameFilesRequest.type,(h,_)=>c(h,_))}onWillDeleteFiles(c){return this.connection.onRequest(t.WillDeleteFilesRequest.type,(h,_)=>c(h,_))}}},94200:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InlayHintFeature=void 0;const t=p(45974);s.InlayHintFeature=P=>class extends P{get inlayHint(){return{refresh:()=>this.connection.sendRequest(t.InlayHintRefreshRequest.type),on:c=>this.connection.onRequest(t.InlayHintRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h))),resolve:c=>this.connection.onRequest(t.InlayHintResolveRequest.type,(h,_)=>c(h,_))}}}},97140:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InlineValueFeature=void 0;const t=p(45974);s.InlineValueFeature=P=>class extends P{get inlineValue(){return{refresh:()=>this.connection.sendRequest(t.InlineValueRefreshRequest.type),on:c=>this.connection.onRequest(t.InlineValueRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h)))}}}},27810:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkedEditingRangeFeature=void 0;const t=p(45974);s.LinkedEditingRangeFeature=P=>class extends P{onLinkedEditingRange(c){return this.connection.onRequest(t.LinkedEditingRangeRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h),void 0))}}},9466:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MonikerFeature=void 0;const t=p(45974);s.MonikerFeature=P=>class extends P{get moniker(){return{on:c=>{const h=t.MonikerRequest.type;return this.connection.onRequest(h,(_,o)=>c(_,o,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(h,_)))}}}}},92011:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NotebookDocuments=s.NotebookSyncFeature=void 0;const t=p(45974),v=p(39059);s.NotebookSyncFeature=_=>class extends _{get synchronization(){return{onDidOpenNotebookDocument:o=>this.connection.onNotification(t.DidOpenNotebookDocumentNotification.type,l=>{o(l)}),onDidChangeNotebookDocument:o=>this.connection.onNotification(t.DidChangeNotebookDocumentNotification.type,l=>{o(l)}),onDidSaveNotebookDocument:o=>this.connection.onNotification(t.DidSaveNotebookDocumentNotification.type,l=>{o(l)}),onDidCloseNotebookDocument:o=>this.connection.onNotification(t.DidCloseNotebookDocumentNotification.type,l=>{o(l)})}}};class c{onDidOpenTextDocument(o){return this.openHandler=o,t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(o){this.openHandler&&this.openHandler(o)}onDidChangeTextDocument(o){return this.changeHandler=o,t.Disposable.create(()=>{this.changeHandler=o})}changeTextDocument(o){this.changeHandler&&this.changeHandler(o)}onDidCloseTextDocument(o){return this.closeHandler=o,t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(o){this.closeHandler&&this.closeHandler(o)}onWillSaveTextDocument(){return c.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return c.NULL_DISPOSE}onDidSaveTextDocument(){return c.NULL_DISPOSE}}c.NULL_DISPOSE=Object.freeze({dispose:()=>{}}),s.NotebookDocuments=class h{constructor(o){this._cellTextDocuments=o instanceof v.TextDocuments?o:new v.TextDocuments(o),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new t.Emitter,this._onDidChange=new t.Emitter,this._onDidSave=new t.Emitter,this._onDidClose=new t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(o){return this._cellTextDocuments.get(o.document)}getNotebookDocument(o){return this.notebookDocuments.get(o)}getNotebookCell(o){const l=this.notebookCellMap.get(o);return l&&l[0]}findNotebookDocumentForCell(o){const a=this.notebookCellMap.get("string"==typeof o?o:o.document);return a&&a[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(o){const l=new c,a=[];return a.push(this.cellTextDocuments.listen(l)),a.push(o.notebooks.synchronization.onDidOpenNotebookDocument(y=>{this.notebookDocuments.set(y.notebookDocument.uri,y.notebookDocument);for(const T of y.cellTextDocuments)l.openTextDocument({textDocument:T});this.updateCellMap(y.notebookDocument),this._onDidOpen.fire(y.notebookDocument)})),a.push(o.notebooks.synchronization.onDidChangeNotebookDocument(y=>{const T=this.notebookDocuments.get(y.notebookDocument.uri);if(void 0===T)return;T.version=y.notebookDocument.version;const E=T.metadata;let x=!1;const q=y.change;void 0!==q.metadata&&(x=!0,T.metadata=q.metadata);const D=[],M=[],L=[],X=[];if(void 0!==q.cells){const H=q.cells;if(void 0!==H.structure){const z=H.structure.array;if(T.cells.splice(z.start,z.deleteCount,...void 0!==z.cells?z.cells:[]),void 0!==H.structure.didOpen)for(const G of H.structure.didOpen)l.openTextDocument({textDocument:G}),D.push(G.uri);if(H.structure.didClose)for(const G of H.structure.didClose)l.closeTextDocument({textDocument:G}),M.push(G.uri)}if(void 0!==H.data){const z=new Map(H.data.map(G=>[G.document,G]));for(let G=0;G<=T.cells.length;G++){const J=z.get(T.cells[G].document);if(void 0!==J){const V=T.cells.splice(G,1,J);if(L.push({old:V[0],new:J}),z.delete(J.document),0===z.size)break}}}if(void 0!==H.textContent)for(const z of H.textContent)l.changeTextDocument({textDocument:z.document,contentChanges:z.changes}),X.push(z.document.uri)}this.updateCellMap(T);const K={notebookDocument:T};x&&(K.metadata={old:E,new:T.metadata});const k=[];for(const H of D)k.push(this.getNotebookCell(H));const F=[];for(const H of M)F.push(this.getNotebookCell(H));const I=[];for(const H of X)I.push(this.getNotebookCell(H));(k.length>0||F.length>0||L.length>0||I.length>0)&&(K.cells={added:k,removed:F,changed:{data:L,textContent:I}}),(void 0!==K.metadata||void 0!==K.cells)&&this._onDidChange.fire(K)})),a.push(o.notebooks.synchronization.onDidSaveNotebookDocument(y=>{const T=this.notebookDocuments.get(y.notebookDocument.uri);void 0!==T&&this._onDidSave.fire(T)})),a.push(o.notebooks.synchronization.onDidCloseNotebookDocument(y=>{const T=this.notebookDocuments.get(y.notebookDocument.uri);if(void 0!==T){this._onDidClose.fire(T);for(const E of y.cellTextDocuments)l.closeTextDocument({textDocument:E});this.notebookDocuments.delete(y.notebookDocument.uri);for(const E of T.cells)this.notebookCellMap.delete(E.document)}})),t.Disposable.create(()=>{a.forEach(y=>y.dispose())})}updateCellMap(o){for(const l of o.cells)this.notebookCellMap.set(l.document,[l,o])}}},94640:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.attachPartialResult=s.ProgressFeature=s.attachWorkDone=void 0;const t=p(45974),v=p(43706);class P{constructor(x,q){this._connection=x,this._token=q,P.Instances.set(this._token,this)}begin(x,q,D,M){this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:"begin",title:x,percentage:q,message:D,cancellable:M})}report(x,q){let D={kind:"report"};"number"==typeof x?(D.percentage=x,void 0!==q&&(D.message=q)):D.message=x,this._connection.sendProgress(t.WorkDoneProgress.type,this._token,D)}done(){P.Instances.delete(this._token),this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:"end"})}}P.Instances=new Map;class c extends P{constructor(x,q){super(x,q),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class h{constructor(){}begin(){}report(){}done(){}}class _ extends h{constructor(){super(),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var a;s.attachWorkDone=function o(E,x){if(void 0===x||void 0===x.workDoneToken)return new h;const q=x.workDoneToken;return delete x.workDoneToken,new P(E,q)},s.ProgressFeature=E=>class extends E{constructor(){super(),this._progressSupported=!1}initialize(x){super.initialize(x),!0===x?.window?.workDoneProgress&&(this._progressSupported=!0,this.connection.onNotification(t.WorkDoneProgressCancelNotification.type,q=>{let D=P.Instances.get(q.token);(D instanceof c||D instanceof _)&&D.cancel()}))}attachWorkDoneProgress(x){return void 0===x?new h:new P(this.connection,x)}createWorkDoneProgress(){if(this._progressSupported){const x=(0,v.generateUuid)();return this.connection.sendRequest(t.WorkDoneProgressCreateRequest.type,{token:x}).then(()=>new c(this.connection,x))}return Promise.resolve(new _)}},(a||(a={})).type=new t.ProgressType;class y{constructor(x,q){this._connection=x,this._token=q}report(x){this._connection.sendProgress(a.type,this._token,x)}}s.attachPartialResult=function T(E,x){if(void 0===x||void 0===x.partialResultToken)return;const q=x.partialResultToken;return delete x.partialResultToken,new y(E,q)}},29469:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SemanticTokensBuilder=s.SemanticTokensDiff=s.SemanticTokensFeature=void 0;const t=p(45974);s.SemanticTokensFeature=h=>class extends h{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(t.SemanticTokensRefreshRequest.type),on:_=>{const o=t.SemanticTokensRequest.type;return this.connection.onRequest(o,(l,a)=>_(l,a,this.attachWorkDoneProgress(l),this.attachPartialResultProgress(o,l)))},onDelta:_=>{const o=t.SemanticTokensDeltaRequest.type;return this.connection.onRequest(o,(l,a)=>_(l,a,this.attachWorkDoneProgress(l),this.attachPartialResultProgress(o,l)))},onRange:_=>{const o=t.SemanticTokensRangeRequest.type;return this.connection.onRequest(o,(l,a)=>_(l,a,this.attachWorkDoneProgress(l),this.attachPartialResultProgress(o,l)))}}}};class P{constructor(_,o){this.originalSequence=_,this.modifiedSequence=o}computeDiff(){const _=this.originalSequence.length,o=this.modifiedSequence.length;let l=0;for(;l<o&&l<_&&this.originalSequence[l]===this.modifiedSequence[l];)l++;if(l<o&&l<_){let a=_-1,y=o-1;for(;a>=l&&y>=l&&this.originalSequence[a]===this.modifiedSequence[y];)a--,y--;(a<l||y<l)&&(a++,y++);const T=a-l+1,E=this.modifiedSequence.slice(l,y+1);return 1===E.length&&E[0]===this.originalSequence[a]?[{start:l,deleteCount:T-1}]:[{start:l,deleteCount:T,data:E}]}return l<o?[{start:l,deleteCount:0,data:this.modifiedSequence.slice(l)}]:l<_?[{start:l,deleteCount:_-l}]:[]}}s.SemanticTokensDiff=P,s.SemanticTokensBuilder=class c{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(_,o,l,a,y){let T=_,E=o;this._dataLen>0&&(T-=this._prevLine,0===T&&(E-=this._prevChar)),this._data[this._dataLen++]=T,this._data[this._dataLen++]=E,this._data[this._dataLen++]=l,this._data[this._dataLen++]=a,this._data[this._dataLen++]=y,this._prevLine=_,this._prevChar=o}get id(){return this._id.toString()}previousResult(_){this.id===_&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){return void 0!==this._prevData?{resultId:this.id,edits:new P(this._prevData,this._data).computeDiff()}:this.build()}}},43330:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createConnection=s.combineFeatures=s.combineNotebooksFeatures=s.combineLanguagesFeatures=s.combineWorkspaceFeatures=s.combineWindowFeatures=s.combineClientFeatures=s.combineTracerFeatures=s.combineTelemetryFeatures=s.combineConsoleFeatures=s._NotebooksImpl=s._LanguagesImpl=s.BulkUnregistration=s.BulkRegistration=s.ErrorMessageTracker=void 0;const t=p(45974),v=p(83901),P=p(43706),c=p(94640),h=p(58743),_=p(45108),o=p(7238),l=p(29469),a=p(95601),y=p(5954),T=p(27810),E=p(71397),x=p(97140),q=p(94200),D=p(94433),M=p(92011),L=p(9466);function X(C){if(null!==C)return C}s.ErrorMessageTracker=class K{constructor(){this._messages=Object.create(null)}add(r){let m=this._messages[r];m||(m=0),m++,this._messages[r]=m}sendErrors(r){Object.keys(this._messages).forEach(m=>{r.window.showErrorMessage(m)})}};class k{constructor(){}rawAttach(r){this._rawConnection=r}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(r){}initialize(r){}error(r){this.send(t.MessageType.Error,r)}warn(r){this.send(t.MessageType.Warning,r)}info(r){this.send(t.MessageType.Info,r)}log(r){this.send(t.MessageType.Log,r)}send(r,m){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:r,message:m}).catch(()=>{(0,t.RAL)().console.error("Sending log message failed")})}}const I=(0,a.ShowDocumentFeature)((0,c.ProgressFeature)(class F{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}showErrorMessage(r,...m){return this.connection.sendRequest(t.ShowMessageRequest.type,{type:t.MessageType.Error,message:r,actions:m}).then(X)}showWarningMessage(r,...m){return this.connection.sendRequest(t.ShowMessageRequest.type,{type:t.MessageType.Warning,message:r,actions:m}).then(X)}showInformationMessage(r,...m){return this.connection.sendRequest(t.ShowMessageRequest.type,{type:t.MessageType.Info,message:r,actions:m}).then(X)}}));(s.BulkRegistration||(s.BulkRegistration={})).create=function r(){return new z};class z{constructor(){this._registrations=[],this._registered=new Set}add(r,m){const N=v.string(r)?r:r.method;if(this._registered.has(N))throw new Error(`${N} is already added to this registration`);const g=P.generateUuid();this._registrations.push({id:g,method:N,registerOptions:m||{}}),this._registered.add(N)}asRegistrationParams(){return{registrations:this._registrations}}}(s.BulkUnregistration||(s.BulkUnregistration={})).create=function r(){return new J(void 0,[])};class J{constructor(r,m){this._connection=r,this._unregistrations=new Map,m.forEach(N=>{this._unregistrations.set(N.method,N)})}get isAttached(){return!!this._connection}attach(r){this._connection=r}add(r){this._unregistrations.set(r.method,r)}dispose(){let r=[];for(let N of this._unregistrations.values())r.push(N);this._connection.sendRequest(t.UnregistrationRequest.type,{unregisterations:r}).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(r){const m=v.string(r)?r:r.method,N=this._unregistrations.get(m);return!!N&&(this._connection.sendRequest(t.UnregistrationRequest.type,{unregisterations:[N]}).then(()=>{this._unregistrations.delete(m)},B=>{this._connection.console.info(`Un-registering request handler for ${N.id} failed.`)}),!0)}}class V{attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}register(r,m,N){return r instanceof z?this.registerMany(r):r instanceof J?this.registerSingle1(r,m,N):this.registerSingle2(r,m)}registerSingle1(r,m,N){const g=v.string(m)?m:m.method,B=P.generateUuid();let Y={registrations:[{id:B,method:g,registerOptions:N||{}}]};return r.isAttached||r.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,Y).then(Z=>(r.add({id:B,method:g}),r),Z=>(this.connection.console.info(`Registering request handler for ${g} failed.`),Promise.reject(Z)))}registerSingle2(r,m){const N=v.string(r)?r:r.method,g=P.generateUuid();return this.connection.sendRequest(t.RegistrationRequest.type,{registrations:[{id:g,method:N,registerOptions:m||{}}]}).then(Y=>t.Disposable.create(()=>{this.unregisterSingle(g,N).catch(()=>{this.connection.console.info(`Un-registering capability with id ${g} failed.`)})}),Y=>(this.connection.console.info(`Registering request handler for ${N} failed.`),Promise.reject(Y)))}unregisterSingle(r,m){return this.connection.sendRequest(t.UnregistrationRequest.type,{unregisterations:[{id:r,method:m}]}).catch(()=>{this.connection.console.info(`Un-registering request handler for ${r} failed.`)})}registerMany(r){let m=r.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,m).then(()=>new J(this._connection,m.registrations.map(N=>({id:N.id,method:N.method}))),N=>(this.connection.console.info("Bulk registration failed."),Promise.reject(N)))}}const te=(0,y.FileOperationsFeature)((0,_.WorkspaceFoldersFeature)((0,h.ConfigurationFeature)(class ae{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}applyEdit(r){let N=function m(g){return g&&!!g.edit}(r)?r:{edit:r};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,N)}})));class ne{constructor(){this._trace=t.Trace.Off}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}set trace(r){this._trace=r}log(r,m){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:r,verbose:this._trace===t.Trace.Verbose?m:void 0}).catch(()=>{})}}class oe{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}logEvent(r){this.connection.sendNotification(t.TelemetryEventNotification.type,r).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class ie{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}attachWorkDoneProgress(r){return(0,c.attachWorkDone)(this.connection,r)}attachPartialResultProgress(r,m){return(0,c.attachPartialResult)(this.connection,m)}}s._LanguagesImpl=ie;const re=(0,L.MonikerFeature)((0,D.DiagnosticFeature)((0,q.InlayHintFeature)((0,x.InlineValueFeature)((0,E.TypeHierarchyFeature)((0,T.LinkedEditingRangeFeature)((0,l.SemanticTokensFeature)((0,o.CallHierarchyFeature)(ie))))))));class se{constructor(){}attach(r){this._connection=r}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(r){}fillServerCapabilities(r){}attachWorkDoneProgress(r){return(0,c.attachWorkDone)(this.connection,r)}attachPartialResultProgress(r,m){return(0,c.attachPartialResult)(this.connection,m)}}s._NotebooksImpl=se;const ee=(0,M.NotebookSyncFeature)(se);function d(C,r){return function(m){return r(C(m))}}function f(C,r){return function(m){return r(C(m))}}function b(C,r){return function(m){return r(C(m))}}function u(C,r){return function(m){return r(C(m))}}function n(C,r){return function(m){return r(C(m))}}function e(C,r){return function(m){return r(C(m))}}function i(C,r){return function(m){return r(C(m))}}function R(C,r){return function(m){return r(C(m))}}s.combineConsoleFeatures=d,s.combineTelemetryFeatures=f,s.combineTracerFeatures=b,s.combineClientFeatures=u,s.combineWindowFeatures=n,s.combineWorkspaceFeatures=e,s.combineLanguagesFeatures=i,s.combineNotebooksFeatures=R,s.combineFeatures=function j(C,r){function m(g,B,Y){return g&&B?Y(g,B):g||B}return{__brand:"features",console:m(C.console,r.console,d),tracer:m(C.tracer,r.tracer,b),telemetry:m(C.telemetry,r.telemetry,f),client:m(C.client,r.client,u),window:m(C.window,r.window,n),workspace:m(C.workspace,r.workspace,e),languages:m(C.languages,r.languages,i),notebooks:m(C.notebooks,r.notebooks,R)}},s.createConnection=function O(C,r,m){const N=m&&m.console?new(m.console(k)):new k,g=C(N);N.rawAttach(g);const B=m&&m.tracer?new(m.tracer(ne)):new ne,Y=m&&m.telemetry?new(m.telemetry(oe)):new oe,Z=m&&m.client?new(m.client(V)):new V,me=m&&m.window?new(m.window(I)):new I,pe=m&&m.workspace?new(m.workspace(te)):new te,ye=m&&m.languages?new(m.languages(re)):new re,_e=m&&m.notebooks?new(m.notebooks(ee)):new ee,ue=[N,B,Y,Z,me,pe,ye,_e];let le,de,he,ce={listen:()=>g.listen(),sendRequest:(S,...w)=>g.sendRequest(v.string(S)?S:S.method,...w),onRequest:(S,w)=>g.onRequest(S,w),sendNotification:(S,w)=>{const $=v.string(S)?S:S.method;return 1===arguments.length?g.sendNotification($):g.sendNotification($,w)},onNotification:(S,w)=>g.onNotification(S,w),onProgress:g.onProgress,sendProgress:g.sendProgress,onInitialize:S=>(de=S,{dispose:()=>{de=void 0}}),onInitialized:S=>g.onNotification(t.InitializedNotification.type,S),onShutdown:S=>(le=S,{dispose:()=>{le=void 0}}),onExit:S=>(he=S,{dispose:()=>{he=void 0}}),get console(){return N},get telemetry(){return Y},get tracer(){return B},get client(){return Z},get window(){return me},get workspace(){return pe},get languages(){return ye},get notebooks(){return _e},onDidChangeConfiguration:S=>g.onNotification(t.DidChangeConfigurationNotification.type,S),onDidChangeWatchedFiles:S=>g.onNotification(t.DidChangeWatchedFilesNotification.type,S),__textDocumentSync:void 0,onDidOpenTextDocument:S=>g.onNotification(t.DidOpenTextDocumentNotification.type,S),onDidChangeTextDocument:S=>g.onNotification(t.DidChangeTextDocumentNotification.type,S),onDidCloseTextDocument:S=>g.onNotification(t.DidCloseTextDocumentNotification.type,S),onWillSaveTextDocument:S=>g.onNotification(t.WillSaveTextDocumentNotification.type,S),onWillSaveTextDocumentWaitUntil:S=>g.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,S),onDidSaveTextDocument:S=>g.onNotification(t.DidSaveTextDocumentNotification.type,S),sendDiagnostics:S=>g.sendNotification(t.PublishDiagnosticsNotification.type,S),onHover:S=>g.onRequest(t.HoverRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),void 0)),onCompletion:S=>g.onRequest(t.CompletionRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onCompletionResolve:S=>g.onRequest(t.CompletionResolveRequest.type,S),onSignatureHelp:S=>g.onRequest(t.SignatureHelpRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),void 0)),onDeclaration:S=>g.onRequest(t.DeclarationRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onDefinition:S=>g.onRequest(t.DefinitionRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onTypeDefinition:S=>g.onRequest(t.TypeDefinitionRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onImplementation:S=>g.onRequest(t.ImplementationRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onReferences:S=>g.onRequest(t.ReferencesRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onDocumentHighlight:S=>g.onRequest(t.DocumentHighlightRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onDocumentSymbol:S=>g.onRequest(t.DocumentSymbolRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onWorkspaceSymbol:S=>g.onRequest(t.WorkspaceSymbolRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onWorkspaceSymbolResolve:S=>g.onRequest(t.WorkspaceSymbolResolveRequest.type,S),onCodeAction:S=>g.onRequest(t.CodeActionRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onCodeActionResolve:S=>g.onRequest(t.CodeActionResolveRequest.type,(w,$)=>S(w,$)),onCodeLens:S=>g.onRequest(t.CodeLensRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onCodeLensResolve:S=>g.onRequest(t.CodeLensResolveRequest.type,(w,$)=>S(w,$)),onDocumentFormatting:S=>g.onRequest(t.DocumentFormattingRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),void 0)),onDocumentRangeFormatting:S=>g.onRequest(t.DocumentRangeFormattingRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),void 0)),onDocumentOnTypeFormatting:S=>g.onRequest(t.DocumentOnTypeFormattingRequest.type,(w,$)=>S(w,$)),onRenameRequest:S=>g.onRequest(t.RenameRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),void 0)),onPrepareRename:S=>g.onRequest(t.PrepareRenameRequest.type,(w,$)=>S(w,$)),onDocumentLinks:S=>g.onRequest(t.DocumentLinkRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onDocumentLinkResolve:S=>g.onRequest(t.DocumentLinkResolveRequest.type,(w,$)=>S(w,$)),onDocumentColor:S=>g.onRequest(t.DocumentColorRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onColorPresentation:S=>g.onRequest(t.ColorPresentationRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onFoldingRanges:S=>g.onRequest(t.FoldingRangeRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onSelectionRanges:S=>g.onRequest(t.SelectionRangeRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),(0,c.attachPartialResult)(g,w))),onExecuteCommand:S=>g.onRequest(t.ExecuteCommandRequest.type,(w,$)=>S(w,$,(0,c.attachWorkDone)(g,w),void 0)),dispose:()=>g.dispose()};for(let S of ue)S.attach(ce);return g.onRequest(t.InitializeRequest.type,S=>{r.initialize(S),v.string(S.trace)&&(B.trace=t.Trace.fromString(S.trace));for(let w of ue)w.initialize(S.capabilities);if(de)return function ve(S){return S instanceof Promise?S:v.thenable(S)?new Promise((w,$)=>{S.then(Q=>w(Q),Q=>$(Q))}):Promise.resolve(S)}(de(S,(new t.CancellationTokenSource).token,(0,c.attachWorkDone)(g,S),void 0)).then($=>{if($ instanceof t.ResponseError)return $;let Q=$;Q||(Q={capabilities:{}});let U=Q.capabilities;U||(U={},Q.capabilities=U),null==U.textDocumentSync?U.textDocumentSync=v.number(ce.__textDocumentSync)?ce.__textDocumentSync:t.TextDocumentSyncKind.None:!v.number(U.textDocumentSync)&&!v.number(U.textDocumentSync.change)&&(U.textDocumentSync.change=v.number(ce.__textDocumentSync)?ce.__textDocumentSync:t.TextDocumentSyncKind.None);for(let be of ue)be.fillServerCapabilities(U);return Q});{let w={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let $ of ue)$.fillServerCapabilities(w.capabilities);return w}}),g.onRequest(t.ShutdownRequest.type,()=>{if(r.shutdownReceived=!0,le)return le((new t.CancellationTokenSource).token)}),g.onNotification(t.ExitNotification.type,()=>{try{he&&he()}finally{r.exit(r.shutdownReceived?0:1)}}),g.onNotification(t.SetTraceNotification.type,S=>{B.trace=t.Trace.fromString(S.value)}),ce}},95601:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ShowDocumentFeature=void 0;const t=p(45974);s.ShowDocumentFeature=P=>class extends P{showDocument(c){return this.connection.sendRequest(t.ShowDocumentRequest.type,c)}}},39059:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextDocuments=void 0;const t=p(45974);s.TextDocuments=class v{constructor(c){this._configuration=c,this._syncedDocuments=new Map,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(c){this._willSaveWaitUntil=c}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(c){return this._syncedDocuments.get(c)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(c){c.__textDocumentSync=t.TextDocumentSyncKind.Incremental;const h=[];return h.push(c.onDidOpenTextDocument(_=>{const o=_.textDocument,l=this._configuration.create(o.uri,o.languageId,o.version,o.text);this._syncedDocuments.set(o.uri,l);const a=Object.freeze({document:l});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),h.push(c.onDidChangeTextDocument(_=>{const o=_.textDocument,l=_.contentChanges;if(0===l.length)return;const{version:a}=o;if(null==a)throw new Error(`Received document change event for ${o.uri} without valid version identifier`);let y=this._syncedDocuments.get(o.uri);void 0!==y&&(y=this._configuration.update(y,l,a),this._syncedDocuments.set(o.uri,y),this._onDidChangeContent.fire(Object.freeze({document:y})))})),h.push(c.onDidCloseTextDocument(_=>{let o=this._syncedDocuments.get(_.textDocument.uri);void 0!==o&&(this._syncedDocuments.delete(_.textDocument.uri),this._onDidClose.fire(Object.freeze({document:o})))})),h.push(c.onWillSaveTextDocument(_=>{let o=this._syncedDocuments.get(_.textDocument.uri);void 0!==o&&this._onWillSave.fire(Object.freeze({document:o,reason:_.reason}))})),h.push(c.onWillSaveTextDocumentWaitUntil((_,o)=>{let l=this._syncedDocuments.get(_.textDocument.uri);return void 0!==l&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:l,reason:_.reason}),o):[]})),h.push(c.onDidSaveTextDocument(_=>{let o=this._syncedDocuments.get(_.textDocument.uri);void 0!==o&&this._onDidSave.fire(Object.freeze({document:o}))})),t.Disposable.create(()=>{h.forEach(_=>_.dispose())})}}},71397:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TypeHierarchyFeature=void 0;const t=p(45974);s.TypeHierarchyFeature=P=>class extends P{get typeHierarchy(){return{onPrepare:c=>this.connection.onRequest(t.TypeHierarchyPrepareRequest.type,(h,_)=>c(h,_,this.attachWorkDoneProgress(h),void 0)),onSupertypes:c=>{const h=t.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(h,(_,o)=>c(_,o,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(h,_)))},onSubtypes:c=>{const h=t.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(h,(_,o)=>c(_,o,this.attachWorkDoneProgress(_),this.attachPartialResultProgress(h,_)))}}}}},83901:(W,s)=>{function t(a){return"string"==typeof a||a instanceof String}function c(a){return"function"==typeof a}function h(a){return Array.isArray(a)}Object.defineProperty(s,"__esModule",{value:!0}),s.thenable=s.typedArray=s.stringArray=s.array=s.func=s.error=s.number=s.string=s.boolean=void 0,s.boolean=function p(a){return!0===a||!1===a},s.string=t,s.number=function v(a){return"number"==typeof a||a instanceof Number},s.error=function P(a){return a instanceof Error},s.func=c,s.array=h,s.stringArray=function _(a){return h(a)&&a.every(y=>t(y))},s.typedArray=function o(a,y){return Array.isArray(a)&&a.every(y)},s.thenable=function l(a){return a&&c(a.then)}},43706:(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.generateUuid=s.parse=s.isUUID=s.v4=s.empty=void 0;class p{constructor(l){this._value=l}asHex(){return this._value}equals(l){return this.asHex()===l.asHex()}}let t=(()=>{class o extends p{constructor(){super([o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-","4",o._randomHex(),o._randomHex(),o._randomHex(),"-",o._oneOf(o._timeHighBits),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex()].join(""))}static _oneOf(a){return a[Math.floor(a.length*Math.random())]}static _randomHex(){return o._oneOf(o._chars)}}return o._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],o._timeHighBits=["8","9","a","b"],o})();function v(){return new t}s.empty=new p("00000000-0000-0000-0000-000000000000"),s.v4=v;const P=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function c(o){return P.test(o)}s.isUUID=c,s.parse=function h(o){if(!c(o))throw new Error("invalid uuid");return new p(o)},s.generateUuid=function _(){return v().asHex()}},45108:(W,s,p)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WorkspaceFoldersFeature=void 0;const t=p(45974);s.WorkspaceFoldersFeature=P=>class extends P{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(c){super.initialize(c);let h=c.workspace;h&&h.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new t.Emitter,this.connection.onNotification(t.DidChangeWorkspaceFoldersNotification.type,_=>{this._onDidChangeWorkspaceFolders.fire(_.event)}))}fillServerCapabilities(c){super.fillServerCapabilities(c);const h=c.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=!0===h||"string"==typeof h}getWorkspaceFolders(){return this.connection.sendRequest(t.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(t.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}},99938:(W,s,p)=>{function h(d,f,b,u){var i,n=arguments.length,e=n<3?f:null===u?u=Object.getOwnPropertyDescriptor(f,b):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(d,f,b,u);else for(var R=d.length-1;R>=0;R--)(i=d[R])&&(e=(n<3?i(e):n>3?i(f,b,e):i(f,b))||e);return n>3&&e&&Object.defineProperty(f,b,e),e}function T(d,f){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(d,f)}function E(d,f,b,u){return new(b||(b=Promise))(function(e,i){function R(C){try{O(u.next(C))}catch(r){i(r)}}function j(C){try{O(u.throw(C))}catch(r){i(r)}}function O(C){C.done?e(C.value):function n(e){return e instanceof b?e:new b(function(i){i(e)})}(C.value).then(R,j)}O((u=u.apply(d,f||[])).next())})}p.d(s,{gn:()=>h,mG:()=>E,w6:()=>T}),"function"==typeof SuppressedError&&SuppressedError}},ge={};function A(W){var s=ge[W];if(void 0!==s)return s.exports;var p=ge[W]={exports:{}};return fe[W].call(p.exports,p,p.exports,A),p.exports}A.m=fe,A.x=()=>{var W=A.O(void 0,[642,60],()=>A(92271));return A.O(W)},W=[],A.O=(s,p,t,v)=>{if(!p){var c=1/0;for(P=0;P<W.length;P++){for(var[p,t,v]=W[P],h=!0,_=0;_<p.length;_++)(!1&v||c>=v)&&Object.keys(A.O).every(E=>A.O[E](p[_]))?p.splice(_--,1):(h=!1,v<c&&(c=v));if(h){W.splice(P--,1);var o=t();void 0!==o&&(s=o)}}return s}v=v||0;for(var P=W.length;P>0&&W[P-1][2]>v;P--)W[P]=W[P-1];W[P]=[p,t,v]},A.d=(W,s)=>{for(var p in s)A.o(s,p)&&!A.o(W,p)&&Object.defineProperty(W,p,{enumerable:!0,get:s[p]})},A.f={},A.e=W=>Promise.all(Object.keys(A.f).reduce((s,p)=>(A.f[p](W,s),s),[])),A.u=W=>W+"."+{60:"d1c0d352c73f0509",642:"fdc740bf0b86c27e"}[W]+".js",A.miniCssF=W=>{},A.o=(W,s)=>Object.prototype.hasOwnProperty.call(W,s),A.r=W=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(W,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(W,"__esModule",{value:!0})},(()=>{var W;A.tt=()=>(void 0===W&&(W={createScriptURL:s=>s},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(W=trustedTypes.createPolicy("angular#bundler",W))),W)})(),A.tu=W=>A.tt().createScriptURL(W),A.p="",(()=>{var W={271:1};A.f.i=(v,P)=>{W[v]||importScripts(A.tu(A.p+A.u(v)))};var p=self.webpackChunkweb=self.webpackChunkweb||[],t=p.push.bind(p);p.push=v=>{var[P,c,h]=v;for(var _ in c)A.o(c,_)&&(A.m[_]=c[_]);for(h&&h(A);P.length;)W[P.pop()]=1;t(v)}})(),(()=>{var W=A.x;A.x=()=>Promise.all([A.e(642),A.e(60)]).then(W)})(),A.x()})();