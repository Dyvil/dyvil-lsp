"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[611],{57611:(Di,Nt,r)=>{r.r(Nt),r.d(Nt,{default:()=>Ti});var S=r(58054),d=(r(87708),r(55885)),$=r(96970);(0,$.Z)(".monaco-workbench>.notifications-toasts{bottom:26px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{border-radius:4px;margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}",{});var f=r(12829),p=r(12997),u=r(6418),R=r(82344);(0,$.Z)(".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);border-radius:inherit;color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{border-radius:4px;box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .monaco-scrollable-element{border-radius:4px}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0;height:2px}",{});var z=r(45414),_=r(35814),Bt=r(12292),Pt=r(58535),Gt=r(95270),Tt=r(9110),N=r(32243),dt=r(54922),h=r(51776),Y=r(98179),g=r(13683),Dt=r(86810),H=r(13686),Wt=r(95558);class Kt extends p.JT{constructor(t,i){super(),this.item=t,this.onClose=i,this._onDidClose=this._register(new g.Q5),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new g.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(t=>this._onDidChangeVisibility.fire(t))),g.ju.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(t){this.item.updateSeverity(t)}updateMessage(t){this.item.updateMessage(t)}updateActions(t){this.item.updateActions(t)}close(){this.onClose(this.item),this.dispose()}}class q extends p.JT{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new g.Q5),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new g.Q5),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new g.Q5),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter=h.NG.OFF}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(t){this.filter=t,this._onDidChangeFilter.fire(t)}addNotification(t){const i=this.createViewItem(t);return i?(this.findNotification(i)?.close(),this._notifications.splice(0,0,i),this._onDidChangeNotification.fire({item:i,index:0,kind:0}),new Kt(i,o=>this.onClose(o))):q.NO_OP_NOTIFICATION}onClose(t){const i=this.findNotification(t);i&&i!==t?i.close():t.close()}findNotification(t){return this._notifications.find(i=>i.equals(t))}createViewItem(t){const i=ft.create(t,this.filter);if(!i)return;const e=(s,a)=>{const c=this._notifications.indexOf(i);c>=0&&this._onDidChangeNotification.fire({item:i,index:c,kind:s,detail:a})},o=i.onDidChangeExpansion(()=>e(2)),n=i.onDidChangeContent(s=>e(1,s.kind));return g.ju.once(i.onDidClose)(()=>{o.dispose(),n.dispose();const s=this._notifications.indexOf(i);s>=0&&(this._notifications.splice(s,1),this._onDidChangeNotification.fire({item:i,index:s,kind:3}))}),i}showStatusMessage(t,i){const e=zt.create(t,i);return e?(this._statusMessage=e,this._onDidChangeStatusMessage.fire({kind:0,item:e}),(0,p.OF)(()=>{this._statusMessage===e&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:1,item:e}))})):p.JT.None}}function ht(l){return l instanceof ft}q.NO_OP_NOTIFICATION=new h.EO;class Ut extends p.JT{constructor(){super(),this._onDidChange=this._register(new g.Q5),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(t){this._state.total!==t&&(this._state.total=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(t){"number"==typeof this._state.worked?this._state.worked+=t:this._state.worked=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}let ft=(()=>{class l extends p.JT{static create(i,e=h.NG.OFF){if(!i||!i.message||(0,Dt.n2)(i.message))return;let o;o="number"==typeof i.severity?i.severity:h.zb.Info;const n=l.parseNotificationMessage(i.message);if(!n)return;let s;i.actions?s=i.actions:(0,Y.TF)(i.message)&&(s={primary:i.message.actions});let a=i.priority??h.RX.DEFAULT;return a===h.RX.DEFAULT&&(e===h.NG.SILENT||e===h.NG.ERROR&&i.severity!==h.zb.Error)&&(a=h.RX.SILENT),new l(i.id,o,i.sticky,a,n,i.source,i.progress,s)}static parseNotificationMessage(i){let e;if(i instanceof Error?e=(0,Y.yJ)(i,!1):"string"==typeof i&&(e=i),!e)return;const o=e;return e.length>l.MAX_MESSAGE_LENGTH&&(e=`${e.substr(0,l.MAX_MESSAGE_LENGTH)}...`),e=e.replace(/(\r\n|\n|\r)/gm," ").trim(),{raw:o,linkedText:(0,Wt.J)(e),original:i}}constructor(i,e,o,n,s,a,c,C){super(),this.id=i,this._severity=e,this._sticky=o,this._priority=n,this._message=s,this._source=a,this._visible=!1,this._onDidChangeExpansion=this._register(new g.Q5),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new g.Q5),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new g.Q5),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new g.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,c&&this.setProgress(c),this.setActions(C)}setProgress(i){i.infinite?this.progress.infinite():i.total&&(this.progress.total(i.total),i.worked&&this.progress.worked(i.worked))}setActions(i={primary:[],secondary:[]}){this._actions={primary:Array.isArray(i.primary)?i.primary:[],secondary:Array.isArray(i.secondary)?i.secondary:[]},this._expanded=i.primary&&i.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const i=this.hasActions;return!!(i&&this._severity===h.zb.Error||!i&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!(!this._actions||!this._actions.primary)&&this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new Ut),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:3})))),this._progress}get message(){return this._message}get source(){return"string"==typeof this._source?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&"string"!=typeof this._source&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(i){i!==this._severity&&(this._severity=i,this._onDidChangeContent.fire({kind:0}))}updateMessage(i){const e=l.parseNotificationMessage(i);!e||e.raw===this._message.raw||(this._message=e,this._onDidChangeContent.fire({kind:1}))}updateActions(i){this.setActions(i),this._onDidChangeContent.fire({kind:2})}updateVisibility(i){this._visible!==i&&(this._visible=i,this._onDidChangeVisibility.fire(i))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(i){!this._expanded||!this.canCollapse||(this._expanded=!1,i||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(i){if(this.hasProgress||i.hasProgress)return!1;if("string"==typeof this.id||"string"==typeof i.id)return this.id===i.id;if("object"==typeof this._source){if(this._source.label!==i.source||this._source.id!==i.sourceId)return!1}else if(this._source!==i.source)return!1;return this._message.raw===i.message.raw&&(0,H.fS)(this._actions&&this._actions.primary||[],i.actions&&i.actions.primary||[],(n,s)=>n.id+n.label===s.id+s.label)}}return l.MAX_MESSAGE_LENGTH=1e3,l})();class Q extends N.aU{constructor(t,i){var e;super(t,i.label,void 0,!0,(0,S.Z)(function*(){i.run(),e._onDidRun.fire()})),e=this,this._onDidRun=this._register(new g.Q5),this.onDidRun=this._onDidRun.event,this._keepOpen=!!i.keepOpen,this._menu=!i.isSecondary&&i.menu?i.menu.map((o,n)=>new Q(`${t}.${n}`,o)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class zt{static create(t,i){if(!t||(0,Dt.n2)(t))return;let e;return t instanceof Error?e=(0,Y.yJ)(t,!1):"string"==typeof t&&(e=t),e?{message:e,options:i}:void 0}}(0,$.Z)(".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}",{});var T=r(13141),k=r(76972),D=r(28759),w=r(73317),tt=r(17324),wt=r(61604);function it(l,t,i){return{id:(0,wt.vp)(l.toString()).toString(),silent:i,source:t||"core"}}let ut=class extends p.JT{constructor(t,i){super(),this.telemetryService=t,this.notificationService=i,this.registerListeners()}registerListeners(){this._register(this.notificationService.onDidAddNotification(t=>{this.telemetryService.publicLog2("notification:show",it(t.message,t.source&&"string"!=typeof t.source?t.source.id:t.source,t.priority===h.RX.SILENT))})),this._register(this.notificationService.onDidRemoveNotification(t=>{this.telemetryService.publicLog2("notification:close",it(t.message,t.source&&"string"!=typeof t.source?t.source.id:t.source,t.priority===h.RX.SILENT))}))}};ut=(0,d.gn)([(0,d.fM)(0,tt.bU),(0,d.fM)(1,h.lT)],ut);var m=r(86682);const St="notifications.showList",et="notifications.hideList",gt="notifications.hideToasts",At="notifications.focusToasts",mt="notification.collapse",pt="notification.expand",It="notification.acceptPrimaryAction",Ct="notification.clear",ot="notifications.clearAll",nt="notifications.toggleDoNotDisturbMode";let Z=class extends N.Wi{constructor(t,i){super(),this.telemetryService=t,this.notificationService=i}runAction(t,i){var e=()=>super.runAction,o=this;return(0,S.Z)(function*(){o.telemetryService.publicLog2("workbenchActionExecuted",{id:t.id,from:"message"}),ht(i)&&o.telemetryService.publicLog2("notification:actionExecuted",{id:(0,wt.vp)(i.message.original.toString()).toString(),actionLabel:t.label,source:i.sourceId||"core",silent:i.priority===h.RX.SILENT});try{yield e().call(o,t,i)}catch(n){o.notificationService.error(n)}})()}};Z=(0,d.gn)([(0,d.fM)(0,tt.bU),(0,d.fM)(1,h.lT)],Z);var qt=r(42965),A=r(62981),V=r(37202),E=r(52786);const ti=(0,V.q5)("notifications-clear",A.lA.close,(0,f.NC)("clearIcon","Icon for the clear action in notifications.")),ii=(0,V.q5)("notifications-clear-all",A.lA.clearAll,(0,f.NC)("clearAllIcon","Icon for the clear all action in notifications.")),ei=(0,V.q5)("notifications-hide",A.lA.chevronDown,(0,f.NC)("hideIcon","Icon for the hide action in notifications.")),oi=(0,V.q5)("notifications-expand",A.lA.chevronUp,(0,f.NC)("expandIcon","Icon for the expand action in notifications.")),ni=(0,V.q5)("notifications-collapse",A.lA.chevronDown,(0,f.NC)("collapseIcon","Icon for the collapse action in notifications.")),si=(0,V.q5)("notifications-configure",A.lA.gear,(0,f.NC)("configureIcon","Icon for the configure action in notifications.")),ai=(0,V.q5)("notifications-do-not-disturb",A.lA.bellSlash,(0,f.NC)("doNotDisturbIcon","Icon for the mute all action in notifications."));let F=class extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(ti)),this.commandService=e}run(t){var i=this;return(0,S.Z)(function*(){i.commandService.executeCommand(Ct,t)})()}};F.ID=Ct,F.LABEL=(0,f.NC)("clearNotification","Clear Notification"),F=(0,d.gn)([(0,d.fM)(2,T.H)],F);let B=class extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(ii)),this.commandService=e}run(){var t=this;return(0,S.Z)(function*(){t.commandService.executeCommand(ot)})()}};B.ID=ot,B.LABEL=(0,f.NC)("clearNotifications","Clear All Notifications"),B=(0,d.gn)([(0,d.fM)(2,T.H)],B);let P=class extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(ai)),this.commandService=e}run(){var t=this;return(0,S.Z)(function*(){t.commandService.executeCommand(nt)})()}};P.ID=nt,P.LABEL=(0,f.NC)("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode"),P=(0,d.gn)([(0,d.fM)(2,T.H)],P);let G=class extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(ei)),this.commandService=e}run(){var t=this;return(0,S.Z)(function*(){t.commandService.executeCommand(et)})()}};G.ID=et,G.LABEL=(0,f.NC)("hideNotificationsCenter","Hide Notifications"),G=(0,d.gn)([(0,d.fM)(2,T.H)],G);let W=class extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(oi)),this.commandService=e}run(t){var i=this;return(0,S.Z)(function*(){i.commandService.executeCommand(pt,t)})()}};W.ID=pt,W.LABEL=(0,f.NC)("expandNotification","Expand Notification"),W=(0,d.gn)([(0,d.fM)(2,T.H)],W);let K=class extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(ni)),this.commandService=e}run(t){var i=this;return(0,S.Z)(function*(){i.commandService.executeCommand(mt,t)})()}};K.ID=mt,K.LABEL=(0,f.NC)("collapseNotification","Collapse Notification"),K=(0,d.gn)([(0,d.fM)(2,T.H)],K);class X extends N.aU{constructor(t,i,e){super(t,i,E.kS.asClassName(si)),this.configurationActions=e}}X.ID="workbench.action.configureNotification",X.LABEL=(0,f.NC)("configureNotification","Configure Notification");let U=class extends N.aU{constructor(t,i,e){super(t,i),this.clipboardService=e}run(t){return this.clipboardService.writeText(t.message.raw)}};U.ID="workbench.action.copyNotificationMessage",U.LABEL=(0,f.NC)("copyNotification","Copy Text"),U=(0,d.gn)([(0,d.fM)(2,qt.p)],U);var xt=r(53091),ri=r(20400),ci=r(92908),bt=r(20565),Et=r(44027),Lt=r(470),li=r(6262);let di=(()=>{class l{constructor(i){this.offsetHelper=this.createOffsetHelper(i)}createOffsetHelper(i){const e=document.createElement("div");return e.classList.add("notification-offset-helper"),i.appendChild(e),e}getHeight(i){if(!i.expanded)return l.ROW_HEIGHT;let e=l.ROW_HEIGHT;const o=this.computePreferredHeight(i);return l.LINE_HEIGHT<o&&(e+=o-l.LINE_HEIGHT),(i.source||(0,H.Of)(i.actions&&i.actions.primary))&&(e+=l.ROW_HEIGHT),e===l.ROW_HEIGHT&&i.collapse(!0),e}computePreferredHeight(i){let e=1;i.canCollapse&&e++,(0,H.Of)(i.actions&&i.actions.secondary)&&e++,this.offsetHelper.style.width=450-(36+32*e-4)+"px";const o=Mt.render(i.message);this.offsetHelper.appendChild(o);const n=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return(0,u.PO)(this.offsetHelper),n}getTemplateId(i){if(i instanceof ft)return J.TEMPLATE_ID;throw new Error("unknown element type: "+i)}}return l.ROW_HEIGHT=42,l.LINE_HEIGHT=22,l})();class Mt{static render(t,i){const e=document.createElement("span");for(const o of t.linkedText.nodes)if("string"==typeof o)e.appendChild(document.createTextNode(o));else{let n=o.title;!n&&o.href.startsWith("command:")?n=(0,f.NC)("executeCommand","Click to execute command '{0}'",o.href.substr(8)):n||(n=o.href);const s=(0,u.$)("a",{href:o.href,title:n,tabIndex:0},o.label);if(i){const a=L=>{(0,u.cl)(L)&&u.zB.stop(L,!0),i.callback(o.href)},c=i.toDispose.add(new bt.Y(s,u.tw.CLICK)).event,C=i.toDispose.add(new bt.Y(s,u.tw.KEY_DOWN)).event,y=i.toDispose.add(g.ju.chain(C)).filter(L=>{const x=new li.y1(L);return x.equals(10)||x.equals(3)}).event;i.toDispose.add(Et.o.addTarget(s));const v=i.toDispose.add(new bt.Y(s,Et.t.Tap)).event;g.ju.any(c,v,y)(a,null,i.toDispose)}e.appendChild(s)}return e}}let J=class Ht{constructor(t,i,e){this.actionRunner=t,this.contextMenuService=i,this.instantiationService=e}get templateId(){return Ht.TEMPLATE_ID}renderTemplate(t){const i=Object.create(null);i.toDispose=new p.SL,i.container=document.createElement("div"),i.container.classList.add("notification-list-item"),i.mainRow=document.createElement("div"),i.mainRow.classList.add("notification-list-item-main-row"),i.icon=document.createElement("div"),i.icon.classList.add("notification-list-item-icon","codicon"),i.message=document.createElement("div"),i.message.classList.add("notification-list-item-message");const e=document.createElement("div");return e.classList.add("notification-list-item-toolbar-container"),i.toolbar=new Tt.o(e,{ariaLabel:(0,f.NC)("notificationActions","Notification Actions"),actionViewItemProvider:o=>{if(o&&o instanceof X){const n=new ci.C(o,o.configurationActions,this.contextMenuService,{actionRunner:this.actionRunner,classNames:o.class});return i.toDispose.add(n),n}},actionRunner:this.actionRunner}),i.toDispose.add(i.toolbar),i.detailsRow=document.createElement("div"),i.detailsRow.classList.add("notification-list-item-details-row"),i.source=document.createElement("div"),i.source.classList.add("notification-list-item-source"),i.buttonsContainer=document.createElement("div"),i.buttonsContainer.classList.add("notification-list-item-buttons-container"),t.appendChild(i.container),i.container.appendChild(i.detailsRow),i.detailsRow.appendChild(i.source),i.detailsRow.appendChild(i.buttonsContainer),i.container.appendChild(i.mainRow),i.mainRow.appendChild(i.icon),i.mainRow.appendChild(i.message),i.mainRow.appendChild(e),i.progress=new ri.k(t,Lt.b5),i.toDispose.add(i.progress),i.renderer=this.instantiationService.createInstance(st,i,this.actionRunner),i.toDispose.add(i.renderer),i}renderElement(t,i,e){e.renderer.setInput(t)}disposeTemplate(t){(0,p.B9)(t.toDispose)}};J.TEMPLATE_ID="notification",J=(0,d.gn)([(0,d.fM)(1,dt.i),(0,d.fM)(2,R.TG)],J);let st=class M extends p.JT{constructor(t,i,e,o,n,s){super(),this.template=t,this.actionRunner=i,this.openerService=e,this.instantiationService=o,this.keybindingService=n,this.contextMenuService=s,this.inputDisposables=this._register(new p.SL),M.closeNotificationAction||(M.closeNotificationAction=o.createInstance(F,F.ID,F.LABEL),M.expandNotificationAction=o.createInstance(W,W.ID,W.LABEL),M.collapseNotificationAction=o.createInstance(K,K.ID,K.LABEL))}setInput(t){this.inputDisposables.clear(),this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded),this.inputDisposables.add((0,u.nm)(this.template.container,u.tw.MOUSE_UP,e=>{1===e.button&&u.zB.stop(e,!0)})),this.inputDisposables.add((0,u.nm)(this.template.container,u.tw.AUXCLICK,e=>{!t.hasProgress&&1===e.button&&(u.zB.stop(e,!0),t.close())})),this.renderSeverity(t);const i=this.renderMessage(t);this.renderSecondaryActions(t,i),this.renderSource(t),this.renderButtons(t),this.renderProgress(t),this.inputDisposables.add(t.onDidChangeContent(e=>{switch(e.kind){case 0:this.renderSeverity(t);break;case 3:this.renderProgress(t);break;case 1:this.renderMessage(t)}}))}renderSeverity(t){M.SEVERITIES.forEach(i=>{t.severity!==i&&this.template.icon.classList.remove(...E.kS.asClassNameArray(this.toSeverityIcon(i)))}),this.template.icon.classList.add(...E.kS.asClassNameArray(this.toSeverityIcon(t.severity)))}renderMessage(t){(0,u.PO)(this.template.message),this.template.message.appendChild(Mt.render(t.message,{callback:e=>this.openerService.open(Pt.ov.parse(e),{allowCommands:!0}),toDispose:this.inputDisposables}));const i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return i?this.template.message.title=this.template.message.textContent+"":this.template.message.removeAttribute("title"),i}renderSecondaryActions(t,i){const e=[],o=t.actions?t.actions.secondary:void 0;if((0,H.Of)(o)){const s=this.instantiationService.createInstance(X,X.ID,X.LABEL,o);e.push(s),this.inputDisposables.add(s)}let n=!1;t.canCollapse&&(t.expanded||t.source||i)&&(n=!0),n&&e.push(t.expanded?M.collapseNotificationAction:M.expandNotificationAction),t.hasProgress||e.push(M.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=t,e.forEach(s=>this.template.toolbar.push(s,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(s)}))}renderSource(t){t.expanded&&t.source?(this.template.source.textContent=(0,f.NC)("notificationSource","Source: {0}",t.source),this.template.source.title=t.source):(this.template.source.textContent="",this.template.source.removeAttribute("title"))}renderButtons(t){(0,u.PO)(this.template.buttonsContainer);const i=t.actions?t.actions.primary:void 0;if(t.expanded&&(0,H.Of)(i)){const e=this,o=new class extends N.Wi{runAction(s){return(0,S.Z)(function*(){e.actionRunner.run(s,t),(!(s instanceof Q)||!s.keepOpen)&&t.close()})()}},n=this.inputDisposables.add(new Gt.k2(this.template.buttonsContainer));for(let s=0;s<i.length;s++){const a=i[s],c={title:!0,secondary:s>0,...Lt.wG},C=a instanceof Q?a.menu:void 0,y=this.inputDisposables.add(C?n.addButtonWithDropdown({...c,contextMenuProvider:this.contextMenuService,actions:C,actionRunner:o}):n.addButton(c));y.label=a.label,this.inputDisposables.add(y.onDidClick(v=>{v&&u.zB.stop(v,!0),o.run(a)}))}}}renderProgress(t){if(!t.hasProgress)return void this.template.progress.stop().hide();const i=t.progress.state;i.infinite?this.template.progress.infinite().show():"number"==typeof i.total||"number"==typeof i.worked?("number"==typeof i.total&&!this.template.progress.hasTotal()&&this.template.progress.total(i.total),"number"==typeof i.worked&&this.template.progress.setWorked(i.worked).show()):this.template.progress.done().hide()}toSeverityIcon(t){switch(t){case h.zb.Warning:return A.lA.warning;case h.zb.Error:return A.lA.error}return A.lA.info}getKeybindingLabel(t){const i=this.keybindingService.lookupKeybinding(t.id);return i?i.getLabel():null}};st.SEVERITIES=[h.zb.Info,h.zb.Warning,h.zb.Error],st=(0,d.gn)([(0,d.fM)(2,Bt.v4),(0,d.fM)(3,R.TG),(0,d.fM)(4,xt.d),(0,d.fM)(5,dt.i)],st);var I=r(93358);let at=class extends p.JT{constructor(t,i,e,o){super(),this.container=t,this.options=i,this.instantiationService=e,this.contextMenuService=o,this.viewModel=[]}show(t){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0),t&&(0,I.cW)(this.list).domFocus()}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const t=this._register(this.instantiationService.createInstance(Z)),i=this.instantiationService.createInstance(J,t),e=this.listDelegate=new di(this.listContainer),o=this.options,n=this.list=this._register(this.instantiationService.createInstance(z.ev,"NotificationsList",this.listContainer,e,[i],{...o,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:_.wk},accessibilityProvider:{getAriaLabel:c=>c.source?(0,f.NC)("notificationWithSourceAriaLabel","{0}, source: {1}, notification",c.message.raw,c.source):(0,f.NC)("notificationAriaLabel","{0}, notification",c.message.raw),getWidgetAriaLabel:()=>o.widgetAriaLabel??(0,f.NC)("notificationsList","Notifications List"),getRole:()=>"dialog"}})),s=this._register(this.instantiationService.createInstance(U,U.ID,U.LABEL));this._register(n.onContextMenu(c=>{c.element&&this.contextMenuService.showContextMenu({getAnchor:()=>c.anchor,getActions:()=>[s],getActionsContext:()=>c.element,actionRunner:t})})),this._register(n.onMouseDblClick(c=>c.element.toggle()));const a=this._register((0,u.go)(n.getHTMLElement()));this._register(a.onDidBlur(()=>{document.hasFocus()&&n.setFocus([])})),m.Mc.bindTo(n.contextKeyService),this._register(n.onDidChangeSelection(c=>{c.indexes.length>0&&n.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(t,i,e=[]){const[o,n]=(0,I.ld)(this.list,this.listContainer),s=(0,u.jg)(document.activeElement,n),a=o.getFocus()[0],c=this.viewModel[a];let C=null;if("number"==typeof a&&(C=o.getRelativeTop(a)),this.viewModel.splice(t,i,...e),o.splice(t,i,e),o.layout(),0===this.viewModel.length)this.hide();else if("number"==typeof a){let y=0;if(c){let v=this.viewModel.indexOf(c);-1===v&&(v=a-1),v<this.viewModel.length&&v>=0&&(y=v)}"number"==typeof C&&o.reveal(y,C),o.setFocus([y])}this.isVisible&&s&&o.domFocus()}updateNotificationHeight(t){const i=this.viewModel.indexOf(t);if(-1===i)return;const[e,o]=(0,I.ld)(this.list,this.listDelegate);e.updateElementHeight(i,o.getHeight(t)),e.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){!this.isVisible||!this.list||(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return!(!this.isVisible||!this.listContainer)&&(0,u.jg)(document.activeElement,this.listContainer)}layout(t,i){this.listContainer&&this.list&&(this.listContainer.style.width=`${t}px`,"number"==typeof i&&(this.list.getHTMLElement().style.maxHeight=`${i}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};at=(0,d.gn)([(0,d.fM)(2,R.TG),(0,d.fM)(3,dt.i)],at);var kt=r(94401),rt=r(32064),Ot=r(66179),Rt=r(59796),hi=r(89488),fi=r(76148),ui=r(26056),b=(()=>((b=b||{})[b.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",b[b.HIDDEN=1]="HIDDEN",b[b.VISIBLE=2]="VISIBLE",b))();let O=class j extends rt.bB{get isVisible(){return!!this._isVisible}constructor(t,i,e,o,n,s,a,c,C){super(n),this.container=t,this.model=i,this.instantiationService=e,this.layoutService=o,this.editorGroupService=s,this.contextKeyService=a,this.lifecycleService=c,this.hostService=C,this._onDidChangeVisibility=this._register(new g.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=m.Bm.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new ui.JE(j.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayout(t=>this.layout(u.Ro.lift(t)))),this.lifecycleService.when(3).then(()=>{this.model.notifications.forEach(t=>this.addToast(t)),this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}),this._register(this.model.onDidChangeFilter(t=>{(t===h.NG.SILENT||t===h.NG.ERROR)&&this.hide()}))}onDidChangeNotification(t){switch(t.kind){case 0:return this.addToast(t.item);case 3:return this.removeToast(t.item)}}addToast(t){if(this.isNotificationsCenterVisible||t.priority===h.RX.SILENT||this.addedToastsIntervalCounter.increment()>j.SPAM_PROTECTION.limit)return;const i=new p.SL;this.mapNotificationToDisposable.set(t,i),i.add((0,u.jL)(()=>this.doAddToast(t,i)))}doAddToast(t,i){let e=this.notificationsToastsContainer;e||(e=this.notificationsToastsContainer=document.createElement("div"),e.classList.add("notifications-toasts"),this.container.appendChild(e)),e.classList.add("visible");const o=document.createElement("div");o.classList.add("notification-toast-container");const n=e.firstChild;n?e.insertBefore(o,n):e.appendChild(o);const s=document.createElement("div");s.classList.add("notification-toast"),o.appendChild(s);const a=this.instantiationService.createInstance(at,s,{verticalScrollMode:2,widgetAriaLabel:t.source?(0,f.NC)("notificationWithSourceAriaLabel","{0}, source: {1}, notification",t.message.raw,t.source):(0,f.NC)("notificationAriaLabel","{0}, notification",t.message.raw)});i.add(a);const c={item:t,list:a,container:o,toast:s};this.mapNotificationToToast.set(t,c),i.add((0,p.OF)(()=>this.updateToastVisibility(c,!1))),a.show();const C=this.computeMaxDimensions();this.layoutLists(C.width),a.updateNotificationsList(0,0,[t]),this.layoutContainer(C.height),i.add(t.onDidChangeExpansion(()=>{a.updateNotificationsList(0,1,[t])})),i.add(t.onDidChangeContent(y=>{switch(y.kind){case 2:a.updateNotificationsList(0,1,[t]);break;case 1:t.expanded&&a.updateNotificationHeight(t)}})),g.ju.once(t.onDidClose)(()=>{this.removeToast(t)}),this.purgeNotification(t,o,a,i),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),s.classList.add("notification-fade-in"),i.add((0,u.nm)(s,"transitionend",()=>{s.classList.remove("notification-fade-in"),s.classList.add("notification-fade-in-done")})),t.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(t,i,e,o){let s,a,n=!1;o.add((0,u.nm)(i,u.tw.MOUSE_OVER,()=>n=!0)),o.add((0,u.nm)(i,u.tw.MOUSE_OUT,()=>n=!1));const c=()=>{s=setTimeout(()=>{this.hostService.hasFocus?t.sticky||e.hasFocus()||n?c():this.removeToast(t):a||(a=this.hostService.onDidChangeFocus(C=>{C&&c()}),o.add(a))},j.PURGE_TIMEOUT[t.severity])};c(),o.add((0,p.OF)(()=>clearTimeout(s)))}removeToast(t){let i=!1;const e=this.mapNotificationToToast.get(t);e&&((0,u.jg)(document.activeElement,e.container)&&(i=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(t));const o=this.mapNotificationToDisposable.get(t);o&&((0,p.B9)(o),this.mapNotificationToDisposable.delete(t)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),i&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(t=>(0,p.B9)(t)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){this.notificationsToastsContainer?.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const t=!!this.notificationsToastsContainer&&(0,u.jg)(document.activeElement,this.notificationsToastsContainer);this.removeToasts(),t&&this.editorGroupService.activeGroup.focus()}focus(){const t=this.getToasts(b.VISIBLE);return t.length>0&&(t[0].list.focusFirst(),!0)}focusNext(){const t=this.getToasts(b.VISIBLE);for(let i=0;i<t.length;i++)if(t[i].list.hasFocus()){const o=t[i+1];if(o)return o.list.focusFirst(),!0;break}return!1}focusPrevious(){const t=this.getToasts(b.VISIBLE);for(let i=0;i<t.length;i++)if(t[i].list.hasFocus()){const o=t[i-1];if(o)return o.list.focusFirst(),!0;break}return!1}focusFirst(){const t=this.getToasts(b.VISIBLE)[0];return!!t&&(t.list.focusFirst(),!0)}focusLast(){const t=this.getToasts(b.VISIBLE);return t.length>0&&(t[t.length-1].list.focusFirst(),!0)}update(t){this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:t})=>{const i=this.getColor(_.wk);t.style.background=i||"";const e=this.getColor(Ot.rh);t.style.boxShadow=e?`0 0 8px 2px ${e}`:"";const o=this.getColor(_.zL);t.style.border=o?`1px solid ${o}`:""})}getToasts(t){const i=[];return this.mapNotificationToToast.forEach(e=>{switch(t){case b.HIDDEN_OR_VISIBLE:i.push(e);break;case b.HIDDEN:this.isToastInDOM(e)||i.push(e);break;case b.VISIBLE:this.isToastInDOM(e)&&i.push(e)}}),i.reverse()}layout(t){this.workbenchDimensions=t;const i=this.computeMaxDimensions();i.height&&this.layoutContainer(i.height),this.layoutLists(i.width)}computeMaxDimensions(){const t=j.MAX_WIDTH;let e,i=t;return this.workbenchDimensions&&(i=this.workbenchDimensions.width,i-=16,e=this.workbenchDimensions.height,this.layoutService.isVisible("workbench.parts.statusbar")&&(e-=22),this.layoutService.isVisible("workbench.parts.titlebar")&&(e-=22),e-=24),e="number"==typeof e?Math.round(.618*e):0,new u.Ro(Math.min(t,i),e)}layoutLists(t){this.mapNotificationToToast.forEach(({list:i})=>i.layout(t))}layoutContainer(t){let i=0;for(const e of this.getToasts(b.HIDDEN_OR_VISIBLE)){e.container.style.opacity="0",this.updateToastVisibility(e,!0),t-=e.container.offsetHeight;let o=!1;i===j.MAX_NOTIFICATIONS?o=!1:t>=0&&(o=!0),this.updateToastVisibility(e,o),e.container.style.opacity="",o&&i++}}updateToastVisibility(t,i){if(this.isToastInDOM(t)===i)return;const e=(0,I.cW)(this.notificationsToastsContainer);i?e.appendChild(t.container):e.removeChild(t.container),t.item.updateVisibility(i)}isToastInDOM(t){return!!t.container.parentElement}};O.MAX_WIDTH=450,O.MAX_NOTIFICATIONS=3,O.PURGE_TIMEOUT={[h.zb.Info]:15e3,[h.zb.Warning]:18e3,[h.zb.Error]:2e4},O.SPAM_PROTECTION={interval:800,limit:O.MAX_NOTIFICATIONS},O=(0,d.gn)([(0,d.fM)(2,R.TG),(0,d.fM)(3,kt.z),(0,d.fM)(4,rt.XE),(0,d.fM)(5,Rt.Qw),(0,d.fM)(6,k.i6),(0,d.fM)(7,hi.g),(0,d.fM)(8,fi.$)],O);var gi=r(58571);let ct=class vt extends p.JT{constructor(t){super(),this.storageService=t,this.model=this._register(new q),this._onDidAddNotification=this._register(new g.Q5),this.onDidAddNotification=this._onDidAddNotification.event,this._onDidRemoveNotification=this._register(new g.Q5),this.onDidRemoveNotification=this._onDidRemoveNotification.event,this._onDidChangeDoNotDisturbMode=this._register(new g.Q5),this.onDidChangeDoNotDisturbMode=this._onDidChangeDoNotDisturbMode.event,this._doNotDisturbMode=this.storageService.getBoolean(vt.DND_SETTINGS_KEY,-1,!1),this.updateDoNotDisturbFilters(),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>{switch(t.kind){case 0:case 3:{const i={message:t.item.message.original,severity:t.item.severity,source:"string"==typeof t.item.sourceId&&"string"==typeof t.item.source?{id:t.item.sourceId,label:t.item.source}:t.item.source,priority:t.item.priority};0===t.kind&&this._onDidAddNotification.fire(i),3===t.kind&&this._onDidRemoveNotification.fire(i);break}}}))}get doNotDisturbMode(){return this._doNotDisturbMode}set doNotDisturbMode(t){this._doNotDisturbMode!==t&&(this.storageService.store(vt.DND_SETTINGS_KEY,t,-1,1),this._doNotDisturbMode=t,this.updateDoNotDisturbFilters(),this._onDidChangeDoNotDisturbMode.fire())}updateDoNotDisturbFilters(){let t;t=this._doNotDisturbMode?h.NG.ERROR:h.NG.OFF,this.model.setFilter(t)}info(t){Array.isArray(t)?t.forEach(i=>this.info(i)):this.model.addNotification({severity:h.zb.Info,message:t})}warn(t){Array.isArray(t)?t.forEach(i=>this.warn(i)):this.model.addNotification({severity:h.zb.Warning,message:t})}error(t){Array.isArray(t)?t.forEach(i=>this.error(i)):this.model.addNotification({severity:h.zb.Error,message:t})}notify(t){var i=this;const e=new p.SL;if(t.neverShowAgain){const n=this.toStorageScope(t.neverShowAgain),s=t.neverShowAgain.id;if(this.storageService.getBoolean(s,n))return new h.EO;const a=e.add(new N.aU("workbench.notification.neverShowAgain",(0,f.NC)("neverShowAgain","Don't Show Again"),void 0,!0,(0,S.Z)(function*(){o.close(),i.storageService.store(s,!0,n,0)}))),c={primary:t.actions?.primary||[],secondary:t.actions?.secondary||[]};t.neverShowAgain.isSecondary?c.secondary=[...c.secondary,a]:c.primary=[a,...c.primary],t.actions=c}const o=this.model.addNotification(t);return g.ju.once(o.onDidClose)(()=>e.dispose()),o}toStorageScope(t){switch(t.scope){case h.YB.APPLICATION:return-1;case h.YB.PROFILE:return 0;case h.YB.WORKSPACE:return 1;default:return-1}}prompt(t,i,e,o){const n=new p.SL;if(o?.neverShowAgain){const v=this.toStorageScope(o.neverShowAgain),L=o.neverShowAgain.id;if(this.storageService.getBoolean(L,v))return new h.EO;const x={label:(0,f.NC)("neverShowAgain","Don't Show Again"),run:()=>this.storageService.store(L,!0,v,0),isSecondary:o.neverShowAgain.isSecondary};e=o.neverShowAgain.isSecondary?[...e,x]:[x,...e]}let s=!1;const a=[],c=[];e.forEach((v,L)=>{const x=new Q(`workbench.dialog.choice.${L}`,v);v.isSecondary?c.push(x):a.push(x),n.add(x.onDidRun(()=>{s=!0,v.keepOpen||y.close()})),n.add(x)});const y=this.notify({severity:t,message:i,actions:{primary:a,secondary:c},sticky:o?.sticky,priority:o?.priority});return g.ju.once(y.onDidClose)(()=>{n.dispose(),o&&"function"==typeof o.onCancel&&!s&&o.onCancel()}),y}status(t,i){return this.model.showStatusMessage(t,i)}};ct.DND_SETTINGS_KEY="notifications.doNotDisturbMode",ct=(0,d.gn)([(0,d.fM)(0,gi.Uy)],ct);var mi=r(21462);(0,$.Z)(".monaco-workbench>.notifications-center{border-radius:4px;bottom:31px;display:none;overflow:hidden;position:absolute;right:8px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:8px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row[data-last-element=false]>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container,.monaco-workbench>.notifications-center .notifications-list-container .monaco-scrollable-element,.monaco-workbench>.notifications-center .notifications-list-container .notification-list-item{border-radius:0}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}",{});let lt=class yt extends rt.bB{constructor(t,i,e,o,n,s,a,c,C){super(e),this.container=t,this.model=i,this.instantiationService=o,this.layoutService=n,this.contextKeyService=s,this.editorGroupService=a,this.keybindingService=c,this.notificationService=C,this._onDidChangeVisibility=this._register(new g.Q5),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=m.di.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=m.di.bindTo(s),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.layoutService.onDidLayout(t=>this.layout(u.Ro.lift(t)))),this._register(this.notificationService.onDidChangeDoNotDisturbMode(()=>this.onDidChangeDoNotDisturbMode()))}onDidChangeDoNotDisturbMode(){this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible)return void(0,I.cW)(this.notificationsList).show(!0);this.notificationsCenterContainer||this.create(),this.updateTitle();const[t,i]=(0,I.ld)(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,i.classList.add("visible"),t.show(),this.layout(this.workbenchDimensions),t.updateNotificationsList(0,0,this.model.notifications),t.focusFirst(),this.updateStyles(),this.model.notifications.forEach(e=>e.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[t,i]=(0,I.ld)(this.notificationsCenterTitle,this.clearAllAction);0===this.model.notifications.length?(t.textContent=(0,f.NC)("notificationsEmpty","No new notifications"),i.enabled=!1):(t.textContent=(0,f.NC)("notifications","Notifications"),i.enabled=this.model.notifications.some(e=>!e.hasProgress))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const t=document.createElement("div");t.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(t);const i=this._register(this.instantiationService.createInstance(Z)),e=this._register(new Tt.o(t,{ariaLabel:(0,f.NC)("notificationsToolbar","Notification Center Actions"),actionRunner:i}));this.clearAllAction=this._register(this.instantiationService.createInstance(B,B.ID,B.LABEL)),e.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.toggleDoNotDisturbAction=this._register(this.instantiationService.createInstance(P,P.ID,P.LABEL)),e.push(this.toggleDoNotDisturbAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.toggleDoNotDisturbAction)});const o=this._register(this.instantiationService.createInstance(G,G.ID,G.LABEL));e.push(o,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(o)}),this.notificationsList=this.instantiationService.createInstance(at,this.notificationsCenterContainer,{widgetAriaLabel:(0,f.NC)("notificationsCenterWidgetAriaLabel","Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){const i=this.keybindingService.lookupKeybinding(t.id);return i?i.getLabel():null}onDidChangeNotification(t){if(!this._isVisible)return;let i=!1;const[e,o]=(0,I.ld)(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case 0:e.updateNotificationsList(t.index,0,[t.item]),t.item.updateVisibility(!0);break;case 1:switch(t.detail){case 2:e.updateNotificationsList(t.index,1,[t.item]);break;case 1:t.item.expanded&&e.updateNotificationHeight(t.item)}break;case 2:e.updateNotificationsList(t.index,1,[t.item]);break;case 3:i=(0,u.jg)(document.activeElement,o),e.updateNotificationsList(t.index,1),t.item.updateVisibility(!1)}this.updateTitle(),0===this.model.notifications.length&&(this.hide(),i&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const t=(0,u.jg)(document.activeElement,this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(i=>i.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),t&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const t=this.getColor(Ot.rh);this.notificationsCenterContainer.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const i=this.getColor(_.Vs);this.notificationsCenterContainer.style.border=i?`1px solid ${i}`:"";const e=this.getColor(_.H5);this.notificationsCenterHeader.style.color=e??"";const o=this.getColor(_.D3);this.notificationsCenterHeader.style.background=o??""}}layout(t){if(this.workbenchDimensions=t,this._isVisible&&this.notificationsCenterContainer){const i=yt.MAX_DIMENSIONS.width,e=yt.MAX_DIMENSIONS.height;let o=i,n=e;this.workbenchDimensions&&(o=this.workbenchDimensions.width,o-=16,n=this.workbenchDimensions.height-35,this.layoutService.isVisible("workbench.parts.statusbar")&&(n-=22),this.layoutService.isVisible("workbench.parts.titlebar")&&(n-=22),n-=24),(0,I.cW)(this.notificationsList).layout(Math.min(i,o),Math.min(e,n))}}clearAll(){this.hide();for(const t of[...this.model.notifications])t.hasProgress||t.close()}};lt.MAX_DIMENSIONS=new u.Ro(450,400),lt=(0,d.gn)([(0,d.fM)(2,rt.XE),(0,d.fM)(3,R.TG),(0,d.fM)(4,kt.z),(0,d.fM)(5,k.i6),(0,d.fM)(6,Rt.Qw),(0,d.fM)(7,xt.d),(0,d.fM)(8,h.lT)],lt);var Ci=r(33798);class bi extends p.JT{constructor(t){super(),this.model=t;for(const i of t.notifications)this.triggerAriaAlert(i);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}onDidChangeNotification(t){0===t.kind&&(this.triggerAriaAlert(t.item),t.item.severity===h.zb.Error&&(t.item.message.original instanceof Error?console.error(t.item.message.original):console.error((0,Y.yJ)(t.item.message.linkedText.toString(),!0))))}triggerAriaAlert(t){if(t.priority===h.RX.SILENT)return;const i=t.onDidChangeContent(e=>{1===e.kind&&this.doTriggerAriaAlert(t)});g.ju.once(t.onDidClose)(()=>i.dispose()),this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let i;i=t.severity===h.zb.Error?(0,f.NC)("alertErrorMessage","Error: {0}",t.message.linkedText.toString()):t.severity===h.zb.Warning?(0,f.NC)("alertWarningMessage","Warning: {0}",t.message.linkedText.toString()):(0,f.NC)("alertInfoMessage","Info: {0}",t.message.linkedText.toString()),(0,Ci.Z9)(i)}}var vi=r(16613),yi=r(38050);function Ti(l){return{[h.lT.toString()]:new mi.M(ct,void 0,!0),...(0,yi.Z)(l)}}(0,r(25324).yG)(function(){var l=(0,S.Z)(function*(t){const i=t.get(vi.F).container,e=t.get(h.lT).model,o=t.get(R.TG);setTimeout(()=>{const n=o.createInstance(lt,i,e),s=o.createInstance(O,i,e);o.createInstance(bi,e),o.createInstance(ut),function Yt(l,t,i){function e(n,s){if(ht(s))return s;const a=n.lastFocusedList;if(a instanceof z.ev){const c=a.getFocusedElements()[0];if(ht(c))return c}}T.P.registerCommand(St,()=>{t.hide(),l.show()}),D.W.registerCommandAndKeybindingRule({id:et,weight:250,when:m.di,primary:9,handler:n=>{const s=n.get(tt.bU);for(const a of i.notifications)a.visible&&s.publicLog2("notification:hide",it(a.message.original,a.sourceId,a.priority===h.RX.SILENT));l.hide()}}),T.P.registerCommand("notifications.toggleList",n=>{l.isVisible?l.hide():(t.hide(),l.show())}),D.W.registerCommandAndKeybindingRule({id:Ct,weight:200,when:m.Mc,primary:20,mac:{primary:2049},handler:(n,s)=>{const a=e(n.get(z.Lw),s);a&&!a.hasProgress&&a.close()}}),D.W.registerCommandAndKeybindingRule({id:pt,weight:200,when:m.Mc,primary:17,handler:(n,s)=>{e(n.get(z.Lw),s)?.expand()}}),D.W.registerCommandAndKeybindingRule({id:It,weight:200,when:k.Ao.and(m.Bm),primary:3103,handler:n=>{const s=n.get(R.TG).createInstance(Z),a=(0,H.Xh)(i.notifications);if(!a)return;const c=a.actions?.primary?(0,H.Xh)(a.actions.primary):void 0;c&&(s.run(c,a),a.close())}}),D.W.registerCommandAndKeybindingRule({id:mt,weight:200,when:m.Mc,primary:15,handler:(n,s)=>{e(n.get(z.Lw),s)?.collapse()}}),D.W.registerCommandAndKeybindingRule({id:"notification.toggle",weight:200,when:m.Mc,primary:10,secondary:[3],handler:n=>{e(n.get(z.Lw))?.toggle()}}),T.P.registerCommand(gt,n=>{const s=n.get(tt.bU);for(const a of i.notifications)a.visible&&s.publicLog2("notification:hide",it(a.message.original,a.sourceId,a.priority===h.RX.SILENT));t.hide()}),D.W.registerKeybindingRule({id:gt,weight:150,when:m.Bm,primary:9}),D.W.registerKeybindingRule({id:gt,weight:300,when:k.Ao.and(m.Bm,m.Mc),primary:9}),T.P.registerCommand(At,()=>t.focus()),D.W.registerCommandAndKeybindingRule({id:"notifications.focusNextToast",weight:200,when:k.Ao.and(m.Mc,m.Bm),primary:18,handler:()=>{t.focusNext()}}),D.W.registerCommandAndKeybindingRule({id:"notifications.focusPreviousToast",weight:200,when:k.Ao.and(m.Mc,m.Bm),primary:16,handler:()=>{t.focusPrevious()}}),D.W.registerCommandAndKeybindingRule({id:"notifications.focusFirstToast",weight:200,when:k.Ao.and(m.Mc,m.Bm),primary:11,secondary:[14],handler:()=>{t.focusFirst()}}),D.W.registerCommandAndKeybindingRule({id:"notifications.focusLastToast",weight:200,when:k.Ao.and(m.Mc,m.Bm),primary:12,secondary:[13],handler:()=>{t.focusLast()}}),T.P.registerCommand(ot,()=>l.clearAll()),T.P.registerCommand(nt,n=>{const s=n.get(h.lT);s.doNotDisturbMode=!s.doNotDisturbMode});const o={value:(0,f.NC)("notifications","Notifications"),original:"Notifications"};w.BH.appendMenuItem(w.eH.CommandPalette,{command:{id:St,title:{value:(0,f.NC)("showNotifications","Show Notifications"),original:"Show Notifications"},category:o}}),w.BH.appendMenuItem(w.eH.CommandPalette,{command:{id:et,title:{value:(0,f.NC)("hideNotifications","Hide Notifications"),original:"Hide Notifications"},category:o},when:m.di}),w.BH.appendMenuItem(w.eH.CommandPalette,{command:{id:ot,title:{value:(0,f.NC)("clearAllNotifications","Clear All Notifications"),original:"Clear All Notifications"},category:o}}),w.BH.appendMenuItem(w.eH.CommandPalette,{command:{id:It,title:{value:(0,f.NC)("acceptNotificationPrimaryAction","Accept Notification Primary Action"),original:"Accept Notification Primary Action"},category:o}}),w.BH.appendMenuItem(w.eH.CommandPalette,{command:{id:nt,title:{value:(0,f.NC)("toggleDoNotDisturbMode","Toggle Do Not Disturb Mode"),original:"Toggle Do Not Disturb Mode"},category:o}}),w.BH.appendMenuItem(w.eH.CommandPalette,{command:{id:At,title:{value:(0,f.NC)("focusNotificationToasts","Focus Notification Toast"),original:"Focus Notification Toast"},category:o},when:m.Bm})}(n,s,e),s.layout(u.D6(i))})});return function(t){return l.apply(this,arguments)}}())}}]);