(()=>{"use strict";var i,k={56374:(i,g,o)=>{var f=o(77737),a=o(52745);console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",v=>{const d=v.data.compile;if(d){const _=(0,a.V3)(d).resolve(new f._8([])).toString("js");self.postMessage({compiled:_})}})},25447:(i,g,o)=>{o.d(g,{YN:()=>S,_w:()=>j,d2:()=>y,dm:()=>$,eB:()=>_,gN:()=>u,n$:()=>b,v_:()=>n,wT:()=>c});var f=o(84260),a=o(667),v=o(9290),d=o(27426);class _ extends a.NB{constructor(t,e){super("unit"),this.path=t,this.classes=e,this.diagnostics=[]}report(t){this.diagnostics.push(t)}resolve(t){const e={[_.enclosing]:this};for(const r of this.classes)e[r.name]=r;return super.resolve(new v._(e,t))}toString(t){return this.classes.map(e=>e.toString(t)).join("\n\n")}}_.enclosing=Symbol("enclosing compilation unit");class p extends a.NB{constructor(t,e){super(t),this.name=e,this._references=[]}documentation(){return this.doc}references(){return[this.location,...this._references.map(t=>t.location)]}}class c extends p{constructor(t,e=[],r=[],m=[]){super("class",t),this.fields=e,this.constructors=r,this.methods=m}asType(){const t=new d.rF(this.name);return t._class=this,t}asCompletion(){return{label:this.name,kind:"class"}}toString(t){return a.$S`
    class ${this.name} {
      ${this.fields.map(e=>e.toString(t)).join("\n")}

      ${this.constructors.map(e=>e.toString(t)).join("\n\n")}

      ${this.methods.map(e=>e.toString(t)).join("\n\n")}
    }`}lookup(t,e,...r){for(const m of this.fields)if(m.name===t&&m instanceof e)return m;for(const m of this.methods)if(m.name===t&&m instanceof e&&m.overloads(r[0]))return m;for(const m of this.constructors)if(m instanceof e&&m.overloads(r[0]))return m}list(){return[...this.fields,...this.methods]}resolve(t){const e=new v._({[c.enclosing]:this},t);super.resolve(e);for(const r of this.fields)this.fields.some(m=>m!==r&&m.name===r.name)&&(0,f.Hj)(t,r.location,`duplicate field ${r.name}`);for(const r of this.methods)this.methods.some(m=>m!==r&&m.jsName===r.jsName)&&(0,f.Hj)(t,r.location,`duplicate method ${r.name} with mangled name ${r.jsName}`);return this}}c.enclosing=Symbol("enclosing class");class l extends p{constructor(t,e,r,m){super(t,e),this.parameters=r,this.body=m}resolve(t){this._thisClass||(this._thisClass=t.lookup(c.enclosing,c)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new y("this",this._thisClass.asType()),this._thisParameter.location=this.location);const e=new v._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,t);return super.resolve(e)}overloads(t){return t.length===this.parameters.length&&this.parameters.every((e,r)=>(0,d.BM)(e.type,t[r]))}}let n=(()=>{class s extends l{constructor(e=[],r){super("constructor","init",e,r)}toString(e){return`${"js"===e?"constructor":"init"}(${this.parameters.map(r=>r.toString(e)).join(", ")}) ${this.body.toString(e)}`}documentation(){return this.parameters.length?a.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(e=>"- "+e.documentation()).join("\n")}
    `:this.doc}references(e){return"rename"===e?[]:super.references()}}return s.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},s})(),u=(()=>{class s extends p{constructor(e,r,m){super("field",e),this.type=r,this.value=m}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(e){return"js"===e?a.$S`
      _${this.name}${this.value?" = "+this.value.toString(e):""};

      get ${this.name}() {
        return this._${this.name};
      }

      set ${this.name}(value) {
        this._${this.name} = value;
      }`:`var ${this.name}: ${this.type.toString(e)}${this.value?" = "+this.value.toString(e):""}`}}return s.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},s})(),b=(()=>{class s extends l{constructor(e,r=[],m,x){super("method",e,r,x),this.returnType=m}get jsName(){return this.name+this.parameters.map(e=>"_"+e.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(e=>e.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((e,r)=>`\${${r}:${e.name}}`).join(", ")})`}}documentation(){let e=this.doc||"";return this.parameters.length&&(e+="\n#### Parameters\n"+this.parameters.map(r=>"- "+r.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(e+="\n#### Returns\n`"+this.returnType.toString()+"`"),e}toString(e){return`${"js"!==e?"func "+this.name:this.jsName}(${this.parameters.map(r=>r.toString(e)).join(", ")})${"js"!==e?": "+this.returnType.toString(e):""} ${this.body.toString(e)}`}}return s.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},s})();class $ extends a.NB{constructor(t){super("class-completion"),this.name=t}toString(t){return this.name}resolve(t){return(0,f.Hk)(t,this.location,this.name,{extra:$.completions}),super.resolve(t)}}$.completions=[b,n,u].map(s=>s.completion);class S extends p{constructor(t,e,r){super(t,e),this.type=r}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(t){return`${this.name}${this.type?": "+this.type.toString(t):""}`}}class y extends S{constructor(t,e){super("parameter",t,e)}references(t){return"rename"===t&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(t){return"js"===t?this.name:super.toString(t)}}class j extends S{constructor(t,e,r){super("variable",t,e),this.value=r}documentation(){var t;return`\`var ${this.name}: ${null===(t=this.type)||void 0===t?void 0:t.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(t){return"js"===t?`let ${this.name} = ${this.value.toString(t)}`:`var ${this.name}${this.type?": "+this.type.toString(t):""} = ${this.value.toString(t)}`}resolve(t){const e=super.resolve(t);return e.type||(e.type=e.value.getType()),e}}},77737:(i,g,o)=>{o.d(g,{_C:()=>b,gO:()=>y.gO,wT:()=>f.wT,dm:()=>f.dm,rF:()=>d.rF,eB:()=>f.eB,on:()=>y.on,v_:()=>f.v_,R9:()=>a.R9,WJ:()=>y.WJ,K9:()=>y.K9,gN:()=>f.gN,lX:()=>l,rX:()=>y.rX,t$:()=>p,n$:()=>f.n$,o6:()=>u,d2:()=>f.d2,ZJ:()=>$,Ly:()=>a.Ly,MX:()=>d.MX,jR:()=>n,e6:()=>a.e6,_8:()=>S._,sj:()=>y.sj,_w:()=>f._w,sW:()=>c,UX:()=>y.UX});var f=o(25447),a=o(84260),v=o(667),d=o(27426);class _ extends v.NB{constructor(s){super(`expr:${s}`)}getType(){throw new Error(`${this.constructor.name}.getType not implemented`)}}class p extends _{constructor(s){super("literal"),this.representation=s}toString(){return this.representation}getType(){switch(this.representation.charAt(0)){case'"':return new d.MX("string");case"t":case"f":return new d.MX("boolean");default:return new d.MX("int")}}}class c extends _{constructor(s){super("variable"),this.name=s}toString(){return this.name}definition(){return this._variable}resolve(s){var t;return(0,a.Hk)(s,this.location,this.name)||this._variable||(this._variable||(this._variable=s.lookup(this.name,f.YN)||(0,a.Hj)(s,this.location,`variable ${this.name} not found`)),null===(t=this._variable)||void 0===t||t._references.push(this)),this}getType(){var s,t;return null!==(t=null===(s=this._variable)||void 0===s?void 0:s.type)&&void 0!==t?t:d.NI}}class l extends _{constructor(s,t){super("functionCall"),this.name=s,this.args=t}toString(s){return`${this.name}(${this.args.map(t=>t.toString(s)).join(", ")})`}definition(s){var t;return"rename"===s?null===(t=this._constructor)||void 0===t?void 0:t._thisClass:this._constructor}resolve(s){if(this.args=this.args.map(t=>t.resolve(s)),!this._constructor){const t=s.lookup(this.name,f.wT);if(t){const e=this.args.map(m=>m.getType()),r=t.lookup("init",f.v_,e);r?(this._constructor=r,r._references.push(this),t._references.push(this)):(0,a.Hj)(s,this.location,`constructor ${this.name}(${e.join(", ")}) not found`)}else(0,a.Hj)(s,this.location,`class or function ${this.name} not found`)}return this}getType(){var s,t,e;return null!==(e=null===(t=null===(s=this._constructor)||void 0===s?void 0:s._thisClass)||void 0===t?void 0:t.asType())&&void 0!==e?e:d.NI}}class n extends _{constructor(s,t){super("propertyAccess"),this.object=s,this.property=t}toString(s){return`${this.object.toString(s)}.${this.property}`}definition(){return this._field}resolve(s){var t;this.object=this.object.resolve(s);const e=this.object.getType();return(0,a.Hk)(s,this.location,this.property,{lookup:e})||this._field||(this._field||(this._field=e.lookup(this.property,f.gN)||(0,a.Hj)(s,this.location,`field ${this.property} not found on ${e}`)),null===(t=this._field)||void 0===t||t._references.push(this)),this}getType(){var s;return(null===(s=this._field)||void 0===s?void 0:s.type)||d.NI}}class u extends _{constructor(s,t,e){super("methodCall"),this.object=s,this.method=t,this.args=e}definition(){return this._method}toString(s){const t=this._method&&"js"===s?this._method.jsName:this.method;return`${this.object.toString(s)}.${t}(${this.args.map(e=>e.toString(s)).join(", ")})`}resolve(s){var t;if(this.object=this.object.resolve(s),this.args=this.args.map(e=>e.resolve(s)),!this._method){const e=this.object.getType(),r=this.args.map(m=>m.getType());this._method||(this._method=e.lookup(this.method,f.n$,r)||(0,a.Hj)(s,this.location,`method ${this.method} not found on ${e}`)),null===(t=this._method)||void 0===t||t._references.push(this)}return this}}class b extends _{constructor(s,t,e){super("binary"),this.lhs=s,this.operator=t,this.rhs=e}toString(s){return`${this.lhs.toString(s)} ${this.operator} ${this.rhs.toString(s)}`}getType(){switch(this.operator){case"+":const s=this.lhs.getType(),t=this.rhs.getType();return"type:primitive"===s.kind&&"string"===s.name?s:"type:primitive"===t.kind&&"string"===t.name?t:new d.MX("int");case"&&":case"||":case"==":case"!=":case"<":case"<=":case">":case">=":return new d.MX("boolean");case"-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"&":case"|":case"^":return new d.MX("int");default:return d.NI}}}class $ extends _{constructor(s){super("parenthesized"),this.expression=s}toString(s){return`(${this.expression.toString(s)})`}getType(){return this.expression.getType()}}var S=o(9290),y=o(43418)},84260:(i,g,o)=>{o.d(g,{Hj:()=>p,Hk:()=>c,Ly:()=>a,R9:()=>d,e6:()=>v});var f=o(25447);class a{constructor(n,u){this.line=n,this.column=u}}class v{constructor(n,u){this.start=n,this.end=u}includes(n){return this.start.line<=n.line&&this.start.column<=n.column&&n.line<=this.end.line&&n.column<=this.end.column}}class d{constructor(n,u,b,$="error",S){if(this.path=n,this.location=u,this.message=b,this.severity=$,this.expected=S,!u)throw new Error("location is required")}}function p(l,n,u,b="error",$){const S=l.lookup(f.eB.enclosing,f.eB),y=new d(void 0,n,u,b,$);S?S.report(y):function _(l){const{path:n,location:{start:{line:u,column:b}},message:$,severity:S}=l;switch(S){case"error":console.error(`${n}:${u}:${b}: error: ${$}`);break;case"warning":console.warn(`${n}:${u}:${b}: warning: ${$}`);break;case"note":console.info(`${n}:${u}:${b}: note: ${$}`)}if(l.expected)for(let y of l.expected)console.log(`- [${y.kind}] ${y.label} ${y.signature||""} - ${y.description||""}`)}(y)}function c(l,n,u,{lookup:b,kind:$,extra:S}={}){if(!u.includes("\xa7"))return!1;const y=u.slice(0,-1),j=(b||l).list().filter(t=>"name"in t).filter(t=>!$||t.kind===$).map(t=>"asCompletion"in t?t.asCompletion():{kind:t.kind,label:t.name});return p(l,n,"input '\xa7' expecting","error",(S?[...j,...S]:j).filter(t=>t.label.startsWith(y))),!0}},667:(i,g,o)=>{o.d(g,{$S:()=>_,NB:()=>a});class a{constructor(c){this.kind=c}definition(c){}documentation(){var c;return null===(c=this.definition())||void 0===c?void 0:c.documentation()}references(c){var l;return(null===(l=this.definition(c))||void 0===l?void 0:l.references(c))||[]}resolve(c){return v(this,l=>l.resolve(c)),this}findByPosition(c){var l;let n;return v(this,u=>(n||(n=u.findByPosition(c)),u)),n?[this,...n]:null!==(l=this.location)&&void 0!==l&&l.includes(c)?[this]:void 0}toString(c){return this.kind}}function v(p,c){for(const[l,n]of Object.entries(p))if("location"!==l&&"kind"!==l&&!l.startsWith("_")&&n)if(Array.isArray(n))for(let u=0;u<n.length;u++)n[u]instanceof a&&(n[u]=c(n[u]));else n instanceof a&&(p[l]=c(n))}function _(p,...c){if(!p[0].startsWith("\n"))throw new Error("must start with a newline");const l=p[0].match(/^\n([ \t]*)/)[1];return p.map((n,u)=>{var b;0===u&&(n=n.substring(1+l.length));const S=(n=n.replace(new RegExp("^"+l,"gm"),"")).substring(n.lastIndexOf("\n")+1).match(/^\s*/)[0];return n+(null!==(b=c[u])&&void 0!==b?b:"").toString().replace(/\n/g,`\n${S}`)}).join("")}}},w={};function h(i){var g=w[i];if(void 0!==g)return g.exports;var o=w[i]={exports:{}};return k[i].call(o.exports,o,o.exports,h),o.exports}h.m=k,h.x=()=>{var i=h.O(void 0,[2],()=>h(56374));return h.O(i)},i=[],h.O=(g,o,f,a)=>{if(!o){var d=1/0;for(v=0;v<i.length;v++){for(var[o,f,a]=i[v],_=!0,p=0;p<o.length;p++)(!1&a||d>=a)&&Object.keys(h.O).every($=>h.O[$](o[p]))?o.splice(p--,1):(_=!1,a<d&&(d=a));if(_){i.splice(v--,1);var c=f();void 0!==c&&(g=c)}}return g}a=a||0;for(var v=i.length;v>0&&i[v-1][2]>a;v--)i[v]=i[v-1];i[v]=[o,f,a]},h.d=(i,g)=>{for(var o in g)h.o(g,o)&&!h.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:g[o]})},h.f={},h.e=i=>Promise.all(Object.keys(h.f).reduce((g,o)=>(h.f[o](i,g),g),[])),h.u=i=>i+".005de2951894446d.js",h.miniCssF=i=>{},h.o=(i,g)=>Object.prototype.hasOwnProperty.call(i,g),(()=>{var i;h.tt=()=>(void 0===i&&(i={createScriptURL:g=>g},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(i=trustedTypes.createPolicy("angular#bundler",i))),i)})(),h.tu=i=>h.tt().createScriptURL(i),h.p="",(()=>{var i={374:1};h.f.i=(a,v)=>{i[a]||importScripts(h.tu(h.p+h.u(a)))};var o=self.webpackChunkweb=self.webpackChunkweb||[],f=o.push.bind(o);o.push=a=>{var[v,d,_]=a;for(var p in d)h.o(d,p)&&(h.m[p]=d[p]);for(_&&_(h);v.length;)i[v.pop()]=1;f(a)}})(),(()=>{var i=h.x;h.x=()=>h.e(2).then(i)})(),h.x()})();