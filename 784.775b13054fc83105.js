(()=>{"use strict";var S,We={39784:(S,s,g)=>{var r=g(67136),v=g(59682),w=g(35618),c=g(44017),m=g(74399),h=g(83981);const i=Object.values(v.SemanticTokenTypes),a=Object.values(v.SemanticTokenModifiers);class u{constructor(e,o){this.documentService=o,e.connection.languages.semanticTokens.on(n=>this.provideSemanticTokens(n))}provideSemanticTokens(e){const o=this.documentService.getAST(e.textDocument.uri);if(!o)return{data:[]};const n=new _;for(const l of(0,w.NR)(o))switch(l.kind){case"class":n.addNode(l.location,v.SemanticTokenTypes.class);break;case"field":case"expr:propertyAccess":n.addNode(l.location,v.SemanticTokenTypes.property);break;case"method":case"expr:methodCall":case"expr:functionCall":n.addNode(l.location,l instanceof w.lX&&l._constructor?v.SemanticTokenTypes.class:v.SemanticTokenTypes.method);break;case"parameter":n.addNode(l.location,v.SemanticTokenTypes.parameter);break;case"variable":n.addNode(l.location,v.SemanticTokenTypes.variable);break;case"expr:variable":n.addNode(l.location,l instanceof w.sW&&l._variable instanceof w.d2?v.SemanticTokenTypes.parameter:v.SemanticTokenTypes.variable)}return{data:n.data}}}class _{constructor(){this.data=[],this.prevLine=0,this.prevChar=0}addNode(e,o,n=[]){const l=i.indexOf(o),f=n.map(x=>a.indexOf(x)).reduce((x,A)=>x|1<<A,0),R=e.start.line-1,j=e.start.column-1;this.data.push(R-this.prevLine,j-(R===this.prevLine?this.prevChar:0),e.end.column-e.start.column,l,f),this.prevLine=R,this.prevChar=j}}class k{constructor(e){this.connection=e,e.onInitialize(o=>{var n,l,f,R;const W=o.capabilities;this.hasConfigurationCapability=!(null===(n=W.workspace)||void 0===n||!n.configuration),this.hasWorkspaceFolderCapability=!(null===(l=W.workspace)||void 0===l||!l.workspaceFolders),this.hasDiagnosticRelatedInformationCapability=!(null===(R=null===(f=W.textDocument)||void 0===f?void 0:f.publishDiagnostics)||void 0===R||!R.relatedInformation);const j={capabilities:{textDocumentSync:r.TextDocumentSyncKind.Incremental,completionProvider:{triggerCharacters:["."]},renameProvider:{prepareProvider:!0},referencesProvider:!0,definitionProvider:!0,typeDefinitionProvider:!0,hoverProvider:!0,documentHighlightProvider:!0,semanticTokensProvider:{legend:{tokenTypes:i,tokenModifiers:a},full:!0}}};return this.hasWorkspaceFolderCapability&&(j.capabilities.workspace={workspaceFolders:{supported:!0}}),j}),e.onInitialized(()=>{this.hasConfigurationCapability&&e.client.register(r.DidChangeConfigurationNotification.type,void 0)})}}class F{constructor(e,o,n,l){this._uri=e,this._languageId=o,this._version=n,this._content=l,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const o=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(o,n)}return this._content}update(e,o){for(let n of e)if(F.isIncremental(n)){const l=K(n.range),f=this.offsetAt(l.start),R=this.offsetAt(l.end);this._content=this._content.substring(0,f)+n.text+this._content.substring(R,this._content.length);const W=Math.max(l.start.line,0),j=Math.max(l.end.line,0);let O=this._lineOffsets;const x=I(n.text,!1,f);if(j-W===x.length)for(let $=0,Y=x.length;$<Y;$++)O[$+W+1]=x[$];else x.length<1e4?O.splice(W+1,j-W,...x):this._lineOffsets=O=O.slice(0,W+1).concat(x,O.slice(j+1));const A=n.text.length-(R-f);if(0!==A)for(let $=W+1+x.length,Y=O.length;$<Y;$++)O[$]=O[$]+A}else{if(!F.isFull(n))throw new Error("Unknown change event received");this._content=n.text,this._lineOffsets=void 0}this._version=o}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=I(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let o=this.getLineOffsets(),n=0,l=o.length;if(0===l)return{line:0,character:e};for(;n<l;){let R=Math.floor((n+l)/2);o[R]>e?l=R:n=R+1}let f=n-1;return{line:f,character:e-o[f]}}offsetAt(e){let o=this.getLineOffsets();if(e.line>=o.length)return this._content.length;if(e.line<0)return 0;let n=o[e.line];return Math.max(Math.min(n+e.character,e.line+1<o.length?o[e.line+1]:this._content.length),n)}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)}static isFull(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength}}var P,t;function N(t,e){if(t.length<=1)return t;const o=t.length/2|0,n=t.slice(0,o),l=t.slice(o);N(n,e),N(l,e);let f=0,R=0,W=0;for(;f<n.length&&R<l.length;)e(n[f],l[R])<=0?t[W++]=n[f++]:t[W++]=l[R++];for(;f<n.length;)t[W++]=n[f++];for(;R<l.length;)t[W++]=l[R++];return t}function I(t,e,o=0){const n=e?[o]:[];for(let l=0;l<t.length;l++){let f=t.charCodeAt(l);(13===f||10===f)&&(13===f&&l+1<t.length&&10===t.charCodeAt(l+1)&&l++,n.push(o+l+1))}return n}function K(t){const e=t.start,o=t.end;return e.line>o.line||e.line===o.line&&e.character>o.character?{start:o,end:e}:t}function z(t){const e=K(t.range);return e!==t.range?{newText:t.newText,range:e}:t}(t=P||(P={})).create=function e(l,f,R,W){return new F(l,f,R,W)},t.update=function o(l,f,R){if(l instanceof F)return l.update(f,R),l;throw new Error("TextDocument.update: document must be created by TextDocument.create")},t.applyEdits=function n(l,f){let R=l.getText(),W=N(f.map(z),(x,A)=>{let $=x.range.start.line-A.range.start.line;return 0===$?x.range.start.character-A.range.start.character:$}),j=0;const O=[];for(const x of W){let A=l.offsetAt(x.range.start);if(A<j)throw new Error("Overlapping edit");A>j&&O.push(R.substring(j,A)),x.newText.length&&O.push(x.newText),j=l.offsetAt(x.range.end)}return O.push(R.substr(j)),O.join("")};class L{constructor(e){this.connectionService=e,this.documents=new r.TextDocuments(P),this.astCache=new Map,this.documents.listen(this.connectionService.connection),this.documents.onDidChangeContent(o=>{this.astCache.has(o.document.uri)&&this.astCache.delete(o.document.uri)})}getAST(e){const o="string"==typeof e?e:e.uri,n=this.astCache.get(o);if(n)return n;const l="string"==typeof e?this.documents.get(o):e;if(!l)return;const f=(0,c.V3)(l.getText(),o).resolve(new h._([]));return f.link(),f}}function C(t){switch(t){case"keyword":return r.CompletionItemKind.Keyword;case"operator":return r.CompletionItemKind.Operator;case"class":return r.CompletionItemKind.Class;case"field":return r.CompletionItemKind.Field;case"method":return r.CompletionItemKind.Method;case"variable":case"parameter":return r.CompletionItemKind.Variable;default:return r.CompletionItemKind.Text}}class D{constructor(e,o){this.connectionService=e,this.documentService=o,this.connectionService.connection.onCompletion(n=>this.provideCompletionItems(n))}provideCompletionItems(e){const n=this.documentService.documents.get(e.textDocument.uri);if(!n)return[];const l=n.getText({start:{line:0,character:0},end:e.position}),f=n.getText({start:e.position,end:{line:n.lineCount,character:0}}),W=(0,c.V3)(`${l}\xa7${f}`).resolve(new h._([])).diagnostics.find(j=>j.expected);return W&&W.expected?W.expected.map(j=>({kind:C(j.kind),label:j.label,labelDetails:{detail:j.signature,description:j.description},insertText:j.snippet,insertTextFormat:j.snippet?r.InsertTextFormat.Snippet:void 0})):[]}}function U(t){return{start:{line:t.start.line-1,character:t.start.column-1},end:{line:t.end.line-1,character:t.end.column-1}}}function Re({severity:t,location:e,message:o}){return{severity:"error"===t?r.DiagnosticSeverity.Error:r.DiagnosticSeverity.Warning,range:U(e),message:o,source:"dyvil"}}"function"==typeof SuppressedError&&SuppressedError;class ae{constructor(e,o){this.connectionService=e,this.documentService=o,this.connectionService.connection.onDidChangeConfiguration(()=>{this.documentService.documents.all().forEach(n=>this.validateTextDocument(n))}),this.documentService.documents.onDidChangeContent(n=>{this.validateTextDocument(n.document)})}validateTextDocument(e){return function he(t,e,o,n){return new(o||(o=Promise))(function(f,R){function W(x){try{O(n.next(x))}catch(A){R(A)}}function j(x){try{O(n.throw(x))}catch(A){R(A)}}function O(x){x.done?f(x.value):function l(f){return f instanceof o?f:new o(function(R){R(f)})}(x.value).then(W,j)}O((n=n.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){const o=this.documentService.getAST(e);if(!o)return;const n=o.diagnostics.map(Re);yield this.connectionService.connection.sendDiagnostics({uri:e.uri,diagnostics:n})})}}class Fe{constructor(e,o){this.connectionService=e,this.documentService=o,this.connectionService.connection.onPrepareRename(n=>this.prepareRename(n)),this.connectionService.connection.onRenameRequest(n=>this.rename(n)),this.connectionService.connection.onTypeDefinition(n=>this.typeDefinition(n)),this.connectionService.connection.onReferences(n=>this.references(n)),this.connectionService.connection.onDefinition(n=>this.definition(n)),this.connectionService.connection.onHover(n=>this.hover(n)),this.connectionService.connection.onDocumentHighlight(n=>this.highlight(n))}prepareRename(e){const o=this.findNode(e);if(!o)return;const n=o.references("rename");return n&&n.length?U(o.location):void 0}rename(e){var o;const n=null===(o=this.findNode(e))||void 0===o?void 0:o.references("rename");if(n&&n.length)return{changes:{[e.textDocument.uri]:n.map(l=>({range:U(l.location),newText:e.newName}))}}}references(e){var o;const n=null===(o=this.findNode(e))||void 0===o?void 0:o.references("definition");if(n&&n.length)return!e.context.includeDeclaration&&n.length&&n.shift(),n.map(l=>({uri:e.textDocument.uri,range:U(l.location)}))}definition(e){var o;const n=null===(o=this.findNode(e))||void 0===o?void 0:o.references("definition");if(n&&n.length)return{uri:e.textDocument.uri,range:U(n[0].location)}}typeDefinition(e){const o=this.findNode(e);if(!o)return;const n="type"in o?o.type:"getType"in o&&"function"==typeof o.getType?o.getType():void 0;return n instanceof w.NB&&n.location?{uri:e.textDocument.uri,range:U(n.location)}:void 0}hover(e){var o;const n=null===(o=this.findNode(e))||void 0===o?void 0:o.documentation();return n?{contents:{kind:"markdown",value:n}}:null}highlight(e){var o;const n=null===(o=this.findNode(e))||void 0===o?void 0:o.references();if(n&&n.length)return n.map(l=>({range:U(l.location)}))}findNode(e){const o=e.textDocument.uri,n=new m.Ly(e.position.line+1,e.position.character),l=this.documentService.getAST(o);if(!l)return;const f=l.findByPosition(n);return f?f[f.length-1]:void 0}}var ee=g(37590);console.log("Running Dyvil Language Server in Web Worker");const le=new ee.BrowserMessageReader(self),te=new ee.BrowserMessageWriter(self),p=(0,ee.createConnection)(le,te);(function ue(t){const e=new k(t),o=new L(e);new D(e,o),new ae(e,o),new Fe(e,o),new u(e,o)})(p),p.listen()},127:(S,s,g)=>{g.d(s,{YN:()=>I,_w:()=>z,d2:()=>K,dm:()=>N,eB:()=>i,gN:()=>F,n$:()=>P,v_:()=>k,wT:()=>u});var r=g(48709),v=g(74399),w=g(42323),c=g(83981),m=g(46187),h=g(38426);class i extends w.NB{constructor(C,D=[]){super("unit"),this.path=C,this.classes=D,this.diagnostics=[]}report(C){this.diagnostics.push(C)}resolve(C){const D={[i.enclosing]:this};for(const T of this.classes)D[T.name]=T;return super.resolve(new c._(D,C))}toString(C){return this.classes.map(D=>D.toString(C)).join("\n\n")}}i.enclosing=Symbol("enclosing compilation unit"),i.parser="file";class a extends w.NB{constructor(C,D){super(C),this.name=D,this._references=[]}documentation(){return this.doc}references(){return[this,...this._references]}}class u extends a{constructor(C="<anonymous>",D=[],T=[],M=[]){super("class",C),this.fields=D,this.constructors=T,this.methods=M}asType(){const C=new h.rF(this.name);return C._class=this,C.location=this.location,C}asCompletion(){return{label:this.name,kind:"class"}}toString(C){return w.$S`
    class ${this.name} {
      ${this.fields.map(D=>D.toString(C)).join("\n")}

      ${this.constructors.map(D=>D.toString(C)).join("\n\n")}

      ${this.methods.map(D=>D.toString(C)).join("\n\n")}
    }`}lookup(C,D,...T){for(const M of this.fields)if(M.name===C&&M instanceof D)return M;for(const M of this.methods)if(M.name===C&&M instanceof D&&M.overloads(T[0]))return M;for(const M of this.constructors)if(M instanceof D&&M.overloads(T[0]))return M}list(){return[...this.fields,...this.methods]}resolve(C){const D=new c._({[u.enclosing]:this},C);super.resolve(D);for(const T of this.fields)this.fields.some(M=>M!==T&&M.name===T.name)&&(0,v.Hj)(C,T.location,`duplicate field ${T.name}`);for(const T of this.methods)this.methods.some(M=>M!==T&&M.jsName===T.jsName)&&(0,v.Hj)(C,T.location,`duplicate method ${T.name} with mangled name ${T.jsName}`);return this}}u.enclosing=Symbol("enclosing class"),u.parser="class";class _ extends a{constructor(C,D,T,M){super(C,D),this.parameters=T,this.body=M}resolve(C){this._thisClass||(this._thisClass=C.lookup(u.enclosing,u)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new K("this",this._thisClass.asType()),this._thisParameter.location=this.location);const D=new c._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,C);return super.resolve(D)}overloads(C){return C.length===this.parameters.length&&this.parameters.every((D,T)=>(0,h.BM)(D.type,C[T]))}}let k=(()=>{class L extends _{constructor(D=[],T=new m.gO){super("constructor","init",D,T)}toString(D){return`${"js"===D?"constructor":"init"}(${this.parameters.map(T=>T.toString(D)).join(", ")}) ${this.body.toString(D)}`}documentation(){return this.parameters.length?w.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(D=>"- "+D.documentation()).join("\n")}
    `:this.doc}references(D){return"rename"===D?[]:super.references()}}return L.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},L.parser="ctor",L})(),F=(()=>{class L extends a{constructor(D="<unknown>",T=h.NI,M){super("field",D),this.type=T,this.value=M}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(D){return"js"===D?w.$S`
      _${this.name}${this.value?" = "+this.value.toString(D):""};

      get ${this.name}() {
        return this._${this.name};
      }

      set ${this.name}(value) {
        this._${this.name} = value;
      }`:`var ${this.name}: ${this.type.toString(D)}${this.value?" = "+this.value.toString(D):""}`}}return L.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},L.parser="field",L})(),P=(()=>{class L extends _{constructor(D="<unknown>",T=[],M=h.NI,B=new m.gO){super("method",D,T,B),this.returnType=M}get jsName(){return this.name+this.parameters.map(D=>"_"+D.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(D=>D.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((D,T)=>`\${${T}:${D.name}}`).join(", ")})`}}documentation(){let D=this.doc||"";return this.parameters.length&&(D+="\n#### Parameters\n"+this.parameters.map(T=>"- "+T.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(D+="\n#### Returns\n`"+this.returnType.toString()+"`"),D}toString(D){return`${"js"!==D?"func "+this.name:this.jsName}(${this.parameters.map(T=>T.toString(D)).join(", ")})${"js"!==D?": "+this.returnType.toString(D):""} ${this.body.toString(D)}`}}return L.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},L.parser="method",L})();class N extends w.NB{constructor(C){super("class-completion"),this.name=C}toString(C){return this.name}resolve(C){return(0,v.Hk)(C,this.location,this.name,{extra:N.completions}),super.resolve(C)}}N.completions=[P,k,F].map(L=>L.completion);class I extends a{constructor(C,D,T){super(C,D),this.type=T}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(C){return`${this.name}${this.type?": "+this.type.toString(C):""}`}}let K=(()=>{class L extends I{constructor(D="<unknown>",T=h.NI){super("parameter",D,T),this.type=T}references(D){return"rename"===D&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(D){return"js"===D?this.name:super.toString(D)}}return L.parser="parameter",L})(),z=(()=>{class L extends I{constructor(D="<unknown>",T,M=r.iY){super("variable",D,T),this.value=M}documentation(){var D;return`\`var ${this.name}: ${null===(D=this.type)||void 0===D?void 0:D.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(D){return"js"===D?`let ${this.name} = ${this.value.toString(D)}`:`var ${this.name}${this.type?": "+this.type.toString(D):""} = ${this.value.toString(D)}`}resolve(D){const T=super.resolve(D);return T.type||(T.type=T.value.getType()),T}}return L.parser="variable",L})()},35618:(S,s,g)=>{g.d(s,{K9:()=>c.K9,MX:()=>m.MX,NB:()=>w.NB,NR:()=>w.NR,UX:()=>c.UX,WJ:()=>c.WJ,ZJ:()=>v.ZJ,_C:()=>v._C,_w:()=>r._w,d2:()=>r.d2,dm:()=>r.dm,eB:()=>r.eB,gN:()=>r.gN,gO:()=>c.gO,jR:()=>v.jR,lX:()=>v.lX,n$:()=>r.n$,o6:()=>v.o6,on:()=>c.on,rF:()=>m.rF,rX:()=>c.rX,sW:()=>v.sW,sj:()=>c.sj,t$:()=>v.t$,v_:()=>r.v_,wT:()=>r.wT});var r=g(127),v=g(48709),w=g(42323),c=g(46187),m=g(38426)},42323:(S,s,g)=>{g.d(s,{$S:()=>h,NB:()=>v,NR:()=>c});class v{constructor(a){this.kind=a}definition(a){}documentation(){var a;return null===(a=this.definition())||void 0===a?void 0:a.documentation()}references(a){var u;return(null===(u=this.definition(a))||void 0===u?void 0:u.references(a))||[]}resolve(a){return function w(i,a){for(const[u,_]of Object.entries(i))if("location"!==u&&"kind"!==u&&!u.startsWith("_")&&_)if(Array.isArray(_))for(let k=0;k<_.length;k++)_[k]instanceof v&&(_[k]=a(_[k]));else _ instanceof v&&(i[u]=a(_))}(this,u=>u.resolve(a)),this}link(){for(const[a,u]of Object.entries(this))a.startsWith("_")&&"_references"in u&&u._references.push(this);for(const a of m(this))a.link()}findByPosition(a){var u;if(!this.range||this.range.includes(a)){for(const _ of m(this)){const k=_.findByPosition(a);if(k)return[this,...k]}if(null!==(u=this.location)&&void 0!==u&&u.includes(a))return[this]}}toString(a){return`<${this.kind}>`}}function*c(i){yield i;for(const a of m(i))yield*c(a)}function*m(i){for(const[a,u]of Object.entries(i))if("location"!==a&&"kind"!==a&&!a.startsWith("_")&&u)if(Array.isArray(u))for(let _=0;_<u.length;_++)u[_]instanceof v&&(yield u[_]);else u instanceof v&&(yield u)}function h(i,...a){if(!i[0].startsWith("\n"))throw new Error("must start with a newline");const u=i[0].match(/^\n([ \t]*)/)[1];return i.map((_,k)=>{var F;0===k&&(_=_.substring(1+u.length));const N=(_=_.replace(new RegExp("^"+u,"gm"),"")).substring(_.lastIndexOf("\n")+1).match(/^\s*/)[0];return _+(null!==(F=a[k])&&void 0!==F?F:"").toString().replace(/\n/g,`\n${N}`)}).join("")}},74399:(S,s,g)=>{g.d(s,{Hj:()=>h,Hk:()=>i,Ly:()=>v,R9:()=>c,e6:()=>w});var r=g(35618);class v{constructor(u,_){this.line=u,this.column=_}}class w{constructor(u,_){this.start=u,this.end=_}includes(u){return this.start.line<=u.line&&u.line<=this.end.line&&(this.start.line<u.line||this.start.column<=u.column)&&(u.line<this.end.line||u.column<=this.end.column)}}class c{constructor(u,_,k,F="error",P){if(this.path=u,this.location=_,this.message=k,this.severity=F,this.expected=P,!_)throw new Error("location is required")}}function h(a,u,_,k="error",F){const P=a.lookup(r.eB.enclosing,r.eB),N=new c(void 0,u,_,k,F);P?P.report(N):function m(a){const{path:u,location:{start:{line:_,column:k}},message:F,severity:P}=a;switch(P){case"error":console.error(`${u}:${_}:${k}: error: ${F}`);break;case"warning":console.warn(`${u}:${_}:${k}: warning: ${F}`);break;case"note":console.info(`${u}:${_}:${k}: note: ${F}`)}if(a.expected)for(let N of a.expected)console.log(`- [${N.kind}] ${N.label} ${N.signature||""} - ${N.description||""}`)}(N)}function i(a,u,_,{lookup:k,kind:F,extra:P}={}){if(!_.includes("\xa7"))return!1;const N=_.slice(0,-1),I=(k||a).list().filter(z=>"name"in z).filter(z=>!F||z.kind===F).map(z=>"asCompletion"in z?z.asCompletion():{kind:z.kind,label:z.name});return h(a,u,"input '\xa7' expecting","error",(P?[...I,...P]:I).filter(z=>z.label.startsWith(N))),!0}},37590:(S,s,g)=>{S.exports=g(67136)},67136:function(S,s,g){var r=this&&this.__createBinding||(Object.create?function(i,a,u,_){void 0===_&&(_=u);var k=Object.getOwnPropertyDescriptor(a,u);(!k||("get"in k?!a.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(i,_,k)}:function(i,a,u,_){void 0===_&&(_=u),i[_]=a[u]}),v=this&&this.__exportStar||function(i,a){for(var u in i)"default"!==u&&!Object.prototype.hasOwnProperty.call(a,u)&&r(a,i,u)};Object.defineProperty(s,"__esModule",{value:!0}),s.createConnection=void 0;const w=g(54945);v(g(65388),s),v(g(54945),s);let c=!1;const m={initialize:i=>{},get shutdownReceived(){return c},set shutdownReceived(i){c=i},exit:i=>{}};s.createConnection=function h(i,a,u,_){let k,F,P,N;return void 0!==i&&"features"===i.__brand&&(k=i,i=a,a=u,u=_),w.ConnectionStrategy.is(i)||w.ConnectionOptions.is(i)?N=i:(F=i,P=a,N=u),(0,w.createConnection)(K=>(0,w.createProtocolConnection)(F,P,K,N),m,k)}},54945:function(S,s,g){var r=this&&this.__createBinding||(Object.create?function(i,a,u,_){void 0===_&&(_=u);var k=Object.getOwnPropertyDescriptor(a,u);(!k||("get"in k?!a.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(i,_,k)}:function(i,a,u,_){void 0===_&&(_=u),i[_]=a[u]}),v=this&&this.__exportStar||function(i,a){for(var u in i)"default"!==u&&!Object.prototype.hasOwnProperty.call(a,u)&&r(a,i,u)};Object.defineProperty(s,"__esModule",{value:!0}),s.ProposedFeatures=s.NotebookDocuments=s.TextDocuments=s.SemanticTokensBuilder=void 0;const w=g(70912);Object.defineProperty(s,"SemanticTokensBuilder",{enumerable:!0,get:function(){return w.SemanticTokensBuilder}}),v(g(32561),s);const c=g(78928);Object.defineProperty(s,"TextDocuments",{enumerable:!0,get:function(){return c.TextDocuments}});const m=g(55847);Object.defineProperty(s,"NotebookDocuments",{enumerable:!0,get:function(){return m.NotebookDocuments}}),v(g(93386),s),(s.ProposedFeatures||(s.ProposedFeatures={})).all={__brand:"features"}},41172:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CallHierarchyFeature=void 0;const r=g(32561);s.CallHierarchyFeature=w=>class extends w{get callHierarchy(){return{onPrepare:c=>this.connection.onRequest(r.CallHierarchyPrepareRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m),void 0)),onIncomingCalls:c=>{const m=r.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(m,(h,i)=>c(h,i,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(m,h)))},onOutgoingCalls:c=>{const m=r.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(m,(h,i)=>c(h,i,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(m,h)))}}}}},99811:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ConfigurationFeature=void 0;const r=g(32561),v=g(63615);s.ConfigurationFeature=c=>class extends c{getConfiguration(m){return m?v.string(m)?this._getConfiguration({section:m}):this._getConfiguration(m):this._getConfiguration({})}_getConfiguration(m){let h={items:Array.isArray(m)?m:[m]};return this.connection.sendRequest(r.ConfigurationRequest.type,h).then(i=>Array.isArray(i)?Array.isArray(m)?i:i[0]:Array.isArray(m)?[]:null)}}},60608:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DiagnosticFeature=void 0;const r=g(32561);s.DiagnosticFeature=w=>class extends w{get diagnostics(){return{refresh:()=>this.connection.sendRequest(r.DiagnosticRefreshRequest.type),on:c=>this.connection.onRequest(r.DocumentDiagnosticRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m),this.attachPartialResultProgress(r.DocumentDiagnosticRequest.partialResult,m))),onWorkspace:c=>this.connection.onRequest(r.WorkspaceDiagnosticRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m),this.attachPartialResultProgress(r.WorkspaceDiagnosticRequest.partialResult,m)))}}}},94905:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FileOperationsFeature=void 0;const r=g(32561);s.FileOperationsFeature=w=>class extends w{onDidCreateFiles(c){return this.connection.onNotification(r.DidCreateFilesNotification.type,m=>{c(m)})}onDidRenameFiles(c){return this.connection.onNotification(r.DidRenameFilesNotification.type,m=>{c(m)})}onDidDeleteFiles(c){return this.connection.onNotification(r.DidDeleteFilesNotification.type,m=>{c(m)})}onWillCreateFiles(c){return this.connection.onRequest(r.WillCreateFilesRequest.type,(m,h)=>c(m,h))}onWillRenameFiles(c){return this.connection.onRequest(r.WillRenameFilesRequest.type,(m,h)=>c(m,h))}onWillDeleteFiles(c){return this.connection.onRequest(r.WillDeleteFilesRequest.type,(m,h)=>c(m,h))}}},96681:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InlayHintFeature=void 0;const r=g(32561);s.InlayHintFeature=w=>class extends w{get inlayHint(){return{refresh:()=>this.connection.sendRequest(r.InlayHintRefreshRequest.type),on:c=>this.connection.onRequest(r.InlayHintRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m))),resolve:c=>this.connection.onRequest(r.InlayHintResolveRequest.type,(m,h)=>c(m,h))}}}},33833:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InlineValueFeature=void 0;const r=g(32561);s.InlineValueFeature=w=>class extends w{get inlineValue(){return{refresh:()=>this.connection.sendRequest(r.InlineValueRefreshRequest.type),on:c=>this.connection.onRequest(r.InlineValueRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m)))}}}},26343:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkedEditingRangeFeature=void 0;const r=g(32561);s.LinkedEditingRangeFeature=w=>class extends w{onLinkedEditingRange(c){return this.connection.onRequest(r.LinkedEditingRangeRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m),void 0))}}},84589:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MonikerFeature=void 0;const r=g(32561);s.MonikerFeature=w=>class extends w{get moniker(){return{on:c=>{const m=r.MonikerRequest.type;return this.connection.onRequest(m,(h,i)=>c(h,i,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(m,h)))}}}}},55847:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NotebookDocuments=s.NotebookSyncFeature=void 0;const r=g(32561),v=g(78928);s.NotebookSyncFeature=h=>class extends h{get synchronization(){return{onDidOpenNotebookDocument:i=>this.connection.onNotification(r.DidOpenNotebookDocumentNotification.type,a=>{i(a)}),onDidChangeNotebookDocument:i=>this.connection.onNotification(r.DidChangeNotebookDocumentNotification.type,a=>{i(a)}),onDidSaveNotebookDocument:i=>this.connection.onNotification(r.DidSaveNotebookDocumentNotification.type,a=>{i(a)}),onDidCloseNotebookDocument:i=>this.connection.onNotification(r.DidCloseNotebookDocumentNotification.type,a=>{i(a)})}}};class c{onDidOpenTextDocument(i){return this.openHandler=i,r.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(i){this.openHandler&&this.openHandler(i)}onDidChangeTextDocument(i){return this.changeHandler=i,r.Disposable.create(()=>{this.changeHandler=i})}changeTextDocument(i){this.changeHandler&&this.changeHandler(i)}onDidCloseTextDocument(i){return this.closeHandler=i,r.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(i){this.closeHandler&&this.closeHandler(i)}onWillSaveTextDocument(){return c.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return c.NULL_DISPOSE}onDidSaveTextDocument(){return c.NULL_DISPOSE}}c.NULL_DISPOSE=Object.freeze({dispose:()=>{}}),s.NotebookDocuments=class m{constructor(i){this._cellTextDocuments=i instanceof v.TextDocuments?i:new v.TextDocuments(i),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new r.Emitter,this._onDidChange=new r.Emitter,this._onDidSave=new r.Emitter,this._onDidClose=new r.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(i){return this._cellTextDocuments.get(i.document)}getNotebookDocument(i){return this.notebookDocuments.get(i)}getNotebookCell(i){const a=this.notebookCellMap.get(i);return a&&a[0]}findNotebookDocumentForCell(i){const u=this.notebookCellMap.get("string"==typeof i?i:i.document);return u&&u[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(i){const a=new c,u=[];return u.push(this.cellTextDocuments.listen(a)),u.push(i.notebooks.synchronization.onDidOpenNotebookDocument(_=>{this.notebookDocuments.set(_.notebookDocument.uri,_.notebookDocument);for(const k of _.cellTextDocuments)a.openTextDocument({textDocument:k});this.updateCellMap(_.notebookDocument),this._onDidOpen.fire(_.notebookDocument)})),u.push(i.notebooks.synchronization.onDidChangeNotebookDocument(_=>{const k=this.notebookDocuments.get(_.notebookDocument.uri);if(void 0===k)return;k.version=_.notebookDocument.version;const F=k.metadata;let P=!1;const N=_.change;void 0!==N.metadata&&(P=!0,k.metadata=N.metadata);const I=[],K=[],z=[],L=[];if(void 0!==N.cells){const B=N.cells;if(void 0!==B.structure){const X=B.structure.array;if(k.cells.splice(X.start,X.deleteCount,...void 0!==X.cells?X.cells:[]),void 0!==B.structure.didOpen)for(const G of B.structure.didOpen)a.openTextDocument({textDocument:G}),I.push(G.uri);if(B.structure.didClose)for(const G of B.structure.didClose)a.closeTextDocument({textDocument:G}),K.push(G.uri)}if(void 0!==B.data){const X=new Map(B.data.map(G=>[G.document,G]));for(let G=0;G<=k.cells.length;G++){const Q=X.get(k.cells[G].document);if(void 0!==Q){const de=k.cells.splice(G,1,Q);if(z.push({old:de[0],new:Q}),X.delete(Q.document),0===X.size)break}}}if(void 0!==B.textContent)for(const X of B.textContent)a.changeTextDocument({textDocument:X.document,contentChanges:X.changes}),L.push(X.document.uri)}this.updateCellMap(k);const C={notebookDocument:k};P&&(C.metadata={old:F,new:k.metadata});const D=[];for(const B of I)D.push(this.getNotebookCell(B));const T=[];for(const B of K)T.push(this.getNotebookCell(B));const M=[];for(const B of L)M.push(this.getNotebookCell(B));(D.length>0||T.length>0||z.length>0||M.length>0)&&(C.cells={added:D,removed:T,changed:{data:z,textContent:M}}),(void 0!==C.metadata||void 0!==C.cells)&&this._onDidChange.fire(C)})),u.push(i.notebooks.synchronization.onDidSaveNotebookDocument(_=>{const k=this.notebookDocuments.get(_.notebookDocument.uri);void 0!==k&&this._onDidSave.fire(k)})),u.push(i.notebooks.synchronization.onDidCloseNotebookDocument(_=>{const k=this.notebookDocuments.get(_.notebookDocument.uri);if(void 0!==k){this._onDidClose.fire(k);for(const F of _.cellTextDocuments)a.closeTextDocument({textDocument:F});this.notebookDocuments.delete(_.notebookDocument.uri);for(const F of k.cells)this.notebookCellMap.delete(F.document)}})),r.Disposable.create(()=>{u.forEach(_=>_.dispose())})}updateCellMap(i){for(const a of i.cells)this.notebookCellMap.set(a.document,[a,i])}}},32427:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.attachPartialResult=s.ProgressFeature=s.attachWorkDone=void 0;const r=g(32561),v=g(99269);class w{constructor(P,N){this._connection=P,this._token=N,w.Instances.set(this._token,this)}begin(P,N,I,K){this._connection.sendProgress(r.WorkDoneProgress.type,this._token,{kind:"begin",title:P,percentage:N,message:I,cancellable:K})}report(P,N){let I={kind:"report"};"number"==typeof P?(I.percentage=P,void 0!==N&&(I.message=N)):I.message=P,this._connection.sendProgress(r.WorkDoneProgress.type,this._token,I)}done(){w.Instances.delete(this._token),this._connection.sendProgress(r.WorkDoneProgress.type,this._token,{kind:"end"})}}w.Instances=new Map;class c extends w{constructor(P,N){super(P,N),this._source=new r.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class m{constructor(){}begin(){}report(){}done(){}}class h extends m{constructor(){super(),this._source=new r.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var u;s.attachWorkDone=function i(F,P){if(void 0===P||void 0===P.workDoneToken)return new m;const N=P.workDoneToken;return delete P.workDoneToken,new w(F,N)},s.ProgressFeature=F=>class extends F{constructor(){super(),this._progressSupported=!1}initialize(P){super.initialize(P),!0===P?.window?.workDoneProgress&&(this._progressSupported=!0,this.connection.onNotification(r.WorkDoneProgressCancelNotification.type,N=>{let I=w.Instances.get(N.token);(I instanceof c||I instanceof h)&&I.cancel()}))}attachWorkDoneProgress(P){return void 0===P?new m:new w(this.connection,P)}createWorkDoneProgress(){if(this._progressSupported){const P=(0,v.generateUuid)();return this.connection.sendRequest(r.WorkDoneProgressCreateRequest.type,{token:P}).then(()=>new c(this.connection,P))}return Promise.resolve(new h)}},(u||(u={})).type=new r.ProgressType;class _{constructor(P,N){this._connection=P,this._token=N}report(P){this._connection.sendProgress(u.type,this._token,P)}}s.attachPartialResult=function k(F,P){if(void 0===P||void 0===P.partialResultToken)return;const N=P.partialResultToken;return delete P.partialResultToken,new _(F,N)}},70912:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SemanticTokensBuilder=s.SemanticTokensDiff=s.SemanticTokensFeature=void 0;const r=g(32561);s.SemanticTokensFeature=m=>class extends m{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(r.SemanticTokensRefreshRequest.type),on:h=>{const i=r.SemanticTokensRequest.type;return this.connection.onRequest(i,(a,u)=>h(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(i,a)))},onDelta:h=>{const i=r.SemanticTokensDeltaRequest.type;return this.connection.onRequest(i,(a,u)=>h(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(i,a)))},onRange:h=>{const i=r.SemanticTokensRangeRequest.type;return this.connection.onRequest(i,(a,u)=>h(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(i,a)))}}}};class w{constructor(h,i){this.originalSequence=h,this.modifiedSequence=i}computeDiff(){const h=this.originalSequence.length,i=this.modifiedSequence.length;let a=0;for(;a<i&&a<h&&this.originalSequence[a]===this.modifiedSequence[a];)a++;if(a<i&&a<h){let u=h-1,_=i-1;for(;u>=a&&_>=a&&this.originalSequence[u]===this.modifiedSequence[_];)u--,_--;(u<a||_<a)&&(u++,_++);const k=u-a+1,F=this.modifiedSequence.slice(a,_+1);return 1===F.length&&F[0]===this.originalSequence[u]?[{start:a,deleteCount:k-1}]:[{start:a,deleteCount:k,data:F}]}return a<i?[{start:a,deleteCount:0,data:this.modifiedSequence.slice(a)}]:a<h?[{start:a,deleteCount:h-a}]:[]}}s.SemanticTokensDiff=w,s.SemanticTokensBuilder=class c{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(h,i,a,u,_){let k=h,F=i;this._dataLen>0&&(k-=this._prevLine,0===k&&(F-=this._prevChar)),this._data[this._dataLen++]=k,this._data[this._dataLen++]=F,this._data[this._dataLen++]=a,this._data[this._dataLen++]=u,this._data[this._dataLen++]=_,this._prevLine=h,this._prevChar=i}get id(){return this._id.toString()}previousResult(h){this.id===h&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){return void 0!==this._prevData?{resultId:this.id,edits:new w(this._prevData,this._data).computeDiff()}:this.build()}}},93386:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createConnection=s.combineFeatures=s.combineNotebooksFeatures=s.combineLanguagesFeatures=s.combineWorkspaceFeatures=s.combineWindowFeatures=s.combineClientFeatures=s.combineTracerFeatures=s.combineTelemetryFeatures=s.combineConsoleFeatures=s._NotebooksImpl=s._LanguagesImpl=s.BulkUnregistration=s.BulkRegistration=s.ErrorMessageTracker=void 0;const r=g(32561),v=g(63615),w=g(99269),c=g(32427),m=g(99811),h=g(70617),i=g(41172),a=g(70912),u=g(70979),_=g(94905),k=g(26343),F=g(67626),P=g(33833),N=g(96681),I=g(60608),K=g(55847),z=g(84589);function L(E){if(null!==E)return E}s.ErrorMessageTracker=class C{constructor(){this._messages=Object.create(null)}add(d){let b=this._messages[d];b||(b=0),b++,this._messages[d]=b}sendErrors(d){Object.keys(this._messages).forEach(b=>{d.window.showErrorMessage(b)})}};class D{constructor(){}rawAttach(d){this._rawConnection=d}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(d){}initialize(d){}error(d){this.send(r.MessageType.Error,d)}warn(d){this.send(r.MessageType.Warning,d)}info(d){this.send(r.MessageType.Info,d)}log(d){this.send(r.MessageType.Log,d)}send(d,b){this._rawConnection&&this._rawConnection.sendNotification(r.LogMessageNotification.type,{type:d,message:b}).catch(()=>{(0,r.RAL)().console.error("Sending log message failed")})}}const M=(0,u.ShowDocumentFeature)((0,c.ProgressFeature)(class T{constructor(){}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}showErrorMessage(d,...b){return this.connection.sendRequest(r.ShowMessageRequest.type,{type:r.MessageType.Error,message:d,actions:b}).then(L)}showWarningMessage(d,...b){return this.connection.sendRequest(r.ShowMessageRequest.type,{type:r.MessageType.Warning,message:d,actions:b}).then(L)}showInformationMessage(d,...b){return this.connection.sendRequest(r.ShowMessageRequest.type,{type:r.MessageType.Info,message:d,actions:b}).then(L)}}));(s.BulkRegistration||(s.BulkRegistration={})).create=function d(){return new X};class X{constructor(){this._registrations=[],this._registered=new Set}add(d,b){const q=v.string(d)?d:d.method;if(this._registered.has(q))throw new Error(`${q} is already added to this registration`);const y=w.generateUuid();this._registrations.push({id:y,method:q,registerOptions:b||{}}),this._registered.add(q)}asRegistrationParams(){return{registrations:this._registrations}}}(s.BulkUnregistration||(s.BulkUnregistration={})).create=function d(){return new Q(void 0,[])};class Q{constructor(d,b){this._connection=d,this._unregistrations=new Map,b.forEach(q=>{this._unregistrations.set(q.method,q)})}get isAttached(){return!!this._connection}attach(d){this._connection=d}add(d){this._unregistrations.set(d.method,d)}dispose(){let d=[];for(let q of this._unregistrations.values())d.push(q);this._connection.sendRequest(r.UnregistrationRequest.type,{unregisterations:d}).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(d){const b=v.string(d)?d:d.method,q=this._unregistrations.get(b);return!!q&&(this._connection.sendRequest(r.UnregistrationRequest.type,{unregisterations:[q]}).then(()=>{this._unregistrations.delete(b)},J=>{this._connection.console.info(`Un-registering request handler for ${q.id} failed.`)}),!0)}}class de{attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}register(d,b,q){return d instanceof X?this.registerMany(d):d instanceof Q?this.registerSingle1(d,b,q):this.registerSingle2(d,b)}registerSingle1(d,b,q){const y=v.string(b)?b:b.method,J=w.generateUuid();let Z={registrations:[{id:J,method:y,registerOptions:q||{}}]};return d.isAttached||d.attach(this.connection),this.connection.sendRequest(r.RegistrationRequest.type,Z).then(ie=>(d.add({id:J,method:y}),d),ie=>(this.connection.console.info(`Registering request handler for ${y} failed.`),Promise.reject(ie)))}registerSingle2(d,b){const q=v.string(d)?d:d.method,y=w.generateUuid();return this.connection.sendRequest(r.RegistrationRequest.type,{registrations:[{id:y,method:q,registerOptions:b||{}}]}).then(Z=>r.Disposable.create(()=>{this.unregisterSingle(y,q).catch(()=>{this.connection.console.info(`Un-registering capability with id ${y} failed.`)})}),Z=>(this.connection.console.info(`Registering request handler for ${q} failed.`),Promise.reject(Z)))}unregisterSingle(d,b){return this.connection.sendRequest(r.UnregistrationRequest.type,{unregisterations:[{id:d,method:b}]}).catch(()=>{this.connection.console.info(`Un-registering request handler for ${d} failed.`)})}registerMany(d){let b=d.asRegistrationParams();return this.connection.sendRequest(r.RegistrationRequest.type,b).then(()=>new Q(this._connection,b.registrations.map(q=>({id:q.id,method:q.method}))),q=>(this.connection.console.info("Bulk registration failed."),Promise.reject(q)))}}const Se=(0,_.FileOperationsFeature)((0,h.WorkspaceFoldersFeature)((0,m.ConfigurationFeature)(class Ee{constructor(){}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}applyEdit(d){let q=function b(y){return y&&!!y.edit}(d)?d:{edit:d};return this.connection.sendRequest(r.ApplyWorkspaceEditRequest.type,q)}})));class Ce{constructor(){this._trace=r.Trace.Off}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}set trace(d){this._trace=d}log(d,b){this._trace!==r.Trace.Off&&this.connection.sendNotification(r.LogTraceNotification.type,{message:d,verbose:this._trace===r.Trace.Verbose?b:void 0}).catch(()=>{})}}class me{constructor(){}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}logEvent(d){this.connection.sendNotification(r.TelemetryEventNotification.type,d).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class he{constructor(){}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}attachWorkDoneProgress(d){return(0,c.attachWorkDone)(this.connection,d)}attachPartialResultProgress(d,b){return(0,c.attachPartialResult)(this.connection,b)}}s._LanguagesImpl=he;const pe=(0,z.MonikerFeature)((0,I.DiagnosticFeature)((0,N.InlayHintFeature)((0,P.InlineValueFeature)((0,F.TypeHierarchyFeature)((0,k.LinkedEditingRangeFeature)((0,a.SemanticTokensFeature)((0,i.CallHierarchyFeature)(he))))))));class se{constructor(){}attach(d){this._connection=d}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(d){}fillServerCapabilities(d){}attachWorkDoneProgress(d){return(0,c.attachWorkDone)(this.connection,d)}attachPartialResultProgress(d,b){return(0,c.attachPartialResult)(this.connection,b)}}s._NotebooksImpl=se;const ye=(0,K.NotebookSyncFeature)(se);function ce(E,d){return function(b){return d(E(b))}}function fe(E,d){return function(b){return d(E(b))}}function _e(E,d){return function(b){return d(E(b))}}function ve(E,d){return function(b){return d(E(b))}}function be(E,d){return function(b){return d(E(b))}}function V(E,d){return function(b){return d(E(b))}}function De(E,d){return function(b){return d(E(b))}}function we(E,d){return function(b){return d(E(b))}}s.combineConsoleFeatures=ce,s.combineTelemetryFeatures=fe,s.combineTracerFeatures=_e,s.combineClientFeatures=ve,s.combineWindowFeatures=be,s.combineWorkspaceFeatures=V,s.combineLanguagesFeatures=De,s.combineNotebooksFeatures=we,s.combineFeatures=function Pe(E,d){function b(y,J,Z){return y&&J?Z(y,J):y||J}return{__brand:"features",console:b(E.console,d.console,ce),tracer:b(E.tracer,d.tracer,_e),telemetry:b(E.telemetry,d.telemetry,fe),client:b(E.client,d.client,ve),window:b(E.window,d.window,be),workspace:b(E.workspace,d.workspace,V),languages:b(E.languages,d.languages,De),notebooks:b(E.notebooks,d.notebooks,we)}},s.createConnection=function Te(E,d,b){const q=b&&b.console?new(b.console(D)):new D,y=E(q);q.rawAttach(y);const J=b&&b.tracer?new(b.tracer(Ce)):new Ce,Z=b&&b.telemetry?new(b.telemetry(me)):new me,ie=b&&b.client?new(b.client(de)):new de,ke=b&&b.window?new(b.window(M)):new M,Oe=b&&b.workspace?new(b.workspace(Se)):new Se,U=b&&b.languages?new(b.languages(pe)):new pe,Re=b&&b.notebooks?new(b.notebooks(ye)):new ye,ae=[q,J,Z,ie,ke,Oe,U,Re];let ue,ee,le,te={listen:()=>y.listen(),sendRequest:(p,...t)=>y.sendRequest(v.string(p)?p:p.method,...t),onRequest:(p,t)=>y.onRequest(p,t),sendNotification:(p,t)=>{const e=v.string(p)?p:p.method;return 1===arguments.length?y.sendNotification(e):y.sendNotification(e,t)},onNotification:(p,t)=>y.onNotification(p,t),onProgress:y.onProgress,sendProgress:y.sendProgress,onInitialize:p=>(ee=p,{dispose:()=>{ee=void 0}}),onInitialized:p=>y.onNotification(r.InitializedNotification.type,p),onShutdown:p=>(ue=p,{dispose:()=>{ue=void 0}}),onExit:p=>(le=p,{dispose:()=>{le=void 0}}),get console(){return q},get telemetry(){return Z},get tracer(){return J},get client(){return ie},get window(){return ke},get workspace(){return Oe},get languages(){return U},get notebooks(){return Re},onDidChangeConfiguration:p=>y.onNotification(r.DidChangeConfigurationNotification.type,p),onDidChangeWatchedFiles:p=>y.onNotification(r.DidChangeWatchedFilesNotification.type,p),__textDocumentSync:void 0,onDidOpenTextDocument:p=>y.onNotification(r.DidOpenTextDocumentNotification.type,p),onDidChangeTextDocument:p=>y.onNotification(r.DidChangeTextDocumentNotification.type,p),onDidCloseTextDocument:p=>y.onNotification(r.DidCloseTextDocumentNotification.type,p),onWillSaveTextDocument:p=>y.onNotification(r.WillSaveTextDocumentNotification.type,p),onWillSaveTextDocumentWaitUntil:p=>y.onRequest(r.WillSaveTextDocumentWaitUntilRequest.type,p),onDidSaveTextDocument:p=>y.onNotification(r.DidSaveTextDocumentNotification.type,p),sendDiagnostics:p=>y.sendNotification(r.PublishDiagnosticsNotification.type,p),onHover:p=>y.onRequest(r.HoverRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),void 0)),onCompletion:p=>y.onRequest(r.CompletionRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onCompletionResolve:p=>y.onRequest(r.CompletionResolveRequest.type,p),onSignatureHelp:p=>y.onRequest(r.SignatureHelpRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),void 0)),onDeclaration:p=>y.onRequest(r.DeclarationRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onDefinition:p=>y.onRequest(r.DefinitionRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onTypeDefinition:p=>y.onRequest(r.TypeDefinitionRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onImplementation:p=>y.onRequest(r.ImplementationRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onReferences:p=>y.onRequest(r.ReferencesRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onDocumentHighlight:p=>y.onRequest(r.DocumentHighlightRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onDocumentSymbol:p=>y.onRequest(r.DocumentSymbolRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onWorkspaceSymbol:p=>y.onRequest(r.WorkspaceSymbolRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onWorkspaceSymbolResolve:p=>y.onRequest(r.WorkspaceSymbolResolveRequest.type,p),onCodeAction:p=>y.onRequest(r.CodeActionRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onCodeActionResolve:p=>y.onRequest(r.CodeActionResolveRequest.type,(t,e)=>p(t,e)),onCodeLens:p=>y.onRequest(r.CodeLensRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onCodeLensResolve:p=>y.onRequest(r.CodeLensResolveRequest.type,(t,e)=>p(t,e)),onDocumentFormatting:p=>y.onRequest(r.DocumentFormattingRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),void 0)),onDocumentRangeFormatting:p=>y.onRequest(r.DocumentRangeFormattingRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),void 0)),onDocumentOnTypeFormatting:p=>y.onRequest(r.DocumentOnTypeFormattingRequest.type,(t,e)=>p(t,e)),onRenameRequest:p=>y.onRequest(r.RenameRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),void 0)),onPrepareRename:p=>y.onRequest(r.PrepareRenameRequest.type,(t,e)=>p(t,e)),onDocumentLinks:p=>y.onRequest(r.DocumentLinkRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onDocumentLinkResolve:p=>y.onRequest(r.DocumentLinkResolveRequest.type,(t,e)=>p(t,e)),onDocumentColor:p=>y.onRequest(r.DocumentColorRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onColorPresentation:p=>y.onRequest(r.ColorPresentationRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onFoldingRanges:p=>y.onRequest(r.FoldingRangeRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onSelectionRanges:p=>y.onRequest(r.SelectionRangeRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),(0,c.attachPartialResult)(y,t))),onExecuteCommand:p=>y.onRequest(r.ExecuteCommandRequest.type,(t,e)=>p(t,e,(0,c.attachWorkDone)(y,t),void 0)),dispose:()=>y.dispose()};for(let p of ae)p.attach(te);return y.onRequest(r.InitializeRequest.type,p=>{d.initialize(p),v.string(p.trace)&&(J.trace=r.Trace.fromString(p.trace));for(let t of ae)t.initialize(p.capabilities);if(ee)return function Fe(p){return p instanceof Promise?p:v.thenable(p)?new Promise((t,e)=>{p.then(o=>t(o),o=>e(o))}):Promise.resolve(p)}(ee(p,(new r.CancellationTokenSource).token,(0,c.attachWorkDone)(y,p),void 0)).then(e=>{if(e instanceof r.ResponseError)return e;let o=e;o||(o={capabilities:{}});let n=o.capabilities;n||(n={},o.capabilities=n),null==n.textDocumentSync?n.textDocumentSync=v.number(te.__textDocumentSync)?te.__textDocumentSync:r.TextDocumentSyncKind.None:!v.number(n.textDocumentSync)&&!v.number(n.textDocumentSync.change)&&(n.textDocumentSync.change=v.number(te.__textDocumentSync)?te.__textDocumentSync:r.TextDocumentSyncKind.None);for(let l of ae)l.fillServerCapabilities(n);return o});{let t={capabilities:{textDocumentSync:r.TextDocumentSyncKind.None}};for(let e of ae)e.fillServerCapabilities(t.capabilities);return t}}),y.onRequest(r.ShutdownRequest.type,()=>{if(d.shutdownReceived=!0,ue)return ue((new r.CancellationTokenSource).token)}),y.onNotification(r.ExitNotification.type,()=>{try{le&&le()}finally{d.exit(d.shutdownReceived?0:1)}}),y.onNotification(r.SetTraceNotification.type,p=>{J.trace=r.Trace.fromString(p.value)}),te}},70979:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ShowDocumentFeature=void 0;const r=g(32561);s.ShowDocumentFeature=w=>class extends w{showDocument(c){return this.connection.sendRequest(r.ShowDocumentRequest.type,c)}}},78928:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextDocuments=void 0;const r=g(32561);s.TextDocuments=class v{constructor(c){this._configuration=c,this._syncedDocuments=new Map,this._onDidChangeContent=new r.Emitter,this._onDidOpen=new r.Emitter,this._onDidClose=new r.Emitter,this._onDidSave=new r.Emitter,this._onWillSave=new r.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(c){this._willSaveWaitUntil=c}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(c){return this._syncedDocuments.get(c)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(c){c.__textDocumentSync=r.TextDocumentSyncKind.Incremental;const m=[];return m.push(c.onDidOpenTextDocument(h=>{const i=h.textDocument,a=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,a);const u=Object.freeze({document:a});this._onDidOpen.fire(u),this._onDidChangeContent.fire(u)})),m.push(c.onDidChangeTextDocument(h=>{const i=h.textDocument,a=h.contentChanges;if(0===a.length)return;const{version:u}=i;if(null==u)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let _=this._syncedDocuments.get(i.uri);void 0!==_&&(_=this._configuration.update(_,a,u),this._syncedDocuments.set(i.uri,_),this._onDidChangeContent.fire(Object.freeze({document:_})))})),m.push(c.onDidCloseTextDocument(h=>{let i=this._syncedDocuments.get(h.textDocument.uri);void 0!==i&&(this._syncedDocuments.delete(h.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),m.push(c.onWillSaveTextDocument(h=>{let i=this._syncedDocuments.get(h.textDocument.uri);void 0!==i&&this._onWillSave.fire(Object.freeze({document:i,reason:h.reason}))})),m.push(c.onWillSaveTextDocumentWaitUntil((h,i)=>{let a=this._syncedDocuments.get(h.textDocument.uri);return void 0!==a&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:a,reason:h.reason}),i):[]})),m.push(c.onDidSaveTextDocument(h=>{let i=this._syncedDocuments.get(h.textDocument.uri);void 0!==i&&this._onDidSave.fire(Object.freeze({document:i}))})),r.Disposable.create(()=>{m.forEach(h=>h.dispose())})}}},67626:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TypeHierarchyFeature=void 0;const r=g(32561);s.TypeHierarchyFeature=w=>class extends w{get typeHierarchy(){return{onPrepare:c=>this.connection.onRequest(r.TypeHierarchyPrepareRequest.type,(m,h)=>c(m,h,this.attachWorkDoneProgress(m),void 0)),onSupertypes:c=>{const m=r.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(m,(h,i)=>c(h,i,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(m,h)))},onSubtypes:c=>{const m=r.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(m,(h,i)=>c(h,i,this.attachWorkDoneProgress(h),this.attachPartialResultProgress(m,h)))}}}}},63615:(S,s)=>{function r(u){return"string"==typeof u||u instanceof String}function c(u){return"function"==typeof u}function m(u){return Array.isArray(u)}Object.defineProperty(s,"__esModule",{value:!0}),s.thenable=s.typedArray=s.stringArray=s.array=s.func=s.error=s.number=s.string=s.boolean=void 0,s.boolean=function g(u){return!0===u||!1===u},s.string=r,s.number=function v(u){return"number"==typeof u||u instanceof Number},s.error=function w(u){return u instanceof Error},s.func=c,s.array=m,s.stringArray=function h(u){return m(u)&&u.every(_=>r(_))},s.typedArray=function i(u,_){return Array.isArray(u)&&u.every(_)},s.thenable=function a(u){return u&&c(u.then)}},99269:(S,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.generateUuid=s.parse=s.isUUID=s.v4=s.empty=void 0;class g{constructor(a){this._value=a}asHex(){return this._value}equals(a){return this.asHex()===a.asHex()}}let r=(()=>{class i extends g{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(u){return u[Math.floor(u.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}return i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],i})();function v(){return new r}s.empty=new g("00000000-0000-0000-0000-000000000000"),s.v4=v;const w=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function c(i){return w.test(i)}s.isUUID=c,s.parse=function m(i){if(!c(i))throw new Error("invalid uuid");return new g(i)},s.generateUuid=function h(){return v().asHex()}},70617:(S,s,g)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WorkspaceFoldersFeature=void 0;const r=g(32561);s.WorkspaceFoldersFeature=w=>class extends w{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(c){super.initialize(c);let m=c.workspace;m&&m.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new r.Emitter,this.connection.onNotification(r.DidChangeWorkspaceFoldersNotification.type,h=>{this._onDidChangeWorkspaceFolders.fire(h.event)}))}fillServerCapabilities(c){super.fillServerCapabilities(c);const m=c.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=!0===m||"string"==typeof m}getWorkspaceFolders(){return this.connection.sendRequest(r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}}},Ne={};function H(S){var s=Ne[S];if(void 0!==s)return s.exports;var g=Ne[S]={exports:{}};return We[S].call(g.exports,g,g.exports,H),g.exports}H.m=We,H.x=()=>{var S=H.O(void 0,[35,663],()=>H(39784));return H.O(S)},S=[],H.O=(s,g,r,v)=>{if(!g){var c=1/0;for(w=0;w<S.length;w++){for(var[g,r,v]=S[w],m=!0,h=0;h<g.length;h++)(!1&v||c>=v)&&Object.keys(H.O).every(F=>H.O[F](g[h]))?g.splice(h--,1):(m=!1,v<c&&(c=v));if(m){S.splice(w--,1);var i=r();void 0!==i&&(s=i)}}return s}v=v||0;for(var w=S.length;w>0&&S[w-1][2]>v;w--)S[w]=S[w-1];S[w]=[g,r,v]},H.d=(S,s)=>{for(var g in s)H.o(s,g)&&!H.o(S,g)&&Object.defineProperty(S,g,{enumerable:!0,get:s[g]})},H.f={},H.e=S=>Promise.all(Object.keys(H.f).reduce((s,g)=>(H.f[g](S,s),s),[])),H.u=S=>S+"."+{35:"91888729947aee93",663:"40065db53a99e575"}[S]+".js",H.miniCssF=S=>{},H.o=(S,s)=>Object.prototype.hasOwnProperty.call(S,s),H.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},(()=>{var S;H.tt=()=>(void 0===S&&(S={createScriptURL:s=>s},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(S=trustedTypes.createPolicy("angular#bundler",S))),S)})(),H.tu=S=>H.tt().createScriptURL(S),H.p="",(()=>{var S={784:1};H.f.i=(v,w)=>{S[v]||importScripts(H.tu(H.p+H.u(v)))};var g=self.webpackChunkweb=self.webpackChunkweb||[],r=g.push.bind(g);g.push=v=>{var[w,c,m]=v;for(var h in c)H.o(c,h)&&(H.m[h]=c[h]);for(m&&m(H);w.length;)S[w.pop()]=1;r(v)}})(),(()=>{var S=H.x;H.x=()=>Promise.all([H.e(35),H.e(663)]).then(S)})(),H.x()})();