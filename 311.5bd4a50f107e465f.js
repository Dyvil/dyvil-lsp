(self.webpackChunkweb=self.webpackChunkweb||[]).push([[311],{53012:function(Pe,ve,M){var ee=M(53910),B=M(46932).default;Pe.exports=(()=>{"use strict";var ye={350:(J,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UseOnigurumaFindOptions=a.DebugFlags=void 0,a.DebugFlags={InDebugMode:typeof ee<"u"&&!!ee.env.VSCODE_TEXTMATE_DEBUG},a.UseOnigurumaFindOptions=!1},442:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.applyStateStackDiff=a.diffStateStacksRefEq=void 0;const S=A(391);a.diffStateStacksRefEq=function(I,b){let v=0;const h=[];let p=I,L=b;for(;p!==L;)p&&(!L||p.depth>=L.depth)?(v++,p=p.parent):(h.push(L.toStateStackFrame()),L=L.parent);return{pops:v,newFrames:h.reverse()}},a.applyStateStackDiff=function(I,b){let v=I;for(let h=0;h<b.pops;h++)v=v.parent;for(const h of b.newFrames)v=S.StateStackImpl.pushFrame(v,h);return v}},36:(J,a)=>{var A;Object.defineProperty(a,"__esModule",{value:!0}),a.toOptionalTokenType=a.EncodedTokenAttributes=void 0,(A=a.EncodedTokenAttributes||(a.EncodedTokenAttributes={})).toBinaryStr=function(S){let I=S.toString(2);for(;I.length<32;)I="0"+I;return I},A.print=function(S){const I=A.getLanguageId(S),b=A.getTokenType(S),v=A.getFontStyle(S),h=A.getForeground(S),p=A.getBackground(S);console.log({languageId:I,tokenType:b,fontStyle:v,foreground:h,background:p})},A.getLanguageId=function(S){return(255&S)>>>0},A.getTokenType=function(S){return(768&S)>>>8},A.containsBalancedBrackets=function(S){return 0!=(1024&S)},A.getFontStyle=function(S){return(30720&S)>>>11},A.getForeground=function(S){return(16744448&S)>>>15},A.getBackground=function(S){return(4278190080&S)>>>24},A.set=function(S,I,b,v,h,p,L){let d=A.getLanguageId(S),_=A.getTokenType(S),k=A.containsBalancedBrackets(S)?1:0,m=A.getFontStyle(S),u=A.getForeground(S),c=A.getBackground(S);return 0!==I&&(d=I),8!==b&&(_=b),null!==v&&(k=v?1:0),-1!==h&&(m=h),0!==p&&(u=p),0!==L&&(c=L),(d<<0|_<<8|k<<10|m<<11|u<<15|c<<24)>>>0},a.toOptionalTokenType=function(S){return S}},996:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BasicScopeAttributesProvider=a.BasicScopeAttributes=void 0;const S=A(878);class I{constructor(p,L){this.languageId=p,this.tokenType=L}}a.BasicScopeAttributes=I;class b{constructor(p,L){this._getBasicScopeAttributes=new S.CachedFn(d=>{const _=this._scopeToLanguage(d),k=this._toStandardTokenType(d);return new I(_,k)}),this._defaultAttributes=new I(p,8),this._embeddedLanguagesMatcher=new v(Object.entries(L||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(p){return null===p?b._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(p)}_scopeToLanguage(p){return this._embeddedLanguagesMatcher.match(p)||0}_toStandardTokenType(p){const L=p.match(b.STANDARD_TOKEN_TYPE_REGEXP);if(!L)return 8;switch(L[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}a.BasicScopeAttributesProvider=b,b._NULL_SCOPE_METADATA=new I(0,0),b.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class v{constructor(p){if(0===p.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(p);const L=p.map(([d,_])=>S.escapeRegExpCharacters(d));L.sort(),L.reverse(),this.scopesRegExp=new RegExp(`^((${L.join(")|(")}))($|\\.)`,"")}}match(p){if(!this.scopesRegExp)return;const L=p.match(this.scopesRegExp);return L?this.values.get(L[1]):void 0}}},947:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LineTokens=a.BalancedBracketSelectors=a.StateStackImpl=a.AttributedScopeStack=a.Grammar=a.createGrammar=void 0;const S=A(350),I=A(36),b=A(736),v=A(44),h=A(792),p=A(583),L=A(878),d=A(996),_=A(47);function k(s,t,r,i,g){const P=b.createMatchers(t,m),w=h.RuleFactory.getCompiledRuleId(r,i,g.repository);for(const D of P)s.push({debugSelector:t,matcher:D.matcher,ruleId:w,grammar:g,priority:D.priority})}function m(s,t){if(t.length<s.length)return!1;let r=0;return s.every(i=>{for(let g=r;g<t.length;g++)if(u(t[g],i))return r=g+1,!0;return!1})}function u(s,t){if(!s)return!1;if(s===t)return!0;const r=t.length;return s.length>r&&s.substr(0,r)===t&&"."===s[r]}a.createGrammar=function(s,t,r,i,g,P,w,D){return new c(s,t,r,i,g,P,w,D)};class c{constructor(t,r,i,g,P,w,D,j){if(this._rootScopeName=t,this.balancedBracketSelectors=w,this._onigLib=j,this._basicScopeAttributesProvider=new d.BasicScopeAttributesProvider(i,g),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=D,this._grammar=y(r,null),this._injections=null,this._tokenTypeMatchers=[],P)for(const Q of Object.keys(P)){const K=b.createMatchers(Q,m);for(const z of K)this._tokenTypeMatchers.push({matcher:z.matcher,type:P[Q]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t=[],r=this._rootScopeName,i=(g=>g===this._rootScopeName?this._grammar:this.getExternalGrammar(g))(r);if(i){const g=i.injections;if(g)for(let w in g)k(t,w,g[w],this,i);const P=this._grammarRepository.injections(r);P&&P.forEach(w=>{const D=this.getExternalGrammar(w);if(D){const j=D.injectionSelector;j&&k(t,j,D,this,D)}})}return t.sort((g,P)=>g.priority-P.priority),t}getInjections(){if(null===this._injections&&(this._injections=this._collectInjections(),S.DebugFlags.InDebugMode&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const t of this._injections)console.log(`  - ${t.debugSelector}`)}return this._injections}registerRule(t){const r=++this._lastRuleId,i=t(h.ruleIdFromNumber(r));return this._ruleId2desc[r]=i,i}getRule(t){return this._ruleId2desc[h.ruleIdToNumber(t)]}getExternalGrammar(t,r){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const i=this._grammarRepository.lookup(t);if(i)return this._includedGrammars[t]=y(i,r&&r.$base),this._includedGrammars[t]}}tokenizeLine(t,r,i=0){const g=this._tokenize(t,r,!1,i);return{tokens:g.lineTokens.getResult(g.ruleStack,g.lineLength),ruleStack:g.ruleStack,stoppedEarly:g.stoppedEarly}}tokenizeLine2(t,r,i=0){const g=this._tokenize(t,r,!0,i);return{tokens:g.lineTokens.getBinaryResult(g.ruleStack,g.lineLength),ruleStack:g.ruleStack,stoppedEarly:g.stoppedEarly}}_tokenize(t,r,i,g){let P;if(-1===this._rootId&&(this._rootId=h.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),r&&r!==e.NULL)P=!1,r.reset();else{P=!0;const K=this._basicScopeAttributesProvider.getDefaultAttributes(),z=this.themeProvider.getDefaults(),Z=I.EncodedTokenAttributes.set(0,K.languageId,K.tokenType,null,z.fontStyle,z.foregroundId,z.backgroundId),te=this.getRule(this._rootId).getName(null,null);let Y;Y=te?l.createRootAndLookUpScopeName(te,Z,this):l.createRoot("unknown",Z),r=new e(null,this._rootId,-1,-1,!1,null,Y,Y)}const w=this.createOnigString(t+="\n"),D=w.content.length,j=new n(i,t,this._tokenTypeMatchers,this.balancedBracketSelectors),Q=_._tokenizeString(this,w,P,0,r,j,!0,g);return v.disposeOnigString(w),{lineLength:D,lineTokens:j,ruleStack:Q.stack,stoppedEarly:Q.stoppedEarly}}}function y(s,t){return(s=L.clone(s)).repository=s.repository||{},s.repository.$self={$vscodeTextmateLocation:s.$vscodeTextmateLocation,patterns:s.patterns,name:s.scopeName},s.repository.$base=t||s.repository.$self,s}a.Grammar=c;class l{constructor(t,r,i){this.parent=t,this.scopePath=r,this.tokenAttributes=i}static fromExtension(t,r){let i=t,g=t?.scopePath??null;for(const P of r)g=p.ScopeStack.push(g,P.scopeNames),i=new l(i,g,P.encodedTokenAttributes);return i}static createRoot(t,r){return new l(null,new p.ScopeStack(null,t),r)}static createRootAndLookUpScopeName(t,r,i){const g=i.getMetadataForScope(t),P=new p.ScopeStack(null,t),w=i.themeProvider.themeMatch(P),D=l.mergeAttributes(r,g,w);return new l(null,P,D)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return l.equals(this,t)}static equals(t,r){for(;;){if(t===r||!t&&!r)return!0;if(!t||!r||t.scopeName!==r.scopeName||t.tokenAttributes!==r.tokenAttributes)return!1;t=t.parent,r=r.parent}}static mergeAttributes(t,r,i){let g=-1,P=0,w=0;return null!==i&&(g=i.fontStyle,P=i.foregroundId,w=i.backgroundId),I.EncodedTokenAttributes.set(t,r.languageId,r.tokenType,null,g,P,w)}pushAttributed(t,r){if(null===t)return this;if(-1===t.indexOf(" "))return l._pushAttributed(this,t,r);const i=t.split(/ /g);let g=this;for(const P of i)g=l._pushAttributed(g,P,r);return g}static _pushAttributed(t,r,i){const g=i.getMetadataForScope(r),P=t.scopePath.push(r),w=i.themeProvider.themeMatch(P),D=l.mergeAttributes(t.tokenAttributes,g,w);return new l(t,P,D)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(t){const r=[];let i=this;for(;i&&i!==t;)r.push({encodedTokenAttributes:i.tokenAttributes,scopeNames:i.scopePath.getExtensionIfDefined(i.parent?.scopePath??null)}),i=i.parent;return i===t?r.reverse():void 0}}a.AttributedScopeStack=l;class e{constructor(t,r,i,g,P,w,D,j){this.parent=t,this.ruleId=r,this.beginRuleCapturedEOL=P,this.endRule=w,this.nameScopesList=D,this.contentNameScopesList=j,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=i,this._anchorPos=g}equals(t){return null!==t&&e._equals(this,t)}static _equals(t,r){return t===r||!!this._structuralEquals(t,r)&&l.equals(t.contentNameScopesList,r.contentNameScopesList)}static _structuralEquals(t,r){for(;;){if(t===r||!t&&!r)return!0;if(!t||!r||t.depth!==r.depth||t.ruleId!==r.ruleId||t.endRule!==r.endRule)return!1;t=t.parent,r=r.parent}}clone(){return this}static _reset(t){for(;t;)t._enterPos=-1,t._anchorPos=-1,t=t.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,r,i,g,P,w,D){return new e(this,t,r,i,g,P,w,D)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(t){return t.getRule(this.ruleId)}toString(){const t=[];return this._writeString(t,0),"["+t.join(",")+"]"}_writeString(t,r){return this.parent&&(r=this.parent._writeString(t,r)),t[r++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,r}withContentNameScopesList(t){return this.contentNameScopesList===t?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,t)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(t){let r=this;for(;r&&r._enterPos===t._enterPos;){if(r.ruleId===t.ruleId)return!0;r=r.parent}return!1}toStateStackFrame(){return{ruleId:h.ruleIdToNumber(this.ruleId),beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,r){const i=l.fromExtension(t?.nameScopesList??null,r.nameScopesList);return new e(t,h.ruleIdFromNumber(r.ruleId),r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,i,l.fromExtension(i,r.contentNameScopesList))}}a.StateStackImpl=e,e.NULL=new e(null,0,0,0,!1,null,null,null),a.BalancedBracketSelectors=class{constructor(s,t){this.allowAny=!1,this.balancedBracketScopes=s.flatMap(r=>"*"===r?(this.allowAny=!0,[]):b.createMatchers(r,m).map(i=>i.matcher)),this.unbalancedBracketScopes=t.flatMap(r=>b.createMatchers(r,m).map(i=>i.matcher))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(s){for(const t of this.unbalancedBracketScopes)if(t(s))return!1;for(const t of this.balancedBracketScopes)if(t(s))return!0;return this.allowAny}};class n{constructor(t,r,i,g){this.balancedBracketSelectors=g,this._emitBinaryTokens=t,this._tokenTypeOverrides=i,this._lineText=S.DebugFlags.InDebugMode?r:null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,r){this.produceFromScopes(t.contentNameScopesList,r)}produceFromScopes(t,r){if(this._lastTokenEndIndex>=r)return;if(this._emitBinaryTokens){let g=t?.tokenAttributes??0,P=!1;if(this.balancedBracketSelectors?.matchesAlways&&(P=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const w=t?.getScopeNames()??[];for(const D of this._tokenTypeOverrides)D.matcher(w)&&(g=I.EncodedTokenAttributes.set(g,0,I.toOptionalTokenType(D.type),null,-1,0,0));this.balancedBracketSelectors&&(P=this.balancedBracketSelectors.match(w))}if(P&&(g=I.EncodedTokenAttributes.set(g,0,8,P,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===g)return void(this._lastTokenEndIndex=r);if(S.DebugFlags.InDebugMode){const w=t?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,r).replace(/\n$/,"\\n")+"|");for(let D=0;D<w.length;D++)console.log("      * "+w[D])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(g),void(this._lastTokenEndIndex=r)}const i=t?.getScopeNames()??[];if(S.DebugFlags.InDebugMode){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,r).replace(/\n$/,"\\n")+"|");for(let g=0;g<i.length;g++)console.log("      * "+i[g])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:r,scopes:i}),this._lastTokenEndIndex=r}getResult(t,r){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===r-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(t,r),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,r){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===r-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(t,r),this._binaryTokens[this._binaryTokens.length-2]=0);const i=new Uint32Array(this._binaryTokens.length);for(let g=0,P=this._binaryTokens.length;g<P;g++)i[g]=this._binaryTokens[g];return i}}a.LineTokens=n},965:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.parseInclude=a.TopLevelRepositoryReference=a.TopLevelReference=a.RelativeReference=a.SelfReference=a.BaseReference=a.ScopeDependencyProcessor=a.ExternalReferenceCollector=a.TopLevelRepositoryRuleReference=a.TopLevelRuleReference=void 0;const S=A(878);class I{constructor(e){this.scopeName=e}toKey(){return this.scopeName}}a.TopLevelRuleReference=I;class b{constructor(e,n){this.scopeName=e,this.ruleName=n}toKey(){return`${this.scopeName}#${this.ruleName}`}}a.TopLevelRepositoryRuleReference=b;class v{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const n=e.toKey();this._seenReferenceKeys.has(n)||(this._seenReferenceKeys.add(n),this._references.push(e))}}function h(l,e,n,s){const t=n.lookup(l.scopeName);if(!t){if(l.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const r=n.lookup(e);l instanceof I?L({baseGrammar:r,selfGrammar:t},s):p(l.ruleName,{baseGrammar:r,selfGrammar:t,repository:t.repository},s);const i=n.injections(l.scopeName);if(i)for(const g of i)s.add(new I(g))}function p(l,e,n){e.repository&&e.repository[l]&&d([e.repository[l]],e,n)}function L(l,e){l.selfGrammar.patterns&&Array.isArray(l.selfGrammar.patterns)&&d(l.selfGrammar.patterns,{...l,repository:l.selfGrammar.repository},e),l.selfGrammar.injections&&d(Object.values(l.selfGrammar.injections),{...l,repository:l.selfGrammar.repository},e)}function d(l,e,n){for(const s of l){if(n.visitedRule.has(s))continue;n.visitedRule.add(s);const t=s.repository?S.mergeObjects({},e.repository,s.repository):e.repository;Array.isArray(s.patterns)&&d(s.patterns,{...e,repository:t},n);const r=s.include;if(!r)continue;const i=y(r);switch(i.kind){case 0:L({...e,selfGrammar:e.baseGrammar},n);break;case 1:L(e,n);break;case 2:p(i.ruleName,{...e,repository:t},n);break;case 3:case 4:const g=i.scopeName===e.selfGrammar.scopeName?e.selfGrammar:i.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(g){const P={baseGrammar:e.baseGrammar,selfGrammar:g,repository:t};4===i.kind?p(i.ruleName,P,n):L(P,n)}else n.add(4===i.kind?new b(i.scopeName,i.ruleName):new I(i.scopeName))}}}a.ExternalReferenceCollector=v,a.ScopeDependencyProcessor=class{constructor(l,e){this.repo=l,this.initialScopeName=e,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new I(this.initialScopeName)]}processQueue(){const l=this.Q;this.Q=[];const e=new v;for(const n of l)h(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof I){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};class _{constructor(){this.kind=0}}a.BaseReference=_;class k{constructor(){this.kind=1}}a.SelfReference=k;class m{constructor(e){this.ruleName=e,this.kind=2}}a.RelativeReference=m;class u{constructor(e){this.scopeName=e,this.kind=3}}a.TopLevelReference=u;class c{constructor(e,n){this.scopeName=e,this.ruleName=n,this.kind=4}}function y(l){if("$base"===l)return new _;if("$self"===l)return new k;const e=l.indexOf("#");if(-1===e)return new u(l);if(0===e)return new m(l.substring(1));{const n=l.substring(0,e),s=l.substring(e+1);return new c(n,s)}}a.TopLevelRepositoryReference=c,a.parseInclude=y},391:function(J,a,A){var S=this&&this.__createBinding||(Object.create?function(b,v,h,p){void 0===p&&(p=h),Object.defineProperty(b,p,{enumerable:!0,get:function(){return v[h]}})}:function(b,v,h,p){void 0===p&&(p=h),b[p]=v[h]}),I=this&&this.__exportStar||function(b,v){for(var h in b)"default"===h||Object.prototype.hasOwnProperty.call(v,h)||S(v,b,h)};Object.defineProperty(a,"__esModule",{value:!0}),I(A(947),a)},47:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LocalStackElement=a._tokenizeString=void 0;const S=A(350),I=A(44),b=A(792),v=A(878);class h{constructor(c,y){this.stack=c,this.stoppedEarly=y}}function p(u,c,y,l,e,n,s,t){const r=c.content.length;let i=!1,g=-1;if(s){const D=function(j,Q,K,z,Z,te){let Y=Z.beginRuleCapturedEOL?0:-1;const V=[];for(let U=Z;U;U=U.pop()){const H=U.getRule(j);H instanceof b.BeginWhileRule&&V.push({rule:H,stack:U})}for(let U=V.pop();U;U=V.pop()){const{ruleScanner:H,findOptions:oe}=d(U.rule,j,U.stack.endRule,K,z===Y),x=H.findNextMatchSync(Q,z,oe);if(S.DebugFlags.InDebugMode&&(console.log("  scanning for while rule"),console.log(H.toString())),!x){S.DebugFlags.InDebugMode&&console.log("  popping "+U.rule.debugName+" - "+U.rule.debugWhileRegExp),Z=U.stack.pop();break}if(x.ruleId!==b.whileRuleId){Z=U.stack.pop();break}x.captureIndices&&x.captureIndices.length&&(te.produce(U.stack,x.captureIndices[0].start),k(j,Q,K,U.stack,te,U.rule.whileCaptures,x.captureIndices),te.produce(U.stack,x.captureIndices[0].end),Y=x.captureIndices[0].end,x.captureIndices[0].end>z&&(z=x.captureIndices[0].end,K=!1))}return{stack:Z,linePos:z,anchorPosition:Y,isFirstLine:K}}(u,c,y,l,e,n);e=D.stack,l=D.linePos,y=D.isFirstLine,g=D.anchorPosition}const P=Date.now();for(;!i;){if(0!==t&&Date.now()-P>t)return new h(e,!0);w()}return new h(e,!1);function w(){S.DebugFlags.InDebugMode&&(console.log(""),console.log(`@@scanNext ${l}: |${c.content.substr(l).replace(/\n$/,"\\n")}|`));const D=function(z,Z,te,Y,V,U){const H=function(se,he,Ce,de,ae,_e){const ce=ae.getRule(se),{ruleScanner:pe,findOptions:me}=L(ce,se,ae.endRule,Ce,de===_e);let re=0;S.DebugFlags.InDebugMode&&(re=v.performanceNow());const ne=pe.findNextMatchSync(he,de,me);if(S.DebugFlags.InDebugMode){const le=v.performanceNow()-re;le>5&&console.warn(`Rule ${ce.debugName} (${ce.id}) matching took ${le} against '${he}'`),console.log(`  scanning for (linePos: ${de}, anchorPosition: ${_e})`),console.log(pe.toString()),ne&&console.log(`matched rule id: ${ne.ruleId} from ${ne.captureIndices[0].start} to ${ne.captureIndices[0].end}`)}return ne?{captureIndices:ne.captureIndices,matchedRuleId:ne.ruleId}:null}(z,Z,te,Y,V,U),oe=z.getInjections();if(0===oe.length)return H;const x=function(se,he,Ce,de,ae,_e,ce){let pe,me=Number.MAX_VALUE,re=null,ne=0;const le=_e.contentNameScopesList.getScopeNames();for(let Te=0,ue=se.length;Te<ue;Te++){const Se=se[Te];if(!Se.matcher(le))continue;const Le=he.getRule(Se.ruleId),{ruleScanner:Re,findOptions:Ne}=L(Le,he,null,de,ae===ce),ke=Re.findNextMatchSync(Ce,ae,Ne);if(!ke)continue;S.DebugFlags.InDebugMode&&(console.log(`  matched injection: ${Se.debugSelector}`),console.log(Re.toString()));const xe=ke.captureIndices[0].start;if(!(xe>=me)&&(me=xe,re=ke.captureIndices,pe=ke.ruleId,ne=Se.priority,me===ae))break}return re?{priorityMatch:-1===ne,captureIndices:re,matchedRuleId:pe}:null}(oe,z,Z,te,Y,V,U);if(!x)return H;if(!H)return x;const X=H.captureIndices[0].start,W=x.captureIndices[0].start;return W<X||x.priorityMatch&&W===X?x:H}(u,c,y,l,e,g);if(!D)return S.DebugFlags.InDebugMode&&console.log("  no more matches."),n.produce(e,r),void(i=!0);const j=D.captureIndices,Q=D.matchedRuleId,K=!!(j&&j.length>0)&&j[0].end>l;if(Q===b.endRuleId){const z=e.getRule(u);S.DebugFlags.InDebugMode&&console.log("  popping "+z.debugName+" - "+z.debugEndRegExp),n.produce(e,j[0].start),e=e.withContentNameScopesList(e.nameScopesList),k(u,c,y,e,n,z.endCaptures,j),n.produce(e,j[0].end);const Z=e;if(e=e.parent,g=Z.getAnchorPos(),!K&&Z.getEnterPos()===l)return S.DebugFlags.InDebugMode&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),n.produce(e=Z,r),void(i=!0)}else{const z=u.getRule(Q);n.produce(e,j[0].start);const Z=e,te=z.getName(c.content,j),Y=e.contentNameScopesList.pushAttributed(te,u);if(e=e.push(Q,l,g,j[0].end===r,null,Y,Y),z instanceof b.BeginEndRule){const V=z;S.DebugFlags.InDebugMode&&console.log("  pushing "+V.debugName+" - "+V.debugBeginRegExp),k(u,c,y,e,n,V.beginCaptures,j),n.produce(e,j[0].end),g=j[0].end;const U=V.getContentName(c.content,j),H=Y.pushAttributed(U,u);if(e=e.withContentNameScopesList(H),V.endHasBackReferences&&(e=e.withEndRule(V.getEndWithResolvedBackReferences(c.content,j))),!K&&Z.hasSameRuleAs(e))return S.DebugFlags.InDebugMode&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),e=e.pop(),n.produce(e,r),void(i=!0)}else if(z instanceof b.BeginWhileRule){const V=z;S.DebugFlags.InDebugMode&&console.log("  pushing "+V.debugName),k(u,c,y,e,n,V.beginCaptures,j),n.produce(e,j[0].end),g=j[0].end;const U=V.getContentName(c.content,j),H=Y.pushAttributed(U,u);if(e=e.withContentNameScopesList(H),V.whileHasBackReferences&&(e=e.withEndRule(V.getWhileWithResolvedBackReferences(c.content,j))),!K&&Z.hasSameRuleAs(e))return S.DebugFlags.InDebugMode&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),e=e.pop(),n.produce(e,r),void(i=!0)}else{const V=z;if(S.DebugFlags.InDebugMode&&console.log("  matched "+V.debugName+" - "+V.debugMatchRegExp),k(u,c,y,e,n,V.captures,j),n.produce(e,j[0].end),e=e.pop(),!K)return S.DebugFlags.InDebugMode&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),e=e.safePop(),n.produce(e,r),void(i=!0)}}j[0].end>l&&(l=j[0].end,y=!1)}}function L(u,c,y,l,e){return S.UseOnigurumaFindOptions?{ruleScanner:u.compile(c,y),findOptions:_(l,e)}:{ruleScanner:u.compileAG(c,y,l,e),findOptions:0}}function d(u,c,y,l,e){return S.UseOnigurumaFindOptions?{ruleScanner:u.compileWhile(c,y),findOptions:_(l,e)}:{ruleScanner:u.compileWhileAG(c,y,l,e),findOptions:0}}function _(u,c){let y=0;return u||(y|=1),c||(y|=4),y}function k(u,c,y,l,e,n,s){if(0===n.length)return;const t=c.content,r=Math.min(n.length,s.length),i=[],g=s[0].end;for(let P=0;P<r;P++){const w=n[P];if(null===w)continue;const D=s[P];if(0===D.length)continue;if(D.start>g)break;for(;i.length>0&&i[i.length-1].endPos<=D.start;)e.produceFromScopes(i[i.length-1].scopes,i[i.length-1].endPos),i.pop();if(i.length>0?e.produceFromScopes(i[i.length-1].scopes,D.start):e.produce(l,D.start),w.retokenizeCapturedWithRuleId){const Q=w.getName(t,s),K=l.contentNameScopesList.pushAttributed(Q,u),z=w.getContentName(t,s),Z=K.pushAttributed(z,u),te=l.push(w.retokenizeCapturedWithRuleId,D.start,-1,!1,null,K,Z),Y=u.createOnigString(t.substring(0,D.end));p(u,Y,y&&0===D.start,D.start,te,e,!1,0),I.disposeOnigString(Y);continue}const j=w.getName(t,s);if(null!==j){const Q=(i.length>0?i[i.length-1].scopes:l.contentNameScopesList).pushAttributed(j,u);i.push(new m(Q,D.end))}}for(;i.length>0;)e.produceFromScopes(i[i.length-1].scopes,i[i.length-1].endPos),i.pop()}a._tokenizeString=p;class m{constructor(c,y){this.scopes=c,this.endPos=y}}a.LocalStackElement=m},974:(J,a)=>{function A(v,h){throw new Error("Near offset "+v.pos+": "+h+" ~~~"+v.source.substr(v.pos,50)+"~~~")}Object.defineProperty(a,"__esModule",{value:!0}),a.parseJSON=void 0,a.parseJSON=function(v,h,p){let L=new S(v),d=new I,_=0,k=null,m=[],u=[];function c(){m.push(_),u.push(k)}function y(){_=m.pop(),k=u.pop()}function l(e){A(L,e)}for(;b(L,d);){if(0===_){if(null!==k&&l("too many constructs in root"),3===d.type){k={},p&&(k.$vscodeTextmateLocation=d.toLocation(h)),c(),_=1;continue}if(2===d.type){k=[],c(),_=4;continue}l("unexpected token in root")}if(2===_){if(5===d.type){y();continue}if(7===d.type){_=3;continue}l("expected , or }")}if(1===_||3===_){if(1===_&&5===d.type){y();continue}if(1===d.type){let e=d.value;if(b(L,d)&&6===d.type||l("expected colon"),b(L,d)||l("expected value"),_=2,1===d.type){k[e]=d.value;continue}if(8===d.type){k[e]=null;continue}if(9===d.type){k[e]=!0;continue}if(10===d.type){k[e]=!1;continue}if(11===d.type){k[e]=parseFloat(d.value);continue}if(2===d.type){let n=[];k[e]=n,c(),_=4,k=n;continue}if(3===d.type){let n={};p&&(n.$vscodeTextmateLocation=d.toLocation(h)),k[e]=n,c(),_=1,k=n;continue}}l("unexpected token in dict")}if(5===_){if(4===d.type){y();continue}if(7===d.type){_=6;continue}l("expected , or ]")}if(4===_||6===_){if(4===_&&4===d.type){y();continue}if(_=5,1===d.type){k.push(d.value);continue}if(8===d.type){k.push(null);continue}if(9===d.type){k.push(!0);continue}if(10===d.type){k.push(!1);continue}if(11===d.type){k.push(parseFloat(d.value));continue}if(2===d.type){let e=[];k.push(e),c(),_=4,k=e;continue}if(3===d.type){let e={};p&&(e.$vscodeTextmateLocation=d.toLocation(h)),k.push(e),c(),_=1,k=e;continue}l("unexpected token in array")}l("unknown state")}return 0!==u.length&&l("unclosed constructs"),k};class S{constructor(h){this.source=h,this.pos=0,this.len=h.length,this.line=1,this.char=0}}class I{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(h){return{filename:h,line:this.line,char:this.char}}}function b(v,h){h.value=null,h.type=0,h.offset=-1,h.len=-1,h.line=-1,h.char=-1;let p,L=v.source,d=v.pos,_=v.len,k=v.line,m=v.char;for(;;){if(d>=_)return!1;if(p=L.charCodeAt(d),32!==p&&9!==p&&13!==p){if(10!==p)break;d++,k++,m=0}else d++,m++}if(h.offset=d,h.line=k,h.char=m,34===p){for(h.type=1,d++,m++;;){if(d>=_)return!1;if(p=L.charCodeAt(d),d++,m++,92!==p){if(34===p)break}else d++,m++}h.value=L.substring(h.offset+1,d-1).replace(/\\u([0-9A-Fa-f]{4})/g,(u,c)=>String.fromCodePoint(parseInt(c,16))).replace(/\\(.)/g,(u,c)=>{switch(c){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:A(v,"invalid escape sequence")}throw new Error("unreachable")})}else if(91===p)h.type=2,d++,m++;else if(123===p)h.type=3,d++,m++;else if(93===p)h.type=4,d++,m++;else if(125===p)h.type=5,d++,m++;else if(58===p)h.type=6,d++,m++;else if(44===p)h.type=7,d++,m++;else if(110===p){if(h.type=8,d++,m++,p=L.charCodeAt(d),117!==p||(d++,m++,p=L.charCodeAt(d),108!==p)||(d++,m++,p=L.charCodeAt(d),108!==p))return!1;d++,m++}else if(116===p){if(h.type=9,d++,m++,p=L.charCodeAt(d),114!==p||(d++,m++,p=L.charCodeAt(d),117!==p)||(d++,m++,p=L.charCodeAt(d),101!==p))return!1;d++,m++}else if(102===p){if(h.type=10,d++,m++,p=L.charCodeAt(d),97!==p||(d++,m++,p=L.charCodeAt(d),108!==p)||(d++,m++,p=L.charCodeAt(d),115!==p)||(d++,m++,p=L.charCodeAt(d),101!==p))return!1;d++,m++}else for(h.type=11;;){if(d>=_)return!1;if(p=L.charCodeAt(d),!(46===p||p>=48&&p<=57||101===p||69===p||45===p||43===p))break;d++,m++}return h.len=d-h.offset,null===h.value&&(h.value=L.substr(h.offset,h.len)),v.pos=d,v.line=k,v.char=m,!0}},787:function(J,a,A){var S=this&&this.__createBinding||(Object.create?function(_,k,m,u){void 0===u&&(u=m),Object.defineProperty(_,u,{enumerable:!0,get:function(){return k[m]}})}:function(_,k,m,u){void 0===u&&(u=m),_[u]=k[m]}),I=this&&this.__exportStar||function(_,k){for(var m in _)"default"===m||Object.prototype.hasOwnProperty.call(k,m)||S(k,_,m)};Object.defineProperty(a,"__esModule",{value:!0}),a.applyStateStackDiff=a.diffStateStacksRefEq=a.parseRawGrammar=a.INITIAL=a.Registry=void 0;const b=A(391),v=A(50),h=A(652),p=A(583),L=A(965),d=A(442);Object.defineProperty(a,"applyStateStackDiff",{enumerable:!0,get:function(){return d.applyStateStackDiff}}),Object.defineProperty(a,"diffStateStacksRefEq",{enumerable:!0,get:function(){return d.diffStateStacksRefEq}}),I(A(44),a),a.Registry=class{constructor(_){this._options=_,this._syncRegistry=new h.SyncRegistry(p.Theme.createFromRawTheme(_.theme,_.colorMap),_.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(_,k){this._syncRegistry.setTheme(p.Theme.createFromRawTheme(_,k))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(_,k,m){return this.loadGrammarWithConfiguration(_,k,{embeddedLanguages:m})}loadGrammarWithConfiguration(_,k,m){return this._loadGrammar(_,k,m.embeddedLanguages,m.tokenTypes,new b.BalancedBracketSelectors(m.balancedBracketSelectors||[],m.unbalancedBracketSelectors||[]))}loadGrammar(_){return this._loadGrammar(_,0,null,null,null)}_loadGrammar(_,k,m,u,c){var y=this;return B(function*(){const l=new L.ScopeDependencyProcessor(y._syncRegistry,_);for(;l.Q.length>0;)yield Promise.all(l.Q.map(e=>y._loadSingleGrammar(e.scopeName))),l.processQueue();return y._grammarForScopeName(_,k,m,u,c)})()}_loadSingleGrammar(_){var k=this;return B(function*(){return k._ensureGrammarCache.has(_)||k._ensureGrammarCache.set(_,k._doLoadSingleGrammar(_)),k._ensureGrammarCache.get(_)})()}_doLoadSingleGrammar(_){var k=this;return B(function*(){const m=yield k._options.loadGrammar(_);if(m){const u="function"==typeof k._options.getInjections?k._options.getInjections(_):void 0;k._syncRegistry.addGrammar(m,u)}})()}addGrammar(_,k=[],m=0,u=null){var c=this;return B(function*(){return c._syncRegistry.addGrammar(_,k),yield c._grammarForScopeName(_.scopeName,m,u)})()}_grammarForScopeName(_,k=0,m=null,u=null,c=null){return this._syncRegistry.grammarForScopeName(_,k,m,u,c)}},a.INITIAL=b.StateStackImpl.NULL,a.parseRawGrammar=v.parseRawGrammar},736:(J,a)=>{function A(S){return!!S&&!!S.match(/[\w\.:]+/)}Object.defineProperty(a,"__esModule",{value:!0}),a.createMatchers=void 0,a.createMatchers=function(S,I){const b=[],v=function(d){let _=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,k=_.exec(d);return{next:()=>{if(!k)return null;const m=k[0];return k=_.exec(d),m}}}(S);let h=v.next();for(;null!==h;){let d=0;if(2===h.length&&":"===h.charAt(1)){switch(h.charAt(0)){case"R":d=1;break;case"L":d=-1;break;default:console.log(`Unknown priority ${h} in scope selector`)}h=v.next()}let _=L();if(b.push({matcher:_,priority:d}),","!==h)break;h=v.next()}return b;function p(){if("-"===h){h=v.next();const d=p();return _=>!!d&&!d(_)}if("("===h){h=v.next();const d=function(){const _=[];let k=L();for(;k&&(_.push(k),"|"===h||","===h);){do{h=v.next()}while("|"===h||","===h);k=L()}return m=>_.some(u=>u(m))}();return")"===h&&(h=v.next()),d}if(A(h)){const d=[];do{d.push(h),h=v.next()}while(A(h));return _=>I(d,_)}return null}function L(){const d=[];let _=p();for(;_;)d.push(_),_=p();return k=>d.every(m=>m(k))}}},44:(J,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.disposeOnigString=void 0,a.disposeOnigString=function(A){"function"==typeof A.dispose&&A.dispose()}},50:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.parseRawGrammar=void 0;const S=A(69),I=A(350),b=A(974);a.parseRawGrammar=function(v,h=null){return null!==h&&/\.json$/.test(h)?(p=v,I.DebugFlags.InDebugMode?b.parseJSON(p,h,!0):JSON.parse(p)):(d=v,I.DebugFlags.InDebugMode?S.parseWithLocation(d,h,"$vscodeTextmateLocation"):S.parsePLIST(d));var d,p}},69:(J,a)=>{function A(S,I,b){const v=S.length;let h=0,p=1,L=0;function d(x){if(null===b)h+=x;else for(;x>0;)10===S.charCodeAt(h)?(h++,p++,L=0):(h++,L++),x--}function _(x){null===b?h=x:d(x-h)}function k(){for(;h<v;){let x=S.charCodeAt(h);if(32!==x&&9!==x&&13!==x&&10!==x)break;d(1)}}function m(x){return S.substr(h,x.length)===x&&(d(x.length),!0)}function u(x){let X=S.indexOf(x,h);_(-1!==X?X+x.length:v)}function c(x){let X=S.indexOf(x,h);if(-1!==X){let W=S.substring(h,X);return _(X+x.length),W}{let W=S.substr(h);return _(v),W}}v>0&&65279===S.charCodeAt(0)&&(h=1);let y=0,l=null,e=[],n=[],s=null;function t(x,X){e.push(y),n.push(l),y=x,l=X}function r(){if(0===e.length)return i("illegal state stack");y=e.pop(),l=n.pop()}function i(x){throw new Error("Near offset "+h+": "+x+" ~~~"+S.substr(h,50)+"~~~")}const g=function(){if(null===s)return i("missing <key>");let x={};null!==b&&(x[b]={filename:I,line:p,char:L}),l[s]=x,s=null,t(1,x)},P=function(){if(null===s)return i("missing <key>");let x=[];l[s]=x,s=null,t(2,x)},w=function(){let x={};null!==b&&(x[b]={filename:I,line:p,char:L}),l.push(x),t(1,x)},D=function(){let x=[];l.push(x),t(2,x)};function j(){if(1!==y)return i("unexpected </dict>");r()}function Q(){return 1===y||2!==y?i("unexpected </array>"):void r()}function K(x){if(1===y){if(null===s)return i("missing <key>");l[s]=x,s=null}else 2===y?l.push(x):l=x}function z(x){if(isNaN(x))return i("cannot parse float");if(1===y){if(null===s)return i("missing <key>");l[s]=x,s=null}else 2===y?l.push(x):l=x}function Z(x){if(isNaN(x))return i("cannot parse integer");if(1===y){if(null===s)return i("missing <key>");l[s]=x,s=null}else 2===y?l.push(x):l=x}function te(x){if(1===y){if(null===s)return i("missing <key>");l[s]=x,s=null}else 2===y?l.push(x):l=x}function Y(x){if(1===y){if(null===s)return i("missing <key>");l[s]=x,s=null}else 2===y?l.push(x):l=x}function V(x){if(1===y){if(null===s)return i("missing <key>");l[s]=x,s=null}else 2===y?l.push(x):l=x}function U(){let x=c(">"),X=!1;return 47===x.charCodeAt(x.length-1)&&(X=!0,x=x.substring(0,x.length-1)),{name:x.trim(),isClosed:X}}function H(x){if(x.isClosed)return"";let X=c("</");return u(">"),X.replace(/&#([0-9]+);/g,function(W,se){return String.fromCodePoint(parseInt(se,10))}).replace(/&#x([0-9a-f]+);/g,function(W,se){return String.fromCodePoint(parseInt(se,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(W){switch(W){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return W})}for(;h<v&&(k(),!(h>=v));){const x=S.charCodeAt(h);if(d(1),60!==x)return i("expected <");if(h>=v)return i("unexpected end of input");const X=S.charCodeAt(h);if(63===X){d(1),u("?>");continue}if(33===X){if(d(1),m("--")){u("--\x3e");continue}u(">");continue}if(47===X){if(d(1),k(),m("plist")){u(">");continue}if(m("dict")){u(">"),j();continue}if(m("array")){u(">"),Q();continue}return i("unexpected closed tag")}let W=U();switch(W.name){case"dict":1===y?g():2===y?w():(l={},null!==b&&(l[b]={filename:I,line:p,char:L}),t(1,l)),W.isClosed&&j();continue;case"array":1===y?P():2===y?D():(l=[],t(2,l)),W.isClosed&&Q();continue;case"key":oe=H(W),1!==y?i("unexpected <key>"):null!==s?i("too many <key>"):s=oe;continue;case"string":K(H(W));continue;case"real":z(parseFloat(H(W)));continue;case"integer":Z(parseInt(H(W),10));continue;case"date":te(new Date(H(W)));continue;case"data":Y(H(W));continue;case"true":H(W),V(!0);continue;case"false":H(W),V(!1);continue}if(!/^plist/.test(W.name))return i("unexpected opened tag "+W.name)}var oe;return l}Object.defineProperty(a,"__esModule",{value:!0}),a.parsePLIST=a.parseWithLocation=void 0,a.parseWithLocation=function(S,I,b){return A(S,I,b)},a.parsePLIST=function(S){return A(S,null,null)}},652:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SyncRegistry=void 0;const S=A(391);a.SyncRegistry=class{constructor(I,b){this._onigLibPromise=b,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=I}dispose(){for(const I of this._grammars.values())I.dispose()}setTheme(I){this._theme=I}getColorMap(){return this._theme.getColorMap()}addGrammar(I,b){this._rawGrammars.set(I.scopeName,I),b&&this._injectionGrammars.set(I.scopeName,b)}lookup(I){return this._rawGrammars.get(I)}injections(I){return this._injectionGrammars.get(I)}getDefaults(){return this._theme.getDefaults()}themeMatch(I){return this._theme.match(I)}grammarForScopeName(I,b,v,h,p){var L=this;return B(function*(){if(!L._grammars.has(I)){let d=L._rawGrammars.get(I);if(!d)return null;L._grammars.set(I,S.createGrammar(I,d,b,v,h,p,L,yield L._onigLibPromise))}return L._grammars.get(I)})()}}},792:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CompiledRule=a.RegExpSourceList=a.RegExpSource=a.RuleFactory=a.BeginWhileRule=a.BeginEndRule=a.IncludeOnlyRule=a.MatchRule=a.CaptureRule=a.Rule=a.ruleIdToNumber=a.ruleIdFromNumber=a.whileRuleId=a.endRuleId=void 0;const S=A(878),I=A(965),b=/\\(\d+)/,v=/\\(\d+)/g;Symbol("RuleId"),a.endRuleId=-1,a.whileRuleId=-2,a.ruleIdFromNumber=function(l){return l},a.ruleIdToNumber=function(l){return l};class h{constructor(e,n,s,t){this.$location=e,this.id=n,this._name=s||null,this._nameIsCapturing=S.RegexSource.hasCaptures(this._name),this._contentName=t||null,this._contentNameIsCapturing=S.RegexSource.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${S.basename(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==n?S.RegexSource.replaceCaptures(this._name,e,n):this._name}getContentName(e,n){return this._contentNameIsCapturing&&null!==this._contentName?S.RegexSource.replaceCaptures(this._contentName,e,n):this._contentName}}a.Rule=h;class p extends h{constructor(e,n,s,t,r){super(e,n,s,t),this.retokenizeCapturedWithRuleId=r}dispose(){}collectPatterns(e,n){throw new Error("Not supported!")}compile(e,n){throw new Error("Not supported!")}compileAG(e,n,s,t){throw new Error("Not supported!")}}a.CaptureRule=p;class L extends h{constructor(e,n,s,t,r){super(e,n,s,null),this._match=new u(t,this.id),this.captures=r,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,n){n.push(this._match)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,s,t){return this._getCachedCompiledPatterns(e).compileAG(e,s,t)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new c,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}a.MatchRule=L;class d extends h{constructor(e,n,s,t,r){super(e,n,s,t),this.patterns=r.patterns,this.hasMissingPatterns=r.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,n){for(const s of this.patterns)e.getRule(s).collectPatterns(e,n)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,s,t){return this._getCachedCompiledPatterns(e).compileAG(e,s,t)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new c,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}a.IncludeOnlyRule=d;class _ extends h{constructor(e,n,s,t,r,i,g,P,w,D){super(e,n,s,t),this._begin=new u(r,this.id),this.beginCaptures=i,this._end=new u(g||"\uffff",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=P,this.applyEndPatternLast=w||!1,this.patterns=D.patterns,this.hasMissingPatterns=D.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,n){return this._end.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e,n).compile(e)}compileAG(e,n,s,t){return this._getCachedCompiledPatterns(e,n).compileAG(e,s,t)}_getCachedCompiledPatterns(e,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new c;for(const s of this.patterns)e.getRule(s).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&this._cachedCompiledPatterns.setSource(this.applyEndPatternLast?this._cachedCompiledPatterns.length()-1:0,n),this._cachedCompiledPatterns}}a.BeginEndRule=_;class k extends h{constructor(e,n,s,t,r,i,g,P,w){super(e,n,s,t),this._begin=new u(r,this.id),this.beginCaptures=i,this.whileCaptures=P,this._while=new u(g,a.whileRuleId),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=w.patterns,this.hasMissingPatterns=w.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,n){return this._while.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,s,t){return this._getCachedCompiledPatterns(e).compileAG(e,s,t)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new c;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,n){return this._getCachedCompiledWhilePatterns(e,n).compile(e)}compileWhileAG(e,n,s,t){return this._getCachedCompiledWhilePatterns(e,n).compileAG(e,s,t)}_getCachedCompiledWhilePatterns(e,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new c,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||"\uffff"),this._cachedCompiledWhilePatterns}}a.BeginWhileRule=k;class m{static createCaptureRule(e,n,s,t,r){return e.registerRule(i=>new p(n,i,s,t,r))}static getCompiledRuleId(e,n,s){return e.id||n.registerRule(t=>{if(e.id=t,e.match)return new L(e.$vscodeTextmateLocation,e.id,e.name,e.match,m._compileCaptures(e.captures,n,s));if(void 0===e.begin){e.repository&&(s=S.mergeObjects({},s,e.repository));let r=e.patterns;return void 0===r&&e.include&&(r=[{include:e.include}]),new d(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,m._compilePatterns(r,n,s))}return e.while?new k(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,m._compileCaptures(e.beginCaptures||e.captures,n,s),e.while,m._compileCaptures(e.whileCaptures||e.captures,n,s),m._compilePatterns(e.patterns,n,s)):new _(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,m._compileCaptures(e.beginCaptures||e.captures,n,s),e.end,m._compileCaptures(e.endCaptures||e.captures,n,s),e.applyEndPatternLast,m._compilePatterns(e.patterns,n,s))}),e.id}static _compileCaptures(e,n,s){let t=[];if(e){let r=0;for(const i in e){if("$vscodeTextmateLocation"===i)continue;const g=parseInt(i,10);g>r&&(r=g)}for(let i=0;i<=r;i++)t[i]=null;for(const i in e){if("$vscodeTextmateLocation"===i)continue;const g=parseInt(i,10);let P=0;e[i].patterns&&(P=m.getCompiledRuleId(e[i],n,s)),t[g]=m.createCaptureRule(n,e[i].$vscodeTextmateLocation,e[i].name,e[i].contentName,P)}}return t}static _compilePatterns(e,n,s){let t=[];if(e)for(let r=0,i=e.length;r<i;r++){const g=e[r];let P=-1;if(g.include){const w=I.parseInclude(g.include);switch(w.kind){case 0:case 1:P=m.getCompiledRuleId(s[g.include],n,s);break;case 2:let D=s[w.ruleName];D&&(P=m.getCompiledRuleId(D,n,s));break;case 3:case 4:const Q=4===w.kind?w.ruleName:null,K=n.getExternalGrammar(w.scopeName,s);if(K)if(Q){let z=K.repository[Q];z&&(P=m.getCompiledRuleId(z,n,K.repository))}else P=m.getCompiledRuleId(K.repository.$self,n,K.repository)}}else P=m.getCompiledRuleId(g,n,s);if(-1!==P){const w=n.getRule(P);let D=!1;if((w instanceof d||w instanceof _||w instanceof k)&&w.hasMissingPatterns&&0===w.patterns.length&&(D=!0),D)continue;t.push(P)}}return{patterns:t,hasMissingPatterns:(e?e.length:0)!==t.length}}}a.RuleFactory=m;class u{constructor(e,n){if(e){const s=e.length;let t=0,r=[],i=!1;for(let g=0;g<s;g++)if("\\"===e.charAt(g)&&g+1<s){const P=e.charAt(g+1);"z"===P?(r.push(e.substring(t,g)),r.push("$(?!\\n)(?<!\\n)"),t=g+2):"A"!==P&&"G"!==P||(i=!0),g++}this.hasAnchor=i,0===t?this.source=e:(r.push(e.substring(t,s)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this._anchorCache=this.hasAnchor?this._buildAnchorCache():null,this.ruleId=n,this.hasBackReferences=b.test(this.source)}clone(){return new u(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){let s=n.map(t=>e.substring(t.start,t.end));return v.lastIndex=0,this.source.replace(v,(t,r)=>S.escapeRegExpCharacters(s[parseInt(r,10)]||""))}_buildAnchorCache(){let e,n,s,t,r=[],i=[],g=[],P=[];for(e=0,n=this.source.length;e<n;e++)s=this.source.charAt(e),r[e]=s,i[e]=s,g[e]=s,P[e]=s,"\\"===s&&e+1<n&&(t=this.source.charAt(e+1),"A"===t?(r[e+1]="\uffff",i[e+1]="\uffff",g[e+1]="A",P[e+1]="A"):"G"===t?(r[e+1]="\uffff",i[e+1]="G",g[e+1]="\uffff",P[e+1]="G"):(r[e+1]=t,i[e+1]=t,g[e+1]=t,P[e+1]=t),e++);return{A0_G0:r.join(""),A0_G1:i.join(""),A1_G0:g.join(""),A1_G1:P.join("")}}resolveAnchors(e,n){return this.hasAnchor&&this._anchorCache?e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}a.RegExpSource=u;class c{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,n){this._items[e].source!==n&&(this._disposeCaches(),this._items[e].setSource(n))}compile(e){if(!this._cached){let n=this._items.map(s=>s.source);this._cached=new y(e,n,this._items.map(s=>s.ruleId))}return this._cached}compileAG(e,n,s){return this._hasAnchors?n?s?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,n,s)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,n,s)),this._anchorCache.A1_G0):s?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,n,s)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,n,s)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,n,s){let t=this._items.map(r=>r.resolveAnchors(n,s));return new y(e,t,this._items.map(r=>r.ruleId))}}a.RegExpSourceList=c;class y{constructor(e,n,s){this.regExps=n,this.rules=s,this.scanner=e.createOnigScanner(n)}dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let n=0,s=this.rules.length;n<s;n++)e.push("   - "+this.rules[n]+": "+this.regExps[n]);return e.join("\n")}findNextMatchSync(e,n,s){const t=this.scanner.findNextMatchSync(e,n,s);return t?{ruleId:this.rules[t.index],captureIndices:t.captureIndices}:null}}a.CompiledRule=y},583:(J,a,A)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeTrieElement=a.ThemeTrieElementRule=a.ColorMap=a.fontStyleToString=a.ParsedThemeRule=a.parseTheme=a.StyleAttributes=a.ScopeStack=a.Theme=void 0;const S=A(878);class I{constructor(u,c,y){this._colorMap=u,this._defaults=c,this._root=y,this._cachedMatchRoot=new S.CachedFn(l=>this._root.match(l))}static createFromRawTheme(u,c){return this.createFromParsedTheme(p(u),c)}static createFromParsedTheme(u,c){return function(y,l){y.sort((g,P)=>{let w=S.strcmp(g.scope,P.scope);return 0!==w?w:(w=S.strArrCmp(g.parentScopes,P.parentScopes),0!==w?w:g.index-P.index)});let e=0,n="#000000",s="#ffffff";for(;y.length>=1&&""===y[0].scope;){let g=y.shift();-1!==g.fontStyle&&(e=g.fontStyle),null!==g.foreground&&(n=g.foreground),null!==g.background&&(s=g.background)}let t=new d(l),r=new h(e,t.getId(n),t.getId(s)),i=new k(new _(0,null,-1,0,0),[]);for(let g=0,P=y.length;g<P;g++){let w=y[g];i.insert(0,w.scope,w.parentScopes,w.fontStyle,t.getId(w.foreground),t.getId(w.background))}return new I(t,r,i)}(u,c)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(u){if(null===u)return this._defaults;const y=this._cachedMatchRoot.get(u.scopeName).find(l=>function(e,n){if(null===n)return!0;let s=0,t=n[s];for(;e;){if(v(e.scopeName,t)){if(s++,s===n.length)return!0;t=n[s]}e=e.parent}return!1}(u.parent,l.parentScopes));return y?new h(y.fontStyle,y.foreground,y.background):null}}a.Theme=I;class b{constructor(u,c){this.parent=u,this.scopeName=c}static push(u,c){for(const y of c)u=new b(u,y);return u}static from(...u){let c=null;for(let y=0;y<u.length;y++)c=new b(c,u[y]);return c}push(u){return new b(this,u)}getSegments(){let u=this;const c=[];for(;u;)c.push(u.scopeName),u=u.parent;return c.reverse(),c}toString(){return this.getSegments().join(" ")}extends(u){return this===u||null!==this.parent&&this.parent.extends(u)}getExtensionIfDefined(u){const c=[];let y=this;for(;y&&y!==u;)c.push(y.scopeName),y=y.parent;return y===u?c.reverse():void 0}}function v(m,u){return u===m||m.startsWith(u)&&"."===m[u.length]}a.ScopeStack=b;class h{constructor(u,c,y){this.fontStyle=u,this.foregroundId=c,this.backgroundId=y}}function p(m){if(!m)return[];if(!m.settings||!Array.isArray(m.settings))return[];let u=m.settings,c=[],y=0;for(let l=0,e=u.length;l<e;l++){let n,s=u[l];if(!s.settings)continue;if("string"==typeof s.scope){let g=s.scope;g=g.replace(/^[,]+/,""),g=g.replace(/[,]+$/,""),n=g.split(",")}else n=Array.isArray(s.scope)?s.scope:[""];let t=-1;if("string"==typeof s.settings.fontStyle){t=0;let g=s.settings.fontStyle.split(" ");for(let P=0,w=g.length;P<w;P++)switch(g[P]){case"italic":t|=1;break;case"bold":t|=2;break;case"underline":t|=4;break;case"strikethrough":t|=8}}let r=null;"string"==typeof s.settings.foreground&&S.isValidHexColor(s.settings.foreground)&&(r=s.settings.foreground);let i=null;"string"==typeof s.settings.background&&S.isValidHexColor(s.settings.background)&&(i=s.settings.background);for(let g=0,P=n.length;g<P;g++){let w=n[g].trim().split(" "),D=w[w.length-1],j=null;w.length>1&&(j=w.slice(0,w.length-1),j.reverse()),c[y++]=new L(D,j,l,t,r,i)}}return c}a.StyleAttributes=h,a.parseTheme=p;class L{constructor(u,c,y,l,e,n){this.scope=u,this.parentScopes=c,this.index=y,this.fontStyle=l,this.foreground=e,this.background=n}}a.ParsedThemeRule=L,a.fontStyleToString=function(m){if(-1===m)return"not set";let u="";return 1&m&&(u+="italic "),2&m&&(u+="bold "),4&m&&(u+="underline "),8&m&&(u+="strikethrough "),""===u&&(u="none"),u.trim()};class d{constructor(u){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(u)){this._isFrozen=!0;for(let c=0,y=u.length;c<y;c++)this._color2id[u[c]]=c,this._id2color[c]=u[c]}else this._isFrozen=!1}getId(u){if(null===u)return 0;u=u.toUpperCase();let c=this._color2id[u];if(c)return c;if(this._isFrozen)throw new Error(`Missing color in color map - ${u}`);return c=++this._lastColorId,this._color2id[u]=c,this._id2color[c]=u,c}getColorMap(){return this._id2color.slice(0)}}a.ColorMap=d;class _{constructor(u,c,y,l,e){this.scopeDepth=u,this.parentScopes=c,this.fontStyle=y,this.foreground=l,this.background=e}clone(){return new _(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(u){let c=[];for(let y=0,l=u.length;y<l;y++)c[y]=u[y].clone();return c}acceptOverwrite(u,c,y,l){this.scopeDepth>u?console.log("how did this happen?"):this.scopeDepth=u,-1!==c&&(this.fontStyle=c),0!==y&&(this.foreground=y),0!==l&&(this.background=l)}}a.ThemeTrieElementRule=_;class k{constructor(u,c=[],y={}){this._mainRule=u,this._children=y,this._rulesWithParentScopes=c}static _sortBySpecificity(u){return 1===u.length||u.sort(this._cmpBySpecificity),u}static _cmpBySpecificity(u,c){if(u.scopeDepth===c.scopeDepth){const y=u.parentScopes,l=c.parentScopes;let e=null===y?0:y.length,n=null===l?0:l.length;if(e===n)for(let s=0;s<e;s++){const t=y[s].length,r=l[s].length;if(t!==r)return r-t}return n-e}return c.scopeDepth-u.scopeDepth}match(u){if(""===u)return k._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let c,y,l=u.indexOf(".");return-1===l?(c=u,y=""):(c=u.substring(0,l),y=u.substring(l+1)),this._children.hasOwnProperty(c)?this._children[c].match(y):k._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(u,c,y,l,e,n){if(""===c)return void this._doInsertHere(u,y,l,e,n);let s,t,r,i=c.indexOf(".");-1===i?(s=c,t=""):(s=c.substring(0,i),t=c.substring(i+1)),this._children.hasOwnProperty(s)?r=this._children[s]:(r=new k(this._mainRule.clone(),_.cloneArr(this._rulesWithParentScopes)),this._children[s]=r),r.insert(u+1,t,y,l,e,n)}_doInsertHere(u,c,y,l,e){if(null!==c){for(let n=0,s=this._rulesWithParentScopes.length;n<s;n++){let t=this._rulesWithParentScopes[n];if(0===S.strArrCmp(t.parentScopes,c))return void t.acceptOverwrite(u,y,l,e)}-1===y&&(y=this._mainRule.fontStyle),0===l&&(l=this._mainRule.foreground),0===e&&(e=this._mainRule.background),this._rulesWithParentScopes.push(new _(u,c,y,l,e))}else this._mainRule.acceptOverwrite(u,y,l,e)}}a.ThemeTrieElement=k},878:(J,a)=>{function A(b){return Array.isArray(b)?function(v){let h=[];for(let p=0,L=v.length;p<L;p++)h[p]=A(v[p]);return h}(b):"object"==typeof b?function(v){let h={};for(let p in v)h[p]=A(v[p]);return h}(b):b}Object.defineProperty(a,"__esModule",{value:!0}),a.performanceNow=a.CachedFn=a.escapeRegExpCharacters=a.isValidHexColor=a.strArrCmp=a.strcmp=a.RegexSource=a.basename=a.mergeObjects=a.clone=void 0,a.clone=function(b){return A(b)},a.mergeObjects=function(b,...v){return v.forEach(h=>{for(let p in h)b[p]=h[p]}),b},a.basename=function b(v){const h=~v.lastIndexOf("/")||~v.lastIndexOf("\\");return 0===h?v:~h==v.length-1?b(v.substring(0,v.length-1)):v.substr(1+~h)};let S=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;function I(b,v){return b<v?-1:b>v?1:0}a.RegexSource=class{static hasCaptures(b){return null!==b&&(S.lastIndex=0,S.test(b))}static replaceCaptures(b,v,h){return b.replace(S,(p,L,d,_)=>{let k=h[parseInt(L||d,10)];if(!k)return p;{let m=v.substring(k.start,k.end);for(;"."===m[0];)m=m.substring(1);switch(_){case"downcase":return m.toLowerCase();case"upcase":return m.toUpperCase();default:return m}}})}},a.strcmp=I,a.strArrCmp=function(b,v){if(null===b&&null===v)return 0;if(!b)return-1;if(!v)return 1;let h=b.length,p=v.length;if(h===p){for(let L=0;L<h;L++){let d=I(b[L],v[L]);if(0!==d)return d}return 0}return h-p},a.isValidHexColor=function(b){return!!(/^#[0-9a-f]{6}$/i.test(b)||/^#[0-9a-f]{8}$/i.test(b)||/^#[0-9a-f]{3}$/i.test(b)||/^#[0-9a-f]{4}$/i.test(b))},a.escapeRegExpCharacters=function(b){return b.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},a.CachedFn=class{constructor(b){this.fn=b,this.cache=new Map}get(b){if(this.cache.has(b))return this.cache.get(b);const v=this.fn(b);return this.cache.set(b,v),v}},a.performanceNow=typeof performance>"u"?function(){return Date.now()}:function(){return performance.now()}}},ie={};return function J(a){var A=ie[a];if(void 0!==A)return A.exports;var S=ie[a]={exports:{}};return ye[a].call(S.exports,S,S.exports,J),S.exports}(787)})()},17786:(Pe,ve,M)=>{"use strict";M.r(ve),M.d(ve,{ITextMateTokenizationService:()=>J.n,default:()=>Ve});var ee=M(58054),B=M(55885),ie=(M(87708),M(72967)),J=M(60281),a=M(21462),A=M(6418),S=M(13686),I=M(88632),b=M(86810),v=M(12997),h=M(29175),p=M(85003),L=M(84621),d=M(70473),_=M(93358),k=M(87808),m=M(49698),u=M(58892),c=M(12829),y=M(31719),l=M(51288),e=M(82344),n=M(99740),s=M(51776),t=M(7003),r=M(9590),i=M(13683),g=M(49038);class P extends v.JT{constructor(o,f,C,N,R=(()=>!1)){super(),this._grammar=o,this._initialState=f,this._containsEmbeddedLanguages=C,this._createBackgroundTokenizer=N,this._backgroundTokenizerShouldOnlyVerifyTokens=R,this._seenLanguages=[],this._onDidEncounterLanguage=this._register(new i.Q5),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event}get backgroundTokenizerShouldOnlyVerifyTokens(){return this._backgroundTokenizerShouldOnlyVerifyTokens()}getInitialState(){return this._initialState}tokenize(o,f,C){throw new Error("Not supported!")}createBackgroundTokenizer(o,f){if(this._createBackgroundTokenizer)return this._createBackgroundTokenizer(o,f)}tokenizeEncoded(o,f,C){const N=this._grammar.tokenizeLine2(o,C,500);if(N.stoppedEarly)return console.warn(`Time limit reached when tokenizing line: ${o.substring(0,100)}`),new k.DI(N.tokens,C);if(this._containsEmbeddedLanguages){const T=this._seenLanguages,O=N.tokens;for(let E=0,G=O.length>>>1;E<G;E++){const q=g.N.getLanguageId(O[1+(E<<1)]);T[q]||(T[q]=!0,this._onDidEncounterLanguage.fire(q))}}let R;return R=C.equals(N.ruleStack)?C:N.ruleStack,new k.DI(N.tokens,R)}}var w=M(78380);class D extends v.JT{get backgroundTokenizerShouldOnlyVerifyTokens(){return this._actual.backgroundTokenizerShouldOnlyVerifyTokens}constructor(o,f,C){super(),this._encodedLanguageId=o,this._actual=f,this._maxTokenizationLineLength=C,this._register((0,p.$g)(this._maxTokenizationLineLength))}getInitialState(){return this._actual.getInitialState()}tokenize(o,f,C){throw new Error("Not supported!")}tokenizeEncoded(o,f,C){return o.length>=this._maxTokenizationLineLength.get()?(0,w.Dy)(this._encodedLanguageId,C):this._actual.tokenizeEncoded(o,f,C)}createBackgroundTokenizer(o,f){if(this._actual.createBackgroundTokenizer)return this._actual.createBackgroundTokenizer(o,f)}}var j=M(58535),Q=M(87495),K=M(23384),z=M(90290),Z=M(79858),te=M(17324),Y=M(98969),V=M(47006),U=M(84761),H=M(6232),oe=M(11194);class x{constructor(o){this.edits=o.slice().sort((0,S.tT)(f=>f.offset,S.fv))}applyToArray(o){for(let f=this.edits.length-1;f>=0;f--){const C=this.edits[f];o.splice(C.offset,C.length,...new Array(C.newLength))}}}class X{constructor(o,f,C){this.offset=o,this.length=f,this.newLength=C}toString(){return`[${this.offset}, +${this.length}) -> +${this.newLength}}`}}class W{static fromMany(o){const f=o.map(C=>new W(C));return new se(f)}constructor(o){this.transformation=o,this.idx=0,this.offset=0}transform(o){let f=this.transformation.edits[this.idx];for(;f&&f.offset+f.length<=o;)this.offset+=f.newLength-f.length,this.idx++,f=this.transformation.edits[this.idx];if(!(f&&f.offset<=o))return o+this.offset}}class se{constructor(o){this.transformers=o}transform(o){for(const f of this.transformers){const C=f.transform(o);if(void 0===C)return;o=C}return o}}var he=M(53012);class Ce extends v.JT{constructor(o,f,C,N,R,T,O){super(),this._model=o,this._worker=f,this._languageIdCodec=C,this._backgroundTokenizationStore=N,this._initialState=R,this._configurationService=T,this._maxTokenizationLineLength=O,this._pendingChanges=[],this._states=new H.fl,this._loggingEnabled=function _e($,o,f){return(0,p.rD)(C=>f.onDidChangeConfiguration(N=>{N.affectsConfiguration($)&&C(N)}),()=>f.getValue($)??o)}("editor.experimental.asyncTokenizationLogging",!1,this._configurationService),this._register((0,p.$g)(this._loggingEnabled)),this._register(this._model.onDidChangeContent(F=>{this.shouldLog&&console.log("model change",{fileName:this._model.uri.fsPath.split("\\").pop(),changes:ae(F.changes)}),this._worker.acceptModelChanged(this._model.uri.toString(),F),this._pendingChanges.push(F)})),this._register(this._model.onDidChangeLanguage(F=>{const q=this._model.getLanguageId(),fe=this._languageIdCodec.encodeLanguageId(q);this._worker.acceptModelLanguageChanged(this._model.uri.toString(),q,fe)}));const E=this._model.getLanguageId(),G=this._languageIdCodec.encodeLanguageId(E);this._worker.acceptNewModel({uri:this._model.uri,versionId:this._model.getVersionId(),lines:this._model.getLinesContent(),EOL:this._model.getEOL(),languageId:E,encodedLanguageId:G,maxTokenizationLineLength:this._maxTokenizationLineLength.get()}),this._register((0,p.EH)("update maxTokenizationLineLength",F=>{const q=this._maxTokenizationLineLength.read(F);this._worker.acceptMaxTokenizationLineLength(this._model.uri.toString(),q)}))}get shouldLog(){return this._loggingEnabled.get()}dispose(){super.dispose(),this._worker.acceptRemovedModel(this._model.uri.toString())}setTokensAndStates(o,f,C){let N=oe.N.deserialize(new Uint8Array(f));if(this.shouldLog&&console.log("received background tokenization result",{fileName:this._model.uri.fsPath.split("\\").pop(),updatedTokenLines:N.map(T=>T.getLineRange()).join(" & "),updatedStateLines:C.map(T=>new V.z(T.startLineNumber,T.startLineNumber+T.stateDeltas.length).toString()).join(" & ")}),this.shouldLog){const T=this._pendingChanges.filter(O=>O.versionId<=o).map(O=>O.changes).map(O=>ae(O)).join(" then ");console.log("Applying changes to local states",T)}for(;this._pendingChanges.length>0&&this._pendingChanges[0].versionId<=o;){const T=this._pendingChanges.shift();this._states.acceptChanges(T.changes)}if(this._pendingChanges.length>0){if(this.shouldLog){const E=this._pendingChanges.map(G=>G.changes).map(G=>ae(G)).join(" then ");console.log("Considering non-processed changes",E)}const T=W.fromMany(this._pendingChanges.map(E=>de(E.changes))),O=new oe.N;for(const E of N)for(let G=E.startLineNumber;G<=E.endLineNumber;G++)void 0!==T.transform(G-1)&&O.add(G,E.getLineTokens(G));N=O.finalize();for(const E of this._pendingChanges)for(const G of E.changes)for(let F=0;F<N.length;F++)N[F].applyEdit(G.range,G.text)}const R=W.fromMany(this._pendingChanges.map(T=>de(T.changes)));for(const T of C){let O=T.startLineNumber<=1?this._initialState:this._states.getEndState(T.startLineNumber-1);for(let E=0;E<T.stateDeltas.length;E++){const G=T.stateDeltas[E];let F;G?(F=(0,he.applyStateStackDiff)(O,G),this._states.setEndState(T.startLineNumber+E,F)):F=this._states.getEndState(T.startLineNumber+E);const q=R.transform(T.startLineNumber+E-1);void 0!==q&&this._backgroundTokenizationStore.setEndState(q+1,F),T.startLineNumber+E>=this._model.getLineCount()-1&&this._backgroundTokenizationStore.backgroundTokenizationFinished(),O=F}}this._backgroundTokenizationStore.setTokens(N)}}function de($){return new x($.map(o=>new X(o.range.startLineNumber-1,o.range.endLineNumber-o.range.startLineNumber+1,(0,Y.Q)(o.text)[0]+1)))}function ae($){return $.map(o=>U.e.lift(o.range).toString()+" => "+o.text).join(" & ")}let ce=class we{constructor(o,f,C,N,R,T,O,E){this._extensionResourceLoaderService=o,this._modelService=f,this._languageConfigurationService=C,this._configurationService=N,this._languageService=R,this._environmentService=T,this._notificationService=O,this._telemetryService=E,this._workerProxyPromise=null,this._worker=null,this._workerProxy=null,this._workerTokenizerControllers=new Map,this._currentTheme=null,this._currentTokenColorMap=null,this._grammarDefinitions=[]}setGrammarDefinitions(o){this._grammarDefinitions=o,this._killWorker()}dispose(){this._killWorker()}acceptTheme(o,f){this._currentTheme=o,this._currentTokenColorMap=f,this._currentTheme&&this._currentTokenColorMap&&this._workerProxy&&this._workerProxy.acceptTheme(this._currentTheme,this._currentTokenColorMap)}getWorkerProxy(){return this._workerProxyPromise||(this._workerProxyPromise=this.createWorkerProxy()),this._workerProxyPromise}createWorkerProxy(){var o=this;return(0,ee.Z)(function*(){const f=`${h.zI}/vscode-textmate`,C=`${h.SC}/vscode-textmate`,N=`${h.zI}/vscode-oniguruma`,R=`${h.SC}/vscode-oniguruma`,T=o._environmentService.isBuilt&&!L.$L,E=T?R:N,F=`${E}/release/main.js`,q=`${E}/release/onig.wasm`,fe=h.Gi.asBrowserUri(`${T?C:f}/release/main.js`).toString(!0),Ke={grammarDefinitions:o._grammarDefinitions,textmateMainUri:fe,onigurumaMainUri:h.Gi.asBrowserUri(F).toString(!0),onigurumaWASMUri:h.Gi.asBrowserUri(q).toString(!0)},Ie=(0,Q.j)(o._modelService,o._languageConfigurationService,{createData:Ke,label:"textMateWorker",moduleId:"vs/workbench/services/textMate/browser/worker/textMate.worker",host:o});o._worker=Ie;const Ee=yield Ie.getProxy();return o._worker!==Ie?null:(o._workerProxy=Ee,o._currentTheme&&o._currentTokenColorMap&&o._workerProxy.acceptTheme(o._currentTheme,o._currentTokenColorMap),Ee)})()}_killWorker(){for(const o of this._workerTokenizerControllers.values())o.dispose();this._workerTokenizerControllers.clear(),this._worker&&(this._worker.dispose(),this._worker=null),this._workerProxy=null,this._workerProxyPromise=null}createBackgroundTokenizer(o,f,C){if(this._workerTokenizerControllers.has(o.uri.toString()))throw new b.he;if(!0!==this._configurationService.getValue("editor.experimental.asyncTokenization")||o.isTooLargeForSyncing())return;const R=new v.SL;return this.getWorkerProxy().then(T=>{R.isDisposed||!T||R.add(function pe($,o){const f=new v.SL,C=f.add(new v.SL);function N(){$.isAttachedToEditor()?C.add(o()):C.clear()}return N(),f.add($.onDidChangeAttached(()=>{N()})),f}(o,()=>{const O=new Ce(o,T,this._languageService.languageIdCodec,f,he.INITIAL,this._configurationService,C);return this._workerTokenizerControllers.set(o.uri.toString(),O),(0,v.OF)(()=>{this._workerTokenizerControllers.delete(o.uri.toString()),O.dispose()})}))}),{dispose(){R.dispose()},requestTokens:(T,O)=>{this.getWorkerProxy().then(E=>{E?.retokenize(o.uri.toString(),T,O)})},reportMismatchingTokens:T=>{we._reportedMismatchingTokens||(we._reportedMismatchingTokens=!0,this._notificationService.error({message:"Async Tokenization Token Mismatch in line "+T,name:"Async Tokenization Token Mismatch"}),this._telemetryService.publicLog2("asyncTokenizationMismatchingTokens",{}))}}}readFile(o){var f=this;return(0,ee.Z)(function*(){const C=j.ov.revive(o);return f._extensionResourceLoaderService.readExtensionResource(C)})()}setTokensAndStates(o,f,C,N){var R=this;return(0,ee.Z)(function*(){const T=j.ov.revive(o),O=R._workerTokenizerControllers.get(T.toString());O&&O.setTokensAndStates(f,C,N)})()}};ce._reportedMismatchingTokens=!1,ce=(0,B.gn)([(0,B.fM)(0,l.S),(0,B.fM)(1,z.q),(0,B.fM)(2,K.c_),(0,B.fM)(3,y.Ui),(0,B.fM)(4,m.O),(0,B.fM)(5,Z.Y),(0,B.fM)(6,s.lT),(0,B.fM)(7,te.bU)],ce);class me{constructor(){this._scopeNameToLanguageRegistration=Object.create(null)}reset(){this._scopeNameToLanguageRegistration=Object.create(null)}register(o){if(this._scopeNameToLanguageRegistration[o.scopeName]){const f=this._scopeNameToLanguageRegistration[o.scopeName];d.Xy(f.location,o.location)||console.warn(`Overwriting grammar scope name to file mapping for scope ${o.scopeName}.\nOld grammar file: ${f.location.toString()}.\nNew grammar file: ${o.location.toString()}`)}this._scopeNameToLanguageRegistration[o.scopeName]=o}getGrammarDefinition(o){return this._scopeNameToLanguageRegistration[o]||null}}const re="No TM Grammar registered for this language.";class ne extends v.JT{constructor(o,f,C,N){var R,T;super(),R=this,this._host=o,this._initialState=C.INITIAL,this._scopeRegistry=new me,this._injections={},this._injectedEmbeddedLanguages={},this._languageToScope=new Map,this._grammarRegistry=this._register(new C.Registry({onigLib:N,loadGrammar:(T=(0,ee.Z)(function*(O){const E=R._scopeRegistry.getGrammarDefinition(O);if(!E)return R._host.logTrace(`No grammar found for scope ${O}`),null;const G=E.location;try{const F=yield R._host.readFile(G);return C.parseRawGrammar(F,G.path)}catch(F){return R._host.logError(`Unable to load and parse grammar for scope ${O} from ${G}`,F),null}}),function(E){return T.apply(this,arguments)}),getInjections:T=>{const O=T.split(".");let E=[];for(let G=1;G<=O.length;G++){const F=O.slice(0,G).join(".");E=[...E,...this._injections[F]||[]]}return E}}));for(const T of f){if(this._scopeRegistry.register(T),T.injectTo){for(const O of T.injectTo){let E=this._injections[O];E||(this._injections[O]=E=[]),E.push(T.scopeName)}if(T.embeddedLanguages)for(const O of T.injectTo){let E=this._injectedEmbeddedLanguages[O];E||(this._injectedEmbeddedLanguages[O]=E=[]),E.push(T.embeddedLanguages)}}T.language&&this._languageToScope.set(T.language,T.scopeName)}}has(o){return this._languageToScope.has(o)}setTheme(o,f){this._grammarRegistry.setTheme(o,f)}getColorMap(){return this._grammarRegistry.getColorMap()}createGrammar(o,f){var C=this;return(0,ee.Z)(function*(){const N=C._languageToScope.get(o);if("string"!=typeof N)throw new Error(re);const R=C._scopeRegistry.getGrammarDefinition(N);if(!R)throw new Error(re);const T=R.embeddedLanguages;if(C._injectedEmbeddedLanguages[N]){const G=C._injectedEmbeddedLanguages[N];for(const F of G)for(const q of Object.keys(F))T[q]=F[q]}const O=Object.keys(T).length>0;let E;try{E=yield C._grammarRegistry.loadGrammarWithConfiguration(N,f,{embeddedLanguages:T,tokenTypes:R.tokenTypes,balancedBracketSelectors:R.balancedBracketSelectors,unbalancedBracketSelectors:R.unbalancedBracketSelectors})}catch(G){throw G.message&&G.message.startsWith("No grammar provided for")?new Error(re):G}return{languageId:o,grammar:E,initialState:C._initialState,containsEmbeddedLanguages:O}})()}}var le=M(8155),Te=M(23730);const ue=le.ut.registerExtensionPoint({extensionPoint:"grammars",deps:[Te.O],jsonSchema:{description:c.NC("vscode.extension.contributes.grammars","Contributes textmate tokenizers."),type:"array",defaultSnippets:[{body:[{language:"${1:id}",scopeName:"source.${2:id}",path:"./syntaxes/${3:id}.tmLanguage."}]}],items:{type:"object",defaultSnippets:[{body:{language:"${1:id}",scopeName:"source.${2:id}",path:"./syntaxes/${3:id}.tmLanguage."}}],properties:{language:{description:c.NC("vscode.extension.contributes.grammars.language","Language identifier for which this syntax is contributed to."),type:"string"},scopeName:{description:c.NC("vscode.extension.contributes.grammars.scopeName","Textmate scope name used by the tmLanguage file."),type:"string"},path:{description:c.NC("vscode.extension.contributes.grammars.path","Path of the tmLanguage file. The path is relative to the extension folder and typically starts with './syntaxes/'."),type:"string"},embeddedLanguages:{description:c.NC("vscode.extension.contributes.grammars.embeddedLanguages","A map of scope name to language id if this grammar contains embedded languages."),type:"object"},tokenTypes:{description:c.NC("vscode.extension.contributes.grammars.tokenTypes","A map of scope name to token types."),type:"object",additionalProperties:{enum:["string","comment","other"]}},injectTo:{description:c.NC("vscode.extension.contributes.grammars.injectTo","List of language scope names to which this grammar is injected to."),type:"array",items:{type:"string"}},balancedBracketScopes:{description:c.NC("vscode.extension.contributes.grammars.balancedBracketScopes","Defines which scope names contain balanced brackets."),type:"array",items:{type:"string"},default:["*"]},unbalancedBracketScopes:{description:c.NC("vscode.extension.contributes.grammars.unbalancedBracketScopes","Defines which scope names do not contain balanced brackets."),type:"array",items:{type:"string"},default:[]}},required:["scopeName","path"]}}});var Se=M(41436);let Le=class extends v.JT{constructor(o,f,C,N,R,T,O,E,G){super(),this._languageService=o,this._themeService=f,this._extensionResourceLoaderService=C,this._notificationService=N,this._logService=R,this._configurationService=T,this._progressService=O,this._environmentService=E,this._instantiationService=G,this._createdModes=[],this._encounteredLanguages=[],this._debugMode=!1,this._debugModePrintFunc=()=>{},this._grammarDefinitions=null,this._grammarFactory=null,this._tokenizersRegistrations=new v.SL,this._currentTheme=null,this._currentTokenColorMap=null,this._workerHost=this._instantiationService.createInstance(ce),this._vscodeOniguruma=null,this._styleElement=A.dS(),this._styleElement.className="vscode-tokens-styles",ue.setHandler(F=>this.handleGrammarsExtPoint(F)),this._updateTheme(this._themeService.getColorTheme(),!0),this._register(this._themeService.onDidColorThemeChange(()=>{this._updateTheme(this._themeService.getColorTheme(),!1)})),this._languageService.onDidRequestRichLanguageFeatures(F=>{this._createdModes.push(F)})}handleGrammarsExtPoint(o){this._grammarDefinitions=null,this._grammarFactory&&(this._grammarFactory.dispose(),this._grammarFactory=null),this._tokenizersRegistrations.clear(),this._grammarDefinitions=[];for(const f of o){const C=f.value;for(const N of C){const R=this.createValidGrammarDefinition(f,N);if(R&&(this._grammarDefinitions.push(R),R.language)){const T=new k.MO(()=>this.createTokenizationSupport(R.language));this._tokenizersRegistrations.add(T),this._tokenizersRegistrations.add(k.RW.registerFactory(R.language,T))}}}this._workerHost.setGrammarDefinitions(this._grammarDefinitions);for(const f of this._createdModes)k.RW.getOrCreate(f)}createValidGrammarDefinition(o,f){if(!function ke($,o,f,C){if(o.language&&("string"!=typeof o.language||!C.isRegisteredLanguageId(o.language)))return f.error(c.NC("invalid.language","Unknown language in `contributes.{0}.language`. Provided value: {1}",ue.name,String(o.language))),!1;if(!o.scopeName||"string"!=typeof o.scopeName)return f.error(c.NC("invalid.scopeName","Expected string in `contributes.{0}.scopeName`. Provided value: {1}",ue.name,String(o.scopeName))),!1;if(!o.path||"string"!=typeof o.path)return f.error(c.NC("invalid.path.0","Expected string in `contributes.{0}.path`. Provided value: {1}",ue.name,String(o.path))),!1;if(o.injectTo&&(!Array.isArray(o.injectTo)||o.injectTo.some(R=>"string"!=typeof R)))return f.error(c.NC("invalid.injectTo","Invalid value in `contributes.{0}.injectTo`. Must be an array of language scope names. Provided value: {1}",ue.name,JSON.stringify(o.injectTo))),!1;if(o.embeddedLanguages&&!_.Kn(o.embeddedLanguages))return f.error(c.NC("invalid.embeddedLanguages","Invalid value in `contributes.{0}.embeddedLanguages`. Must be an object map from scope name to language. Provided value: {1}",ue.name,JSON.stringify(o.embeddedLanguages))),!1;if(o.tokenTypes&&!_.Kn(o.tokenTypes))return f.error(c.NC("invalid.tokenTypes","Invalid value in `contributes.{0}.tokenTypes`. Must be an object map from scope name to token type. Provided value: {1}",ue.name,JSON.stringify(o.tokenTypes))),!1;const N=d.Vo($,o.path);return d.KM(N,$)||f.warn(c.NC("invalid.path.1","Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.",ue.name,N.path,$.path)),!0}(o.description.extensionLocation,f,o.collector,this._languageService))return null;const C=d.Vo(o.description.extensionLocation,f.path),N=Object.create(null);if(f.embeddedLanguages){const E=Object.keys(f.embeddedLanguages);for(let G=0,F=E.length;G<F;G++){const q=E[G],fe=f.embeddedLanguages[q];"string"==typeof fe&&this._languageService.isRegisteredLanguageId(fe)&&(N[q]=this._languageService.languageIdCodec.encodeLanguageId(fe))}}const R=Object.create(null);if(f.tokenTypes){const E=Object.keys(f.tokenTypes);for(const G of E)switch(f.tokenTypes[G]){case"string":R[G]=2;break;case"other":R[G]=0;break;case"comment":R[G]=1}}let T=null;function O(E,G){return Array.isArray(E)&&E.every(F=>"string"==typeof F)?E:G}return f.language&&this._languageService.isRegisteredLanguageId(f.language)&&(T=f.language),{location:C,language:T||void 0,scopeName:f.scopeName,embeddedLanguages:N,tokenTypes:R,injectTo:f.injectTo,balancedBracketSelectors:O(f.balancedBracketScopes,["*"]),unbalancedBracketSelectors:O(f.unbalancedBracketScopes,[])}}startDebugMode(o,f){this._debugMode?this._notificationService.error(c.NC("alreadyDebugging","Already Logging.")):(this._debugModePrintFunc=o,this._debugMode=!0,this._debugMode&&this._progressService.withProgress({location:15,buttons:[c.NC("stop","Stop")]},C=>(C.report({message:c.NC("progress1","Preparing to log TM Grammar parsing. Press Stop when finished.")}),this._getVSCodeOniguruma().then(N=>(N.setDefaultDebugCall(!0),C.report({message:c.NC("progress2","Now logging TM Grammar parsing. Press Stop when finished.")}),new Promise((R,T)=>{})))),C=>{this._getVSCodeOniguruma().then(N=>{this._debugModePrintFunc=()=>{},this._debugMode=!1,N.setDefaultDebugCall(!1),f()})}))}_canCreateGrammarFactory(){return!!this._grammarDefinitions}_getOrCreateGrammarFactory(){var o=this;return(0,ee.Z)(function*(){if(o._grammarFactory)return o._grammarFactory;const[f,C]=yield Promise.all([Promise.resolve().then(M.t.bind(M,53012,19)).then(R=>R.default??R),o._getVSCodeOniguruma()]),N=Promise.resolve({createOnigScanner:R=>C.createOnigScanner(R),createOnigString:R=>C.createOnigString(R)});return o._grammarFactory||(o._grammarFactory=new ne({logTrace:R=>o._logService.trace(R),logError:(R,T)=>o._logService.error(R,T),readFile:R=>o._extensionResourceLoaderService.readExtensionResource(R)},o._grammarDefinitions||[],f,N),o._updateTheme(o._themeService.getColorTheme(),!0)),o._grammarFactory})()}createTokenizationSupport(o){var f=this;return(0,ee.Z)(function*(){if(!f._languageService.isRegisteredLanguageId(o)||!f._canCreateGrammarFactory())return null;try{const C=yield f._getOrCreateGrammarFactory();if(!C.has(o))return null;const N=f._languageService.languageIdCodec.encodeLanguageId(o),R=yield C.createGrammar(o,N);if(!R.grammar)return null;const T=function xe($,o,f,C){return(0,p.rD)(N=>C.onDidChangeConfiguration(R=>{R.affectsConfiguration($,{overrideIdentifier:o})&&N(R)}),()=>C.getValue($,{overrideIdentifier:o})??f)}("editor.maxTokenizationLineLength",o,-1,f._configurationService),O=new P(R.grammar,R.initialState,R.containsEmbeddedLanguages,(E,G)=>f._workerHost.createBackgroundTokenizer(E,G,T),()=>f._configurationService.getValue("editor.experimental.asyncTokenizationVerification"));return O.onDidEncounterLanguage(E=>{if(!f._encounteredLanguages[E]){const G=f._languageService.languageIdCodec.decodeLanguageId(E);f._encounteredLanguages[E]=!0,f._languageService.requestBasicLanguageFeatures(G)}}),new D(N,O,T)}catch(C){return C.message&&C.message===re||(0,b.dL)(C),null}})()}_updateTheme(o,f){if(!f&&this._currentTheme&&this._currentTokenColorMap&&function Ne($,o){if(!o||!$||o.length!==$.length)return!1;for(let f=o.length-1;f>=0;f--){const C=o[f],N=$[f];if(C.scope!==N.scope)return!1;const R=C.settings,T=N.settings;if(R&&T){if(R.fontStyle!==T.fontStyle||R.foreground!==T.foreground||R.background!==T.background)return!1}else if(!R||!T)return!1}return!0}(this._currentTheme.settings,o.tokenColors)&&(0,S.fS)(this._currentTokenColorMap,o.tokenColorMap))return;this._currentTheme={name:o.label,settings:o.tokenColors},this._currentTokenColorMap=o.tokenColorMap,this._grammarFactory?.setTheme(this._currentTheme,this._currentTokenColorMap);const C=function Re($){const o=[null];for(let f=1,C=$.length;f<C;f++)o[f]=I.Il.fromHex($[f]);return o}(this._currentTokenColorMap),N=(0,u.yr)(C);this._styleElement.textContent=N,k.RW.setColorMap(C),this._currentTheme&&this._currentTokenColorMap&&this._workerHost.acceptTheme(this._currentTheme,this._currentTokenColorMap)}createGrammar(o){var f=this;return(0,ee.Z)(function*(){if(!f._languageService.isRegisteredLanguageId(o))return null;const C=yield f._getOrCreateGrammarFactory();if(!C.has(o))return null;const N=f._languageService.languageIdCodec.encodeLanguageId(o),{grammar:R}=yield C.createGrammar(o,N);return R})()}_getVSCodeOniguruma(){var o=this;return this._vscodeOniguruma||(this._vscodeOniguruma=(0,ee.Z)(function*(){const[f,C]=yield Promise.all([M.e(49).then(M.t.bind(M,26049,19)).then(N=>N.default??N),o._loadVSCodeOnigurumaWASM()]);return yield f.loadWASM({data:C,print:N=>{o._debugModePrintFunc(N)}}),f})()),this._vscodeOniguruma}_loadVSCodeOnigurumaWASM(){var o=this;return(0,ee.Z)(function*(){return L.$L?yield(yield fetch(h.Gi.asBrowserUri("vscode-oniguruma/../onig.wasm").toString(!0))).arrayBuffer():yield fetch(o._environmentService.isBuilt?h.Gi.asBrowserUri(`${h.No}/vscode-oniguruma/release/onig.wasm`).toString(!0):h.Gi.asBrowserUri(`${h.zI}/vscode-oniguruma/release/onig.wasm`).toString(!0))})()}};Le=(0,B.gn)([(0,B.fM)(0,m.O),(0,B.fM)(1,Se.Dc),(0,B.fM)(2,l.S),(0,B.fM)(3,s.lT),(0,B.fM)(4,n.VZ),(0,B.fM)(5,y.Ui),(0,B.fM)(6,t.R9),(0,B.fM)(7,r.n),(0,B.fM)(8,e.TG)],Le);var be=M(81025);const ge=(0,be.Cg)(),Oe=le.ut.registerExtensionPoint({extensionPoint:"semanticTokenTypes",jsonSchema:{description:c.NC("contributes.semanticTokenTypes","Contributes semantic token types."),type:"array",items:{type:"object",properties:{id:{type:"string",description:c.NC("contributes.semanticTokenTypes.id","The identifier of the semantic token type"),pattern:be.dY,patternErrorMessage:c.NC("contributes.semanticTokenTypes.id.format","Identifiers should be in the form letterOrDigit[_-letterOrDigit]*")},superType:{type:"string",description:c.NC("contributes.semanticTokenTypes.superType","The super type of the semantic token type"),pattern:be.dY,patternErrorMessage:c.NC("contributes.semanticTokenTypes.superType.format","Super types should be in the form letterOrDigit[_-letterOrDigit]*")},description:{type:"string",description:c.NC("contributes.color.description","The description of the semantic token type")}}}}}),De=le.ut.registerExtensionPoint({extensionPoint:"semanticTokenModifiers",jsonSchema:{description:c.NC("contributes.semanticTokenModifiers","Contributes semantic token modifiers."),type:"array",items:{type:"object",properties:{id:{type:"string",description:c.NC("contributes.semanticTokenModifiers.id","The identifier of the semantic token modifier"),pattern:be.dY,patternErrorMessage:c.NC("contributes.semanticTokenModifiers.id.format","Identifiers should be in the form letterOrDigit[_-letterOrDigit]*")},description:{description:c.NC("contributes.semanticTokenModifiers.description","The description of the semantic token modifier")}}}}}),Ge=le.ut.registerExtensionPoint({extensionPoint:"semanticTokenScopes",jsonSchema:{description:c.NC("contributes.semanticTokenScopes","Contributes semantic token scope maps."),type:"array",items:{type:"object",properties:{language:{description:c.NC("contributes.semanticTokenScopes.languages","Lists the languge for which the defaults are."),type:"string"},scopes:{description:c.NC("contributes.semanticTokenScopes.scopes","Maps a semantic token (described by semantic token selector) to one or more textMate scopes used to represent that token."),type:"object",additionalProperties:{type:"array",items:{type:"string"}}}}}}});class je{constructor(){function o(f,C,N){if("string"!=typeof f.id||0===f.id.length)return N.error(c.NC("invalid.id","'configuration.{0}.id' must be defined and can not be empty",C)),!1;if(!f.id.match(be.dY))return N.error(c.NC("invalid.id.format","'configuration.{0}.id' must follow the pattern letterOrDigit[-_letterOrDigit]*",C)),!1;const R=f.superType;return R&&!R.match(be.dY)?(N.error(c.NC("invalid.superType.format","'configuration.{0}.superType' must follow the pattern letterOrDigit[-_letterOrDigit]*",C)),!1):"string"==typeof f.description&&0!==f.id.length||(N.error(c.NC("invalid.description","'configuration.{0}.description' must be defined and can not be empty",C)),!1)}Oe.setHandler((f,C)=>{for(const N of C.added){const R=N.value,T=N.collector;if(!R||!Array.isArray(R))return void T.error(c.NC("invalid.semanticTokenTypeConfiguration","'configuration.semanticTokenType' must be an array"));for(const O of R)o(O,"semanticTokenType",T)&&ge.registerTokenType(O.id,O.description,O.superType)}for(const N of C.removed){const R=N.value;for(const T of R)ge.deregisterTokenType(T.id)}}),De.setHandler((f,C)=>{for(const N of C.added){const R=N.value,T=N.collector;if(!R||!Array.isArray(R))return void T.error(c.NC("invalid.semanticTokenModifierConfiguration","'configuration.semanticTokenModifier' must be an array"));for(const O of R)o(O,"semanticTokenModifier",T)&&ge.registerTokenModifier(O.id,O.description)}for(const N of C.removed){const R=N.value;for(const T of R)ge.deregisterTokenModifier(T.id)}}),Ge.setHandler((f,C)=>{for(const N of C.added){const R=N.value,T=N.collector;if(!R||!Array.isArray(R))return void T.error(c.NC("invalid.semanticTokenScopes.configuration","'configuration.semanticTokenScopes' must be an array"));for(const O of R)if(O.language&&"string"!=typeof O.language)T.error(c.NC("invalid.semanticTokenScopes.language","'configuration.semanticTokenScopes.language' must be a string"));else if(O.scopes&&"object"==typeof O.scopes)for(const E in O.scopes){const G=O.scopes[E];if(Array.isArray(G)&&!G.some(F=>"string"!=typeof F))try{const F=ge.parseTokenSelector(E,O.language);ge.registerTokenStyleDefault(F,{scopesToProbe:G.map(q=>q.split(" "))})}catch{T.error(c.NC("invalid.semanticTokenScopes.scopes.selector","configuration.semanticTokenScopes.scopes': Problems parsing selector {0}.",E))}else T.error(c.NC("invalid.semanticTokenScopes.scopes.value","'configuration.semanticTokenScopes.scopes' values must be an array of strings"))}else T.error(c.NC("invalid.semanticTokenScopes.scopes","'configuration.semanticTokenScopes.scopes' must be defined as an object"))}for(const N of C.removed){const R=N.value;for(const T of R)for(const O in T.scopes){const E=T.scopes[O];try{const G=ge.parseTokenSelector(O,T.language);ge.registerTokenStyleDefault(G,{scopesToProbe:E.map(F=>F.split(" "))})}catch{}}}})}}var Be=M(94014),Fe=M(33562),$e=M(89488);const Me=M.p+"25dd2e6f4f6bb57b.wasm";var ze=M(17653),We=M(25324);(0,M(99460).l)({"vscode-oniguruma/../onig.wasm":Me,"vs/../../node_modules/vscode-oniguruma/release/onig.wasm":Me}),(0,We.Fg)(function(){var $=(0,ee.Z)(function*(o){o.get($e.g).when(2).then(()=>{ie.IO.get(J.n)})});return function(o){return $.apply(this,arguments)}}());let Ae=class{constructor(o){this.instantiationService=o,this.instantiationService.createInstance(je)}};function Ve(){return{...(0,ze.default)(),[J.n.toString()]:new a.M(Le)}}Ae=(0,B.gn)([(0,B.fM)(0,e.TG)],Ae),Fe.B.as(Be.I.Workbench).registerWorkbenchContribution(Ae,1)},23730:(Pe,ve,M)=>{"use strict";M.d(ve,{O:()=>h,t:()=>p});var ee=M(55885),B=M(12829),ye=M(37089),ie=M(70473),J=M(71774),a=M(31719),A=M(79858),S=M(17088),I=M(69486),b=M(8155),v=M(99740);const h=b.ut.registerExtensionPoint({extensionPoint:"languages",jsonSchema:{description:(0,B.NC)("vscode.extension.contributes.languages","Contributes language declarations."),type:"array",items:{type:"object",defaultSnippets:[{body:{id:"${1:languageId}",aliases:["${2:label}"],extensions:["${3:extension}"],configuration:"./language-configuration.json"}}],properties:{id:{description:(0,B.NC)("vscode.extension.contributes.languages.id","ID of the language."),type:"string"},aliases:{description:(0,B.NC)("vscode.extension.contributes.languages.aliases","Name aliases for the language."),type:"array",items:{type:"string"}},extensions:{description:(0,B.NC)("vscode.extension.contributes.languages.extensions","File extensions associated to the language."),default:[".foo"],type:"array",items:{type:"string"}},filenames:{description:(0,B.NC)("vscode.extension.contributes.languages.filenames","File names associated to the language."),type:"array",items:{type:"string"}},filenamePatterns:{description:(0,B.NC)("vscode.extension.contributes.languages.filenamePatterns","File name glob patterns associated to the language."),type:"array",items:{type:"string"}},mimetypes:{description:(0,B.NC)("vscode.extension.contributes.languages.mimetypes","Mime types associated to the language."),type:"array",items:{type:"string"}},firstLine:{description:(0,B.NC)("vscode.extension.contributes.languages.firstLine","A regular expression matching the first line of a file of the language."),type:"string"},configuration:{description:(0,B.NC)("vscode.extension.contributes.languages.configuration","A relative path to a file containing configuration options for the language."),type:"string",default:"./language-configuration.json"},icon:{type:"object",description:(0,B.NC)("vscode.extension.contributes.languages.icon","A icon to use as file icon, if no icon theme provides one for the language."),properties:{light:{description:(0,B.NC)("vscode.extension.contributes.languages.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:(0,B.NC)("vscode.extension.contributes.languages.icon.dark","Icon path when a dark theme is used"),type:"string"}}}}}},activationEventsGenerator:(_,k)=>{for(const m of _)m.id&&m.configuration&&k.push(`onLanguage:${m.id}`)}});let p=class extends J.T{constructor(k,m,u,c){super(u.verbose||u.isExtensionDevelopment||!u.isBuilt),this.logService=c,this._configurationService=m,this._extensionService=k,h.setHandler(y=>{const l=[];for(let e=0,n=y.length;e<n;e++){const s=y[e];if(Array.isArray(s.value))for(let t=0,r=s.value.length;t<r;t++){const i=s.value[t];if(d(i,0,s.collector)){let g;i.configuration&&(g=(0,ie.Vo)(s.description.extensionLocation,i.configuration)),l.push({id:i.id,extensions:i.extensions,filenames:i.filenames,filenamePatterns:i.filenamePatterns,firstLine:i.firstLine,aliases:i.aliases,mimetypes:i.mimetypes,configuration:g,icon:i.icon&&{light:(0,ie.Vo)(s.description.extensionLocation,i.icon.light),dark:(0,ie.Vo)(s.description.extensionLocation,i.icon.dark)}})}}else s.collector.error((0,B.NC)("invalid","Invalid `contributes.{0}`. Expected an array.",h.name))}this._registry.setDynamicLanguages(l)}),this.updateMime(),this._configurationService.onDidChangeConfiguration(y=>{y.affectsConfiguration(S.SK)&&this.updateMime()}),this._extensionService.whenInstalledExtensionsRegistered().then(()=>{this.updateMime()}),this._register(this.onDidRequestRichLanguageFeatures(y=>{this._extensionService.activateByEvent(`onLanguage:${y}`),this._extensionService.activateByEvent("onLanguage")}))}updateMime(){const k=this._configurationService.getValue();(0,ye.Ch)(),k.files?.associations&&Object.keys(k.files.associations).forEach(m=>{const u=k.files.associations[m];if("string"!=typeof u)return void this.logService.warn(`Ignoring configured 'files.associations' for '${m}' because its type is not a string but '${typeof u}'`);const c=this.getMimeType(u)||`text/x-${u}`;(0,ye.QG)({id:u,mime:c,filepattern:m})}),this._onDidChange.fire()}};function L(_){return typeof _>"u"||!!Array.isArray(_)&&_.every(k=>"string"==typeof k)}function d(_,k,m){return _?"string"!=typeof _.id?(m.error((0,B.NC)("require.id","property `{0}` is mandatory and must be of type `string`","id")),!1):L(_.extensions)?L(_.filenames)?typeof _.firstLine<"u"&&"string"!=typeof _.firstLine?(m.error((0,B.NC)("opt.firstLine","property `{0}` can be omitted and must be of type `string`","firstLine")),!1):typeof _.configuration<"u"&&"string"!=typeof _.configuration?(m.error((0,B.NC)("opt.configuration","property `{0}` can be omitted and must be of type `string`","configuration")),!1):L(_.aliases)?L(_.mimetypes)?!(typeof _.icon<"u")||"object"==typeof _.icon&&"string"==typeof _.icon.light&&"string"==typeof _.icon.dark||(m.error((0,B.NC)("opt.icon","property `{0}` can be omitted and must be of type `object` with properties `{1}` and `{2}` of type `string`","icon","light","dark")),!1):(m.error((0,B.NC)("opt.mimetypes","property `{0}` can be omitted and must be of type `string[]`","mimetypes")),!1):(m.error((0,B.NC)("opt.aliases","property `{0}` can be omitted and must be of type `string[]`","aliases")),!1):(m.error((0,B.NC)("opt.filenames","property `{0}` can be omitted and must be of type `string[]`","filenames")),!1):(m.error((0,B.NC)("opt.extensions","property `{0}` can be omitted and must be of type `string[]`","extensions")),!1):(m.error((0,B.NC)("invalid.empty","Empty value for `contributes.{0}`",h.name)),!1)}p=(0,ee.gn)([(0,ee.fM)(0,I.QS),(0,ee.fM)(1,a.Ui),(0,ee.fM)(2,A.Y),(0,ee.fM)(3,v.VZ)],p)}}]);