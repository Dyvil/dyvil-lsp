"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[712],{11712:(kt,pe,f)=>{f.r(pe),f.d(pe,{default:()=>St,updateUserKeybindings:()=>vt});var T=f(58054),ge=(f(87708),f(72967)),X=f(21462),S=f(55885),r=f(12829),q=f(37781),ee=f(26278),j=f(6418),F=f(6262),te=f(26056),I=f(13683),ne=f(44102),Ce=f(66120),b=f(19980),k=f(27365);class ie{static _readModifiers(e){e=e.toLowerCase().trim();let s,d,t=!1,n=!1,i=!1,o=!1;do{s=!1,/^ctrl(\+|\-)/.test(e)&&(t=!0,e=e.substr(5),s=!0),/^shift(\+|\-)/.test(e)&&(n=!0,e=e.substr(6),s=!0),/^alt(\+|\-)/.test(e)&&(i=!0,e=e.substr(4),s=!0),/^meta(\+|\-)/.test(e)&&(o=!0,e=e.substr(5),s=!0),/^win(\+|\-)/.test(e)&&(o=!0,e=e.substr(4),s=!0),/^cmd(\+|\-)/.test(e)&&(o=!0,e=e.substr(4),s=!0)}while(s);const l=e.indexOf(" ");return l>0?(d=e.substring(0,l),e=e.substring(l)):(d=e,e=""),{remains:e,ctrl:t,shift:n,alt:i,meta:o,key:d}}static parseChord(e){const t=this._readModifiers(e),n=t.key.match(/^\[([^\]]+)\]$/);if(n){const s=b.Z5.lowerCaseToEnum(n[1]);return[new k.ae(t.ctrl,t.shift,t.alt,t.meta,s),t.remains]}const i=b.kL.fromUserSettings(t.key);return[new k.$M(t.ctrl,t.shift,t.alt,t.meta,i),t.remains]}static parseKeybinding(e){if(!e)return null;const t=[];let n;for(;e.length>0;)[n,e]=this.parseChord(e),t.push(n);return t.length>0?new k.$5(t):null}}var A=f(12997),be=f(94927),w=f(84621),M=f(70473),C=f(73317),D=f(13141),E=f(76972),oe=f(17088),He=f(36027),Oe=f(44015),je=f(20210),se=f(28759),U=f(24824),P=f(90236),Ke=f(99740),ve=f(51776),re=f(33562),Fe=f(17324),V=f(16003),B=f(8155),Se=f(52786),Ve=f(13686),ae=f(69486);const ke=[{key:"commandPalette",id:C.eH.CommandPalette,description:(0,r.NC)("menus.commandPalette","The Command Palette"),supportsSubmenus:!1},{key:"touchBar",id:C.eH.TouchBarContext,description:(0,r.NC)("menus.touchBar","The touch bar (macOS only)"),supportsSubmenus:!1},{key:"editor/title",id:C.eH.EditorTitle,description:(0,r.NC)("menus.editorTitle","The editor title menu")},{key:"editor/title/run",id:C.eH.EditorTitleRun,description:(0,r.NC)("menus.editorTitleRun","Run submenu inside the editor title menu")},{key:"editor/context",id:C.eH.EditorContext,description:(0,r.NC)("menus.editorContext","The editor context menu")},{key:"editor/context/copy",id:C.eH.EditorContextCopy,description:(0,r.NC)("menus.editorContextCopyAs","'Copy as' submenu in the editor context menu")},{key:"editor/context/share",id:C.eH.EditorContextShare,description:(0,r.NC)("menus.editorContextShare","'Share' submenu in the editor context menu"),proposed:"contribShareMenu"},{key:"explorer/context",id:C.eH.ExplorerContext,description:(0,r.NC)("menus.explorerContext","The file explorer context menu")},{key:"explorer/context/share",id:C.eH.ExplorerContextShare,description:(0,r.NC)("menus.explorerContextShare","'Share' submenu in the file explorer context menu"),proposed:"contribShareMenu"},{key:"editor/title/context",id:C.eH.EditorTitleContext,description:(0,r.NC)("menus.editorTabContext","The editor tabs context menu")},{key:"editor/title/context/share",id:C.eH.EditorTitleContextShare,description:(0,r.NC)("menus.editorTitleContextShare","'Share' submenu inside the editor title context menu"),proposed:"contribShareMenu"},{key:"debug/callstack/context",id:C.eH.DebugCallStackContext,description:(0,r.NC)("menus.debugCallstackContext","The debug callstack view context menu")},{key:"debug/variables/context",id:C.eH.DebugVariablesContext,description:(0,r.NC)("menus.debugVariablesContext","The debug variables view context menu")},{key:"debug/toolBar",id:C.eH.DebugToolBar,description:(0,r.NC)("menus.debugToolBar","The debug toolbar menu")},{key:"menuBar/home",id:C.eH.MenubarHomeMenu,description:(0,r.NC)("menus.home","The home indicator context menu (web only)"),proposed:"contribMenuBarHome",supportsSubmenus:!1},{key:"menuBar/edit/copy",id:C.eH.MenubarCopy,description:(0,r.NC)("menus.opy","'Copy as' submenu in the top level Edit menu")},{key:"scm/title",id:C.eH.SCMTitle,description:(0,r.NC)("menus.scmTitle","The Source Control title menu")},{key:"scm/sourceControl",id:C.eH.SCMSourceControl,description:(0,r.NC)("menus.scmSourceControl","The Source Control menu")},{key:"scm/resourceState/context",id:C.eH.SCMResourceContext,description:(0,r.NC)("menus.resourceStateContext","The Source Control resource state context menu")},{key:"scm/resourceFolder/context",id:C.eH.SCMResourceFolderContext,description:(0,r.NC)("menus.resourceFolderContext","The Source Control resource folder context menu")},{key:"scm/resourceGroup/context",id:C.eH.SCMResourceGroupContext,description:(0,r.NC)("menus.resourceGroupContext","The Source Control resource group context menu")},{key:"scm/change/title",id:C.eH.SCMChangeContext,description:(0,r.NC)("menus.changeTitle","The Source Control inline change menu")},{key:"statusBar/remoteIndicator",id:C.eH.StatusBarRemoteIndicatorMenu,description:(0,r.NC)("menus.statusBarRemoteIndicator","The remote indicator menu in the status bar"),supportsSubmenus:!1},{key:"view/title",id:C.eH.ViewTitle,description:(0,r.NC)("view.viewTitle","The contributed view title menu")},{key:"view/item/context",id:C.eH.ViewItemContext,description:(0,r.NC)("view.itemContext","The contributed view item context menu")},{key:"comments/comment/editorActions",id:C.eH.CommentEditorActions,description:(0,r.NC)("commentThread.editorActions","The contributed comment editor actions"),proposed:"contribCommentEditorActionsMenu"},{key:"comments/commentThread/title",id:C.eH.CommentThreadTitle,description:(0,r.NC)("commentThread.title","The contributed comment thread title menu")},{key:"comments/commentThread/context",id:C.eH.CommentThreadActions,description:(0,r.NC)("commentThread.actions","The contributed comment thread context menu, rendered as buttons below the comment editor"),supportsSubmenus:!1},{key:"comments/commentThread/additionalActions",id:C.eH.CommentThreadAdditionalActions,description:(0,r.NC)("commentThread.actions","The contributed comment thread context menu, rendered as buttons below the comment editor"),supportsSubmenus:!1,proposed:"contribCommentThreadAdditionalMenu"},{key:"comments/commentThread/title/context",id:C.eH.CommentThreadTitleContext,description:(0,r.NC)("commentThread.titleContext","The contributed comment thread title's peek context menu, rendered as a right click menu on the comment thread's peek title."),proposed:"contribCommentPeekContext"},{key:"comments/comment/title",id:C.eH.CommentTitle,description:(0,r.NC)("comment.title","The contributed comment title menu")},{key:"comments/comment/context",id:C.eH.CommentActions,description:(0,r.NC)("comment.actions","The contributed comment context menu, rendered as buttons below the comment editor"),supportsSubmenus:!1},{key:"comments/commentThread/comment/context",id:C.eH.CommentThreadCommentContext,description:(0,r.NC)("comment.commentContext","The contributed comment context menu, rendered as a right click menu on the an individual comment in the comment thread's peek view."),proposed:"contribCommentPeekContext"},{key:"notebook/toolbar",id:C.eH.NotebookToolbar,description:(0,r.NC)("notebook.toolbar","The contributed notebook toolbar menu")},{key:"notebook/kernelSource",id:C.eH.NotebookKernelSource,description:(0,r.NC)("notebook.kernelSource","The contributed notebook kernel sources menu"),proposed:"notebookKernelSource"},{key:"notebook/cell/title",id:C.eH.NotebookCellTitle,description:(0,r.NC)("notebook.cell.title","The contributed notebook cell title menu")},{key:"notebook/cell/execute",id:C.eH.NotebookCellExecute,description:(0,r.NC)("notebook.cell.execute","The contributed notebook cell execution menu")},{key:"interactive/toolbar",id:C.eH.InteractiveToolbar,description:(0,r.NC)("interactive.toolbar","The contributed interactive toolbar menu")},{key:"interactive/cell/title",id:C.eH.InteractiveCellTitle,description:(0,r.NC)("interactive.cell.title","The contributed interactive cell title menu")},{key:"testing/item/context",id:C.eH.TestItem,description:(0,r.NC)("testing.item.context","The contributed test item menu")},{key:"testing/item/gutter",id:C.eH.TestItemGutter,description:(0,r.NC)("testing.item.gutter.title","The menu for a gutter decoration for a test item")},{key:"extension/context",id:C.eH.ExtensionContext,description:(0,r.NC)("menus.extensionContext","The extension context menu")},{key:"timeline/title",id:C.eH.TimelineTitle,description:(0,r.NC)("view.timelineTitle","The Timeline view title menu")},{key:"timeline/item/context",id:C.eH.TimelineItemContext,description:(0,r.NC)("view.timelineContext","The Timeline view item context menu")},{key:"ports/item/context",id:C.eH.TunnelContext,description:(0,r.NC)("view.tunnelContext","The Ports view item context menu")},{key:"ports/item/origin/inline",id:C.eH.TunnelOriginInline,description:(0,r.NC)("view.tunnelOriginInline","The Ports view item origin inline menu")},{key:"ports/item/port/inline",id:C.eH.TunnelPortInline,description:(0,r.NC)("view.tunnelPortInline","The Ports view item port inline menu")},{key:"file/newFile",id:C.eH.NewFile,description:(0,r.NC)("file.newFile","The 'New File...' quick pick, shown on welcome page and File menu."),supportsSubmenus:!1},{key:"webview/context",id:C.eH.WebviewContext,description:(0,r.NC)("webview.context","The webview context menu")},{key:"file/share",id:C.eH.MenubarShare,description:(0,r.NC)("menus.share","Share submenu shown in the top level File menu."),proposed:"contribShareMenu"},{key:"editor/inlineCompletions/actions",id:C.eH.InlineCompletionsActions,description:(0,r.NC)("inlineCompletions.actions","The actions shown when hovering on an inline completion"),supportsSubmenus:!1,proposed:"inlineCompletionsAdditions"},{key:"editor/content",id:C.eH.EditorContent,description:(0,r.NC)("merge.toolbar","The prominent button in an editor, overlays its content"),proposed:"contribEditorContentMenu"},{key:"editor/lineNumber/context",id:C.eH.EditorLineNumberContext,description:(0,r.NC)("editorLineNumberContext","The contributed editor line number context menu")},{key:"mergeEditor/result/title",id:C.eH.MergeInputResultToolbar,description:(0,r.NC)("menus.mergeEditorResult","The result toolbar of the merge editor"),proposed:"contribMergeEditorMenus"}];var N;!function(u){function e(c){return"string"==typeof c.command}function t(c,g){return"string"!=typeof c.command?(g.error((0,r.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","command")),!1):c.alt&&"string"!=typeof c.alt?(g.error((0,r.NC)("optstring","property `{0}` can be omitted or must be of type `string`","alt")),!1):c.when&&"string"!=typeof c.when?(g.error((0,r.NC)("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1):!c.group||"string"==typeof c.group||(g.error((0,r.NC)("optstring","property `{0}` can be omitted or must be of type `string`","group")),!1)}function n(c,g){return"string"!=typeof c.submenu?(g.error((0,r.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","submenu")),!1):c.when&&"string"!=typeof c.when?(g.error((0,r.NC)("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1):!c.group||"string"==typeof c.group||(g.error((0,r.NC)("optstring","property `{0}` can be omitted or must be of type `string`","group")),!1)}u.isMenuItem=e,u.isValidMenuItem=t,u.isValidSubmenuItem=n,u.isValidItems=function i(c,g){if(!Array.isArray(c))return g.error((0,r.NC)("requirearray","submenu items must be an array")),!1;for(const p of c)if(e(p)){if(!t(p,g))return!1}else if(!n(p,g))return!1;return!0},u.isValidSubmenu=function o(c,g){return"object"!=typeof c?(g.error((0,r.NC)("require","submenu items must be an object")),!1):"string"!=typeof c.id?(g.error((0,r.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","id")),!1):"string"==typeof c.label||(g.error((0,r.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","label")),!1)};const s={type:"object",required:["command"],properties:{command:{description:(0,r.NC)("vscode.extension.contributes.menuItem.command","Identifier of the command to execute. The command must be declared in the 'commands'-section"),type:"string"},alt:{description:(0,r.NC)("vscode.extension.contributes.menuItem.alt","Identifier of an alternative command to execute. The command must be declared in the 'commands'-section"),type:"string"},when:{description:(0,r.NC)("vscode.extension.contributes.menuItem.when","Condition which must be true to show this item"),type:"string"},group:{description:(0,r.NC)("vscode.extension.contributes.menuItem.group","Group into which this item belongs"),type:"string"}}},d={type:"object",required:["submenu"],properties:{submenu:{description:(0,r.NC)("vscode.extension.contributes.menuItem.submenu","Identifier of the submenu to display in this item."),type:"string"},when:{description:(0,r.NC)("vscode.extension.contributes.menuItem.when","Condition which must be true to show this item"),type:"string"},group:{description:(0,r.NC)("vscode.extension.contributes.menuItem.group","Group into which this item belongs"),type:"string"}}},l={type:"object",required:["id","label"],properties:{id:{description:(0,r.NC)("vscode.extension.contributes.submenu.id","Identifier of the menu to display as a submenu."),type:"string"},label:{description:(0,r.NC)("vscode.extension.contributes.submenu.label","The label of the menu item which leads to this submenu."),type:"string"},icon:{description:(0,r.NC)({key:"vscode.extension.contributes.submenu.icon",comment:["do not translate or change `\\$(zap)`, \\ in front of $ is important."]},"(Optional) Icon which is used to represent the submenu in the UI. Either a file path, an object with file paths for dark and light themes, or a theme icon references, like `\\$(zap)`"),anyOf:[{type:"string"},{type:"object",properties:{light:{description:(0,r.NC)("vscode.extension.contributes.submenu.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:(0,r.NC)("vscode.extension.contributes.submenu.icon.dark","Icon path when a dark theme is used"),type:"string"}}}]}}};function a(c,g,p){return typeof c>"u"?(g.error((0,r.NC)("requireStringOrObject","property `{0}` is mandatory and must be of type `string` or `object`",p)),!1):"string"==typeof c&&(0,V.m5)(c)?(g.error((0,r.NC)("requirestring","property `{0}` is mandatory and must be of type `string`",p)),!1):"string"==typeof c||!(0,V.m5)(c.original)&&!(0,V.m5)(c.value)||(g.error((0,r.NC)("requirestrings","properties `{0}` and `{1}` are mandatory and must be of type `string`",`${p}.value`,`${p}.original`)),!1)}u.menusContribution={description:(0,r.NC)("vscode.extension.contributes.menus","Contributes menu items to the editor"),type:"object",properties:(0,Ve.Kz)(ke,c=>c.key,c=>({markdownDescription:c.proposed?(0,r.NC)("proposed",'Proposed API, requires `enabledApiProposal: ["{0}"]` - {1}',c.proposed,c.description):c.description,type:"array",items:!1===c.supportsSubmenus?s:{oneOf:[s,d]}})),additionalProperties:{description:"Submenu",type:"array",items:{oneOf:[s,d]}}},u.submenusContribution={description:(0,r.NC)("vscode.extension.contributes.submenus","Contributes submenu items to the editor"),type:"array",items:l},u.isValidCommand=function m(c,g){return c?(0,V.m5)(c.command)?(g.error((0,r.NC)("requirestring","property `{0}` is mandatory and must be of type `string`","command")),!1):!(!a(c.title,g,"title")||c.shortTitle&&!a(c.shortTitle,g,"shortTitle")||(c.enablement&&"string"!=typeof c.enablement?(g.error((0,r.NC)("optstring","property `{0}` can be omitted or must be of type `string`","precondition")),1):c.category&&!a(c.category,g,"category")||!function h(c,g){return typeof c>"u"||"string"==typeof c||"string"==typeof c.dark&&"string"==typeof c.light||(g.error((0,r.NC)("opticon","property `icon` can be omitted or must be either a string or a literal like `{dark, light}`")),!1)}(c.icon,g))):(g.error((0,r.NC)("nonempty","expected non-empty value.")),!1)};const y={type:"object",required:["command","title"],properties:{command:{description:(0,r.NC)("vscode.extension.contributes.commandType.command","Identifier of the command to execute"),type:"string"},title:{description:(0,r.NC)("vscode.extension.contributes.commandType.title","Title by which the command is represented in the UI"),type:"string"},shortTitle:{markdownDescription:(0,r.NC)("vscode.extension.contributes.commandType.shortTitle","(Optional) Short title by which the command is represented in the UI. Menus pick either `title` or `shortTitle` depending on the context in which they show commands."),type:"string"},category:{description:(0,r.NC)("vscode.extension.contributes.commandType.category","(Optional) Category string by which the command is grouped in the UI"),type:"string"},enablement:{description:(0,r.NC)("vscode.extension.contributes.commandType.precondition","(Optional) Condition which must be true to enable the command in the UI (menu and keybindings). Does not prevent executing the command by other means, like the `executeCommand`-api."),type:"string"},icon:{description:(0,r.NC)({key:"vscode.extension.contributes.commandType.icon",comment:["do not translate or change `\\$(zap)`, \\ in front of $ is important."]},"(Optional) Icon which is used to represent the command in the UI. Either a file path, an object with file paths for dark and light themes, or a theme icon references, like `\\$(zap)`"),anyOf:[{type:"string"},{type:"object",properties:{light:{description:(0,r.NC)("vscode.extension.contributes.commandType.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:(0,r.NC)("vscode.extension.contributes.commandType.icon.dark","Icon path when a dark theme is used"),type:"string"}}}]}}};u.commandsContribution={description:(0,r.NC)("vscode.extension.contributes.commands","Contributes commands to the command palette."),oneOf:[y,{type:"array",items:y}]}}(N||(N={}));const we=new A.SL,Le=B.ut.registerExtensionPoint({extensionPoint:"commands",jsonSchema:N.commandsContribution,activationEventsGenerator:(u,e)=>{for(const t of u)t.command&&e.push(`onCommand:${t.command}`)}});Le.setHandler(u=>{function e(t,n){if(!N.isValidCommand(t,n.collector))return;const{icon:i,enablement:o,category:s,title:d,shortTitle:l,command:m}=t;let h;i&&(h="string"==typeof i?Se.kS.fromString(i)??{dark:M.Vo(n.description.extensionLocation,i),light:M.Vo(n.description.extensionLocation,i)}:{dark:M.Vo(n.description.extensionLocation,i.dark),light:M.Vo(n.description.extensionLocation,i.light)});const a=C.BH.getCommand(m);a&&n.collector.info(a.source?(0,r.NC)("dup1","Command `{0}` already registered by {1} ({2})",t.command,a.source.title,a.source.id):(0,r.NC)("dup0","Command `{0}` already registered",t.command)),we.add(C.BH.addCommand({id:m,title:d,source:{id:n.description.identifier.value,title:n.description.displayName??n.description.name},shortTitle:l,tooltip:d,category:s,precondition:E.Ao.deserialize(o),icon:h}))}we.clear();for(const t of u){const{value:n}=t;if(Array.isArray(n))for(const i of n)e(i,t);else e(n,t)}});const $=new Map,xe=B.ut.registerExtensionPoint({extensionPoint:"submenus",jsonSchema:N.submenusContribution});xe.setHandler(u=>{$.clear();for(const e of u){const{value:t,collector:n}=e;for(const[,i]of Object.entries(t)){if(!N.isValidSubmenu(i,n))continue;if(!i.id){n.warn((0,r.NC)("submenuId.invalid.id","`{0}` is not a valid submenu identifier",i.id));continue}if($.has(i.id)){n.info((0,r.NC)("submenuId.duplicate.id","The `{0}` submenu was already previously registered.",i.id));continue}if(!i.label){n.warn((0,r.NC)("submenuId.invalid.label","`{0}` is not a valid submenu label",i.label));continue}let o;i.icon&&(o="string"==typeof i.icon?Se.kS.fromString(i.icon)||{dark:M.Vo(e.description.extensionLocation,i.icon)}:{dark:M.Vo(e.description.extensionLocation,i.icon.dark),light:M.Vo(e.description.extensionLocation,i.icon.light)});const s={id:C.eH.for(`api:${i.id}`),label:i.label,icon:o};$.set(i.id,s)}}});const Be=new Map(ke.map(u=>[u.key,u])),Ie=new A.SL,de=new Map;B.ut.registerExtensionPoint({extensionPoint:"menus",jsonSchema:N.menusContribution,deps:[xe]}).setHandler(u=>{Ie.clear(),de.clear();for(const e of u){const{value:t,collector:n}=e;for(const i of Object.entries(t)){if(!N.isValidItems(i[1],n))continue;let o=Be.get(i[0]);if(!o){const s=$.get(i[0]);s&&(o={key:i[0],id:s.id,description:""})}if(o){if(o.proposed&&!(0,ae.$x)(e.description,o.proposed)){n.error((0,r.NC)("proposedAPI.invalid","{0} is a proposed menu identifier. It requires 'package.json#enabledApiProposals: [\"{1}\"]' and is only available when running out of dev or with the following command line switch: --enable-proposed-api {2}",i[0],o.proposed,e.description.identifier.value));continue}for(const s of i[1]){let d;if(N.isMenuItem(s)){const l=C.BH.getCommand(s.command),m=s.alt&&C.BH.getCommand(s.alt)||void 0;if(!l){n.error((0,r.NC)("missing.command","Menu item references a command `{0}` which is not defined in the 'commands' section.",s.command));continue}s.alt&&!m&&n.warn((0,r.NC)("missing.altCommand","Menu item references an alt-command `{0}` which is not defined in the 'commands' section.",s.alt)),s.command===s.alt&&n.info((0,r.NC)("dupe.command","Menu item references the same command as default and alt-command")),d={command:l,alt:m,group:void 0,order:void 0,when:void 0}}else{if(!1===o.supportsSubmenus){n.error((0,r.NC)("unsupported.submenureference","Menu item references a submenu for a menu which doesn't have submenu support."));continue}const l=$.get(s.submenu);if(!l){n.error((0,r.NC)("missing.submenu","Menu item references a submenu `{0}` which is not defined in the 'submenus' section.",s.submenu));continue}let m=de.get(o.id.id);if(m||(m=new Set,de.set(o.id.id,m)),m.has(l.id.id)){n.warn((0,r.NC)("submenuItem.duplicate","The `{0}` submenu was already contributed to the `{1}` menu.",s.submenu,i[0]));continue}m.add(l.id.id),d={submenu:l.id,icon:l.icon,title:l.label,group:void 0,order:void 0,when:void 0}}if(s.group){const l=s.group.lastIndexOf("@");l>0?(d.group=s.group.substr(0,l),d.order=Number(s.group.substr(l+1))||void 0):d.group=s.group}d.when=E.Ao.deserialize(s.when),Ie.add(C.BH.appendMenuItem(o.id,d))}}}}});var We=f(76148),ze=f(99086);class Te{static writeKeybindingItem(e,t){if(!t.resolvedKeybinding)return;const n=JSON.stringify(t.resolvedKeybinding.getUserSettingsLabel());e.write(`{ "key": ${function Ye(u,e){return u.length<e?u+new Array(e-u.length).join(" "):u}(n+",",25)} "command": `);const i=t.when?JSON.stringify(t.when.serialize()):"",o=JSON.stringify(t.command);i.length>0?(e.write(`${o},`),e.writeLine(),e.write(`                                     "when": ${i}`)):e.write(`${o}`),t.commandArgs&&(e.write(","),e.writeLine(),e.write(`                                     "args": ${JSON.stringify(t.commandArgs)}`)),e.write(" }")}static readUserKeybindingItem(e){const t="key"in e&&"string"==typeof e.key?ie.parseKeybinding(e.key):null,n="when"in e&&"string"==typeof e.when?E.Ao.deserialize(e.when):void 0;return{keybinding:t,command:"command"in e&&"string"==typeof e.command?e.command:null,commandArgs:"args"in e&&typeof e.args<"u"?e.args:void 0,when:n,_sourceKey:"key"in e&&"string"==typeof e.key?e.key:void 0}}}class Ze{constructor(){this._lines=[],this._currentLine=""}write(e){this._currentLine+=e}writeLine(e=""){this._lines.push(this._currentLine+e),this._currentLine=""}toString(){return this.writeLine(),this._lines.join("\n")}}var Je=f(75221);const Ne={type:"object",default:{command:"",key:""},properties:{command:{description:r.NC("vscode.extension.contributes.keybindings.command","Identifier of the command to run when keybinding is triggered."),type:"string"},args:{description:r.NC("vscode.extension.contributes.keybindings.args","Arguments to pass to the command to execute.")},key:{description:r.NC("vscode.extension.contributes.keybindings.key","Key or key sequence (separate keys with plus-sign and sequences with space, e.g. Ctrl+O and Ctrl+L L for a chord)."),type:"string"},mac:{description:r.NC("vscode.extension.contributes.keybindings.mac","Mac specific key or key sequence."),type:"string"},linux:{description:r.NC("vscode.extension.contributes.keybindings.linux","Linux specific key or key sequence."),type:"string"},win:{description:r.NC("vscode.extension.contributes.keybindings.win","Windows specific key or key sequence."),type:"string"},when:{description:r.NC("vscode.extension.contributes.keybindings.when","Condition when the key is active."),type:"string"}}},Ae=B.ut.registerExtensionPoint({extensionPoint:"keybindings",deps:[Le],jsonSchema:{description:r.NC("vscode.extension.contributes.keybindings","Contributes keybindings."),oneOf:[Ne,{type:"array",items:Ne}]}}),Xe=[90,91,92,93,95,96,97,98,99,100,101,102,103,104,105],x=new Map;x.set(95,22),x.set(96,23),x.set(97,24),x.set(98,25),x.set(99,26),x.set(100,27),x.set(101,28),x.set(102,29),x.set(103,30),x.set(104,21);let ce=class Q extends Oe.F{constructor(e,t,n,i,o,s,d,l,m,h){super(e,t,n,i,m),this.hostService=s,this.keyboardLayoutService=h,this._contributions=[],this.isComposingGlobalContextKey=e.createKey("isComposing",!1),this.kbsJsonSchema=new et,this.updateKeybindingsJsonSchema(),this._keyboardMapper=this.keyboardLayoutService.getKeyboardMapper(),this.keyboardLayoutService.onDidChangeKeyboardLayout(()=>{this._keyboardMapper=this.keyboardLayoutService.getKeyboardMapper(),this.updateResolver()}),this._cachedResolver=null,this.userKeybindings=this._register(new qe(o,l,m)),this.userKeybindings.initialize().then(()=>{this.userKeybindings.keybindings.length&&this.updateResolver()}),this._register(this.userKeybindings.onDidChange(()=>{m.debug("User keybindings changed"),this.updateResolver()})),Ae.setHandler(a=>{const y=[];for(const c of a)this._handleKeybindingsExtensionPointUser(c.description.identifier,c.description.isBuiltin,c.value,c.collector,y);se.W.setExtensionKeybindings(y),this.updateResolver()}),this.updateKeybindingsJsonSchema(),this._register(d.onDidRegisterExtensions(()=>this.updateKeybindingsJsonSchema())),this._register(j.nm(window,j.tw.KEY_DOWN,a=>{this.isComposingGlobalContextKey.set(a.isComposing);const y=new F.y1(a);this._log(`/ Received  keydown event - ${(0,F.oG)(a)}`),this._log(`| Converted keydown event - ${(0,F.xr)(y)}`),this._dispatch(y,y.target)&&y.preventDefault(),this.isComposingGlobalContextKey.set(!1)})),this._register(j.nm(window,j.tw.KEY_UP,a=>{this.isComposingGlobalContextKey.set(a.isComposing);const y=new F.y1(a);this._singleModifierDispatch(y,y.target)&&y.preventDefault(),this.isComposingGlobalContextKey.set(!1)})),this._register(q.onDidChangeFullscreen(()=>{const a=navigator.keyboard;2!==ee.D.keyboard&&(q.isFullscreen()?a?.lock(["Escape"]):a?.unlock(),this._cachedResolver=null,this._onDidUpdateKeybindings.fire())}))}registerSchemaContribution(e){this._contributions.push(e),e.onDidChange&&this._register(e.onDidChange(()=>this.updateKeybindingsJsonSchema())),this.updateKeybindingsJsonSchema()}updateKeybindingsJsonSchema(){this.kbsJsonSchema.updateSchema(this._contributions.flatMap(e=>e.getSchemaAdditions()))}_printKeybinding(e){return Ce.r6.toLabel(w.OS,e.chords,t=>t instanceof k.$M?b.kL.toString(t.keyCode):b.Z5.toString(t.scanCode))||"[null]"}_printResolvedKeybinding(e){return e.getDispatchChords().map(t=>t||"[null]").join(" ")}_printResolvedKeybindings(e,t,n){const o=`${t.padStart(35," ")} => `;if(0!==n.length)for(const s of n)e.push(`${o}${this._printResolvedKeybinding(s).padStart(35," ")}`);else e.push(`${o}${"[NO BINDING]".padStart(35," ")}`)}_dumpResolveKeybindingDebugInfo(){const e=new Set,t=[];t.push("Default Resolved Keybindings (unique only):");for(const n of se.W.getDefaultKeybindings()){if(!n.keybinding)continue;const i=this._printKeybinding(n.keybinding);if(e.has(i))continue;e.add(i);const o=this._keyboardMapper.resolveKeybinding(n.keybinding);this._printResolvedKeybindings(t,i,o)}t.push("User Resolved Keybindings (unique only):");for(const n of this.userKeybindings.keybindings){if(!n.keybinding)continue;const i=n._sourceKey??"Impossible: missing source key, but has keybinding";if(e.has(i))continue;e.add(i);const o=this._keyboardMapper.resolveKeybinding(n.keybinding);this._printResolvedKeybindings(t,i,o)}return t.join("\n")}_dumpDebugInfo(){const e=JSON.stringify(this.keyboardLayoutService.getCurrentKeyboardLayout(),null,"\t"),t=this._keyboardMapper.dumpDebugInfo();return`Layout info:\n${e}\n\n${this._dumpResolveKeybindingDebugInfo()}\n\n${t}\n\nRaw mapping:\n${JSON.stringify(this.keyboardLayoutService.getRawKeyboardMapping(),null,"\t")}`}_dumpDebugInfoJSON(){const e={layout:this.keyboardLayoutService.getCurrentKeyboardLayout(),rawMapping:this.keyboardLayoutService.getRawKeyboardMapping()};return JSON.stringify(e,null,"\t")}customKeybindingsCount(){return this.userKeybindings.keybindings.length}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._resolveKeybindingItems(se.W.getDefaultKeybindings(),!0),t=this._resolveUserKeybindingItems(this.userKeybindings.keybindings,!1);this._cachedResolver=new je.s(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return this.hostService.hasFocus}_resolveKeybindingItems(e,t){const n=[];let i=0;for(const o of e){const s=o.when||void 0,d=o.keybinding;if(d){if(this._assertBrowserConflicts(d))continue;const l=this._keyboardMapper.resolveKeybinding(d);for(let m=l.length-1;m>=0;m--)n[i++]=new U.M(l[m],o.command,o.commandArgs,s,t,o.extensionId,o.isBuiltinExtension)}else n[i++]=new U.M(void 0,o.command,o.commandArgs,s,t,o.extensionId,o.isBuiltinExtension)}return n}_resolveUserKeybindingItems(e,t){const n=[];let i=0;for(const o of e){const s=o.when||void 0;if(o.keybinding){const d=this._keyboardMapper.resolveKeybinding(o.keybinding);for(const l of d)n[i++]=new U.M(l,o.command,o.commandArgs,s,t,null,!1)}else n[i++]=new U.M(void 0,o.command,o.commandArgs,s,t,null,!1)}return n}_assertBrowserConflicts(e){if(0===ee.D.keyboard||1===ee.D.keyboard&&q.isFullscreen())return!1;for(const t of e.chords){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey))continue;const n=3584;let i=0;if(t.metaKey&&(i|=2048),t.shiftKey&&(i|=1024),t.altKey&&(i|=512),t.ctrlKey&&2===w.OS&&(i|=256),2560==(i&n)&&(t instanceof k.ae&&(86===t.scanCode||85===t.scanCode)||t instanceof k.$M&&(15===t.keyCode||17===t.keyCode))||2048==(i&n)&&(t instanceof k.ae&&t.scanCode>=36&&t.scanCode<=45||t instanceof k.$M&&t.keyCode>=21&&t.keyCode<=30))return!0}return!1}resolveKeybinding(e){return this._keyboardMapper.resolveKeybinding(e)}resolveKeyboardEvent(e){return this.keyboardLayoutService.validateCurrentKeyboardMapping(e),this._keyboardMapper.resolveKeyboardEvent(e)}resolveUserBinding(e){const t=ie.parseKeybinding(e);return t?this._keyboardMapper.resolveKeybinding(t):[]}_handleKeybindingsExtensionPointUser(e,t,n,i,o){if(Array.isArray(n))for(let s=0,d=n.length;s<d;s++)this._handleKeybinding(e,t,s+1,n[s],i,o);else this._handleKeybinding(e,t,1,n,i,o)}_handleKeybinding(e,t,n,i,o,s){const d=[];if(function Qe(u,e){return u?"string"!=typeof u.command?(e.push(r.NC("requirestring","property `{0}` is mandatory and must be of type `string`","command")),!1):u.key&&"string"!=typeof u.key?(e.push(r.NC("optstring","property `{0}` can be omitted or must be of type `string`","key")),!1):u.when&&"string"!=typeof u.when?(e.push(r.NC("optstring","property `{0}` can be omitted or must be of type `string`","when")),!1):u.mac&&"string"!=typeof u.mac?(e.push(r.NC("optstring","property `{0}` can be omitted or must be of type `string`","mac")),!1):u.linux&&"string"!=typeof u.linux?(e.push(r.NC("optstring","property `{0}` can be omitted or must be of type `string`","linux")),!1):!u.win||"string"==typeof u.win||(e.push(r.NC("optstring","property `{0}` can be omitted or must be of type `string`","win")),!1):(e.push(r.NC("nonempty","expected non-empty value.")),!1)}(i,d)){const l=this._asCommandRule(e,t,n++,i);l&&s.push(l)}d.length>0&&o.error(r.NC("invalid.keybindings","Invalid `contributes.{0}`: {1}",Ae.name,d.join("\n")))}static bindToCurrentPlatform(e,t,n,i){if(1===w.OS&&i){if(i)return i}else if(2===w.OS){if(t)return t}else if(n)return n;return e}_asCommandRule(e,t,n,i){const{command:o,args:s,when:d,key:l,mac:m,linux:h,win:a}=i,y=Q.bindToCurrentPlatform(l,m,h,a);if(!y)return;let c;c=t?300+n:400+n;const g=C.BH.getCommand(o),p=g&&g.precondition;let K;return d&&p?K=E.Ao.and(p,E.Ao.deserialize(d)):d?K=E.Ao.deserialize(d):p&&(K=p),{id:o,args:s,when:K,weight:c,keybinding:ie.parseKeybinding(y),extensionId:e.value,isBuiltinExtension:t}}getDefaultKeybindingsContent(){const e=this._getResolver(),t=e.getDefaultKeybindings(),n=e.getDefaultBoundCommands();return Q._getDefaultKeybindings(t)+"\n\n"+Q._getAllCommandsAsComment(n)}static _getDefaultKeybindings(e){const t=new Ze;t.writeLine("[");const n=e.length-1;return e.forEach((i,o)=>{Te.writeKeybindingItem(t,i),o!==n?t.writeLine(","):t.writeLine()}),t.writeLine("]"),t.toString()}static _getAllCommandsAsComment(e){const n=(0,ze.g)(e).sort().join("\n// - ");return"// "+r.NC("unboundCommands","Here are other available commands: ")+"\n// - "+n}mightProducePrintableCharacter(e){if(e.ctrlKey||e.metaKey||e.altKey)return!1;const t=b.Z5.toEnum(e.code);if(-1!==Xe.indexOf(t))return!!(e.keyCode===b.Vd[t]||w.dz&&e.keyCode===x.get(t));if(-1!==b.Vd[t])return!1;const i=this.keyboardLayoutService.getRawKeyboardMapping();if(!i)return!1;const o=i[e.code];return!(!o||!o.value||/\s/.test(o.value))}};ce=(0,S.gn)([(0,S.fM)(0,E.i6),(0,S.fM)(1,D.H),(0,S.fM)(2,Fe.bU),(0,S.fM)(3,ve.lT),(0,S.fM)(4,Je.A),(0,S.fM)(5,We.$),(0,S.fM)(6,ae.QS),(0,S.fM)(7,oe.sn),(0,S.fM)(8,Ke.VZ),(0,S.fM)(9,P.o)],ce);class qe extends A.JT{get keybindings(){return this._keybindings}constructor(e,t,n){super(),this.userDataProfileService=e,this.fileService=t,this._rawKeybindings=[],this._keybindings=[],this.watchDisposables=this._register(new A.SL),this._onDidChange=this._register(new I.Q5),this.onDidChange=this._onDidChange.event,this.watch(),this.reloadConfigurationScheduler=this._register(new te.pY(()=>this.reload().then(i=>{i&&this._onDidChange.fire()}),50)),this._register(I.ju.filter(this.fileService.onDidFilesChange,i=>i.contains(this.userDataProfileService.currentProfile.keybindingsResource))(()=>{n.debug("Keybindings file changed"),this.reloadConfigurationScheduler.schedule()})),this._register(this.fileService.onDidRunOperation(i=>{4===i.operation&&i.resource.toString()===this.userDataProfileService.currentProfile.keybindingsResource.toString()&&(n.debug("Keybindings file written"),this.reloadConfigurationScheduler.schedule())})),this._register(e.onDidChangeCurrentProfile(i=>i.join(this.whenCurrentProfileChanged(i))))}whenCurrentProfileChanged(e){var t=this;return(0,T.Z)(function*(){e.preserveData&&(yield t.fileService.exists(e.previous.keybindingsResource))&&(yield t.fileService.copy(e.previous.keybindingsResource,e.profile.keybindingsResource)),t.watch(),t.reloadConfigurationScheduler.schedule()})()}watch(){this.watchDisposables.clear(),this.watchDisposables.add(this.fileService.watch((0,M.XX)(this.userDataProfileService.currentProfile.keybindingsResource))),this.watchDisposables.add(this.fileService.watch(this.userDataProfileService.currentProfile.keybindingsResource))}initialize(){var e=this;return(0,T.Z)(function*(){yield e.reload()})()}reload(){var e=this;return(0,T.Z)(function*(){const t=yield e.readUserKeybindings();return!be.fS(e._rawKeybindings,t)&&(e._rawKeybindings=t,e._keybindings=e._rawKeybindings.map(n=>Te.readUserKeybindingItem(n)),!0)})()}readUserKeybindings(){var e=this;return(0,T.Z)(function*(){try{const t=yield e.fileService.readFile(e.userDataProfileService.currentProfile.keybindingsResource),n=(0,ne.Qc)(t.value.toString());return Array.isArray(n)?n.filter(i=>i&&"object"==typeof i):[]}catch{return[]}})()}}let et=(()=>{class u{constructor(){this.commandsSchemas=[],this.commandsEnum=[],this.removalCommandsEnum=[],this.commandsEnumDescriptions=[],this.schema={id:u.schemaId,type:"array",title:r.NC("keybindings.json.title","Keybindings configuration"),allowTrailingCommas:!0,allowComments:!0,definitions:{editorGroupsSchema:{type:"array",items:{type:"object",properties:{groups:{$ref:"#/definitions/editorGroupsSchema",default:[{},{}]},size:{type:"number",default:.5}}}},commandNames:{type:"string",enum:this.commandsEnum,enumDescriptions:this.commandsEnumDescriptions,description:r.NC("keybindings.json.command","Name of the command to execute")},commandType:{anyOf:[{$ref:"#/definitions/commandNames"},{type:"string",enum:this.removalCommandsEnum,enumDescriptions:this.commandsEnumDescriptions,description:r.NC("keybindings.json.removalCommand","Name of the command to remove keyboard shortcut for")},{type:"string"}]},commandsSchemas:{allOf:this.commandsSchemas}},items:{required:["key"],type:"object",defaultSnippets:[{body:{key:"$1",command:"$2",when:"$3"}}],properties:{key:{type:"string",description:r.NC("keybindings.json.key","Key or key sequence (separated by space)")},command:{anyOf:[{if:{type:"array"},then:{not:{type:"array"},errorMessage:r.NC("keybindings.commandsIsArray","Incorrect type. Expected \"{0}\". The field 'command' does not support running multiple commands. Use command 'runCommands' to pass it multiple commands to run.","string")},else:{$ref:"#/definitions/commandType"}},{$ref:"#/definitions/commandType"}]},when:{type:"string",description:r.NC("keybindings.json.when","Condition when the key is active.")},args:{description:r.NC("keybindings.json.args","Arguments to pass to the command to execute.")}},$ref:"#/definitions/commandsSchemas"}},this.schemaRegistry=re.B.as(He.I.JSONContribution),this.schemaRegistry.registerSchema(u.schemaId,this.schema)}updateSchema(t){this.commandsSchemas.length=0,this.commandsEnum.length=0,this.removalCommandsEnum.length=0,this.commandsEnumDescriptions.length=0;const n=new Set,i=(d,l)=>{/^_/.test(d)||n.has(d)||(n.add(d),this.commandsEnum.push(d),this.commandsEnumDescriptions.push(l),this.removalCommandsEnum.push(`-${d}`))},o=D.P.getCommands();for(const[d,l]of o){const m=l.description;if(i(d,m?m.description:void 0),!m||!m.args||1!==m.args.length||!m.args[0].schema)continue;const h=m.args[0].schema,a=typeof m.args[0].isOptional<"u"?!m.args[0].isOptional:Array.isArray(h.required)&&h.required.length>0,y={if:{required:["command"],properties:{command:{const:d}}},then:{required:[].concat(a?["args"]:[]),properties:{args:h}}};this.commandsSchemas.push(y)}const s=C.BH.getCommands();for(const d of s.keys())i(d);this.commandsSchemas.push(...t),this.schemaRegistry.notifySchemaChanged(u.schemaId)}}return u.schemaId="vscode://schemas/keybindings",u})();var tt=f(53091),nt=f(71871),it=f(99167);class W{constructor(e,t,n,i){this.layout=e,this.secondaryLayouts=t,this.mapping=function ot(u){const e=u,t={};for(const n in e){const i=e[n];if(i.length){const o=i[0],s=i[1],d=i[2],l=i[3],m=Number(i[4]);t[n]={value:o,vkey:6===i.length?i[5]:void 0,withShift:s,withAltGr:d,withShiftAltGr:l,valueIsDeadKey:(1&m)>0,withShiftIsDeadKey:(2&m)>0,withAltGrIsDeadKey:(4&m)>0,withShiftAltGrIsDeadKey:(8&m)>0}}else t[n]={value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1}}return t}(n),this.isUserKeyboardLayout=!!i,this.layout.isUserKeyboardLayout=!!i}static createKeyboardLayoutFromDebugInfo(e,t,n){const i=new W(e,[],{},!0);return i.mapping=t,i}update(e){this.layout=e.layout,this.secondaryLayouts=e.secondaryLayouts,this.mapping=e.mapping,this.isUserKeyboardLayout=e.isUserKeyboardLayout,this.layout.isUserKeyboardLayout=e.isUserKeyboardLayout}getScore(e){let t=0;for(const n in e){if(w.ED&&("Backslash"===n||"KeyQ"===n)||w.IJ&&("Backspace"===n||"Escape"===n))continue;const i=this.mapping[n];void 0===i&&(t-=1);const o=e[n];i&&o&&i.value!==o.value&&(t-=1)}return t}equal(e){return this.isUserKeyboardLayout===e.isUserKeyboardLayout&&(0,P.j)(this.layout)===(0,P.j)(e.layout)&&this.fuzzyEqual(e.mapping)}fuzzyEqual(e){for(const t in e)if(!w.ED||"Backslash"!==t&&"KeyQ"!==t){if(void 0===this.mapping[t])return!1;if(this.mapping[t].value!==e[t].value)return!1}return!0}}var Me=f(84776);const rt=re.B.as(Me.IP.Configuration),at={id:"keyboard",order:15,type:"object",title:r.NC("keyboardConfigurationTitle","Keyboard"),properties:{"keyboard.dispatch":{scope:1,type:"string",enum:["code","keyCode"],default:"code",markdownDescription:r.NC("dispatch","Controls the dispatching logic for key presses to use either `code` (recommended) or `keyCode`."),included:2===w.OS||3===w.OS},"keyboard.mapAltGrToCtrlAlt":{scope:1,type:"boolean",default:!1,markdownDescription:r.NC("mapAltGrToCtrlAlt","Controls if the AltGraph+ modifier should be treated as Ctrl+Alt+."),included:1===w.OS}}};rt.registerConfiguration(at);class dt{constructor(e){this._actual=e,this._cache=new Map}dumpDebugInfo(){return this._actual.dumpDebugInfo()}resolveKeyboardEvent(e){return this._actual.resolveKeyboardEvent(e)}resolveKeybinding(e){const t=e.getHashCode(),n=this._cache.get(t);if(!n){const i=this._actual.resolveKeybinding(e);return this._cache.set(t,i),i}return n}}var _e=f(76676);class z extends _e.L{constructor(e,t){super(1,t),this._mapper=e}_getLabel(e){return e.isDuplicateModifierCase()?"":this._mapper.getUILabelForKeyCode(e.keyCode)}_getUSLabelForKeybinding(e){return e.isDuplicateModifierCase()?"":b.kL.toString(e.keyCode)}getUSLabel(){return Ce.xo.toLabel(this._os,this._chords,e=>this._getUSLabelForKeybinding(e))}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":this._mapper.getAriaLabelForKeyCode(e.keyCode)}_getElectronAccelerator(e){return this._mapper.getElectronAcceleratorForKeyBinding(e)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=this._mapper.getUserSettingsLabelForKeyCode(e.keyCode);return t&&t.toLowerCase()}_isWYSIWYG(e){return this.__isWYSIWYG(e.keyCode)}__isWYSIWYG(e){return 15===e||16===e||17===e||18===e||this._mapper.getAriaLabelForKeyCode(e)===this._mapper.getUserSettingsLabelForKeyCode(e)}_getChordDispatch(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=b.kL.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static getProducedCharCode(e,t){return t?e.ctrlKey&&e.shiftKey&&e.altKey?t.withShiftAltGr:e.ctrlKey&&e.altKey?t.withAltGr:e.shiftKey?t.withShift:t.value:null}static getProducedChar(e,t){const n=this.getProducedCharCode(e,t);return null===n||0===n.length?" --- ":"  "+n+"  "}}class ct{constructor(e,t,n){this._isUSStandard=e,this._mapAltGrToCtrlAlt=n,this._keyCodeToLabel=[],this._scanCodeToKeyCode=[],this._keyCodeToLabel=[],this._keyCodeExists=[],this._keyCodeToLabel[0]=b.kL.toString(0);for(let d=0;d<193;d++){const l=b.Vd[d];-1!==l&&(this._scanCodeToKeyCode[d]=l,this._keyCodeToLabel[l]=b.kL.toString(l),this._keyCodeExists[l]=!0)}const i=[];let o=!1;this._codeInfo=[];for(const d in t)if(t.hasOwnProperty(d)){const l=b.Z5.toEnum(d);if(0===l)continue;const m=t[d],h=b.Vd[l];if(-1!==h){const v=b.qG[m.vkey]||0;if(0===v||h===v||134!==l)continue}const a=m.value,p=b.qG[m.vkey]||0;if(this._codeInfo[l]={scanCode:l,keyCode:p,value:a,withShift:m.withShift,withAltGr:m.withAltGr,withShiftAltGr:m.withShiftAltGr},this._scanCodeToKeyCode[l]=p,0===p)continue;if(this._keyCodeExists[p]=!0,0===a.length)this._keyCodeToLabel[p]=null;else if(a.length>1)this._keyCodeToLabel[p]=a;else{const v=a.charCodeAt(0);v>=97&&v<=122?(i[v-97+65]=!0,o=!0,this._keyCodeToLabel[p]=String.fromCharCode(v-97+65)):v>=65&&v<=90?(i[v]=!0,o=!0,this._keyCodeToLabel[p]=a):this._keyCodeToLabel[p]=a}}const s=(d,l)=>{i[d]||(this._keyCodeToLabel[l]=String.fromCharCode(d))};if(s(65,31),s(66,32),s(67,33),s(68,34),s(69,35),s(70,36),s(71,37),s(72,38),s(73,39),s(74,40),s(75,41),s(76,42),s(77,43),s(78,44),s(79,45),s(80,46),s(81,47),s(82,48),s(83,49),s(84,50),s(85,51),s(86,52),s(87,53),s(88,54),s(89,55),s(90,56),!o){const d=(l,m)=>{this._keyCodeToLabel[l]=String.fromCharCode(m)};d(85,59),d(86,61),d(87,44),d(88,45),d(89,46),d(90,47),d(91,96),d(92,91),d(93,92),d(94,93),d(95,39)}}dumpDebugInfo(){const e=[],t=[88,104];let n=0;e.push("-----------------------------------------------------------------------------------------------------------------------------------------");for(let i=0;i<193;i++){if(-1!==b.Vd[i]&&-1===t.indexOf(i))continue;n%6==0&&(e.push("|       HW Code combination      |  Key  |    KeyCode combination    |          UI label         |        User settings       | WYSIWYG |"),e.push("-----------------------------------------------------------------------------------------------------------------------------------------")),n++;const o=this._codeInfo[i],s=b.Z5.toString(i),d=[0,2,5,7];for(const l of d){const m=!!(1&l),h=!!(2&l),a=!!(4&l),y=new k.ae(m,h,a,!1,i),c=this._resolveChord(y),g=c?b.kL.toString(c.keyCode):null,p=c?new z(this,[c]):null,K=`${m?"Ctrl+":""}${h?"Shift+":""}${a?"Alt+":""}${s}`,v=p?p.getAriaLabel():null,_=v?v.replace(/Control\+/,"Ctrl+"):null,Ue=p?p.getUserSettingsLabel():null,Y=z.getProducedChar(y,o),H=g?`${m?"Ctrl+":""}${h?"Shift+":""}${a?"Alt+":""}${g}`:null,me=p&&p.isWYSIWYG()?"       ":"   NO  ";e.push(`| ${this._leftPad(K,30)} | ${Y} | ${this._leftPad(H,25)} | ${this._leftPad(_,25)} |  ${this._leftPad(Ue,25)} | ${me} |`)}e.push("-----------------------------------------------------------------------------------------------------------------------------------------")}return e.join("\n")}_leftPad(e,t){for(null===e&&(e="null");e.length<t;)e=" "+e;return e}getUILabelForKeyCode(e){return this._getLabelForKeyCode(e)}getAriaLabelForKeyCode(e){return this._getLabelForKeyCode(e)}getUserSettingsLabelForKeyCode(e){return this._isUSStandard?b.kL.toUserSettingsUS(e):b.kL.toUserSettingsGeneral(e)}getElectronAcceleratorForKeyBinding(e){return b.kL.toElectronAccelerator(e.keyCode)}_getLabelForKeyCode(e){return this._keyCodeToLabel[e]||b.kL.toString(0)}resolveKeyboardEvent(e){const i=new k.$M(e.ctrlKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,e.shiftKey,e.altKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,e.metaKey,e.keyCode);return new z(this,[i])}_resolveChord(e){if(!e)return null;if(e instanceof k.$M)return this._keyCodeExists[e.keyCode]?e:null;const t=this._scanCodeToKeyCode[e.scanCode]||0;return 0!==t&&this._keyCodeExists[t]?new k.$M(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t):null}resolveKeybinding(e){const t=(0,U.a)(e.chords.map(n=>this._resolveChord(n)));return t.length>0?[new z(this,t)]:[]}}var De=f(87696);const G=[];class Ee extends _e.L{constructor(e,t,n){super(t,n),this._mapper=e}_getLabel(e){return this._mapper.getUILabelForScanCodeChord(e)}_getAriaLabel(e){return this._mapper.getAriaLabelForScanCodeChord(e)}_getElectronAccelerator(e){return this._mapper.getElectronAcceleratorLabelForScanCodeChord(e)}_getUserSettingsLabel(e){return this._mapper.getUserSettingsLabelForScanCodeChord(e)}_isWYSIWYG(e){if(!e||-1!==b.Vd[e.scanCode])return!0;const t=this._mapper.getAriaLabelForScanCodeChord(e),n=this._mapper.getUserSettingsLabelForScanCodeChord(e);return!t&&!n||!(!t||!n)&&t.toLowerCase()===n.toLowerCase()}_getChordDispatch(e){return this._mapper.getDispatchStrForScanCodeChord(e)}_getSingleModifierChordDispatch(e){return 157!==e.scanCode&&161!==e.scanCode||e.shiftKey||e.altKey||e.metaKey?159!==e.scanCode&&163!==e.scanCode||e.ctrlKey||e.shiftKey||e.metaKey?158!==e.scanCode&&162!==e.scanCode||e.ctrlKey||e.altKey||e.metaKey?160!==e.scanCode&&164!==e.scanCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"shift":"alt":"ctrl"}}class R{constructor(e,t,n,i){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.scanCode=i}toString(){return`${this.ctrlKey?"Ctrl+":""}${this.shiftKey?"Shift+":""}${this.altKey?"Alt+":""}${b.Z5.toString(this.scanCode)}`}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.scanCode===e.scanCode}getProducedCharCode(e){return e?this.ctrlKey&&this.shiftKey&&this.altKey?e.withShiftAltGr:this.ctrlKey&&this.altKey?e.withAltGr:this.shiftKey?e.withShift:e.value:""}getProducedChar(e){const t=L.getCharCode(this.getProducedCharCode(e));return 0===t?" --- ":t>=768&&t<=879?"U+"+t.toString(16):"  "+String.fromCharCode(t)+"  "}}class ue{constructor(e,t,n,i){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.keyCode=i}toString(){return`${this.ctrlKey?"Ctrl+":""}${this.shiftKey?"Shift+":""}${this.altKey?"Alt+":""}${b.kL.toString(this.keyCode)}`}}class ut{constructor(){this._scanCodeToKeyCode=[],this._keyCodeToScanCode=[],this._scanCodeToKeyCode=[],this._keyCodeToScanCode=[]}registrationComplete(){this._moveToEnd(56),this._moveToEnd(106)}_moveToEnd(e){for(let t=0;t<8;t++){const n=this._scanCodeToKeyCode[(e<<3)+t];if(n)for(let i=0,o=n.length;i<o;i++){const s=this._keyCodeToScanCode[n[i]];if(1!==s.length)for(let d=0,l=s.length;d<l;d++){const m=s[d];if(m>>>3===e){for(let a=d+1;a<l;a++)s[a-1]=s[a];s[l-1]=m}}}}}registerIfUnknown(e,t){if(0===t.keyCode)return;const n=this._encodeScanCodeCombo(e),i=this._encodeKeyCodeCombo(t),d=this._scanCodeToKeyCode[n];if(t.keyCode>=21&&t.keyCode<=30||t.keyCode>=31&&t.keyCode<=56){if(d)for(let l=0,m=d.length;l<m;l++)if(d[l]===i)return}else if(d&&0!==d.length)return;this._scanCodeToKeyCode[n]=this._scanCodeToKeyCode[n]||[],this._scanCodeToKeyCode[n].unshift(i),this._keyCodeToScanCode[i]=this._keyCodeToScanCode[i]||[],this._keyCodeToScanCode[i].unshift(n)}lookupKeyCodeCombo(e){const t=this._encodeKeyCodeCombo(e),n=this._keyCodeToScanCode[t];if(!n||0===n.length)return[];const i=[];for(let o=0,s=n.length;o<s;o++){const d=n[o];i[o]=new R(!!(1&d),!!(2&d),!!(4&d),d>>>3)}return i}lookupScanCodeCombo(e){const t=this._encodeScanCodeCombo(e),n=this._scanCodeToKeyCode[t];if(!n||0===n.length)return[];const i=[];for(let o=0,s=n.length;o<s;o++){const d=n[o];i[o]=new ue(!!(1&d),!!(2&d),!!(4&d),d>>>3)}return i}guessStableKeyCode(e){if(e>=36&&e<=45)switch(e){case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21}const t=this.lookupScanCodeCombo(new R(!1,!1,!1,e)),n=this.lookupScanCodeCombo(new R(!1,!0,!1,e));if(1===t.length&&1===n.length){const o=t[0].keyCode;if(o===n[0].keyCode&&t[0].shiftKey!==n[0].shiftKey)return o}return-1}_encodeScanCodeCombo(e){return this._encode(e.ctrlKey,e.shiftKey,e.altKey,e.scanCode)}_encodeKeyCodeCombo(e){return this._encode(e.ctrlKey,e.shiftKey,e.altKey,e.keyCode)}_encode(e,t,n,i){return((e?1:0)<<0|(t?1:0)<<1|(n?1:0)<<2|i<<3)>>>0}}class L{constructor(e,t,n,i){this._isUSStandard=e,this._mapAltGrToCtrlAlt=n,this._OS=i,this._scanCodeToLabel=[],this._scanCodeToDispatch=[],this._codeInfo=[],this._scanCodeKeyCodeMapper=new ut,this._scanCodeToLabel=[],this._scanCodeToDispatch=[];const o=(h,a,y,c,g,p,K,v)=>{this._scanCodeKeyCodeMapper.registerIfUnknown(new R(!!h,!!a,!!y,c),new ue(!!g,!!p,!!K,v))},s=(h,a,y,c,g)=>{for(let p=h;p<=1;p++)for(let K=a;K<=1;K++)for(let v=y;v<=1;v++)o(p,K,v,c,p,K,v,g)};for(let h=0;h<193;h++)this._scanCodeToLabel[h]=null;for(let h=0;h<193;h++)this._scanCodeToDispatch[h]=null;for(let h=0;h<193;h++){const a=b.Vd[h];-1!==a&&(s(0,0,0,h,a),this._scanCodeToLabel[h]=b.kL.toString(a),this._scanCodeToDispatch[h]=0===a||5===a||57===a||6===a||4===a?null:`[${b.Z5.toString(h)}]`)}const d={};{const h=[];for(const y in t)if(t.hasOwnProperty(y)){const c=b.Z5.toEnum(y);if(0===c||-1!==b.Vd[c])continue;const p=L.getCharCode(t[y].value);p>=97&&p<=122&&(h[p-97+65]=!0)}const a=(y,c,g,p)=>{h[y]||(d[b.Z5.toString(c)]={value:g,withShift:p,withAltGr:"",withShiftAltGr:""})};a(65,10,"a","A"),a(66,11,"b","B"),a(67,12,"c","C"),a(68,13,"d","D"),a(69,14,"e","E"),a(70,15,"f","F"),a(71,16,"g","G"),a(72,17,"h","H"),a(73,18,"i","I"),a(74,19,"j","J"),a(75,20,"k","K"),a(76,21,"l","L"),a(77,22,"m","M"),a(78,23,"n","N"),a(79,24,"o","O"),a(80,25,"p","P"),a(81,26,"q","Q"),a(82,27,"r","R"),a(83,28,"s","S"),a(84,29,"t","T"),a(85,30,"u","U"),a(86,31,"v","V"),a(87,32,"w","W"),a(88,33,"x","X"),a(89,34,"y","Y"),a(90,35,"z","Z")}const l=[];let m=0;for(const h in t)if(t.hasOwnProperty(h)){const a=b.Z5.toEnum(h);if(0===a||-1!==b.Vd[a])continue;this._codeInfo[a]=t[h];const y=d[h]||t[h],c=L.getCharCode(y.value),g=L.getCharCode(y.withShift),p=L.getCharCode(y.withAltGr),K=L.getCharCode(y.withShiftAltGr);l[m++]={scanCode:a,value:c,withShift:g,withAltGr:p,withShiftAltGr:K},this._scanCodeToDispatch[a]=`[${b.Z5.toString(a)}]`,this._scanCodeToLabel[a]=c>=97&&c<=122?String.fromCharCode(c-97+65):c>=65&&c<=90||c?String.fromCharCode(c):null}for(let h=l.length-1;h>=0;h--){const a=l[h],y=a.scanCode,c=a.withShiftAltGr;if(c===a.withAltGr||c===a.withShift||c===a.value)continue;const g=L._charCodeToKb(c);if(!g)continue;o(1,1,1,y,0,g.shiftKey?1:0,0,g.keyCode)}for(let h=l.length-1;h>=0;h--){const a=l[h],y=a.scanCode,c=a.withAltGr;if(c===a.withShift||c===a.value)continue;const g=L._charCodeToKb(c);if(!g)continue;o(1,0,1,y,0,g.shiftKey?1:0,0,g.keyCode)}for(let h=l.length-1;h>=0;h--){const a=l[h],y=a.scanCode,c=a.withShift;if(c===a.value)continue;const g=L._charCodeToKb(c);if(!g)continue;const K=g.keyCode;g.shiftKey?(o(0,1,0,y,0,1,0,K),o(0,1,1,y,0,1,1,K),o(1,1,0,y,1,1,0,K),o(1,1,1,y,1,1,1,K)):(o(0,1,0,y,0,0,0,K),o(0,1,0,y,0,1,0,K),o(0,1,1,y,0,0,1,K),o(0,1,1,y,0,1,1,K),o(1,1,0,y,1,0,0,K),o(1,1,0,y,1,1,0,K),o(1,1,1,y,1,0,1,K),o(1,1,1,y,1,1,1,K))}for(let h=l.length-1;h>=0;h--){const a=l[h],y=a.scanCode,c=L._charCodeToKb(a.value);if(!c)continue;const p=c.keyCode;c.shiftKey?(o(0,0,0,y,0,1,0,p),o(0,0,1,y,0,1,1,p),o(1,0,0,y,1,1,0,p),o(1,0,1,y,1,1,1,p)):(o(0,0,0,y,0,0,0,p),o(0,0,1,y,0,0,1,p),o(0,1,0,y,0,1,0,p),o(0,1,1,y,0,1,1,p),o(1,0,0,y,1,0,0,p),o(1,0,1,y,1,0,1,p),o(1,1,0,y,1,1,0,p),o(1,1,1,y,1,1,1,p))}s(0,0,0,36,22),s(0,0,0,37,23),s(0,0,0,38,24),s(0,0,0,39,25),s(0,0,0,40,26),s(0,0,0,41,27),s(0,0,0,42,28),s(0,0,0,43,29),s(0,0,0,44,30),s(0,0,0,45,21),this._scanCodeKeyCodeMapper.registrationComplete()}dumpDebugInfo(){const e=[],t=[88,104];let n=0;e.push(`isUSStandard: ${this._isUSStandard}`),e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------");for(let i=0;i<193;i++){if(-1!==b.Vd[i]&&-1===t.indexOf(i))continue;n%4==0&&(e.push("|       HW Code combination      |  Key  |    KeyCode combination    | Pri |          UI label         |         User settings          |    Electron accelerator   |       Dispatching string       | WYSIWYG |"),e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")),n++;const o=this._codeInfo[i];for(let s=0;s<8;s++){const h=new R(!!(1&s),!!(2&s),!!(4&s),i),a=this.resolveKeyboardEvent({_standardKeyboardEventBrand:!0,ctrlKey:h.ctrlKey,shiftKey:h.shiftKey,altKey:h.altKey,metaKey:!1,altGraphKey:!1,keyCode:-1,code:b.Z5.toString(i)}),y=h.toString(),c=h.getProducedChar(o),g=a.getAriaLabel(),p=g?g.replace(/Control\+/,"Ctrl+"):null,K=a.getUserSettingsLabel(),v=a.getElectronAccelerator(),_=a.getDispatchChords()[0],Y=a&&a.isWYSIWYG()?"       ":"   NO  ",H=this._scanCodeKeyCodeMapper.lookupScanCodeCombo(h);if(0===H.length)e.push(`| ${this._leftPad(y,30)} | ${c} | ${this._leftPad("",25)} | ${this._leftPad("",3)} | ${this._leftPad(p,25)} | ${this._leftPad(K,30)} | ${this._leftPad(v,25)} | ${this._leftPad(_,30)} | ${Y} |`);else for(let O=0,me=H.length;O<me;O++){const $e=H[O];let Z;const fe=this._scanCodeKeyCodeMapper.lookupKeyCodeCombo($e);if(1===fe.length)Z="";else{let Re=-1;for(let J=0;J<fe.length;J++)if(fe[J].equals(h)){Re=J+1;break}Z=String(Re)}const Ge=$e.toString();e.push(0===O?`| ${this._leftPad(y,30)} | ${c} | ${this._leftPad(Ge,25)} | ${this._leftPad(Z,3)} | ${this._leftPad(p,25)} | ${this._leftPad(K,30)} | ${this._leftPad(v,25)} | ${this._leftPad(_,30)} | ${Y} |`:`| ${this._leftPad("",30)} |       | ${this._leftPad(Ge,25)} | ${this._leftPad(Z,3)} | ${this._leftPad("",25)} | ${this._leftPad("",30)} | ${this._leftPad("",25)} | ${this._leftPad("",30)} |         |`)}}e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")}return e.join("\n")}_leftPad(e,t){for(null===e&&(e="null");e.length<t;)e=" "+e;return e}keyCodeChordToScanCodeChord(e){if(3===e.keyCode)return[new k.ae(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,46)];const t=this._scanCodeKeyCodeMapper.lookupKeyCodeCombo(new ue(e.ctrlKey,e.shiftKey,e.altKey,e.keyCode)),n=[];for(let i=0,o=t.length;i<o;i++){const s=t[i];n[i]=new k.ae(s.ctrlKey,s.shiftKey,s.altKey,e.metaKey,s.scanCode)}return n}getUILabelForScanCodeChord(e){if(!e)return null;if(e.isDuplicateModifierCase())return"";if(2===this._OS)switch(e.scanCode){case 86:return"\u2190";case 88:return"\u2191";case 85:return"\u2192";case 87:return"\u2193"}return this._scanCodeToLabel[e.scanCode]}getAriaLabelForScanCodeChord(e){return e?e.isDuplicateModifierCase()?"":this._scanCodeToLabel[e.scanCode]:null}getDispatchStrForScanCodeChord(e){const t=this._scanCodeToDispatch[e.scanCode];if(!t)return null;let n="";return e.ctrlKey&&(n+="ctrl+"),e.shiftKey&&(n+="shift+"),e.altKey&&(n+="alt+"),e.metaKey&&(n+="meta+"),n+=t,n}getUserSettingsLabelForScanCodeChord(e){if(!e)return null;if(e.isDuplicateModifierCase())return"";const t=b.Vd[e.scanCode];if(-1!==t)return b.kL.toUserSettingsUS(t).toLowerCase();const n=this._scanCodeKeyCodeMapper.guessStableKeyCode(e.scanCode);if(-1!==n){const i=this.keyCodeChordToScanCodeChord(new k.$M(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,n));for(let o=0,s=i.length;o<s;o++)if(i[o].scanCode===e.scanCode)return b.kL.toUserSettingsUS(n).toLowerCase()}return this._scanCodeToDispatch[e.scanCode]}getElectronAcceleratorLabelForScanCodeChord(e){if(!e)return null;const t=b.Vd[e.scanCode];if(-1!==t)return b.kL.toElectronAccelerator(t);const n=this._scanCodeKeyCodeMapper.guessStableKeyCode(e.scanCode);return(3!==this._OS||this._isUSStandard||85!==n&&86!==n&&87!==n&&88!==n&&89!==n&&90!==n&&91!==n&&92!==n&&93!==n&&94!==n)&&-1!==n?b.kL.toElectronAccelerator(n):null}_toResolvedKeybinding(e){if(0===e.length)return[];const t=[];return this._generateResolvedKeybindings(e,0,[],t),t}_generateResolvedKeybindings(e,t,n,i){const o=e[t],s=t===e.length-1;for(let d=0,l=o.length;d<l;d++){const m=[...n,o[d]];s?i.push(new Ee(this,this._OS,m)):this._generateResolvedKeybindings(e,t+1,m,i)}}resolveKeyboardEvent(e){let t=b.Z5.toEnum(e.code);94===t&&(t=46);const n=e.keyCode;if(15===n||16===n||17===n||18===n||20===n||19===n||14===n||13===n||12===n||11===n||1===n){const d=b.nf[n];-1!==d&&(t=d)}else if((95===t||96===t||97===t||98===t||99===t||100===t||101===t||102===t||103===t||104===t||105===t)&&n>=0){const d=b.nf[n];-1!==d&&(t=d)}const s=new k.ae(e.ctrlKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,e.shiftKey,e.altKey||this._mapAltGrToCtrlAlt&&e.altGraphKey,e.metaKey,t);return new Ee(this,this._OS,[s])}_resolveChord(e){return e?e instanceof k.ae?[e]:this.keyCodeChordToScanCodeChord(e):[]}resolveKeybinding(e){const t=e.chords.map(n=>this._resolveChord(n));return this._toResolvedKeybinding(t)}static _redirectCharCode(e){switch(e){case 12290:return 46;case 12300:case 12304:return 91;case 12301:case 12305:return 93;case 65307:return 59;case 65292:return 44}return e}static _charCodeToKb(e){return(e=this._redirectCharCode(e))<G.length?G[e]:null}static getCharCode(e){if(0===e.length)return 0;const t=e.charCodeAt(0);switch(t){case 768:return 96;case 769:return 180;case 770:return 94;case 771:return 732;case 772:return 175;case 773:return 8254;case 774:return 728;case 775:return 729;case 776:return 168;case 778:return 730;case 779:return 733}return t}}!function(){function u(e,t,n){for(let i=G.length;i<e;i++)G[i]=null;G[e]={keyCode:t,shiftKey:n}}for(let e=65;e<=90;e++)u(e,e-65+31,!0);for(let e=97;e<=122;e++)u(e,e-97+31,!1);u(59,85,!1),u(58,85,!0),u(61,86,!1),u(43,86,!0),u(44,87,!1),u(60,87,!0),u(45,88,!1),u(95,88,!0),u(46,89,!1),u(62,89,!0),u(47,90,!1),u(63,90,!0),u(96,91,!1),u(126,91,!0),u(91,92,!1),u(123,92,!0),u(92,93,!1),u(124,93,!0),u(93,94,!1),u(125,94,!0),u(39,95,!1),u(34,95,!0)}();var lt=f(79858),ht=f(31719),yt=f(58571);class ft extends A.JT{get activeKeymap(){return this._activeKeymapInfo}get keymapInfos(){return this._keymapInfos}get activeKeyboardLayout(){return this._initialized?this._activeKeymapInfo?.layout??null:null}get activeKeyMapping(){return this._initialized?this._activeKeymapInfo?.mapping??null:null}get keyboardLayouts(){return this._keymapInfos.map(e=>e.layout)}constructor(e){super(),this._configurationService=e,this._onDidChangeKeyboardMapper=new I.Q5,this.onDidChangeKeyboardMapper=this._onDidChangeKeyboardMapper.event,this._keyboardMapper=null,this._initialized=!1,this._keymapInfos=[],this._mru=[],this._activeKeymapInfo=null,navigator.keyboard&&navigator.keyboard.addEventListener&&navigator.keyboard.addEventListener("layoutchange",()=>{this._getBrowserKeyMapping().then(t=>{this.isKeyMappingActive(t)||this.setLayoutFromBrowserAPI()})}),this._register(this._configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("keyboard")&&(this._keyboardMapper=null,this._onDidChangeKeyboardMapper.fire())}))}registerKeyboardLayout(e){this._keymapInfos.push(e),this._mru=this._keymapInfos}removeKeyboardLayout(e){let t=this._mru.indexOf(e);this._mru.splice(t,1),t=this._keymapInfos.indexOf(e),this._keymapInfos.splice(t,1)}getMatchedKeymapInfo(e){if(!e)return null;const t=this.getUSStandardLayout();if(t){let n=t.getScore(e);if(0===n)return{result:t,score:0};let i=t;for(let o=0;o<this._mru.length;o++){const s=this._mru[o].getScore(e);if(s>n){if(0===s)return{result:this._mru[o],score:0};n=s,i=this._mru[o]}}return{result:i,score:n}}for(let n=0;n<this._mru.length;n++)if(this._mru[n].fuzzyEqual(e))return{result:this._mru[n],score:0};return null}getUSStandardLayout(){const e=this._mru.filter(t=>t.layout.isUSStandard);return e.length?e[0]:null}isKeyMappingActive(e){return this._activeKeymapInfo&&e&&this._activeKeymapInfo.fuzzyEqual(e)}setUSKeyboardLayout(){this._activeKeymapInfo=this.getUSStandardLayout()}setActiveKeyMapping(e){let t=!1;const n=this.getMatchedKeymapInfo(e);if(n&&(this._activeKeymapInfo?e&&n.result.getScore(e)>this._activeKeymapInfo.getScore(e)&&(this._activeKeymapInfo=n.result,t=!0):(this._activeKeymapInfo=n.result,t=!0)),this._activeKeymapInfo||(this._activeKeymapInfo=this.getUSStandardLayout(),t=!0),!this._activeKeymapInfo||!t)return;const i=this._mru.indexOf(this._activeKeymapInfo);this._mru.splice(i,1),this._mru.unshift(this._activeKeymapInfo),this._setKeyboardData(this._activeKeymapInfo)}setActiveKeymapInfo(e){this._activeKeymapInfo=e;const t=this._mru.indexOf(this._activeKeymapInfo);0!==t&&(this._mru.splice(t,1),this._mru.unshift(this._activeKeymapInfo),this._setKeyboardData(this._activeKeymapInfo))}setLayoutFromBrowserAPI(){this._updateKeyboardLayoutAsync(this._initialized)}_updateKeyboardLayoutAsync(e,t){e&&this._getBrowserKeyMapping(t).then(n=>{this.isKeyMappingActive(n)||this.setActiveKeyMapping(n)})}getKeyboardMapper(){const e=function st(u){const e=u.getValue("keyboard");return{dispatch:"keyCode"===e?.dispatch?1:0,mapAltGrToCtrlAlt:!!e?.mapAltGrToCtrlAlt}}(this._configurationService);return 1!==e.dispatch&&this._initialized&&this._activeKeymapInfo?(this._keyboardMapper||(this._keyboardMapper=new dt(Pe._createKeyboardMapper(this._activeKeymapInfo,e.mapAltGrToCtrlAlt))),this._keyboardMapper):new De.a(e.mapAltGrToCtrlAlt,w.OS)}validateCurrentKeyboardMapping(e){!this._initialized||this._validateCurrentKeyboardMapping(e)||this._updateKeyboardLayoutAsync(!0,e)}setKeyboardLayout(e){const t=this.keymapInfos.filter(n=>(0,P.j)(n.layout)===e);t.length>0&&this.setActiveKeymapInfo(t[0])}_setKeyboardData(e){this._initialized=!0,this._keyboardMapper=null,this._onDidChangeKeyboardMapper.fire()}static _createKeyboardMapper(e,t){const n=e.mapping,i=!!e.layout.isUSStandard;return 1===w.OS?new ct(i,n,t):0===Object.keys(n).length?new De.a(t,w.OS):new L(i,n,t,w.OS)}_validateCurrentKeyboardMapping(e){if(!this._initialized)return!0;const t=e,n=this._activeKeymapInfo;if(!n||"Dead"===t.browserEvent.key||t.browserEvent.isComposing)return!0;const i=n.mapping[t.code];if(!i)return!1;if(""===i.value)return(e.ctrlKey||e.metaKey)&&setTimeout(()=>{this._getBrowserKeyMapping().then(d=>{this.isKeyMappingActive(d)||this.setLayoutFromBrowserAPI()})},350),!0;const s=t.altKey&&t.shiftKey&&i.withShiftAltGrIsDeadKey||t.altKey&&i.withAltGrIsDeadKey||t.shiftKey&&i.withShiftIsDeadKey||i.valueIsDeadKey;return!(s&&"Dead"!==t.browserEvent.key||!s&&t.browserEvent.key!==(t.altKey&&t.shiftKey?i.withShiftAltGr:t.altKey?i.withAltGr:t.shiftKey?i.withShift:i.value))}_getBrowserKeyMapping(e){var t=this;return(0,T.Z)(function*(){if(navigator.keyboard)try{return navigator.keyboard.getLayoutMap().then(n=>{const i={};for(const o of n)i[o[0]]={value:o[1],withShift:"",withAltGr:"",withShiftAltGr:""};return i})}catch{}else if(e&&!e.shiftKey&&!e.altKey&&!e.metaKey&&!e.metaKey){const n={};return n[e.browserEvent.code]={value:e.browserEvent.key,withShift:"",withAltGr:"",withShiftAltGr:""},t.getMatchedKeymapInfo(n)?n:null}return null})()}}class Pe extends ft{constructor(e,t,n,i){super(e),function mt(u){switch(u){case"./keyboardLayouts/layout.contribution.darwin.js":return Promise.all([f.e(592),f.e(540)]).then(f.bind(f,44540)).then(e=>e.default??e);case"./keyboardLayouts/layout.contribution.linux.js":return Promise.all([f.e(592),f.e(826)]).then(f.bind(f,22826)).then(e=>e.default??e);case"./keyboardLayouts/layout.contribution.win.js":return Promise.all([f.e(592),f.e(530)]).then(f.bind(f,17530)).then(e=>e.default??e);default:return new Promise(function(e,t){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+u)))})}}("./keyboardLayouts/layout.contribution."+(w.ED?"win":w.dz?"darwin":"linux")+".js").then(s=>{this._keymapInfos.push(...s.KeyboardLayoutContribution.INSTANCE.layoutInfos.map(l=>new W(l.layout,l.secondaryLayouts,l.mapping,l.isUserKeyboardLayout))),this._mru=this._keymapInfos,this._initialized=!0,this.setLayoutFromBrowserAPI()})}}class pt extends A.JT{get keyboardLayout(){return this._keyboardLayout}constructor(e,t){super(),this.keyboardLayoutResource=e,this.fileService=t,this._onDidChange=this._register(new I.Q5),this.onDidChange=this._onDidChange.event,this._keyboardLayout=null,this.reloadConfigurationScheduler=this._register(new te.pY(()=>this.reload().then(n=>{n&&this._onDidChange.fire()}),50)),this._register(I.ju.filter(this.fileService.onDidFilesChange,n=>n.contains(this.keyboardLayoutResource))(()=>this.reloadConfigurationScheduler.schedule()))}initialize(){var e=this;return(0,T.Z)(function*(){yield e.reload()})()}reload(){var e=this;return(0,T.Z)(function*(){const t=e._keyboardLayout;try{const n=yield e.fileService.readFile(e.keyboardLayoutResource),i=(0,ne.Qc)(n.value.toString());e._keyboardLayout="object"===(0,ne.jo)(i)?W.createKeyboardLayoutFromDebugInfo(i.layout,i.rawMapping,!0):null}catch{e._keyboardLayout=null}return!t||!be.fS(t,e._keyboardLayout)})()}}let le=class extends A.JT{constructor(e,t,n,i,o,s){super(),this.configurationService=s,this._onDidChangeKeyboardLayout=new I.Q5,this.onDidChangeKeyboardLayout=this._onDidChangeKeyboardLayout.event;const l=s.getValue("keyboard").layout;this._keyboardLayoutMode=l??"autodetect",this._factory=new Pe(s,n,i,o),this._register(this._factory.onDidChangeKeyboardMapper(()=>{this._onDidChangeKeyboardLayout.fire()})),l&&"autodetect"!==l&&this._factory.setKeyboardLayout(l),this._register(s.onDidChangeConfiguration(m=>{if(m.affectsConfiguration("keyboard.layout")){const a=s.getValue("keyboard").layout;this._keyboardLayoutMode=a,"autodetect"===a?this._factory.setLayoutFromBrowserAPI():this._factory.setKeyboardLayout(a)}})),this._userKeyboardLayout=new pt(e.keyboardLayoutResource,t),this._userKeyboardLayout.initialize().then(()=>{this._userKeyboardLayout.keyboardLayout&&(this._factory.registerKeyboardLayout(this._userKeyboardLayout.keyboardLayout),this.setUserKeyboardLayoutIfMatched())}),this._register(this._userKeyboardLayout.onDidChange(()=>{const m=this._factory.keymapInfos.filter(h=>h.isUserKeyboardLayout);m.length?this._userKeyboardLayout.keyboardLayout?m[0].update(this._userKeyboardLayout.keyboardLayout):this._factory.removeKeyboardLayout(m[0]):this._userKeyboardLayout.keyboardLayout&&this._factory.registerKeyboardLayout(this._userKeyboardLayout.keyboardLayout),this.setUserKeyboardLayoutIfMatched()}))}setUserKeyboardLayoutIfMatched(){const t=this.configurationService.getValue("keyboard").layout;t&&this._userKeyboardLayout.keyboardLayout&&(0,P.j)(this._userKeyboardLayout.keyboardLayout.layout)===t&&this._factory.activeKeymap&&(this._userKeyboardLayout.keyboardLayout.equal(this._factory.activeKeymap)||this._factory.setActiveKeymapInfo(this._userKeyboardLayout.keyboardLayout))}getKeyboardMapper(){return this._factory.getKeyboardMapper()}getCurrentKeyboardLayout(){return this._factory.activeKeyboardLayout}getAllKeyboardLayouts(){return this._factory.keyboardLayouts}getRawKeyboardMapping(){return this._factory.activeKeyMapping}validateCurrentKeyboardMapping(e){"autodetect"===this._keyboardLayoutMode&&this._factory.validateCurrentKeyboardMapping(e)}};le=(0,S.gn)([(0,S.fM)(0,lt.Y),(0,S.fM)(1,oe.sn),(0,S.fM)(2,ve.lT),(0,S.fM)(3,yt.Uy),(0,S.fM)(4,D.H),(0,S.fM)(5,ht.Ui)],le);const gt=re.B.as(Me.IP.Configuration),Ct={id:"keyboard",order:15,type:"object",title:r.NC("keyboardConfigurationTitle","Keyboard"),properties:{"keyboard.layout":{type:"string",default:"autodetect",description:r.NC("keyboard.layout.config","Control the keyboard layout used in web.")}}};gt.registerConfiguration(Ct);var bt=f(82344);let he=class extends A.JT{constructor(e,t,n){super(),this._instantiationService=e,this._extensionService=t,this._logService=n,this._extensionHostIsReady=!1,this._onWillExecuteCommand=this._register(new I.Q5),this.onWillExecuteCommand=this._onWillExecuteCommand.event,this._onDidExecuteCommand=new I.Q5,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._extensionService.whenInstalledExtensionsRegistered().then(i=>this._extensionHostIsReady=i),this._starActivation=null}_activateStar(){return this._starActivation||(this._starActivation=Promise.race([this._extensionService.activateByEvent("*"),(0,te.Vs)(3e4)])),this._starActivation}executeCommand(e,...t){var n=this;return(0,T.Z)(function*(){n._logService.trace("CommandService#executeCommand",e);const i=`onCommand:${e}`;return D.P.getCommand(e)?n._extensionService.activationEventIsDone(i)?n._tryExecuteCommand(e,t):n._extensionHostIsReady?(yield n._extensionService.activateByEvent(i),n._tryExecuteCommand(e,t)):(n._extensionService.activateByEvent(i),n._tryExecuteCommand(e,t)):(yield Promise.all([n._extensionService.activateByEvent(i),Promise.race([n._activateStar(),I.ju.toPromise(I.ju.filter(D.P.onDidRegisterCommand,s=>s===e))])]),n._tryExecuteCommand(e,t))})()}_tryExecuteCommand(e,t){const n=D.P.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction(n.handler,...t);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}};he=(0,S.gn)([(0,S.fM)(0,bt.TG),(0,S.fM)(1,ae.QS),(0,S.fM)(2,Ke.VZ)],he);var Kt=f(17653);function vt(u){return ye.apply(this,arguments)}function ye(){return(ye=(0,T.Z)(function*(u){const e=ge.IO.get(it.lv);yield ge.IO.get(oe.sn).writeFile(e.defaultProfile.keybindingsResource,nt.KN.fromString(u))})).apply(this,arguments)}function St(){return{...(0,Kt.default)(),[tt.d.toString()]:new X.M(ce),[P.o.toString()]:new X.M(le,void 0,!0),[D.H.toString()]:new X.M(he)}}f(6577)}}]);