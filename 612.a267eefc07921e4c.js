(()=>{"use strict";var i,P={11612:(i,h,r)=>{r(35618);var l=r(44017),v=(r(74399),r(83981));console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",$=>{const f=$.data.compile;if(f){const d=(0,l.V3)(f).resolve(new v._([])).toString("js");self.postMessage({compiled:d})}})},127:(i,h,r)=>{r.d(h,{YN:()=>O,_w:()=>w,d2:()=>b,dm:()=>y,eB:()=>d,gN:()=>g,n$:()=>k,v_:()=>m,wT:()=>n});var _=r(48709),l=r(74399),c=r(42323),v=r(83981),$=r(46187),f=r(38426);class d extends c.NB{constructor(t,e=[]){super("unit"),this.path=t,this.classes=e,this.diagnostics=[]}report(t){this.diagnostics.push(t)}resolve(t){const e={[d.enclosing]:this};for(const a of this.classes)e[a.name]=a;return super.resolve(new v._(e,t))}toString(t){return this.classes.map(e=>e.toString(t)).join("\n\n")}}d.enclosing=Symbol("enclosing compilation unit");class s extends c.NB{constructor(t,e){super(t),this.name=e,this._references=[]}documentation(){return this.doc}references(){return[this.location,...this._references.map(t=>t.location)]}}class n extends s{constructor(t="<anonymous>",e=[],a=[],p=[]){super("class",t),this.fields=e,this.constructors=a,this.methods=p}asType(){const t=new f.rF(this.name);return t._class=this,t}asCompletion(){return{label:this.name,kind:"class"}}toString(t){return c.$S`
    class ${this.name} {
      ${this.fields.map(e=>e.toString(t)).join("\n")}

      ${this.constructors.map(e=>e.toString(t)).join("\n\n")}

      ${this.methods.map(e=>e.toString(t)).join("\n\n")}
    }`}lookup(t,e,...a){for(const p of this.fields)if(p.name===t&&p instanceof e)return p;for(const p of this.methods)if(p.name===t&&p instanceof e&&p.overloads(a[0]))return p;for(const p of this.constructors)if(p instanceof e&&p.overloads(a[0]))return p}list(){return[...this.fields,...this.methods]}resolve(t){const e=new v._({[n.enclosing]:this},t);super.resolve(e);for(const a of this.fields)this.fields.some(p=>p!==a&&p.name===a.name)&&(0,l.Hj)(t,a.location,`duplicate field ${a.name}`);for(const a of this.methods)this.methods.some(p=>p!==a&&p.jsName===a.jsName)&&(0,l.Hj)(t,a.location,`duplicate method ${a.name} with mangled name ${a.jsName}`);return this}}n.enclosing=Symbol("enclosing class");class o extends s{constructor(t,e,a,p){super(t,e),this.parameters=a,this.body=p}resolve(t){this._thisClass||(this._thisClass=t.lookup(n.enclosing,n)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new b("this",this._thisClass.asType()),this._thisParameter.location=this.location);const e=new v._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,t);return super.resolve(e)}overloads(t){return t.length===this.parameters.length&&this.parameters.every((e,a)=>(0,f.BM)(e.type,t[a]))}}let m=(()=>{class S extends o{constructor(e=[],a=new $.gO){super("constructor","init",e,a)}toString(e){return`${"js"===e?"constructor":"init"}(${this.parameters.map(a=>a.toString(e)).join(", ")}) ${this.body.toString(e)}`}documentation(){return this.parameters.length?c.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(e=>"- "+e.documentation()).join("\n")}
    `:this.doc}references(e){return"rename"===e?[]:super.references()}}return S.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},S})(),g=(()=>{class S extends s{constructor(e="<unknown>",a=f.NI,p){super("field",e),this.type=a,this.value=p}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(e){return"js"===e?c.$S`
      _${this.name}${this.value?" = "+this.value.toString(e):""};

      get ${this.name}() {
        return this._${this.name};
      }

      set ${this.name}(value) {
        this._${this.name} = value;
      }`:`var ${this.name}: ${this.type.toString(e)}${this.value?" = "+this.value.toString(e):""}`}}return S.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},S})(),k=(()=>{class S extends o{constructor(e="<unknown>",a=[],p=f.NI,j=new $.gO){super("method",e,a,j),this.returnType=p}get jsName(){return this.name+this.parameters.map(e=>"_"+e.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(e=>e.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((e,a)=>`\${${a}:${e.name}}`).join(", ")})`}}documentation(){let e=this.doc||"";return this.parameters.length&&(e+="\n#### Parameters\n"+this.parameters.map(a=>"- "+a.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(e+="\n#### Returns\n`"+this.returnType.toString()+"`"),e}toString(e){return`${"js"!==e?"func "+this.name:this.jsName}(${this.parameters.map(a=>a.toString(e)).join(", ")})${"js"!==e?": "+this.returnType.toString(e):""} ${this.body.toString(e)}`}}return S.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},S})();class y extends c.NB{constructor(t){super("class-completion"),this.name=t}toString(t){return this.name}resolve(t){return(0,l.Hk)(t,this.location,this.name,{extra:y.completions}),super.resolve(t)}}y.completions=[k,m,g].map(S=>S.completion);class O extends s{constructor(t,e,a){super(t,e),this.type=a}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(t){return`${this.name}${this.type?": "+this.type.toString(t):""}`}}class b extends O{constructor(t="<unknown>",e=f.NI){super("parameter",t,e)}references(t){return"rename"===t&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(t){return"js"===t?this.name:super.toString(t)}}class w extends O{constructor(t="<unknown>",e,a=_.iY){super("variable",t,e),this.value=a}documentation(){var t;return`\`var ${this.name}: ${null===(t=this.type)||void 0===t?void 0:t.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(t){return"js"===t?`let ${this.name} = ${this.value.toString(t)}`:`var ${this.name}${this.type?": "+this.type.toString(t):""} = ${this.value.toString(t)}`}resolve(t){const e=super.resolve(t);return e.type||(e.type=e.value.getType()),e}}},35618:(i,h,r)=>{r.d(h,{K9:()=>c.K9,MX:()=>v.MX,UX:()=>c.UX,WJ:()=>c.WJ,ZJ:()=>l.ZJ,_C:()=>l._C,_w:()=>_._w,d2:()=>_.d2,dm:()=>_.dm,eB:()=>_.eB,gN:()=>_.gN,gO:()=>c.gO,jR:()=>l.jR,lX:()=>l.lX,n$:()=>_.n$,o6:()=>l.o6,on:()=>c.on,rF:()=>v.rF,rX:()=>c.rX,sW:()=>l.sW,sj:()=>c.sj,t$:()=>l.t$,v_:()=>_.v_,wT:()=>_.wT});var _=r(127),l=r(48709),c=r(46187),v=r(38426)},42323:(i,h,r)=>{r.d(h,{$S:()=>f,NB:()=>l});class l{constructor(s){this.kind=s}definition(s){}documentation(){var s;return null===(s=this.definition())||void 0===s?void 0:s.documentation()}references(s){var n;return(null===(n=this.definition(s))||void 0===n?void 0:n.references(s))||[]}resolve(s){return function c(d,s){for(const[n,o]of Object.entries(d))if("location"!==n&&"kind"!==n&&!n.startsWith("_")&&o)if(Array.isArray(o))for(let m=0;m<o.length;m++)o[m]instanceof l&&(o[m]=s(o[m]));else o instanceof l&&(d[n]=s(o))}(this,n=>n.resolve(s)),this}link(){for(const[s,n]of Object.entries(this))s.startsWith("_")&&"_references"in n&&n._references.push(this);for(const s of $(this))s.link()}findByPosition(s){var n;for(const o of $(this)){const m=o.findByPosition(s);if(m)return[this,...m]}if(null!==(n=this.location)&&void 0!==n&&n.includes(s))return[this]}toString(s){return`<${this.kind}>`}}function*$(d){for(const[s,n]of Object.entries(d))if("location"!==s&&"kind"!==s&&!s.startsWith("_")&&n)if(Array.isArray(n))for(let o=0;o<n.length;o++)n[o]instanceof l&&(yield n[o]);else n instanceof l&&(yield n)}function f(d,...s){if(!d[0].startsWith("\n"))throw new Error("must start with a newline");const n=d[0].match(/^\n([ \t]*)/)[1];return d.map((o,m)=>{var g;0===m&&(o=o.substring(1+n.length));const y=(o=o.replace(new RegExp("^"+n,"gm"),"")).substring(o.lastIndexOf("\n")+1).match(/^\s*/)[0];return o+(null!==(g=s[m])&&void 0!==g?g:"").toString().replace(/\n/g,`\n${y}`)}).join("")}},74399:(i,h,r)=>{r.d(h,{Hj:()=>f,Hk:()=>d,Ly:()=>l,R9:()=>v,e6:()=>c});var _=r(35618);class l{constructor(n,o){this.line=n,this.column=o}}class c{constructor(n,o){this.start=n,this.end=o}includes(n){return this.start.line<=n.line&&this.start.column<=n.column&&n.line<=this.end.line&&n.column<=this.end.column}}class v{constructor(n,o,m,g="error",k){if(this.path=n,this.location=o,this.message=m,this.severity=g,this.expected=k,!o)throw new Error("location is required")}}function f(s,n,o,m="error",g){const k=s.lookup(_.eB.enclosing,_.eB),y=new v(void 0,n,o,m,g);k?k.report(y):function $(s){const{path:n,location:{start:{line:o,column:m}},message:g,severity:k}=s;switch(k){case"error":console.error(`${n}:${o}:${m}: error: ${g}`);break;case"warning":console.warn(`${n}:${o}:${m}: warning: ${g}`);break;case"note":console.info(`${n}:${o}:${m}: note: ${g}`)}if(s.expected)for(let y of s.expected)console.log(`- [${y.kind}] ${y.label} ${y.signature||""} - ${y.description||""}`)}(y)}function d(s,n,o,{lookup:m,kind:g,extra:k}={}){if(!o.includes("\xa7"))return!1;const y=o.slice(0,-1),O=(m||s).list().filter(w=>"name"in w).filter(w=>!g||w.kind===g).map(w=>"asCompletion"in w?w.asCompletion():{kind:w.kind,label:w.name});return f(s,n,"input '\xa7' expecting","error",(k?[...O,...k]:O).filter(w=>w.label.startsWith(y))),!0}}},E={};function u(i){var h=E[i];if(void 0!==h)return h.exports;var r=E[i]={exports:{}};return P[i].call(r.exports,r,r.exports,u),r.exports}u.m=P,u.x=()=>{var i=u.O(void 0,[35],()=>u(11612));return u.O(i)},i=[],u.O=(h,r,_,l)=>{if(!r){var v=1/0;for(c=0;c<i.length;c++){for(var[r,_,l]=i[c],$=!0,f=0;f<r.length;f++)(!1&l||v>=l)&&Object.keys(u.O).every(g=>u.O[g](r[f]))?r.splice(f--,1):($=!1,l<v&&(v=l));if($){i.splice(c--,1);var d=_();void 0!==d&&(h=d)}}return h}l=l||0;for(var c=i.length;c>0&&i[c-1][2]>l;c--)i[c]=i[c-1];i[c]=[r,_,l]},u.d=(i,h)=>{for(var r in h)u.o(h,r)&&!u.o(i,r)&&Object.defineProperty(i,r,{enumerable:!0,get:h[r]})},u.f={},u.e=i=>Promise.all(Object.keys(u.f).reduce((h,r)=>(u.f[r](i,h),h),[])),u.u=i=>i+".79ee734581d5b8bc.js",u.miniCssF=i=>{},u.o=(i,h)=>Object.prototype.hasOwnProperty.call(i,h),(()=>{var i;u.tt=()=>(void 0===i&&(i={createScriptURL:h=>h},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(i=trustedTypes.createPolicy("angular#bundler",i))),i)})(),u.tu=i=>u.tt().createScriptURL(i),u.p="",(()=>{var i={612:1};u.f.i=(l,c)=>{i[l]||importScripts(u.tu(u.p+u.u(l)))};var r=self.webpackChunkweb=self.webpackChunkweb||[],_=r.push.bind(r);r.push=l=>{var[c,v,$]=l;for(var f in v)u.o(v,f)&&(u.m[f]=v[f]);for($&&$(u);c.length;)i[c.pop()]=1;_(l)}})(),(()=>{var i=u.x;u.x=()=>u.e(35).then(i)})(),u.x()})();