(()=>{"use strict";var a,E={11612:(a,p,i)=>{i(35618);var l=i(44017),g=(i(74399),i(83981));console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",y=>{const f=y.data.compile;if(f){const h=(0,l.V3)(f).resolve(new g._([])).toString("js");self.postMessage({compiled:h})}})},127:(a,p,i)=>{i.d(p,{YN:()=>O,_w:()=>w,d2:()=>b,dm:()=>S,eB:()=>h,gN:()=>$,n$:()=>k,v_:()=>m,wT:()=>t});var v=i(48709),l=i(74399),c=i(42323),g=i(83981),y=i(46187),f=i(38426);class h extends c.NB{constructor(s,e=[]){super("unit"),this.path=s,this.classes=e,this.diagnostics=[]}report(s){this.diagnostics.push(s)}resolve(s){const e={[h.enclosing]:this};for(const r of this.classes)e[r.name]=r;return super.resolve(new g._(e,s))}toString(s){return this.classes.map(e=>e.toString(s)).join("\n\n")}}h.enclosing=Symbol("enclosing compilation unit"),h.parser="file";class n extends c.NB{constructor(s,e){super(s),this.name=e,this._references=[]}documentation(){return this.doc}references(){return[this,...this._references]}}class t extends n{constructor(s="<anonymous>",e=[],r=[],d=[]){super("class",s),this.fields=e,this.constructors=r,this.methods=d}asType(){const s=new f.rF(this.name);return s._class=this,s.location=this.location,s}asCompletion(){return{label:this.name,kind:"class"}}toString(s){return c.$S`
    class ${this.name} {
      ${this.fields.map(e=>e.toString(s)).join("\n")}

      ${this.constructors.map(e=>e.toString(s)).join("\n\n")}

      ${this.methods.map(e=>e.toString(s)).join("\n\n")}
    }`}lookup(s,e,...r){for(const d of this.fields)if(d.name===s&&d instanceof e)return d;for(const d of this.methods)if(d.name===s&&d instanceof e&&d.overloads(r[0]))return d;for(const d of this.constructors)if(d instanceof e&&d.overloads(r[0]))return d}list(){return[...this.fields,...this.methods]}resolve(s){const e=new g._({[t.enclosing]:this},s);super.resolve(e);for(const r of this.fields)this.fields.some(d=>d!==r&&d.name===r.name)&&(0,l.Hj)(s,r.location,`duplicate field ${r.name}`);for(const r of this.methods)this.methods.some(d=>d!==r&&d.jsName===r.jsName)&&(0,l.Hj)(s,r.location,`duplicate method ${r.name} with mangled name ${r.jsName}`);return this}}t.enclosing=Symbol("enclosing class"),t.parser="class";class o extends n{constructor(s,e,r,d){super(s,e),this.parameters=r,this.body=d}resolve(s){this._thisClass||(this._thisClass=s.lookup(t.enclosing,t)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new b("this",this._thisClass.asType()),this._thisParameter.location=this.location);const e=new g._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,s);return super.resolve(e)}overloads(s){return s.length===this.parameters.length&&this.parameters.every((e,r)=>(0,f.BM)(e.type,s[r]))}}let m=(()=>{class _ extends o{constructor(e=[],r=new y.gO){super("constructor","init",e,r)}toString(e){return`${"js"===e?"constructor":"init"}(${this.parameters.map(r=>r.toString(e)).join(", ")}) ${this.body.toString(e)}`}documentation(){return this.parameters.length?c.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(e=>"- "+e.documentation()).join("\n")}
    `:this.doc}references(e){return"rename"===e?[]:super.references()}}return _.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},_.parser="ctor",_})(),$=(()=>{class _ extends n{constructor(e="<unknown>",r=f.NI,d){super("field",e),this.type=r,this.value=d}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}toString(e){return"js"===e?c.$S`
      _${this.name}${this.value?" = "+this.value.toString(e):""};

      get ${this.name}() {
        return this._${this.name};
      }

      set ${this.name}(value) {
        this._${this.name} = value;
      }`:`var ${this.name}: ${this.type.toString(e)}${this.value?" = "+this.value.toString(e):""}`}}return _.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},_.parser="field",_})(),k=(()=>{class _ extends o{constructor(e="<unknown>",r=[],d=f.NI,j=new y.gO){super("method",e,r,j),this.returnType=d}get jsName(){return this.name+this.parameters.map(e=>"_"+e.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(e=>e.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((e,r)=>`\${${r}:${e.name}}`).join(", ")})`}}documentation(){let e=this.doc||"";return this.parameters.length&&(e+="\n#### Parameters\n"+this.parameters.map(r=>"- "+r.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(e+="\n#### Returns\n`"+this.returnType.toString()+"`"),e}toString(e){return`${"js"!==e?"func "+this.name:this.jsName}(${this.parameters.map(r=>r.toString(e)).join(", ")})${"js"!==e?": "+this.returnType.toString(e):""} ${this.body.toString(e)}`}}return _.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},_.parser="method",_})();class S extends c.NB{constructor(s){super("class-completion"),this.name=s}toString(s){return this.name}resolve(s){return(0,l.Hk)(s,this.location,this.name,{extra:S.completions}),super.resolve(s)}}S.completions=[k,m,$].map(_=>_.completion);class O extends n{constructor(s,e,r){super(s,e),this.type=r}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(s){return`${this.name}${this.type?": "+this.type.toString(s):""}`}}let b=(()=>{class _ extends O{constructor(e="<unknown>",r=f.NI){super("parameter",e,r),this.type=r}references(e){return"rename"===e&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(e){return"js"===e?this.name:super.toString(e)}}return _.parser="parameter",_})(),w=(()=>{class _ extends O{constructor(e="<unknown>",r,d=v.iY){super("variable",e,r),this.value=d}documentation(){var e;return`\`var ${this.name}: ${null===(e=this.type)||void 0===e?void 0:e.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(e){return"js"===e?`let ${this.name} = ${this.value.toString(e)}`:`var ${this.name}${this.type?": "+this.type.toString(e):""} = ${this.value.toString(e)}`}resolve(e){const r=super.resolve(e);return r.type||(r.type=r.value.getType()),r}}return _.parser="variable",_})()},35618:(a,p,i)=>{i.d(p,{K9:()=>c.K9,MX:()=>g.MX,UX:()=>c.UX,WJ:()=>c.WJ,ZJ:()=>l.ZJ,_C:()=>l._C,_w:()=>v._w,d2:()=>v.d2,dm:()=>v.dm,eB:()=>v.eB,gN:()=>v.gN,gO:()=>c.gO,jR:()=>l.jR,lX:()=>l.lX,n$:()=>v.n$,o6:()=>l.o6,on:()=>c.on,rF:()=>g.rF,rX:()=>c.rX,sW:()=>l.sW,sj:()=>c.sj,t$:()=>l.t$,v_:()=>v.v_,wT:()=>v.wT});var v=i(127),l=i(48709),c=i(46187),g=i(38426)},42323:(a,p,i)=>{i.d(p,{$S:()=>f,NB:()=>l});class l{constructor(n){this.kind=n}definition(n){}documentation(){var n;return null===(n=this.definition())||void 0===n?void 0:n.documentation()}references(n){var t;return(null===(t=this.definition(n))||void 0===t?void 0:t.references(n))||[]}resolve(n){return function c(h,n){for(const[t,o]of Object.entries(h))if("location"!==t&&"kind"!==t&&!t.startsWith("_")&&o)if(Array.isArray(o))for(let m=0;m<o.length;m++)o[m]instanceof l&&(o[m]=n(o[m]));else o instanceof l&&(h[t]=n(o))}(this,t=>t.resolve(n)),this}link(){for(const[n,t]of Object.entries(this))n.startsWith("_")&&t&&"_references"in t&&t._references.push(this);for(const n of y(this))n.link()}findByPosition(n){var t;if(!this.range||this.range.includes(n)){for(const o of y(this)){const m=o.findByPosition(n);if(m)return[this,...m]}if(null!==(t=this.location)&&void 0!==t&&t.includes(n))return[this]}}findEnclosing(n){if(this.range&&this.range.encloses(n)){for(const t of y(this)){const o=t.findEnclosing(n);if(o)return o}return this}}toString(n){return`<${this.kind}>`}}function*y(h){for(const[n,t]of Object.entries(h))if("location"!==n&&"kind"!==n&&!n.startsWith("_")&&t)if(Array.isArray(t))for(let o=0;o<t.length;o++)t[o]instanceof l&&(yield t[o]);else t instanceof l&&(yield t)}function f(h,...n){if(!h[0].startsWith("\n"))throw new Error("must start with a newline");const t=h[0].match(/^\n([ \t]*)/)[1];return h.map((o,m)=>{var $;0===m&&(o=o.substring(1+t.length));const S=(o=o.replace(new RegExp("^"+t,"gm"),"")).substring(o.lastIndexOf("\n")+1).match(/^\s*/)[0];return o+(null!==($=n[m])&&void 0!==$?$:"").toString().replace(/\n/g,`\n${S}`)}).join("")}},74399:(a,p,i)=>{i.d(p,{Hj:()=>f,Hk:()=>h,Ly:()=>l,R9:()=>g,e6:()=>c});var v=i(35618);class l{constructor(t,o){this.line=t,this.column=o}}class c{constructor(t,o){this.start=t,this.end=o}includes(t){return this.start.line<=t.line&&t.line<=this.end.line&&(this.start.line<t.line||this.start.column<=t.column)&&(t.line<this.end.line||t.column<=this.end.column)}encloses(t){return this.includes(t.start)&&this.includes(t.end)}}class g{constructor(t,o,m,$="error",k){if(this.path=t,this.location=o,this.message=m,this.severity=$,this.expected=k,!o)throw new Error("location is required")}}function f(n,t,o,m="error",$){const k=n.lookup(v.eB.enclosing,v.eB),S=new g(void 0,t,o,m,$);k?k.report(S):function y(n){const{path:t,location:{start:{line:o,column:m}},message:$,severity:k}=n;switch(k){case"error":console.error(`${t}:${o}:${m}: error: ${$}`);break;case"warning":console.warn(`${t}:${o}:${m}: warning: ${$}`);break;case"note":console.info(`${t}:${o}:${m}: note: ${$}`)}if(n.expected)for(let S of n.expected)console.log(`- [${S.kind}] ${S.label} ${S.signature||""} - ${S.description||""}`)}(S)}function h(n,t,o,{lookup:m,kind:$,extra:k}={}){if(!o.includes("\xa7"))return!1;const S=o.slice(0,-1),O=(m||n).list().filter(w=>"name"in w).filter(w=>!$||w.kind===$).map(w=>"asCompletion"in w?w.asCompletion():{kind:w.kind,label:w.name});return f(n,t,"input '\xa7' expecting","error",(k?[...O,...k]:O).filter(w=>w.label.startsWith(S))),!0}}},P={};function u(a){var p=P[a];if(void 0!==p)return p.exports;var i=P[a]={exports:{}};return E[a].call(i.exports,i,i.exports,u),i.exports}u.m=E,u.x=()=>{var a=u.O(void 0,[35],()=>u(11612));return u.O(a)},a=[],u.O=(p,i,v,l)=>{if(!i){var g=1/0;for(c=0;c<a.length;c++){for(var[i,v,l]=a[c],y=!0,f=0;f<i.length;f++)(!1&l||g>=l)&&Object.keys(u.O).every($=>u.O[$](i[f]))?i.splice(f--,1):(y=!1,l<g&&(g=l));if(y){a.splice(c--,1);var h=v();void 0!==h&&(p=h)}}return p}l=l||0;for(var c=a.length;c>0&&a[c-1][2]>l;c--)a[c]=a[c-1];a[c]=[i,v,l]},u.d=(a,p)=>{for(var i in p)u.o(p,i)&&!u.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:p[i]})},u.f={},u.e=a=>Promise.all(Object.keys(u.f).reduce((p,i)=>(u.f[i](a,p),p),[])),u.u=a=>a+".b07416fcf7c294c9.js",u.miniCssF=a=>{},u.o=(a,p)=>Object.prototype.hasOwnProperty.call(a,p),(()=>{var a;u.tt=()=>(void 0===a&&(a={createScriptURL:p=>p},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(a=trustedTypes.createPolicy("angular#bundler",a))),a)})(),u.tu=a=>u.tt().createScriptURL(a),u.p="",(()=>{var a={612:1};u.f.i=(l,c)=>{a[l]||importScripts(u.tu(u.p+u.u(l)))};var i=self.webpackChunkweb=self.webpackChunkweb||[],v=i.push.bind(i);i.push=l=>{var[c,g,y]=l;for(var f in g)u.o(g,f)&&(u.m[f]=g[f]);for(y&&y(u);c.length;)a[c.pop()]=1;v(l)}})(),(()=>{var a=u.x;u.x=()=>u.e(35).then(a)})(),u.x()})();