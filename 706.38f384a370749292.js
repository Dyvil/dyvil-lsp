(()=>{"use strict";var y,J={10706:(y,j,p)=>{p(22769);var w=p(15441),_=(p(45990),p(78215));console.log("Running Dyvil Compiler Server in Web Worker"),self.addEventListener("message",$=>{const T=$.data.compile;if(T){const B=(0,w.V3)(T).resolve(new _._([])).toString("js");self.postMessage({compiled:B})}})},72007:(y,j,p)=>{p.d(j,{YN:()=>m,_w:()=>I,d2:()=>x,dm:()=>s,eB:()=>k,gN:()=>S,gr:()=>d,n$:()=>P,v_:()=>f,wT:()=>o});var h=p(99938),w=p(35944),O=p(45990),_=p(20445),$=p(78215),T=p(21135),B=p(33711);class k extends _.NB{constructor(n,a=[]){super("unit"),this.path=n,this.classes=a,this.diagnostics=[]}report(n){this.diagnostics.push(n)}resolve(n){const a={[k.enclosing]:this};for(const v of this.classes)a[v.name]=v;return super.resolve(new $._(a,n))}lint(n){super.lint(new $._({[k.enclosing]:this},n))}toString(n){return this.classes.map(a=>a.toString(n)).join("\n\n")}}k.enclosing=Symbol("enclosing compilation unit"),k.parser="file",(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],k.prototype,"toString",null);class d extends _.NB{constructor(n,a){super(n),this.name=a,this._references=[]}docComment(){return this.doc?"/**\n"+this.doc.trim().replace(/^/gm," * ")+"\n */\n":""}documentation(){return this.doc}references(){return[this,...this._references]}}class o extends d{constructor(n="<anonymous>",a=[],v=[],C=[]){super("class",n),this.fields=a,this.constructors=v,this.methods=C}asType(){const n=new B.rF(this.name);return n._class=this,n.location=this.location,n}asCompletion(){return{label:this.name,kind:"class"}}buildSignature(n){n.addSignature(`class ${this.name} { `);for(let a of[this.fields,this.constructors,this.methods].map(v=>v.sort((C,F)=>C.name.localeCompare(F.name))).flat())a.buildSignature(n),n.addSignature(" ");n.addSignature("}")}toString(n){return _.$S`
    ${this.docComment()}\
    class ${this.name} {
      ${this.fields.map(a=>a.toString(n)).join("\n")}

      ${this.constructors.map(a=>a.toString(n)).join("\n\n")}

      ${this.methods.map(a=>a.toString(n)).join("\n\n")}
    }`}lookup(n,a,...v){for(const C of this.fields)if(C.name===n&&C instanceof a)return C;for(const C of this.methods)if(C.name===n&&C instanceof a&&C.overloads(v[0]))return C;for(const C of this.constructors)if(C instanceof a&&C.overloads(v[0]))return C}list(){return[...this.fields,...this.methods]}resolve(n){const a=new $._({[o.enclosing]:this},n);super.resolve(a);for(const v of this.fields)this.fields.some(C=>C!==v&&C.name===v.name)&&(0,O.Hj)(n,v.location,`duplicate field ${v.name}`);for(const v of this.methods)this.methods.some(C=>C!==v&&C.jsName===v.jsName)&&(0,O.Hj)(n,v.location,`duplicate method ${v.name} with mangled name ${v.jsName}`);return this}}o.enclosing=Symbol("enclosing class"),o.parser="class",(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],o.prototype,"toString",null);class l extends d{constructor(n,a,v,C){super(n,a),this.parameters=v,this.body=C}resolve(n){this._thisClass||(this._thisClass=n.lookup(o.enclosing,o)),this._thisClass&&!this._thisParameter&&(this._thisParameter=new x("this",this._thisClass.asType()),this._thisParameter.location=this.location);const a=new $._(this._thisParameter?[this._thisParameter,...this.parameters]:this.parameters,n);return super.resolve(a)}overloads(n){return n.length===this.parameters.length&&this.parameters.every((a,v)=>(0,B.BM)(a.type,n[v]))}}class f extends l{constructor(n=[],a=new T.gO){super("constructor","init",n,a)}buildSignature(n){n.addSignature("init(");for(let a of this.parameters)a.buildSignature(n);n.addSignature(")"),this.body.buildSignature(n)}toString(n){const a="js"===n?"constructor":"init",v=this.parameters.map(F=>F.toString(n)).join(", "),C=this.body.toString(n);return`${this.docComment()}${a}(${v}) ${C}`}documentation(){return this.parameters.length?_.$S`
    ${this.doc}

    #### Parameters
    ${this.parameters.map(n=>"- "+n.documentation()).join("\n")}
    `:this.doc}references(n){return"rename"===n?[]:super.references()}}f.completion={kind:"keyword",label:"init",snippet:"init(${1:parameters...}) {\n  ${2:statements...}\n}"},f.parser="ctor",(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],f.prototype,"toString",null);class S extends d{constructor(n="<unknown>",a=B.NI,v){super("field",n),this.type=a,this.value=v}asCompletion(){return{label:this.name,kind:"field",signature:": "+this.type.toString()}}buildSignature(n){var a;n.addSignature(`${this.name}:${this.type}`),this.type.buildSignature(n),null===(a=this.value)||void 0===a||a.buildSignature(n)}toString(n){const a=this.value?" = "+this.value.toString(n):"";if("js"===n)return _.$S`
      _${this.name}${a};
      get ${this.name}() { return this._${this.name}; }
      set ${this.name}(value) { this._${this.name} = value; }`;const v=this.type.toString(n);return`${this.docComment()}var ${this.name}: ${v}${a}`}}S.completion={kind:"keyword",label:"var",snippet:"var ${1:name}: ${2:type} = ${3:value}"},S.parser="field",(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],S.prototype,"toString",null);class P extends l{constructor(n="<unknown>",a=[],v=B.NI,C=new T.gO){super("method",n,a,C),this.returnType=v}get jsName(){return this.name+this.parameters.map(n=>"_"+n.name).join("")}asCompletion(){return{label:this.name,kind:"method",signature:`(${this.parameters.map(n=>n.type.toString()).join(", ")})${this.returnType?": "+this.returnType.toString():""}`,snippet:`${this.name}(${this.parameters.map((n,a)=>`\${${a}:${n.name}}`).join(", ")})`}}documentation(){let n=this.doc||"";return this.parameters.length&&(n+="\n#### Parameters\n"+this.parameters.map(a=>"- "+a.documentation()).join("\n")),("type:primitive"!==this.returnType.kind||"void"!==this.returnType.name)&&(n+="\n#### Returns\n`"+this.returnType.toString()+"`"),n}buildSignature(n){n.addSignature(`${this.name}(`);for(let a of this.parameters)a.buildSignature(n);n.addSignature(`):${this.returnType}`),this.returnType.buildSignature(n),this.body.buildSignature(n)}toString(n){const a="js"!==n?"func "+this.name:this.jsName,v=this.parameters.map(V=>V.toString(n)).join(", "),C="js"!==n?": "+this.returnType.toString(n):"",F=this.body.toString(n);return`${this.docComment()}${a}(${v})${C} ${F}`}}P.completion={kind:"keyword",label:"func",snippet:"func ${1:name}(${2:parameters...}) {\n  ${3:statements...}\n}"},P.parser="method",(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],P.prototype,"toString",null);class s extends _.NB{constructor(n){super("class-completion"),this.name=n}toString(n){return this.name}resolve(n){return(0,O.Hk)(n,this.location,this.name,{extra:s.completions}),super.resolve(n)}}s.completions=[P,f,S].map(W=>W.completion);class m extends d{constructor(n,a,v){super(n,a),this.type=v}asCompletion(){return{label:this.name,kind:this.kind,signature:this.type?": "+this.type.toString():void 0}}toString(n){const a=this.type?": "+this.type.toString(n):"";return`${this.docComment()}${this.name}${a}`}}(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],m.prototype,"toString",null);let x=(()=>{class W extends m{constructor(a="<unknown>",v=B.NI){super("parameter",a,v),this.type=v}references(a){return"rename"===a&&"this"===this.name?[]:super.references()}documentation(){return`\`${this.name}: ${this.type.toString()}\`${this.doc?"\n"+this.doc:""}`}buildSignature(a){a.addSignature(`${this.name}:${this.type}`),super.buildSignature(a)}toString(a){return"js"===a?this.name:super.toString(a)}}return W.parser="parameter",W})();class I extends m{constructor(n="<unknown>",a,v=w.iY){super("variable",n,a),this.value=v}documentation(){var n;return`\`var ${this.name}: ${null===(n=this.type)||void 0===n?void 0:n.toString()}\`${this.doc?"\n"+this.doc:""}`}toString(n){if("js"===n)return`let ${this.name} = ${this.value.toString(n)}`;const a=this.type&&this.type.location?": "+this.type.toString(n):"";return`${this.docComment()}var ${this.name}${a} = ${this.value.toString(n)}`}resolve(n){const a=super.resolve(n);return a.type||(a.type=a.value.getType()),a}}I.parser="variable",(0,h.gn)([(0,_.fp)(),(0,h.w6)("design:type",Function),(0,h.w6)("design:paramtypes",[String]),(0,h.w6)("design:returntype",String)],I.prototype,"toString",null)},35944:(y,j,p)=>{p.d(j,{ZJ:()=>f,_C:()=>l,iY:()=>S,jR:()=>d,lX:()=>k,o6:()=>o,sW:()=>B,t$:()=>T});var h=p(72007),w=p(45990),O=p(20445),_=p(33711);class $ extends O.NB{constructor(s){super(`expr:${s}`)}getType(){throw new Error(`${this.constructor.name}.getType not implemented`)}}class T extends ${constructor(s){super("literal"),this.representation=s}toString(s){return this.before(s)+this.representation+this.after(s)}getType(){switch(this.representation.charAt(0)){case'"':return new _.MX("string");case"t":case"f":return new _.MX("boolean");default:return new _.MX("int")}}}class B extends ${constructor(s="<unknown>"){super("variable"),this.name=s}toString(s){return this.before(s)+this.name+this.after(s)}definition(){return this._variable}resolve(s){return(0,w.Hk)(s,this.location,this.name)||this._variable||this._variable||(this._variable=s.lookup(this.name,h.YN)||(0,w.Hj)(s,this.location,`variable ${this.name} not found`)),this}getType(){var s,m;return null!==(m=null===(s=this._variable)||void 0===s?void 0:s.type)&&void 0!==m?m:_.NI}}class k extends ${constructor(s="<unknown>",m=[]){super("functionCall"),this.name=s,this.args=m}toString(s){return`${this.before(s)}${this.name}(${this.args.map(m=>m.toString(s)).join(", ")})${this.after(s)}`}definition(s){return"rename"===s?this._class:this._constructor}resolve(s){if(this.args=this.args.map(m=>m.resolve(s)),!this._constructor){const m=s.lookup(this.name,h.wT);if(m){const x=this.args.map(W=>W.getType()),I=m.lookup("init",h.v_,x);I?(this._class=m,this._constructor=I):(0,w.Hj)(s,this.location,`constructor ${this.name}(${x.join(", ")}) not found`)}else(0,w.Hj)(s,this.location,`class or function ${this.name} not found`)}return this}getType(){var s,m;return null!==(m=null===(s=this._class)||void 0===s?void 0:s.asType())&&void 0!==m?m:_.NI}}class d extends ${constructor(s=S,m="<unknown>"){super("propertyAccess"),this.receiver=s,this.property=m}toString(s){return`${this.receiver.toString(s)}.${this.property}`}definition(){return this._field}resolve(s){this.receiver=this.receiver.resolve(s);const m=this.receiver.getType();return(0,w.Hk)(s,this.location,this.property,{lookup:m})||this._field||this._field||(this._field=m.lookup(this.property,h.gN)||(0,w.Hj)(s,this.location,`field ${this.property} not found on ${m}`)),this}getType(){var s;return(null===(s=this._field)||void 0===s?void 0:s.type)||_.NI}}class o extends ${constructor(s=S,m="<unknown>",x=[]){super("methodCall"),this.receiver=s,this.method=m,this.args=x}definition(){return this._method}toString(s){const m=this._method&&"js"===s?this._method.jsName:this.method;return`${this.receiver.toString(s)}.${m}(${this.args.map(x=>x.toString(s)).join(", ")})`}resolve(s){if(this.receiver=this.receiver.resolve(s),this.args=this.args.map(m=>m.resolve(s)),!this._method){const m=this.receiver.getType(),x=this.args.map(I=>I.getType());this._method||(this._method=m.lookup(this.method,h.n$,x)||(0,w.Hj)(s,this.location,`method ${this.method} not found on ${m}`))}return this}getType(){var s;return(null===(s=this._method)||void 0===s?void 0:s.returnType)||_.NI}}class l extends ${constructor(s=S,m="<unknown>",x=S){super("binary"),this.lhs=s,this.operator=m,this.rhs=x}lint(s){"=="===this.operator&&("expr:literal"===this.lhs.kind&&"true"===this.lhs.representation&&(0,w.Hj)(s,this.range,"`== true` is redundant","warning",this.rhs),"expr:literal"===this.rhs.kind&&"true"===this.rhs.representation&&(0,w.Hj)(s,this.range,"`== true` is redundant","warning",this.lhs)),super.lint(s)}toString(s){return`${this.lhs.toString(s)} ${this.operator} ${this.rhs.toString(s)}`}getType(){switch(this.operator){case"+":const s=this.lhs.getType(),m=this.rhs.getType();return"type:primitive"===s.kind&&"string"===s.name?s:"type:primitive"===m.kind&&"string"===m.name?m:new _.MX("int");case"&&":case"||":case"==":case"!=":case"<":case"<=":case">":case">=":return new _.MX("boolean");case"-":case"*":case"/":case"%":case"<<":case">>":case">>>":case"&":case"|":case"^":return new _.MX("int");default:return _.NI}}}class f extends ${constructor(s=S){super("parenthesized"),this.expression=s}toString(s){return`(${this.expression.toString(s)})`}getType(){return this.expression.getType()}}const S=new class extends ${constructor(){super("error")}getType(){return _.NI}}},22769:(y,j,p)=>{p.d(j,{K9:()=>$.K9,MX:()=>T.MX,NR:()=>O.NR,UX:()=>$.UX,WJ:()=>$.WJ,ZJ:()=>w.ZJ,_C:()=>w._C,_w:()=>h._w,d2:()=>h.d2,dm:()=>h.dm,eB:()=>h.eB,gN:()=>h.gN,gO:()=>$.gO,jR:()=>w.jR,lX:()=>w.lX,n$:()=>h.n$,o6:()=>w.o6,on:()=>$.on,rF:()=>T.rF,rX:()=>$.rX,sW:()=>w.sW,sj:()=>$.sj,t$:()=>w.t$,v_:()=>h.v_,wT:()=>h.wT});var h=p(72007),w=p(35944),O=p(20445),$=(p(49807),p(21135)),T=p(33711)},20445:(y,j,p)=>{p.d(j,{$S:()=>B,NB:()=>O,NR:()=>$,fp:()=>k});var h=p(72007);class O{constructor(o){this.kind=o}compilationUnit(){let o=this._parent;for(;o&&!(o instanceof h.eB);)o=o._parent;return o}buildSignature(o){for(const f of T(this))f.buildSignature(o);const l=this.definition();if(l&&l instanceof h.gr){const f=l.compilationUnit();f&&o.addDependency(f)}}definition(o){}documentation(){var o;return null===(o=this.definition())||void 0===o?void 0:o.documentation()}references(o){var l;return(null===(l=this.definition(o))||void 0===l?void 0:l.references(o))||[]}resolve(o){return function _(d,o){for(const[l,f]of Object.entries(d))if("location"!==l&&"kind"!==l&&!l.startsWith("_")&&f)if(Array.isArray(f))for(let S=0;S<f.length;S++)f[S]instanceof O&&(f[S]=o(f[S]));else f instanceof O&&(d[l]=o(f))}(this,l=>l.resolve(o)),this}link(){for(const[o,l]of Object.entries(this))o.startsWith("_")&&"_parent"!==o&&l&&"_references"in l&&l._references.push(this);for(const o of T(this))o._parent=this,o.link()}unlink(){for(const[o,l]of Object.entries(this))o.startsWith("_")&&"_parent"!==o&&l&&"_references"in l&&l._references.splice(l._references.indexOf(this),1);for(const o of T(this))o.unlink()}lint(o){for(const l of T(this))l.lint(o)}findByPosition(o){var l;if(!this.range||this.range.includes(o)){for(const f of T(this)){const S=f.findByPosition(o);if(S)return[this,...S]}if(null!==(l=this.location)&&void 0!==l&&l.includes(o))return[this]}}findEnclosing(o){if(this.range&&this.range.encloses(o)){for(const l of T(this)){const f=l.findEnclosing(o);if(f)return f}return this}}before(o){return this.commentBefore&&"js"!==o?this.commentBefore.endsWith("\n")?this.commentBefore:this.commentBefore+" ":""}after(o){return this.commentAfter&&"js"!==o?" "+this.commentAfter:""}toString(o){return`<${this.kind}>`}}function*$(d){yield d;for(const o of T(d))yield*$(o)}function*T(d){for(const[o,l]of Object.entries(d))if("location"!==o&&"kind"!==o&&!o.startsWith("_")&&l)if(Array.isArray(l))for(let f=0;f<l.length;f++)l[f]instanceof O&&(yield l[f]);else l instanceof O&&(yield l)}function B(d,...o){if(!d[0].startsWith("\n"))throw new Error("must start with a newline");const l=d[0].match(/^\n([ \t]*)/)[1];return d.map((f,S)=>{var P;0===S&&(f=f.substring(1+l.length));const m=(f=f.replace(new RegExp("^"+l,"gm"),"")).substring(f.lastIndexOf("\n")+1).match(/^\s*/)[0];return f+(null!==(P=o[S])&&void 0!==P?P:"").toString().replace(/\n/g,`\n${m}`)}).join("")}function k(){return(d,o,l)=>{const f=l.value;return l.value=function(S){return this.before(S)+f.call(this,S)+this.after(S)},l}}},45990:(y,j,p)=>{p.d(j,{Hj:()=>T,Hk:()=>B,Ly:()=>w,R9:()=>_,e6:()=>O});var h=p(22769);class w{constructor(d,o){this.line=d,this.column=o}}class O{constructor(d,o){this.start=d,this.end=o}includes(d){return this.start.line<=d.line&&d.line<=this.end.line&&(this.start.line<d.line||this.start.column<=d.column)&&(d.line<this.end.line||d.column<=this.end.column)}distance(d){return d.line<this.start.line?d.line-this.start.line:d.line>this.end.line?d.line-this.end.line:d.column<this.start.column?(d.column-this.start.column)/1e3:d.column>this.end.column?(d.column-this.end.column)/1e3:0}encloses(d){return this.includes(d.start)&&this.includes(d.end)}}class _{constructor(d,o,l,f="error",S,P){if(this.path=d,this.location=o,this.message=l,this.severity=f,this.expected=S,this.replacement=P,!o)throw new Error("location is required")}}function T(k,d,o,l="error",f){const S=k.lookup(h.eB.enclosing,h.eB),P=Array.isArray(f)?f:void 0,s=Array.isArray(f)?void 0:f,m=new _(void 0,d,o,l,P,s);S?S.report(m):function $(k){const{path:d,location:{start:{line:o,column:l}},message:f,severity:S}=k;switch(S){case"error":console.error(`${d}:${o}:${l}: error: ${f}`);break;case"warning":console.warn(`${d}:${o}:${l}: warning: ${f}`);break;case"note":console.info(`${d}:${o}:${l}: note: ${f}`)}if(k.expected)for(let P of k.expected)console.log(`- [${P.kind}] ${P.label} ${P.signature||""} - ${P.description||""}`)}(m)}function B(k,d,o,{lookup:l,kind:f,extra:S}={}){if(!o.includes("\xa7"))return!1;const P=o.slice(0,-1),s=(l||k).list().filter(x=>"name"in x).filter(x=>!f||x.kind===f).map(x=>"asCompletion"in x?x.asCompletion():{kind:x.kind,label:x.name});return T(k,d,"input '\xa7' expecting","error",(S?[...s,...S]:s).filter(x=>x.label.startsWith(P))),!0}},99938:(y,j,p)=>{function $(t,e,i,r){var g,u=arguments.length,c=u<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,r);else for(var M=t.length-1;M>=0;M--)(g=t[M])&&(c=(u<3?g(c):u>3?g(e,i,c):g(e,i))||c);return u>3&&c&&Object.defineProperty(e,i,c),c}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}p.d(j,{gn:()=>$,w6:()=>l}),"function"==typeof SuppressedError&&SuppressedError}},G={};function E(y){var j=G[y];if(void 0!==j)return j.exports;var p=G[y]={exports:{}};return J[y].call(p.exports,p,p.exports,E),p.exports}E.m=J,E.x=()=>{var y=E.O(void 0,[30],()=>E(10706));return E.O(y)},y=[],E.O=(j,p,h,w)=>{if(!p){var _=1/0;for(O=0;O<y.length;O++){for(var[p,h,w]=y[O],$=!0,T=0;T<p.length;T++)(!1&w||_>=w)&&Object.keys(E.O).every(f=>E.O[f](p[T]))?p.splice(T--,1):($=!1,w<_&&(_=w));if($){y.splice(O--,1);var B=h();void 0!==B&&(j=B)}}return j}w=w||0;for(var O=y.length;O>0&&y[O-1][2]>w;O--)y[O]=y[O-1];y[O]=[p,h,w]},E.n=y=>{var j=y&&y.__esModule?()=>y.default:()=>y;return E.d(j,{a:j}),j},E.d=(y,j)=>{for(var p in j)E.o(j,p)&&!E.o(y,p)&&Object.defineProperty(y,p,{enumerable:!0,get:j[p]})},E.f={},E.e=y=>Promise.all(Object.keys(E.f).reduce((j,p)=>(E.f[p](y,j),j),[])),E.u=y=>y+".a8ee972becb0c853.js",E.miniCssF=y=>{},E.o=(y,j)=>Object.prototype.hasOwnProperty.call(y,j),(()=>{var y;E.tt=()=>(void 0===y&&(y={createScriptURL:j=>j},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(y=trustedTypes.createPolicy("angular#bundler",y))),y)})(),E.tu=y=>E.tt().createScriptURL(y),E.p="",(()=>{var y={706:1};E.f.i=(w,O)=>{y[w]||importScripts(E.tu(E.p+E.u(w)))};var p=self.webpackChunkweb=self.webpackChunkweb||[],h=p.push.bind(p);p.push=w=>{var[O,_,$]=w;for(var T in _)E.o(_,T)&&(E.m[T]=_[T]);for($&&$(E);O.length;)y[O.pop()]=1;h(w)}})(),(()=>{var y=E.x;E.x=()=>E.e(30).then(y)})(),E.x()})();