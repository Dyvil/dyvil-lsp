"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[3],{26969:(ee,W,n)=>{n.d(W,{Z:()=>E});var m=n(3884),te=n.n(m),f=n(20088),P=n.n(f)()(te());P.push([ee.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/** Dialog: Modal Block */\n.monaco-dialog-modal-block {\n\tposition: fixed;\n\theight: 100%;\n\twidth: 100%;\n\tleft:0;\n\ttop:0;\n\tz-index: 2600;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.monaco-dialog-modal-block.dimmed {\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n/** Dialog: Container */\n.monaco-dialog-box {\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\twidth: min-content;\n\tmin-width: 500px;\n\tmax-width: 90vw;\n\tmin-height: 75px;\n\tpadding: 10px;\n\ttransform: translate3d(0px, 0px, 0px);\n}\n\n/** Dialog: Title Actions Row */\n.monaco-dialog-box .dialog-toolbar-row {\n\theight: 22px;\n\tpadding-bottom: 4px;\n}\n\n.monaco-dialog-box .dialog-toolbar-row .actions-container {\n\tjustify-content: flex-end;\n}\n\n/** Dialog: Message Row */\n.monaco-dialog-box .dialog-message-row {\n\tdisplay: flex;\n\tflex-grow: 1;\n\talign-items: center;\n\tpadding: 0 10px;\n}\n\n.monaco-dialog-box .dialog-message-row > .dialog-icon.codicon {\n\tflex: 0 0 48px;\n\theight: 48px;\n\talign-self: baseline;\n\tfont-size: 48px;\n}\n\n/** Dialog: Message Container */\n.monaco-dialog-box .dialog-message-row .dialog-message-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tpadding-left: 24px;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tword-wrap: break-word; /* never overflow long words, but break to next line */\n\twhite-space: normal;\n}\n\n/** Dialog: Message */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message {\n\tline-height: 22px;\n\tfont-size: 18px;\n\tflex: 1; /* let the message always grow */\n\twhite-space: normal;\n\tword-wrap: break-word; /* never overflow long words, but break to next line */\n\tmin-height: 48px; /* matches icon height */\n\tmargin-bottom: 8px;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n/** Dialog: Details */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-detail {\n\tline-height: 22px;\n\tflex: 1; /* let the message always grow */\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message a:focus {\n\toutline-width: 1px;\n\toutline-style: solid;\n}\n\n/** Dialog: Checkbox */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row {\n\tpadding: 15px 0px 0px;\n\tdisplay: flex;\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-checkbox-row .dialog-checkbox-message {\n\tcursor: pointer;\n\tuser-select: none;\n\t-webkit-user-select: none;\n}\n\n/** Dialog: Input */\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input {\n\tpadding: 15px 0px 0px;\n\tdisplay: flex;\n}\n\n.monaco-dialog-box .dialog-message-row .dialog-message-container .dialog-message-input .monaco-inputbox {\n\tflex: 1;\n}\n\n/** Dialog: File Path */\n.monaco-dialog-box code {\n\tfont-family: var(--monaco-monospace-font);\n}\n\n/** Dialog: Buttons Row */\n.monaco-dialog-box > .dialog-buttons-row {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-right: 1px;\n\toverflow: hidden; /* buttons row should never overflow */\n}\n\n.monaco-dialog-box > .dialog-buttons-row {\n\tdisplay: flex;\n\twhite-space: nowrap;\n\tpadding: 20px 10px 10px;\n}\n\n/** Dialog: Buttons */\n.monaco-dialog-box > .dialog-buttons-row > .dialog-buttons {\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: flex-end;\n\toverflow: hidden;\n\tmargin-left: 67px; /* for long buttons, force align with text */\n}\n\n.monaco-dialog-box > .dialog-buttons-row > .dialog-buttons > .monaco-button {\n\twidth: fit-content;\n\tpadding: 5px 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmargin: 4px 5px; /* allows button focus outline to be visible */\n\toutline-offset: 2px !important;\n}\n",""]);const E=P},33003:(ee,W,n)=>{n.r(W),n.d(W,{default:()=>rt});var m=n(58054),f=(n(87708),n(55885)),I=n(42965),P=n(89295),E=n(53091),ie=n(16613),Z=n(99740),se=n(81532),xe=n(33562),be=n(94014),p=n(12829),U=n(69771),v=n(6418),oe=n(6262),Fe=n(9110),ne=n(95270),Pe=n(29637),ke=n(27331),De=n(32243),D=n(62981),k=n(52786),le=n(74486),B=n(12997),N=n(84621),Ce=n(68589),we=n.n(Ce),Be=n(29712),Ae=n.n(Be),Ee=n(95716),Ue=n.n(Ee),Te=n(43434),Me=n.n(Te),We=n(7229),Ie=n.n(We),Ze=n(8016),Ne=n.n(Ze),R=n(26969),A={};A.styleTagTransform=Ne(),A.setAttributes=Me(),A.insert=Ue().bind(null,"head"),A.domAPI=Ae(),A.insertStyleElement=Ie(),we()(R.Z,A);var re=function(y,e,t,i){return new(t||(t=Promise))(function(o,l){function d(u){try{h(i.next(u))}catch(c){l(c)}}function r(u){try{h(i.throw(u))}catch(c){l(c)}}function h(u){u.done?o(u.value):function s(o){return o instanceof t?o:new t(function(l){l(o)})}(u.value).then(d,r)}h((i=i.apply(y,e||[])).next())})};class Re extends B.JT{constructor(e,t,i,s){super(),this.container=e,this.message=t,this.options=s,this.modalElement=this.container.appendChild((0,v.$)(".monaco-dialog-modal-block.dimmed")),this.shadowElement=this.modalElement.appendChild((0,v.$)(".dialog-shadow")),this.element=this.shadowElement.appendChild((0,v.$)(".monaco-dialog-box")),this.element.setAttribute("role","dialog"),this.element.tabIndex=-1,(0,v.Cp)(this.element),this.buttonStyles=s.buttonStyles,this.buttons=Array.isArray(i)&&i.length>0?i:this.options.disableDefaultAction?[]:[p.NC("ok","OK")];const o=this.element.appendChild((0,v.$)(".dialog-buttons-row"));this.buttonsContainer=o.appendChild((0,v.$)(".dialog-buttons"));const l=this.element.appendChild((0,v.$)(".dialog-message-row"));if(this.iconElement=l.appendChild((0,v.$)("#monaco-dialog-icon.dialog-icon")),this.iconElement.setAttribute("aria-label",this.getIconAriaLabel()),this.messageContainer=l.appendChild((0,v.$)(".dialog-message-container")),(this.options.detail||this.options.renderBody)&&(this.messageContainer.appendChild((0,v.$)(".dialog-message")).appendChild((0,v.$)("#monaco-dialog-message-text.dialog-message-text")).innerText=this.message),this.messageDetailElement=this.messageContainer.appendChild((0,v.$)("#monaco-dialog-message-detail.dialog-message-detail")),this.options.detail||!this.options.renderBody?this.messageDetailElement.innerText=this.options.detail?this.options.detail:t:this.messageDetailElement.style.display="none",this.options.renderBody){const r=this.messageContainer.appendChild((0,v.$)("#monaco-dialog-message-body.dialog-message-body"));this.options.renderBody(r);for(const h of this.messageContainer.querySelectorAll("a"))h.tabIndex=0}if(this.inputs=this.options.inputs?this.options.inputs.map(r=>{var h;const u=this.messageContainer.appendChild((0,v.$)(".dialog-message-input")),c=this._register(new ke.Wz(u,void 0,{placeholder:r.placeholder,type:null!==(h=r.type)&&void 0!==h?h:"text",inputBoxStyles:s.inputBoxStyles}));return r.value&&(c.value=r.value),c}):[],this.options.checkboxLabel){const r=this.messageContainer.appendChild((0,v.$)(".dialog-checkbox-row")),h=this.checkbox=this._register(new Pe.XZ(this.options.checkboxLabel,!!this.options.checkboxChecked,s.checkboxStyles));r.appendChild(h.domNode);const u=r.appendChild((0,v.$)(".dialog-checkbox-message"));u.innerText=this.options.checkboxLabel,this._register((0,v.nm)(u,v.tw.CLICK,()=>h.checked=!h.checked))}const d=this.element.appendChild((0,v.$)(".dialog-toolbar-row"));this.toolbarContainer=d.appendChild((0,v.$)(".dialog-toolbar")),this.applyStyles()}getIconAriaLabel(){let e=p.NC("dialogInfoMessage","Info");switch(this.options.type){case"error":e=p.NC("dialogErrorMessage","Error");break;case"warning":e=p.NC("dialogWarningMessage","Warning");break;case"pending":e=p.NC("dialogPendingMessage","In Progress")}return e}updateMessage(e){this.messageDetailElement.innerText=e}show(){return re(this,void 0,void 0,function*(){return this.focusToReturn=document.activeElement,new Promise(e=>{(0,v.PO)(this.buttonsContainer);const t=this.buttonBar=this._register(new ne.k2(this.buttonsContainer)),i=this.rearrangeButtons(this.buttons,this.options.cancelId);i.forEach((o,l)=>{const d=0===i[l].index,r=this._register(this.options.buttonDetails?t.addButtonWithDescription(Object.assign({title:!0,secondary:!d},this.buttonStyles)):t.addButton(Object.assign({title:!0,secondary:!d},this.buttonStyles)));r.label=(0,le.pH)(i[l].label,!0),r instanceof ne.bP&&(r.description=this.options.buttonDetails[i[l].index]),this._register(r.onDidClick(h=>{h&&v.zB.stop(h),e({button:i[l].index,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map(u=>u.value):void 0})}))}),this._register((0,v.nm)(window,"keydown",o=>{var l,d;const r=new oe.y1(o);if(r.equals(512)&&r.preventDefault(),r.equals(3))return void(this.inputs.some(u=>u.hasFocus())&&(v.zB.stop(o),e({button:null!==(d=null===(l=i.find(u=>u.index!==this.options.cancelId))||void 0===l?void 0:l.index)&&void 0!==d?d:0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0,values:this.inputs.length>0?this.inputs.map(u=>u.value):void 0})));if(r.equals(10))return;let h=!1;if(r.equals(2)||r.equals(17)||r.equals(1026)||r.equals(15)){const u=[];let c=-1;if(this.messageContainer){const g=this.messageContainer.querySelectorAll("a");for(const F of g)u.push(F),F===document.activeElement&&(c=u.length-1)}for(const g of this.inputs)u.push(g),g.hasFocus()&&(c=u.length-1);if(this.checkbox&&(u.push(this.checkbox),this.checkbox.hasFocus()&&(c=u.length-1)),this.buttonBar)for(const g of this.buttonBar.buttons)u.push(g),g.hasFocus()&&(c=u.length-1);if(r.equals(2)||r.equals(17))-1===c&&(c=0),u[(c+1)%u.length].focus();else{-1===c&&(c=u.length);let g=c-1;-1===g&&(g=u.length-1),u[g].focus()}h=!0}h?v.zB.stop(o,!0):this.options.keyEventProcessor&&this.options.keyEventProcessor(r)},!0)),this._register((0,v.nm)(window,"keyup",o=>{v.zB.stop(o,!0);const l=new oe.y1(o);!this.options.disableCloseAction&&l.equals(9)&&e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})},!0)),this._register((0,v.nm)(this.element,"focusout",o=>{o.relatedTarget&&this.element&&((0,v.jg)(o.relatedTarget,this.element)||(this.focusToReturn=o.relatedTarget,o.target&&(o.target.focus(),v.zB.stop(o,!0))))},!1));const s="codicon-modifier-spin";if(this.iconElement.classList.remove(...k.kS.asClassNameArray(D.lA.dialogError),...k.kS.asClassNameArray(D.lA.dialogWarning),...k.kS.asClassNameArray(D.lA.dialogInfo),...k.kS.asClassNameArray(D.lA.loading),s),this.options.icon)this.iconElement.classList.add(...k.kS.asClassNameArray(this.options.icon));else switch(this.options.type){case"error":this.iconElement.classList.add(...k.kS.asClassNameArray(D.lA.dialogError));break;case"warning":this.iconElement.classList.add(...k.kS.asClassNameArray(D.lA.dialogWarning));break;case"pending":this.iconElement.classList.add(...k.kS.asClassNameArray(D.lA.loading),s);break;case"none":this.iconElement.classList.add("no-codicon");break;default:this.iconElement.classList.add(...k.kS.asClassNameArray(D.lA.dialogInfo))}if(!this.options.disableCloseAction){const o=this._register(new Fe.o(this.toolbarContainer,{})),l=this._register(new De.aU("dialog.close",p.NC("dialogClose","Close Dialog"),k.kS.asClassName(D.lA.dialogClose),!0,()=>re(this,void 0,void 0,function*(){e({button:this.options.cancelId||0,checkboxChecked:this.checkbox?this.checkbox.checked:void 0})})));o.push(l,{icon:!0,label:!1})}this.applyStyles(),this.element.setAttribute("aria-modal","true"),this.element.setAttribute("aria-labelledby","monaco-dialog-icon monaco-dialog-message-text"),this.element.setAttribute("aria-describedby","monaco-dialog-icon monaco-dialog-message-text monaco-dialog-message-detail monaco-dialog-message-body"),(0,v.$Z)(this.element),this.inputs.length>0?(this.inputs[0].focus(),this.inputs[0].select()):i.forEach((o,l)=>{0===o.index&&t.buttons[l].focus()})})})}applyStyles(){const e=this.options.dialogStyles,t=e.dialogForeground,i=e.dialogBackground,o=e.dialogBorder?`1px solid ${e.dialogBorder}`:"",l=e.textLinkForeground;if(this.shadowElement.style.boxShadow=e.dialogShadow?`0 0px 8px ${e.dialogShadow}`:"",this.element.style.color=t??"",this.element.style.backgroundColor=i??"",this.element.style.border=o,l)for(const r of this.messageContainer.getElementsByTagName("a"))r.style.color=l;let d;switch(this.options.type){case"error":d=e.errorIconForeground;break;case"warning":d=e.warningIconForeground;break;default:d=e.infoIconForeground}d&&(this.iconElement.style.color=d)}dispose(){super.dispose(),this.modalElement&&(this.modalElement.remove(),this.modalElement=void 0),this.focusToReturn&&(0,v.jg)(this.focusToReturn,document.body)&&(this.focusToReturn.focus(),this.focusToReturn=void 0)}rearrangeButtons(e,t){const i=e.map((s,o)=>({label:s,index:o}));if(e.length<2)return i;if(N.dz||N.IJ){if("number"==typeof t&&i[t]){const s=i.splice(t,1)[0];i.splice(1,0,s)}i.reverse()}else if(N.ED&&"number"==typeof t&&i[t]){const s=i.splice(t,1)[0];i.push(s)}return i}}var Le=n(62823),X=n(82344),Oe=n(53513),L=n(470);let O=class ye extends P.te{constructor(e,t,i,s,o,l){super(),this.logService=e,this.layoutService=t,this.keybindingService=i,this.instantiationService=s,this.productService=o,this.clipboardService=l,this.markdownRenderer=this.instantiationService.createInstance(Oe.$,{})}prompt(e){var t=this;return(0,m.Z)(function*(){t.logService.trace("DialogService#prompt",e.message);const i=t.getPromptButtons(e),{button:s,checkboxChecked:o}=yield t.doShow(e.type,e.message,i,e.detail,e.cancelButton?i.length-1:-1,e.checkbox,void 0,"object"==typeof e?.custom?e.custom:void 0);return t.getPromptResult(e,s,o)})()}confirm(e){var t=this;return(0,m.Z)(function*(){t.logService.trace("DialogService#confirm",e.message);const i=t.getConfirmationButtons(e),{button:s,checkboxChecked:o}=yield t.doShow(e.type??"question",e.message,i,e.detail,i.length-1,e.checkbox,void 0,"object"==typeof e?.custom?e.custom:void 0);return{confirmed:0===s,checkboxChecked:o}})()}input(e){var t=this;return(0,m.Z)(function*(){t.logService.trace("DialogService#input",e.message);const i=t.getInputButtons(e),{button:s,checkboxChecked:o,values:l}=yield t.doShow(e.type??"question",e.message,i,e.detail,i.length-1,e?.checkbox,e.inputs,"object"==typeof e.custom?e.custom:void 0);return{confirmed:0===s,checkboxChecked:o,values:l}})()}about(){var e=this;return(0,m.Z)(function*(){const t=l=>(0,p.NC)("aboutDetail","Version: {0}\nCommit: {1}\nDate: {2}\nBrowser: {3}",e.productService.version||"Unknown",e.productService.commit||"Unknown",e.productService.date?`${e.productService.date}${l?" ("+(0,Le.Z)(new Date(e.productService.date),!0)+")":""}`:"Unknown",navigator.userAgent),i=t(!0),s=t(!1),{button:o}=yield e.doShow(U.Z.Info,e.productService.nameLong,[(0,p.NC)({key:"copy",comment:["&& denotes a mnemonic"]},"&&Copy"),(0,p.NC)("ok","OK")],i,1);0===o&&e.clipboardService.writeText(s)})()}doShow(e,t,i,s,o,l,d,r){var h=this;return(0,m.Z)(function*(){const u=new B.SL,c=r?C=>{C.classList.add(...r.classes||[]),r.markdownDetails?.forEach(w=>{const M=h.markdownRenderer.render(w.markdown);C.appendChild(M.element),M.element.classList.add(...w.classes||[]),u.add(M)})}:void 0,g=new Re(h.layoutService.container,t,i,{detail:s,cancelId:o,type:h.getDialogType(e),keyEventProcessor:C=>{const w=h.keybindingService.softDispatch(C,h.layoutService.container);2===w.kind&&w.commandId&&-1===ye.ALLOWABLE_COMMANDS.indexOf(w.commandId)&&v.zB.stop(C,!0)},renderBody:c,icon:r?.icon,disableCloseAction:r?.disableCloseAction,buttonDetails:r?.buttonDetails,checkboxLabel:l?.label,checkboxChecked:l?.checked,inputs:d,buttonStyles:L.wG,checkboxStyles:L.oO,inputBoxStyles:L.Hc,dialogStyles:L.C9});u.add(g);const F=yield g.show();return u.dispose(),F})()}};O.ALLOWABLE_COMMANDS=["copy","cut","editor.action.selectAll","editor.action.clipboardCopyAction","editor.action.clipboardCutAction","editor.action.clipboardPasteAction"],O=(0,f.gn)([(0,f.fM)(0,Z.VZ),(0,f.fM)(1,ie.F),(0,f.fM)(2,E.d),(0,f.fM)(3,X.TG),(0,f.fM)(4,se.a),(0,f.fM)(5,I.p)],O);let $=class extends B.JT{constructor(e,t,i,s,o,l,d){super(),this.dialogService=e,this.impl=new O(t,i,s,o,l,d),this.model=this.dialogService.model,this._register(this.model.onWillShowDialog(()=>{this.currentDialog||this.processDialogs()})),this.processDialogs()}processDialogs(){var e=this;return(0,m.Z)(function*(){for(;e.model.dialogs.length;){let t;if(e.currentDialog=e.model.dialogs[0],e.currentDialog.args.confirmArgs){const i=e.currentDialog.args.confirmArgs;t=yield e.impl.confirm(i.confirmation)}else if(e.currentDialog.args.inputArgs){const i=e.currentDialog.args.inputArgs;t=yield e.impl.input(i.input)}else if(e.currentDialog.args.promptArgs){const i=e.currentDialog.args.promptArgs;t=yield e.impl.prompt(i.prompt)}else yield e.impl.about();e.currentDialog.close(t),e.currentDialog=void 0}})()}};$=(0,f.gn)([(0,f.fM)(0,P.Ss),(0,f.fM)(1,Z.VZ),(0,f.fM)(2,ie.F),(0,f.fM)(3,E.d),(0,f.fM)(4,X.TG),(0,f.fM)(5,se.a),(0,f.fM)(6,I.p)],$),xe.B.as(be.I.Workbench).registerWorkbenchContribution($,1);var ae=n(26056),H=n(13683);class Xe extends B.JT{constructor(){super(...arguments),this.dialogs=[],this._onWillShowDialog=this._register(new H.Q5),this.onWillShowDialog=this._onWillShowDialog.event,this._onDidShowDialog=this._register(new H.Q5),this.onDidShowDialog=this._onDidShowDialog.event}show(e){const t=new ae.CR,i={args:e,close:s=>{this.dialogs.splice(0,1),t.complete(s),this._onDidShowDialog.fire()}};return this.dialogs.push(i),this._onWillShowDialog.fire(),{item:i,result:t.p}}}var V=n(9590);let j=class extends B.JT{constructor(e,t){super(),this.environmentService=e,this.logService=t,this.model=this._register(new Xe),this.onWillShowDialog=this.model.onWillShowDialog,this.onDidShowDialog=this.model.onDidShowDialog}skipDialogs(){return!(!this.environmentService.isExtensionDevelopment||!this.environmentService.extensionTestsLocationURI)||!!this.environmentService.enableSmokeTestDriver}confirm(e){var t=this;return(0,m.Z)(function*(){return t.skipDialogs()?(t.logService.trace("DialogService: refused to show confirmation dialog in tests."),{confirmed:!0}):yield t.model.show({confirmArgs:{confirmation:e}}).result})()}prompt(e){var t=this;return(0,m.Z)(function*(){if(t.skipDialogs())throw new Error(`DialogService: refused to show dialog in tests. Contents: ${e.message}`);return yield t.model.show({promptArgs:{prompt:e}}).result})()}input(e){var t=this;return(0,m.Z)(function*(){if(t.skipDialogs())throw new Error("DialogService: refused to show input dialog in tests.");return yield t.model.show({inputArgs:{input:e}}).result})()}info(e,t){var i=this;return(0,m.Z)(function*(){yield i.prompt({type:U.Z.Info,message:e,detail:t})})()}warn(e,t){var i=this;return(0,m.Z)(function*(){yield i.prompt({type:U.Z.Warning,message:e,detail:t})})()}error(e,t){var i=this;return(0,m.Z)(function*(){yield i.prompt({type:U.Z.Error,message:e,detail:t})})()}about(){var e=this;return(0,m.Z)(function*(){if(e.skipDialogs())throw new Error("DialogService: refused to show about dialog in tests.");yield e.model.show({}).result})()}};j=(0,f.gn)([(0,f.fM)(0,V.n),(0,f.fM)(1,Z.VZ)],j);var K,y,G,J,Q,ce=n(21462),de=n(42462),T=n(39108),$e=n(95126),a=n(70473),He=n(94927),z=n(17088),Ve=n(79026),he=n(58535),ue=n(82927),je=n(51776),ze=n(90290),fe=n(49698),ge=n(43764),b=n(29175),Ke=n(57948),me=n(76972),x=n(16003),Ge=n(96343),pe=n(49311),ve=n(31096),Je=n(62465);(y=K||(K={})).ID="workbench.action.files.openLocalFile",y.LABEL=p.NC("openLocalFile","Open Local File..."),y.handler=function e(){return t=>t.get(P.Z$).pickFileAndOpen({forceNewWindow:!1,availableFileSystems:[b.lg.file]})},function(y){y.ID="workbench.action.files.saveLocalFile",y.LABEL=p.NC("saveLocalFile","Save Local File..."),y.handler=function e(){return t=>{const i=t.get(pe.AR),s=i.activeEditorPane;return s?i.save({groupId:s.group.id,editor:s.input},{saveAs:!0,availableFileSystems:[b.lg.file],reason:1}):Promise.resolve(void 0)}}}(G||(G={})),function(y){y.ID="workbench.action.files.openLocalFolder",y.LABEL=p.NC("openLocalFolder","Open Local Folder..."),y.handler=function e(){return t=>t.get(P.Z$).pickFolderAndOpen({forceNewWindow:!1,availableFileSystems:[b.lg.file]})}}(J||(J={})),function(y){y.ID="workbench.action.files.openLocalFileFolder",y.LABEL=p.NC("openLocalFileFolder","Open Local..."),y.handler=function e(){return t=>t.get(P.Z$).pickFileFolderAndOpen({forceNewWindow:!1,availableFileSystems:[b.lg.file]})}}(Q||(Q={}));var S=(()=>((S=S||{})[S.Updated=0]="Updated",S[S.UpdatedWithTrailing=1]="UpdatedWithTrailing",S[S.Updating=2]="Updating",S[S.NotUpdated=3]="NotUpdated",S[S.InvalidPath=4]="InvalidPath",S))();const Qe=new me.uy("remoteFileDialogVisible",!1);let Y=class{constructor(e,t,i,s,o,l,d,r,h,u,c,g,F,C){this.fileService=e,this.quickInputService=t,this.labelService=i,this.workspaceContextService=s,this.notificationService=o,this.fileDialogService=l,this.modelService=d,this.languageService=r,this.environmentService=h,this.remoteAgentService=u,this.pathService=c,this.keybindingService=g,this.accessibilityService=C,this.hidden=!1,this.allowFileSelection=!0,this.allowFolderSelection=!1,this.requiresTrailing=!1,this.userEnteredPathSegment="",this.autoCompletePathSegment="",this.isWindows=!1,this.separator="/",this.onBusyChangeEmitter=new H.Q5,this.disposables=[this.onBusyChangeEmitter],this.remoteAuthority=this.environmentService.remoteAuthority,this.contextKey=Qe.bindTo(F),this.scheme=this.pathService.defaultUriScheme}set busy(e){this.filePickBox.busy!==e&&(this.filePickBox.busy=e,this.onBusyChangeEmitter.fire(e))}get busy(){return this.filePickBox.busy}showOpenDialog(e={}){var t=this;return(0,m.Z)(function*(){t.scheme=t.getScheme(e.availableFileSystems,e.defaultUri),t.userHome=yield t.getUserHome();const i=t.getOptions(e);return i?(t.options=i,t.pickResource()):Promise.resolve(void 0)})()}showSaveDialog(e){var t=this;return(0,m.Z)(function*(){t.scheme=t.getScheme(e.availableFileSystems,e.defaultUri),t.userHome=yield t.getUserHome(),t.requiresTrailing=!0;const i=t.getOptions(e,!0);return i?(t.options=i,t.options.canSelectFolders=!0,t.options.canSelectFiles=!0,new Promise(s=>{t.pickResource(!0).then(o=>{s(o)})})):Promise.resolve(void 0)})()}getOptions(e,t=!1){let i,s;if(e.defaultUri&&(i=this.scheme===e.defaultUri.scheme?e.defaultUri:void 0,s=t?a.EZ(e.defaultUri):void 0),i||(i=this.userHome,s&&(i=a.Vo(i,s))),this.scheme!==b.lg.file&&!this.fileService.hasProvider(i))return void this.notificationService.info(p.NC("remoteFileDialog.notConnectedToRemote","File system provider for {0} is not available.",i.toString()));const o=He.I8(e);return o.defaultUri=i,o}remoteUriFrom(e,t){e.startsWith("\\\\")||(e=e.replace(/\\/g,"/"));const i=this.scheme===b.lg.file?he.ov.file(e):he.ov.from({scheme:this.scheme,path:e,query:t?.query,fragment:t?.fragment}),s=i.scheme===b.lg.file?void 0:this.remoteAuthority??t?.authority;return a.bK(i,s,s?this.pathService.defaultUriScheme:i.scheme)}getScheme(e,t){return e&&e.length>0?t&&e.indexOf(t.scheme)>=0?t.scheme:e[0]:t?t.scheme:b.lg.file}getRemoteAgentEnvironment(){var e=this;return(0,m.Z)(function*(){return void 0===e.remoteAgentEnvironment&&(e.remoteAgentEnvironment=yield e.remoteAgentService.getEnvironment()),e.remoteAgentEnvironment})()}getUserHome(){return this.pathService.userHome({preferLocal:this.scheme===b.lg.file})}pickResource(e=!1){var t=this;return(0,m.Z)(function*(){t.allowFolderSelection=!!t.options.canSelectFolders,t.allowFileSelection=!!t.options.canSelectFiles,t.separator=t.labelService.getSeparator(t.scheme,t.remoteAuthority),t.hidden=!1,t.isWindows=yield t.checkIsWindowsOS();let s,i=t.options.defaultUri?t.options.defaultUri:t.workspaceContextService.getWorkspace().folders[0].uri;const o=a.DZ(i);if(t.options.defaultUri){try{s=yield t.fileService.stat(t.options.defaultUri)}catch{}(!s||!s.isDirectory)&&(i=a.XX(t.options.defaultUri),t.trailing=a.EZ(t.options.defaultUri))}return new Promise(l=>{if(t.filePickBox=t.quickInputService.createQuickPick(),t.busy=!0,t.filePickBox.matchOnLabel=!1,t.filePickBox.sortByLabel=!1,t.filePickBox.autoFocusOnList=!1,t.filePickBox.ignoreFocusOut=!0,t.filePickBox.ok=!0,t.scheme!==b.lg.file&&t.options&&t.options.availableFileSystems&&t.options.availableFileSystems.length>1&&t.options.availableFileSystems.indexOf(b.lg.file)>-1){let c;t.filePickBox.customButton=!0,t.filePickBox.customLabel=p.NC("remoteFileDialog.local","Show Local"),c=e?G:t.allowFileSelection?t.allowFolderSelection?Q:K:J;const g=t.keybindingService.lookupKeybinding(c.ID);if(g){const F=g.getLabel();F&&(t.filePickBox.customHover=(0,x.WU)("{0} ({1})",c.LABEL,F))}}let d=0,r=!1;function h(c,g){g&&(g=a.e8(g,c.separator),g=a.O2(g)),l(g),c.contextKey.set(!1),c.filePickBox.dispose(),(0,B.B9)(c.disposables)}function u(c){c.busy?c.onBusyChangeEmitter.event(g=>{g||u(c)}):r||(r=!0,d++,c.onDidAccept().then(g=>{g?(c.filePickBox.hide(),h(c,g)):c.hidden?h(c,void 0):(d--,r=!1)}))}t.currentFolder=a.XX(i),t.userEnteredPathSegment="",t.autoCompletePathSegment="",t.filePickBox.title=t.options.title,t.filePickBox.value=t.pathFromUri(t.currentFolder,!0),t.filePickBox.valueSelection=[t.filePickBox.value.length,t.filePickBox.value.length],t.filePickBox.items=[],t.filePickBox.onDidCustom(()=>{if(!r&&!t.busy)return r=!0,d++,t.options.availableFileSystems&&t.options.availableFileSystems.length>1&&(t.options.availableFileSystems=t.options.availableFileSystems.slice(1)),t.filePickBox.hide(),e?t.fileDialogService.showSaveDialog(t.options).then(c=>{h(t,c)}):t.fileDialogService.showOpenDialog(t.options).then(c=>{h(t,c?c[0]:void 0)})}),t.filePickBox.onDidAccept(c=>{u(t)}),t.filePickBox.onDidChangeActive(c=>{if(r=!1,1===c.length&&t.isSelectionChangeFromUser()){t.filePickBox.validationMessage=void 0;const g=t.constructFullUserPath();(0,x.qq)(t.filePickBox.value.substring(0,g.length),g)||(t.filePickBox.valueSelection=[0,t.filePickBox.value.length],t.insertText(g,g)),t.setAutoComplete(g,t.userEnteredPathSegment,c[0],!0)}}),t.filePickBox.onDidChangeValue(function(){var c=(0,m.Z)(function*(g){return t.handleValueChange(g)});return function(g){return c.apply(this,arguments)}}()),t.filePickBox.onDidHide(()=>{t.hidden=!0,0===d&&h(t,void 0)}),t.filePickBox.show(),t.contextKey.set(!0),t.updateItems(i,!0,t.trailing).then(()=>{t.filePickBox.valueSelection=t.trailing?[t.filePickBox.value.length-t.trailing.length,t.filePickBox.value.length-o.length]:[t.filePickBox.value.length,t.filePickBox.value.length],t.busy=!1})})})()}handleValueChange(e){var t=this;return(0,m.Z)(function*(){try{if(t.isValueChangeFromUser())if((0,x.qq)(e,t.constructFullUserPath())||t.isBadSubpath(e))t.filePickBox.activeItems=[],t.userEnteredPathSegment="";else{t.filePickBox.validationMessage=void 0;const i=t.filePickBoxValue();let s=S.NotUpdated;a.F_.isEqual(t.currentFolder,i)||(s=yield t.tryUpdateItems(e,i)),(s===S.NotUpdated||s===S.UpdatedWithTrailing)&&t.setActiveItems(e)}}catch{}})()}isBadSubpath(e){return this.badPath&&e.length>this.badPath.length&&(0,x.qq)(e.substring(0,this.badPath.length),this.badPath)}isValueChangeFromUser(){return!(0,x.qq)(this.filePickBox.value,this.pathAppend(this.currentFolder,this.userEnteredPathSegment+this.autoCompletePathSegment))}isSelectionChangeFromUser(){return this.activeItem!==(this.filePickBox.activeItems?this.filePickBox.activeItems[0]:void 0)}constructFullUserPath(){const e=this.pathFromUri(this.currentFolder);return(0,x.qq)(this.filePickBox.value.substr(0,this.userEnteredPathSegment.length),this.userEnteredPathSegment)?(0,x.qq)(this.filePickBox.value.substr(0,e.length),e)?e:this.userEnteredPathSegment:this.pathAppend(this.currentFolder,this.userEnteredPathSegment)}filePickBoxValue(){const e=this.remoteUriFrom(this.filePickBox.value.trimRight(),this.currentFolder),t=this.pathFromUri(this.currentFolder);if((0,x.qq)(this.filePickBox.value,t))return this.currentFolder;const i=this.remoteUriFrom(t,this.currentFolder),s=a.lX(i,e),o=this.filePickBox.value.length>1&&t.length>1&&(0,x.qq)(this.filePickBox.value.substr(0,2),t.substr(0,2));if(s&&o){let l=a.Vo(this.currentFolder,s);const d=a.EZ(e);return("."===d||".."===d)&&(l=this.remoteUriFrom(this.pathAppend(l,d),this.currentFolder)),a.Gm(e)?a.e8(l):l}return e}onDidAccept(){var e=this;return(0,m.Z)(function*(){if(e.busy=!0,1===e.filePickBox.activeItems.length){const i=e.filePickBox.selectedItems[0];if(i.isFolder){if(e.trailing)yield e.updateItems(i.uri,!0,e.trailing);else{const s=e.pathFromUri(i.uri);(0,x.ok)(s,e.filePickBox.value)&&(0,x.qq)(i.label,a.EZ(i.uri))?(e.filePickBox.valueSelection=[e.pathFromUri(e.currentFolder).length,e.filePickBox.value.length],e.insertText(s,e.basenameWithTrailingSlash(i.uri))):".."===i.label&&(0,x.ok)(e.filePickBox.value,s)?(e.filePickBox.valueSelection=[s.length,e.filePickBox.value.length],e.insertText(s,"")):yield e.updateItems(i.uri,!0)}return void(e.filePickBox.busy=!1)}}else if((yield e.tryUpdateItems(e.filePickBox.value,e.filePickBoxValue()))!==S.NotUpdated)return void(e.filePickBox.busy=!1);let t;if(0===e.filePickBox.activeItems.length?t=e.filePickBoxValue():1===e.filePickBox.activeItems.length&&(t=e.filePickBox.selectedItems[0].uri),t&&(t=e.addPostfix(t)),yield e.validate(t))return e.busy=!1,t;e.busy=!1})()}root(e){let t=e,i=a.XX(e);for(;!a.Xy(t,i);)t=i,i=a.XX(i);return i}tildaReplace(e){return e.length>0&&"~"===e[0]?a.Vo(this.userHome,e.substring(1)):this.remoteUriFrom(e)}tryAddTrailingSeparatorToDirectory(e,t){return t.isDirectory&&!this.endsWithSlash(e.path)?a.e8(e):e}tryUpdateItems(e,t){var i=this;return(0,m.Z)(function*(){if(e.length>0&&"~"===e[0]){const s=i.tildaReplace(e);return(yield i.updateItems(s,!0))?S.UpdatedWithTrailing:S.Updated}if("\\"===e)return t=i.root(i.currentFolder),e=i.pathFromUri(t),(yield i.updateItems(t,!0))?S.UpdatedWithTrailing:S.Updated;if(!a.F_.isEqual(i.currentFolder,t)&&(i.endsWithSlash(e)||!a.F_.isEqual(i.currentFolder,a.XX(t))&&a.F_.isEqualOrParent(i.currentFolder,a.XX(t)))){let s;try{s=yield i.fileService.stat(t)}catch{}if(s&&s.isDirectory&&"."!==a.EZ(t)&&i.endsWithSlash(e))return t=i.tryAddTrailingSeparatorToDirectory(t,s),(yield i.updateItems(t))?S.UpdatedWithTrailing:S.Updated;if(i.endsWithSlash(e))return i.filePickBox.validationMessage=p.NC("remoteFileDialog.badPath","The path does not exist."),i.badPath=e,S.InvalidPath;{let o=a.XX(t);const l=a.O2(a.e8(i.currentFolder)),d=a.O2(a.e8(o));if(!(a.F_.isEqual(l,d)||/^[a-zA-Z]:$/.test(i.filePickBox.value)&&(0,x.qq)(i.pathFromUri(i.currentFolder).substring(0,i.filePickBox.value.length),i.filePickBox.value))){let r;try{r=yield i.fileService.stat(o)}catch{}if(r&&r.isDirectory)return i.badPath=void 0,o=i.tryAddTrailingSeparatorToDirectory(o,r),(yield i.updateItems(o,!1,a.EZ(t)))?S.UpdatedWithTrailing:S.Updated}}}return i.badPath=void 0,S.NotUpdated})()}tryUpdateTrailing(e){const t=a.DZ(e);this.trailing&&t&&(this.trailing=a.EZ(e))}setActiveItems(e){e=this.pathFromUri(this.tildaReplace(e));const t=this.remoteUriFrom(e),i=a.EZ(t),s=this.constructFullUserPath();if((0,x.qq)(s,e.substring(0,s.length))||(0,x.qq)(e,s.substring(0,e.length))){let l=!1;for(let d=0;d<this.filePickBox.items.length;d++)if(this.setAutoComplete(e,i,this.filePickBox.items[d])){l=!0;break}if(!l){const d=i.length>=2?s.substring(s.length-i.length+2):"";this.userEnteredPathSegment=d===i?i:"",this.autoCompletePathSegment="",this.filePickBox.activeItems=[],this.tryUpdateTrailing(t)}}else this.userEnteredPathSegment=i,this.autoCompletePathSegment="",this.filePickBox.activeItems=[],this.tryUpdateTrailing(t)}setAutoComplete(e,t,i,s=!1){if(this.busy)return this.userEnteredPathSegment=t,this.autoCompletePathSegment="",!1;const o=i.label;return".."===o?(this.userEnteredPathSegment="",this.autoCompletePathSegment="",this.activeItem=i,s&&document.execCommand("insertText",!1,""),!1):!s&&o.length>=t.length&&(0,x.qq)(o.substr(0,t.length),t)?(this.userEnteredPathSegment=t,this.activeItem=i,this.autoCompletePathSegment="",this.filePickBox.activeItems=i.isFolder||!this.trailing?[i]:[],!0):s&&!(0,x.qq)(this.basenameWithTrailingSlash(i.uri),this.userEnteredPathSegment+this.autoCompletePathSegment)?(this.userEnteredPathSegment="",this.accessibilityService.isScreenReaderOptimized()||(this.autoCompletePathSegment=this.trimTrailingSlash(o)),this.activeItem=i,this.accessibilityService.isScreenReaderOptimized()||(this.filePickBox.valueSelection=[this.pathFromUri(this.currentFolder,!0).length,this.filePickBox.value.length],this.insertText(this.pathAppend(this.currentFolder,this.autoCompletePathSegment),this.autoCompletePathSegment),this.filePickBox.valueSelection=[this.filePickBox.value.length-this.autoCompletePathSegment.length,this.filePickBox.value.length]),!0):(this.userEnteredPathSegment=t,this.autoCompletePathSegment="",!1)}insertText(e,t){this.filePickBox.inputHasFocus()?(document.execCommand("insertText",!1,t),this.filePickBox.value!==e&&(this.filePickBox.value=e,this.handleValueChange(e))):(this.filePickBox.value=e,this.handleValueChange(e))}addPostfix(e){let t=e;if(this.requiresTrailing&&this.options.filters&&this.options.filters.length>0&&!a.Gm(e)){let i=!1;const s=a.DZ(e).substr(1);for(let o=0;o<this.options.filters.length;o++){for(let l=0;l<this.options.filters[o].extensions.length;l++)if("*"===this.options.filters[o].extensions[l]||this.options.filters[o].extensions[l]===s){i=!0;break}if(i)break}i||(t=a.Vo(a.XX(e),a.EZ(e)+"."+this.options.filters[0].extensions[0]))}return t}trimTrailingSlash(e){return e.length>1&&this.endsWithSlash(e)?e.substr(0,e.length-1):e}yesNoPrompt(e,t){const i=this.quickInputService.createQuickPick();i.title=t,i.ignoreFocusOut=!0,i.ok=!0,i.customButton=!0,i.customLabel=p.NC("remoteFileDialog.cancel","Cancel"),i.value=this.pathFromUri(e);let s=!1;return new Promise(o=>{i.onDidAccept(()=>{s=!0,i.hide(),o(!0)}),i.onDidHide(()=>{s||o(!1),this.filePickBox.show(),this.hidden=!1,this.filePickBox.items=this.filePickBox.items,i.dispose()}),i.onDidChangeValue(()=>{i.hide()}),i.onDidCustom(()=>{i.hide()}),i.show()})}validate(e){var t=this;return(0,m.Z)(function*(){if(void 0===e)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.invalidPath","Please enter a valid path."),Promise.resolve(!1);let i,s;try{s=yield t.fileService.stat(a.XX(e)),i=yield t.fileService.stat(e)}catch{}if(t.requiresTrailing){if(i&&i.isDirectory)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.validateFolder","The folder already exists. Please use a new file name."),Promise.resolve(!1);if(i){const o=p.NC("remoteFileDialog.validateExisting","{0} already exists. Are you sure you want to overwrite it?",a.EZ(e));return t.yesNoPrompt(e,o)}if(!(0,Ge.AQ)(a.EZ(e),t.isWindows))return t.filePickBox.validationMessage=p.NC("remoteFileDialog.validateBadFilename","Please enter a valid file name."),Promise.resolve(!1);if(!s){const o=p.NC("remoteFileDialog.validateCreateDirectory","The folder {0} does not exist. Would you like to create it?",a.EZ(a.XX(e)));return t.yesNoPrompt(e,o)}if(!s.isDirectory)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.validateNonexistentDir","Please enter a path that exists."),Promise.resolve(!1)}else{if(!i)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.validateNonexistentDir","Please enter a path that exists."),Promise.resolve(!1);if("/"===e.path&&t.isWindows)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.windowsDriveLetter","Please start the path with a drive letter."),Promise.resolve(!1);if(i.isDirectory&&!t.allowFolderSelection)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.validateFileOnly","Please select a file."),Promise.resolve(!1);if(!i.isDirectory&&!t.allowFileSelection)return t.filePickBox.validationMessage=p.NC("remoteFileDialog.validateFolderOnly","Please select a folder."),Promise.resolve(!1)}return Promise.resolve(!0)})()}updateItems(e,t=!1,i){var s=this;return(0,m.Z)(function*(){s.busy=!0,s.autoCompletePathSegment="";const o=!!i;let l=!1;const d=(0,ae.PG)(function(){var r=(0,m.Z)(function*(h){let u;try{u=yield s.fileService.resolve(e),u.isDirectory||(i=a.EZ(e),e=a.XX(e),u=void 0,l=!0)}catch{}const c=i?s.pathAppend(e,i):s.pathFromUri(e,!0);return s.currentFolder=s.endsWithSlash(e.path)?e:a.e8(e,s.separator),s.userEnteredPathSegment=i||"",s.createItems(u,s.currentFolder,h).then(g=>h.isCancellationRequested?(s.busy=!1,!1):(s.filePickBox.items=g,s.filePickBox.activeItems=[s.filePickBox.items[0]],s.filePickBox.activeItems=[],!(0,x.qq)(s.filePickBox.value,c)&&t&&(s.filePickBox.valueSelection=[0,s.filePickBox.value.length],s.insertText(c,c)),t&&i&&o?s.filePickBox.valueSelection=[s.filePickBox.value.length-i.length,s.filePickBox.value.length-i.length]:i||(s.filePickBox.valueSelection=[s.filePickBox.value.length,s.filePickBox.value.length]),s.busy=!1,s.updatingPromise=void 0,l))});return function(h){return r.apply(this,arguments)}}());return void 0!==s.updatingPromise&&s.updatingPromise.cancel(),s.updatingPromise=d,d})()}pathFromUri(e,t=!1){let i=(0,le.DT)(e.fsPath,this.isWindows).replace(/\n/g,"");return i=i.replace("/"===this.separator?/\\/g:/\//g,this.separator),t&&!this.endsWithSlash(i)&&(i+=this.separator),i}pathAppend(e,t){return".."===t||"."===t?this.pathFromUri(e,!0)+t:this.pathFromUri(a.Vo(e,t))}checkIsWindowsOS(){var e=this;return(0,m.Z)(function*(){let t=N.ED;const i=yield e.getRemoteAgentEnvironment();return i&&(t=1===i.os),t})()}endsWithSlash(e){return/[\/\\]$/.test(e)}basenameWithTrailingSlash(e){const t=this.pathFromUri(e,!0),i=this.pathFromUri(a.XX(e),!0);return t.substring(i.length)}createBackItem(e){var t=this;return(0,m.Z)(function*(){const i=t.currentFolder.with({scheme:b.lg.file,authority:""}),s=a.XX(i);if(!a.Xy(i,s)){const o=a.XX(e);if(yield t.fileService.exists(o))return{label:"..",uri:a.e8(o,t.separator),isFolder:!0}}})()}createItems(e,t,i){var s=this;return(0,m.Z)(function*(){const o=[],l=yield s.createBackItem(t);try{e||(e=yield s.fileService.resolve(t));const r=e.children?yield Promise.all(e.children.map(h=>s.createItem(h,t,i))):[];for(const h of r)h&&o.push(h)}catch(r){console.log(r)}if(i.isCancellationRequested)return[];const d=o.sort((r,h)=>{if(r.isFolder!==h.isFolder)return r.isFolder?-1:1;const u=s.endsWithSlash(r.label)?r.label.substr(0,r.label.length-1):r.label,c=s.endsWithSlash(h.label)?h.label.substr(0,h.label.length-1):h.label;return u.localeCompare(c)});return l&&d.unshift(l),d})()}filterFile(e){if(this.options.filters){const t=a.DZ(e);for(let i=0;i<this.options.filters.length;i++)for(let s=0;s<this.options.filters[i].extensions.length;s++){const o=this.options.filters[i].extensions[s];if("*"===o||t==="."+o)return!0}return!1}return!0}createItem(e,t,i){var s=this;return(0,m.Z)(function*(){if(i.isCancellationRequested)return;let o=a.Vo(t,e.name);if(e.isDirectory){const l=a.EZ(o);return o=a.e8(o,s.separator),{label:l,uri:o,isFolder:!0,iconClasses:(0,ge.r)(s.modelService,s.languageService,o||void 0,z.RR.FOLDER)}}return!e.isDirectory&&s.allowFileSelection&&s.filterFile(o)?{label:e.name,uri:o,isFolder:!1,iconClasses:(0,ge.r)(s.modelService,s.languageService,o||void 0)}:void 0})()}};Y=(0,f.gn)([(0,f.fM)(0,z.sn),(0,f.fM)(1,Ve.eJ),(0,f.fM)(2,ue.e),(0,f.fM)(3,T.ec),(0,f.fM)(4,je.lT),(0,f.fM)(5,P.Z$),(0,f.fM)(6,ze.q),(0,f.fM)(7,fe.O),(0,f.fM)(8,V.n),(0,f.fM)(9,Ke.R),(0,f.fM)(10,ve.a),(0,f.fM)(11,E.d),(0,f.fM)(12,me.i6),(0,f.fM)(13,Je.F)],Y);var Ye=n(36725),qe=n(31719),_e=n(12292),et=n(76148),q=n(13686),tt=n(64822),it=n(13141),st=n(69046),Se=n(24041);let _=class{constructor(e,t,i,s,o,l,d,r,h,u,c,g,F,C,w,M,at){this.hostService=e,this.contextService=t,this.historyService=i,this.environmentService=s,this.instantiationService=o,this.configurationService=l,this.fileService=d,this.openerService=r,this.dialogService=h,this.languageService=u,this.workspacesService=c,this.labelService=g,this.pathService=F,this.commandService=C,this.editorService=w,this.codeEditorService=M,this.logService=at}defaultFilePath(e=this.getSchemeFilterForWindow()){var t=this;return(0,m.Z)(function*(){let i=t.historyService.getLastActiveFile(e);return i=i?a.XX(i):t.historyService.getLastActiveWorkspaceRoot(e),i||(i=yield t.pathService.userHome({preferLocal:e===b.lg.file})),i})()}defaultFolderPath(e=this.getSchemeFilterForWindow()){var t=this;return(0,m.Z)(function*(){let i=t.historyService.getLastActiveWorkspaceRoot(e);return i||(i=t.historyService.getLastActiveFile(e)),i?a.XX(i):t.pathService.userHome({preferLocal:e===b.lg.file})})()}defaultWorkspacePath(e=this.getSchemeFilterForWindow()){var t=this;return(0,m.Z)(function*(){let i;if(3===t.contextService.getWorkbenchState()){const s=t.contextService.getWorkspace().configuration;s?.scheme===e&&(0,T.AQ)(s,t.environmentService)&&!(0,T.gC)(s)&&(i=a.XX(s))}return i||(i=yield t.defaultFilePath(e)),i})()}showSaveConfirm(e){var t=this;return(0,m.Z)(function*(){return t.skipDialogs()?(t.logService.trace("FileDialogService: refused to show save confirmation dialog in tests."),1):t.doShowSaveConfirm(e)})()}skipDialogs(){return!(!this.environmentService.isExtensionDevelopment||!this.environmentService.extensionTestsLocationURI)||!!this.environmentService.enableSmokeTestDriver}doShowSaveConfirm(e){var t=this;return(0,m.Z)(function*(){if(0===e.length)return 1;let i,s=p.NC("saveChangesDetail","Your changes will be lost if you don't save them.");1===e.length?i=p.NC("saveChangesMessage","Do you want to save the changes you made to {0}?","string"==typeof e[0]?e[0]:a.EZ(e[0])):(i=p.NC("saveChangesMessages","Do you want to save the changes to the following {0} files?",e.length),s=(0,P.kc)(e)+"\n"+s);const{result:o}=yield t.dialogService.prompt({type:U.Z.Warning,message:i,detail:s,buttons:[{label:e.length>1?p.NC({key:"saveAll",comment:["&& denotes a mnemonic"]},"&&Save All"):p.NC({key:"save",comment:["&& denotes a mnemonic"]},"&&Save"),run:()=>0},{label:p.NC({key:"dontSave",comment:["&& denotes a mnemonic"]},"Do&&n't Save"),run:()=>1}],cancelButton:{run:()=>2}});return o})()}addFileSchemaIfNeeded(e,t){return e===b.lg.untitled?[b.lg.file]:e!==b.lg.file?[e,b.lg.file]:[e]}pickFileFolderAndOpenSimplified(e,t,i){var s=this;return(0,m.Z)(function*(){const o=p.NC("openFileOrFolder.title","Open File or Folder"),l=s.addFileSchemaIfNeeded(e),d=yield s.pickResource({canSelectFiles:!0,canSelectFolders:!0,canSelectMany:!1,defaultUri:t.defaultUri,title:o,availableFileSystems:l});if(d){const r=yield s.fileService.stat(d),h=r.isDirectory?{folderUri:d}:{fileUri:d};!(0,de.Ux)(h)&&(0,de.pS)(h)&&s.addFileToRecentlyOpened(h.fileUri),r.isDirectory||t.forceNewWindow||i?yield s.hostService.openWindow([h],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority}):yield s.editorService.openEditors([{resource:d,options:{source:Se.vU.USER,pinned:!0}}],void 0,{validateTrust:!0})}})()}pickFileAndOpenSimplified(e,t,i){var s=this;return(0,m.Z)(function*(){const o=p.NC("openFile.title","Open File"),l=s.addFileSchemaIfNeeded(e),d=yield s.pickResource({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:t.defaultUri,title:o,availableFileSystems:l});d&&(s.addFileToRecentlyOpened(d),t.forceNewWindow||i?yield s.hostService.openWindow([{fileUri:d}],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority}):yield s.editorService.openEditors([{resource:d,options:{source:Se.vU.USER,pinned:!0}}],void 0,{validateTrust:!0}))})()}addFileToRecentlyOpened(e){this.workspacesService.addRecentlyOpened([{fileUri:e,label:this.labelService.getUriLabel(e)}])}pickFolderAndOpenSimplified(e,t){var i=this;return(0,m.Z)(function*(){const s=p.NC("openFolder.title","Open Folder"),o=i.addFileSchemaIfNeeded(e,!0),l=yield i.pickResource({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:t.defaultUri,title:s,availableFileSystems:o});if(l)return i.hostService.openWindow([{folderUri:l}],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority})})()}pickWorkspaceAndOpenSimplified(e,t){var i=this;return(0,m.Z)(function*(){const s=p.NC("openWorkspace.title","Open Workspace from File"),o=[{name:p.NC("filterName.workspace","Workspace"),extensions:[T.A6]}],l=i.addFileSchemaIfNeeded(e,!0),d=yield i.pickResource({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:t.defaultUri,title:s,filters:o,availableFileSystems:l});if(d)return i.hostService.openWindow([{workspaceUri:d}],{forceNewWindow:t.forceNewWindow,remoteAuthority:t.remoteAuthority})})()}pickFileToSaveSimplified(e,t){var i=this;return(0,m.Z)(function*(){t.availableFileSystems||(t.availableFileSystems=i.addFileSchemaIfNeeded(e)),t.title=p.NC("saveFileAs.title","Save As");const s=yield i.saveRemoteResource(t);return s&&i.addFileToRecentlyOpened(s),s})()}showSaveDialogSimplified(e,t){var i=this;return(0,m.Z)(function*(){return t.availableFileSystems||(t.availableFileSystems=i.addFileSchemaIfNeeded(e)),i.saveRemoteResource(t)})()}showOpenDialogSimplified(e,t){var i=this;return(0,m.Z)(function*(){t.availableFileSystems||(t.availableFileSystems=i.addFileSchemaIfNeeded(e,t.canSelectFolders));const s=yield i.pickResource(t);return s?[s]:void 0})()}getSimpleFileDialog(){return this.instantiationService.createInstance(Y)}pickResource(e){return this.getSimpleFileDialog().showOpenDialog(e)}saveRemoteResource(e){return this.getSimpleFileDialog().showSaveDialog(e)}getSchemeFilterForWindow(e){return e??this.pathService.defaultUriScheme}getFileSystemSchema(e){return e.availableFileSystems&&e.availableFileSystems[0]||this.getSchemeFilterForWindow(e.defaultUri?.scheme)}getWorkspaceAvailableFileSystems(e){if(e.availableFileSystems&&e.availableFileSystems.length>0)return e.availableFileSystems;const t=[b.lg.file];return this.environmentService.remoteAuthority&&t.unshift(b.lg.vscodeRemote),t}getPickFileToSaveDialogOptions(e,t){const i={defaultUri:e,title:p.NC("saveAsTitle","Save As"),availableFileSystems:t},s=e?a.DZ(e):void 0;let o;const l=this.languageService.getSortedRegisteredLanguageNames(),d=(0,q.kX)(l.map(({languageName:r,languageId:h})=>{const u=this.languageService.getExtensions(h);if(!u.length)return null;const c={name:r,extensions:(0,q.EB)(u).slice(0,10).map(F=>(0,x.fy)(F,"."))},g=s||tt.y5;if(!o&&u.includes(g)){o=c;const F=(0,x.fy)(g,".");return c.extensions.includes(F)||c.extensions.unshift(F),null}return c}));return!o&&s&&(o={name:(0,x.fy)(s,".").toUpperCase(),extensions:[(0,x.fy)(s,".")]}),i.filters=(0,q.kX)([{name:p.NC("allFiles","All Files"),extensions:["*"]},o,...d,{name:p.NC("noExt","No Extension"),extensions:[""]}]),i}};_=(0,f.gn)([(0,f.fM)(0,et.$),(0,f.fM)(1,T.ec),(0,f.fM)(2,$e.C),(0,f.fM)(3,V.n),(0,f.fM)(4,X.TG),(0,f.fM)(5,qe.Ui),(0,f.fM)(6,z.sn),(0,f.fM)(7,_e.v4),(0,f.fM)(8,P.Ss),(0,f.fM)(9,fe.O),(0,f.fM)(10,Ye.Dc),(0,f.fM)(11,ue.e),(0,f.fM)(12,ve.a),(0,f.fM)(13,it.H),(0,f.fM)(14,pe.AR),(0,f.fM)(15,st.$),(0,f.fM)(16,Z.VZ)],_);var ot=n(38050),nt=n(76854);class lt extends _{constructor(){super(...arguments),this.pickWorkspaceAndOpen=nt.Jc}pickFileFolderAndOpen(e){var t=()=>super.pickFileFolderAndOpenSimplified,i=this;return(0,m.Z)(function*(){const s=i.getFileSystemSchema(e);return null==e.defaultUri&&(e.defaultUri=yield i.defaultFilePath(s)),t().call(i,s,e,!1)})()}pickFolderAndOpen(e){var t=()=>super.pickFolderAndOpenSimplified,i=this;return(0,m.Z)(function*(){const s=i.getFileSystemSchema(e);return null==e.defaultUri&&(e.defaultUri=yield i.defaultFolderPath(s)),t().call(i,s,e)})()}pickFileAndOpen(e){var t=()=>super.pickFileAndOpenSimplified,i=this;return(0,m.Z)(function*(){const s=i.getFileSystemSchema(e);return null==e.defaultUri&&(e.defaultUri=yield i.defaultFilePath(s)),t().call(i,s,e,!1)})()}showSaveDialog(e){var t=()=>super.showSaveDialogSimplified,i=this;return(0,m.Z)(function*(){const s=i.getFileSystemSchema(e);return t().call(i,s,e)})()}showOpenDialog(e){var t=()=>super.showOpenDialogSimplified,i=this;return(0,m.Z)(function*(){const s=i.getFileSystemSchema(e);return t().call(i,s,e)})()}pickFileToSave(e,t){var i=()=>super.pickFileToSaveSimplified,s=this;return(0,m.Z)(function*(){const o=s.getFileSystemSchema({defaultUri:e,availableFileSystems:t}),l=s.getPickFileToSaveDialogOptions(e,t);return i().call(s,o,l)})()}}function rt(y){return{[P.Ss.toString()]:new ce.M(j,void 0,!0),[P.Z$.toString()]:new ce.M(lt,void 0,!0),...(0,ot.Z)(y)}}}}]);