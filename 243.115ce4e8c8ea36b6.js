"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[243],{9595:(Ne,fe,g)=>{g.d(fe,{CK:()=>he,u6:()=>oe,xY:()=>e});var h=g(58054),p=g(55885),f=g(6418),O=g(44027),j=g(9110),B=g(19608),Q=g(27331),ie=g(32243),ae=g(13686),se=g(26056),ne=g(62981),K=g(49851),U=g(12997),W=g(70473),Z=g(54239),G=g(49698),v=g(12829),z=g(36774),w=g(73317),ye=g(31719),Y=g(76972),me=g(54922),J=g(82344),ke=g(53091),$=g(82927),be=g(45414),De=g(12292),xe=g(17324),Ce=g(470),Ae=g(32064),_e=g(52786),Se=g(11113),Be=g(73059),X=g(23811),A=g(86390),M=g(33491),le=g(89440),de=g(49311),Ee=g(63171);const T=f.$;function ce(I){const o=T("input");return o.type="checkbox",o.tabIndex=-1,I.push(O.o.ignoreTarget(o)),o}function P(I,o,t){const d=I.getBreakpoints().length+I.getExceptionBreakpointsForSession(o).length+I.getFunctionBreakpoints().length+I.getDataBreakpoints().length+I.getInstructionBreakpoints().length;return 22*Math.min(t,d)}let e=class extends Se.qV{constructor(o,t,d,_,k,D,N,L,ee,re,ue,Oe,Me,Te,Le,Re,Pe){super(o,_,t,ee,ue,re,k,Oe,D,Me),this.debugService=d,this.editorService=N,this.contextViewService=L,this.labelService=Te,this.hoverService=Re,this.languageService=Pe,this.needsRefresh=!1,this.needsStateChange=!1,this.ignoreLayout=!1,this.autoFocusedIndex=-1,this.menu=Le.createMenu(w.eH.DebugBreakpointsContext,ue),this._register(this.menu),this.breakpointItemType=A.vL.bindTo(ue),this.breakpointSupportsCondition=A.tY.bindTo(ue),this.breakpointInputFocused=A.fq.bindTo(ue),this._register(this.debugService.getModel().onDidChangeBreakpoints(()=>this.onBreakpointsChange())),this._register(this.debugService.getViewModel().onDidFocusSession(()=>this.onBreakpointsChange())),this._register(this.debugService.onDidChangeState(()=>this.onStateChange())),this.hintDelayer=this._register(new se.pY(()=>this.updateBreakpointsHint(!0),4e3))}renderBody(o){var t=this;super.renderBody(o),this.element.classList.add("debug-pane"),o.classList.add("debug-breakpoints");const d=new i(this);this.list=this.instantiationService.createInstance(be.ev,"Breakpoints",o,d,[this.instantiationService.createInstance(r,this.menu,this.breakpointSupportsCondition,this.breakpointItemType),new m(this.menu,this.breakpointSupportsCondition,this.breakpointItemType,this.debugService),new q(this,this.debugService,this.contextViewService),this.instantiationService.createInstance(S,this.menu,this.breakpointSupportsCondition,this.breakpointItemType),this.instantiationService.createInstance(E),new F(this,this.debugService,this.contextViewService,this.labelService),this.instantiationService.createInstance(x)],{identityProvider:{getId:k=>k.getId()},multipleSelectionSupport:!1,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:k=>k},accessibilityProvider:new pe(this.debugService,this.labelService),overrideStyles:{listBackground:this.getBackgroundColor()}}),A.Wp.bindTo(this.list.contextKeyService),this._register(this.list.onContextMenu(this.onListContextMenu,this)),this.list.onMouseMiddleClick(function(){var k=(0,h.Z)(function*({element:D}){D instanceof M.Uo?yield t.debugService.removeBreakpoints(D.getId()):D instanceof M.Tp?yield t.debugService.removeFunctionBreakpoints(D.getId()):D instanceof M.K1?yield t.debugService.removeDataBreakpoints(D.getId()):D instanceof M.k9&&(yield t.debugService.removeInstructionBreakpoints(D.instructionReference))});return function(D){return k.apply(this,arguments)}}()),this._register(this.list.onDidOpen(function(){var k=(0,h.Z)(function*(D){D.element&&(D.browserEvent instanceof MouseEvent&&1===D.browserEvent.button||(D.element instanceof M.Uo&&oe(D.element,D.sideBySide,D.editorOptions.preserveFocus||!1,D.editorOptions.pinned||!D.editorOptions.preserveFocus,t.debugService,t.editorService),D.element instanceof M.k9&&(yield t.editorService.openEditor(le.n.instance)).goToAddress(D.element.instructionReference,D.browserEvent instanceof MouseEvent&&2===D.browserEvent.detail),D.browserEvent instanceof MouseEvent&&2===D.browserEvent.detail&&D.element instanceof M.Tp&&D.element!==t.inputBoxData?.breakpoint&&t.renderInputBox({breakpoint:D.element,type:"name"})))});return function(D){return k.apply(this,arguments)}}())),this.list.splice(0,this.list.length,this.elements),this._register(this.onDidChangeBodyVisibility(k=>{k&&(this.needsRefresh&&this.onBreakpointsChange(),this.needsStateChange&&this.onStateChange())}));const _=this.viewDescriptorService.getViewContainerModel(this.viewDescriptorService.getViewContainerByViewId(this.id));this._register(_.onDidChangeAllViewDescriptors(()=>{this.updateSize()}))}renderHeaderTitle(o,t){super.renderHeaderTitle(o,t);const d=f.R3(o,T("span.breakpoint-warning"));this.hintContainer=this._register(new B.g(d,{supportIcons:!0,hoverDelegate:{showHover:(_,k)=>this.hoverService.showHover({content:_.content,target:this.hintContainer.element},k),delay:this.configurationService.getValue("workbench.hover.delay")}})),f.Cp(this.hintContainer.element)}focus(){super.focus(),this.list?.domFocus()}renderInputBox(o){this._inputBoxData=o,this.onBreakpointsChange(),this._inputBoxData=void 0}get inputBoxData(){return this._inputBoxData}layoutBody(o,t){if(!this.ignoreLayout){super.layoutBody(o,t),this.list?.layout(o,t);try{this.ignoreLayout=!0,this.updateSize()}finally{this.ignoreLayout=!1}}}onListContextMenu(o){const t=o.element;this.breakpointItemType.set(t instanceof M.Uo?"breakpoint":t instanceof M.hO?"exceptionBreakpoint":t instanceof M.Tp?"functionBreakpoint":t instanceof M.K1?"dataBreakpoint":t instanceof M.k9?"instructionBreakpoint":void 0);const _=this.debugService.getViewModel().focusedSession;this.breakpointSupportsCondition.set(t instanceof M.hO?t.supportsCondition:!_||!!_.capabilities.supportsConditionalBreakpoints);const D=[];(0,z.LJ)(this.menu,{arg:o.element,shouldForwardArgs:!1},{primary:[],secondary:D},"inline"),this.contextMenuService.showContextMenu({getAnchor:()=>o.anchor,getActions:()=>D,getActionsContext:()=>t})}updateSize(){const o=this.viewDescriptorService.getViewContainerModel(this.viewDescriptorService.getViewContainerByViewId(this.id)),t=this.debugService.getViewModel().focusedSession?.getId();this.minimumBodySize=0===this.orientation?P(this.debugService.getModel(),t,9):170,this.maximumBodySize=0===this.orientation&&o.visibleViewDescriptors.length>1?P(this.debugService.getModel(),t,Number.POSITIVE_INFINITY):Number.POSITIVE_INFINITY}updateBreakpointsHint(o=!1){if(!this.hintContainer)return;const t=this.debugService.getViewModel().focusedSession?.configuration.type,d=t?this.debugService.getAdapterManager().getDebugger(t):void 0,_=d?.strings?.[A.hN.UnverifiedBreakpoints],k=_&&this.debugService.getModel().getBreakpoints().filter(D=>{if(D.verified||!D.enabled)return!1;const N=this.languageService.guessLanguageIdByFilepathOrFirstLine(D.uri);return N&&d.interestedInLanguage(N)});if(_&&k?.length&&this.debugService.getModel().areBreakpointsActivated())if(o){const D=new K.W5(void 0,{isTrusted:!0}).appendMarkdown(_);this.hintContainer.setLabel("$(warning)",void 0,{title:{markdown:D,markdownNotSupportedFallback:_}}),f.$Z(this.hintContainer.element)}else this.hintDelayer.schedule();else f.Cp(this.hintContainer.element)}onBreakpointsChange(){if(this.isBodyVisible()){if(this.updateSize(),this.list){const o=this.list.getFocus()[0],t=o&&!this.elements.includes(this.list.element(o));this.list.splice(0,this.list.length,this.elements),this.needsRefresh=!1,t&&this.list.focusNth(Math.min(o,this.list.length-1))}this.updateBreakpointsHint()}else this.needsRefresh=!0}onStateChange(){if(this.isBodyVisible()){this.needsStateChange=!1;const o=this.debugService.getViewModel().focusedThread;let t=!1;if(o&&o.stoppedDetails&&o.stoppedDetails.hitBreakpointIds&&o.stoppedDetails.hitBreakpointIds.length>0){const d=o.stoppedDetails.hitBreakpointIds,k=this.elements.findIndex(D=>{const N=D.getIdFromAdapter(o.session.getId());return"number"==typeof N&&-1!==d.indexOf(N)});k>=0&&(this.list.setFocus([k]),this.list.setSelection([k]),t=!0,this.autoFocusedIndex=k)}if(!t){const d=this.list.getFocus(),_=this.list.getSelection();this.autoFocusedIndex>=0&&(0,ae.fS)(d,_)&&d.indexOf(this.autoFocusedIndex)>=0&&(this.list.setFocus([]),this.list.setSelection([])),this.autoFocusedIndex=-1}this.updateBreakpointsHint()}else this.needsStateChange=!0}get elements(){const o=this.debugService.getModel(),t=this.debugService.getViewModel().focusedSession?.getId();return o.getExceptionBreakpointsForSession(t).concat(o.getFunctionBreakpoints()).concat(o.getDataBreakpoints()).concat(o.getBreakpoints()).concat(o.getInstructionBreakpoints())}};e=(0,p.gn)([(0,p.fM)(1,me.i),(0,p.fM)(2,A.tn),(0,p.fM)(3,ke.d),(0,p.fM)(4,J.TG),(0,p.fM)(5,Ae.XE),(0,p.fM)(6,de.AR),(0,p.fM)(7,me.u),(0,p.fM)(8,ye.Ui),(0,p.fM)(9,Be.XH),(0,p.fM)(10,Y.i6),(0,p.fM)(11,De.v4),(0,p.fM)(12,xe.bU),(0,p.fM)(13,$.e),(0,p.fM)(14,w.co),(0,p.fM)(15,Ee.B),(0,p.fM)(16,G.O)],e);class i{constructor(o){this.view=o}getHeight(o){return 22}getTemplateId(o){if(o instanceof M.Uo)return r.ID;if(o instanceof M.Tp){const t=this.view.inputBoxData?.breakpoint;return!o.name||t&&t.getId()===o.getId()?F.ID:S.ID}if(o instanceof M.hO){const t=this.view.inputBoxData?.breakpoint;return t&&t.getId()===o.getId()?q.ID:m.ID}return o instanceof M.K1?E.ID:o instanceof M.k9?x.ID:""}}const n=new Map;let r=class ct{constructor(o,t,d,_,k){this.menu=o,this.breakpointSupportsCondition=t,this.breakpointItemType=d,this.debugService=_,this.labelService=k}get templateId(){return ct.ID}renderTemplate(o){const t=Object.create(null);t.toDispose=[],t.breakpoint=f.R3(o,T(".breakpoint")),t.icon=T(".icon"),t.checkbox=ce(t.toDispose),t.toDispose.push(f.mu(t.checkbox,"change",_=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f.R3(t.breakpoint,t.icon),f.R3(t.breakpoint,t.checkbox),t.name=f.R3(t.breakpoint,T("span.name")),t.filePath=f.R3(t.breakpoint,T("span.file-path")),t.actionBar=new j.o(t.breakpoint),t.toDispose.push(t.actionBar);const d=f.R3(t.breakpoint,T(".line-number-container"));return t.lineNumber=f.R3(d,T("span.line-number.monaco-count-badge")),t}renderElement(o,t,d){d.context=o,d.breakpoint.classList.toggle("disabled",!this.debugService.getModel().areBreakpointsActivated()),d.name.textContent=W.Hx(o.uri),d.lineNumber.textContent=o.lineNumber.toString(),o.column&&(d.lineNumber.textContent+=`:${o.column}`),d.filePath.textContent=this.labelService.getUriLabel(W.XX(o.uri),{relative:!0}),d.checkbox.checked=o.enabled;const{message:_,icon:k}=he(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),o,this.labelService);d.icon.className=_e.kS.asClassName(k),d.breakpoint.title=o.message||_||"",(3===this.debugService.state||2===this.debugService.state)&&!o.verified&&d.breakpoint.classList.add("disabled");const N=[],L=this.debugService.getViewModel().focusedSession;this.breakpointSupportsCondition.set(!L||!!L.capabilities.supportsConditionalBreakpoints),this.breakpointItemType.set("breakpoint"),(0,z.vr)(this.menu,{arg:o,shouldForwardArgs:!0},{primary:N,secondary:[]},"inline"),d.actionBar.clear(),d.actionBar.push(N,{icon:!0,label:!1}),n.set(o.getId(),d.actionBar.domNode)}disposeTemplate(o){(0,U.B9)(o.toDispose)}};r.ID="breakpoints",r=(0,p.gn)([(0,p.fM)(3,A.tn),(0,p.fM)(4,$.e)],r);let m=(()=>{class I{constructor(t,d,_,k){this.menu=t,this.breakpointSupportsCondition=d,this.breakpointItemType=_,this.debugService=k}get templateId(){return I.ID}renderTemplate(t){const d=Object.create(null);return d.toDispose=[],d.breakpoint=f.R3(t,T(".breakpoint")),d.checkbox=ce(d.toDispose),d.toDispose.push(f.mu(d.checkbox,"change",_=>{this.debugService.enableOrDisableBreakpoints(!d.context.enabled,d.context)})),f.R3(d.breakpoint,d.checkbox),d.name=f.R3(d.breakpoint,T("span.name")),d.condition=f.R3(d.breakpoint,T("span.condition")),d.breakpoint.classList.add("exception"),d.actionBar=new j.o(d.breakpoint),d.toDispose.push(d.actionBar),d}renderElement(t,d,_){_.context=t,_.name.textContent=t.label||`${t.filter} exceptions`,_.breakpoint.title=t.verified?t.description||_.name.textContent:t.message||(0,v.NC)("unverifiedExceptionBreakpoint","Unverified Exception Breakpoint"),_.breakpoint.classList.toggle("disabled",!t.verified),_.checkbox.checked=t.enabled,_.condition.textContent=t.condition||"",_.condition.title=(0,v.NC)("expressionCondition","Expression condition: {0}",t.condition);const k=[];this.breakpointSupportsCondition.set(t.supportsCondition),this.breakpointItemType.set("exceptionBreakpoint"),(0,z.vr)(this.menu,{arg:t,shouldForwardArgs:!0},{primary:k,secondary:[]},"inline"),_.actionBar.clear(),_.actionBar.push(k,{icon:!0,label:!1}),n.set(t.getId(),_.actionBar.domNode)}disposeTemplate(t){(0,U.B9)(t.toDispose)}}return I.ID="exceptionbreakpoints",I})(),S=class dt{constructor(o,t,d,_,k){this.menu=o,this.breakpointSupportsCondition=t,this.breakpointItemType=d,this.debugService=_,this.labelService=k}get templateId(){return dt.ID}renderTemplate(o){const t=Object.create(null);return t.toDispose=[],t.breakpoint=f.R3(o,T(".breakpoint")),t.icon=T(".icon"),t.checkbox=ce(t.toDispose),t.toDispose.push(f.mu(t.checkbox,"change",d=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f.R3(t.breakpoint,t.icon),f.R3(t.breakpoint,t.checkbox),t.name=f.R3(t.breakpoint,T("span.name")),t.condition=f.R3(t.breakpoint,T("span.condition")),t.actionBar=new j.o(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(o,t,d){d.context=o,d.name.textContent=o.name;const{icon:_,message:k}=he(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),o,this.labelService);d.icon.className=_e.kS.asClassName(_),d.icon.title=k||"",d.checkbox.checked=o.enabled,d.breakpoint.title=k||"",d.condition.textContent=o.condition&&o.hitCondition?(0,v.NC)("expressionAndHitCount","Expression: {0} | Hit Count: {1}",o.condition,o.hitCondition):o.condition||o.hitCondition||"";const D=this.debugService.getViewModel().focusedSession;d.breakpoint.classList.toggle("disabled",D&&!D.capabilities.supportsFunctionBreakpoints||!this.debugService.getModel().areBreakpointsActivated()),D&&!D.capabilities.supportsFunctionBreakpoints&&(d.breakpoint.title=(0,v.NC)("functionBreakpointsNotSupported","Function breakpoints are not supported by this debug type"));const N=[];this.breakpointSupportsCondition.set(!D||!!D.capabilities.supportsConditionalBreakpoints),this.breakpointItemType.set("functionBreakpoint"),(0,z.vr)(this.menu,{arg:o,shouldForwardArgs:!0},{primary:N,secondary:[]},"inline"),d.actionBar.clear(),d.actionBar.push(N,{icon:!0,label:!1}),n.set(o.getId(),d.actionBar.domNode)}disposeTemplate(o){(0,U.B9)(o.toDispose)}};S.ID="functionbreakpoints",S=(0,p.gn)([(0,p.fM)(3,A.tn),(0,p.fM)(4,$.e)],S);let E=class ut{constructor(o,t){this.debugService=o,this.labelService=t}get templateId(){return ut.ID}renderTemplate(o){const t=Object.create(null);return t.breakpoint=f.R3(o,T(".breakpoint")),t.toDispose=[],t.icon=T(".icon"),t.checkbox=ce(t.toDispose),t.toDispose.push(f.mu(t.checkbox,"change",d=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f.R3(t.breakpoint,t.icon),f.R3(t.breakpoint,t.checkbox),t.name=f.R3(t.breakpoint,T("span.name")),t.accessType=f.R3(t.breakpoint,T("span.access-type")),t}renderElement(o,t,d){d.context=o,d.name.textContent=o.description;const{icon:_,message:k}=he(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),o,this.labelService);d.icon.className=_e.kS.asClassName(_),d.icon.title=k||"",d.checkbox.checked=o.enabled,d.breakpoint.title=k||"";const D=this.debugService.getViewModel().focusedSession;if(d.breakpoint.classList.toggle("disabled",D&&!D.capabilities.supportsDataBreakpoints||!this.debugService.getModel().areBreakpointsActivated()),D&&!D.capabilities.supportsDataBreakpoints&&(d.breakpoint.title=(0,v.NC)("dataBreakpointsNotSupported","Data breakpoints are not supported by this debug type")),o.accessType){const N="read"===o.accessType?(0,v.NC)("read","Read"):"write"===o.accessType?(0,v.NC)("write","Write"):(0,v.NC)("access","Access");d.accessType.textContent=N}else d.accessType.textContent=""}disposeTemplate(o){(0,U.B9)(o.toDispose)}};E.ID="databreakpoints",E=(0,p.gn)([(0,p.fM)(0,A.tn),(0,p.fM)(1,$.e)],E);let x=class lt{constructor(o,t){this.debugService=o,this.labelService=t}get templateId(){return lt.ID}renderTemplate(o){const t=Object.create(null);return t.toDispose=[],t.breakpoint=f.R3(o,T(".breakpoint")),t.icon=T(".icon"),t.checkbox=ce(t.toDispose),t.toDispose.push(f.mu(t.checkbox,"change",d=>{this.debugService.enableOrDisableBreakpoints(!t.context.enabled,t.context)})),f.R3(t.breakpoint,t.icon),f.R3(t.breakpoint,t.checkbox),t.name=f.R3(t.breakpoint,T("span.name")),t.address=f.R3(t.breakpoint,T("span.file-path")),t.actionBar=new j.o(t.breakpoint),t.toDispose.push(t.actionBar),t}renderElement(o,t,d){d.context=o,d.breakpoint.classList.toggle("disabled",!this.debugService.getModel().areBreakpointsActivated()),d.name.textContent=o.instructionReference,d.checkbox.checked=o.enabled;const{message:_,icon:k}=he(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),o,this.labelService);d.icon.className=_e.kS.asClassName(k),d.breakpoint.title=o.message||_||"",(3===this.debugService.state||2===this.debugService.state)&&!o.verified&&d.breakpoint.classList.add("disabled")}disposeTemplate(o){(0,U.B9)(o.toDispose)}};x.ID="instructionBreakpoints",x=(0,p.gn)([(0,p.fM)(0,A.tn),(0,p.fM)(1,$.e)],x);let F=(()=>{class I{constructor(t,d,_,k){this.view=t,this.debugService=d,this.contextViewService=_,this.labelService=k}get templateId(){return I.ID}renderTemplate(t){const d=Object.create(null),_=[],k=f.R3(t,T(".breakpoint"));d.icon=T(".icon"),d.checkbox=ce(_),f.R3(k,d.icon),f.R3(k,d.checkbox),this.view.breakpointInputFocused.set(!0);const D=f.R3(k,T(".inputBoxContainer")),N=new Q.Wz(D,this.contextViewService,{inputBoxStyles:Ce.Hc}),L=ee=>{d.updating=!0;try{this.view.breakpointInputFocused.set(!1);const re=d.breakpoint.getId();ee?("name"===d.type&&this.debugService.updateFunctionBreakpoint(re,{name:N.value}),"condition"===d.type&&this.debugService.updateFunctionBreakpoint(re,{condition:N.value}),"hitCount"===d.type&&this.debugService.updateFunctionBreakpoint(re,{hitCondition:N.value})):"name"!==d.type||d.breakpoint.name?this.view.renderInputBox(void 0):this.debugService.removeFunctionBreakpoints(re)}finally{d.updating=!1}};return _.push(f.mu(N.inputElement,"keydown",ee=>{const re=ee.equals(9),ue=ee.equals(3);(re||ue)&&(ee.preventDefault(),ee.stopPropagation(),L(ue))})),_.push(f.nm(N.inputElement,"blur",()=>{d.updating||L(!!N.value)})),d.inputBox=N,d.toDispose=_,d}renderElement(t,d,_){_.breakpoint=t,_.type=this.view.inputBoxData?.type||"name";const{icon:k,message:D}=he(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),t,this.labelService);_.icon.className=_e.kS.asClassName(k),_.icon.title=D||"",_.checkbox.checked=t.enabled,_.checkbox.disabled=!0,_.inputBox.value=t.name||"";let N=(0,v.NC)("functionBreakpointPlaceholder","Function to break on"),L=(0,v.NC)("functionBreakPointInputAriaLabel","Type function breakpoint.");"condition"===_.type?(_.inputBox.value=t.condition||"",N=(0,v.NC)("functionBreakpointExpressionPlaceholder","Break when expression evaluates to true"),L=(0,v.NC)("functionBreakPointExpresionAriaLabel","Type expression. Function breakpoint will break when expression evaluates to true")):"hitCount"===_.type&&(_.inputBox.value=t.hitCondition||"",N=(0,v.NC)("functionBreakpointHitCountPlaceholder","Break when hit count is met"),L=(0,v.NC)("functionBreakPointHitCountAriaLabel","Type hit count. Function breakpoint will break when hit count is met.")),_.inputBox.setAriaLabel(L),_.inputBox.setPlaceHolder(N),setTimeout(()=>{_.inputBox.focus(),_.inputBox.select()},0)}disposeTemplate(t){(0,U.B9)(t.toDispose)}}return I.ID="functionbreakpointinput",I})(),q=(()=>{class I{constructor(t,d,_){this.view=t,this.debugService=d,this.contextViewService=_}get templateId(){return I.ID}renderTemplate(t){const d=Object.create(null),_=[],k=f.R3(t,T(".breakpoint"));k.classList.add("exception"),d.checkbox=ce(_),f.R3(k,d.checkbox),this.view.breakpointInputFocused.set(!0);const D=f.R3(k,T(".inputBoxContainer")),N=new Q.Wz(D,this.contextViewService,{ariaLabel:(0,v.NC)("exceptionBreakpointAriaLabel","Type exception breakpoint condition"),inputBoxStyles:Ce.Hc}),L=ee=>{this.view.breakpointInputFocused.set(!1);let re=d.breakpoint.condition;ee&&(re=""!==N.value?N.value:void 0),this.debugService.setExceptionBreakpointCondition(d.breakpoint,re)};return _.push(f.mu(N.inputElement,"keydown",ee=>{const re=ee.equals(9),ue=ee.equals(3);(re||ue)&&(ee.preventDefault(),ee.stopPropagation(),L(ue))})),_.push(f.nm(N.inputElement,"blur",()=>{setTimeout(()=>{L(!0)})})),d.inputBox=N,d.toDispose=_,d}renderElement(t,d,_){const k=t.conditionDescription||(0,v.NC)("exceptionBreakpointPlaceholder","Break when expression evaluates to true");_.inputBox.setPlaceHolder(k),_.breakpoint=t,_.checkbox.checked=t.enabled,_.checkbox.disabled=!0,_.inputBox.value=t.condition||"",setTimeout(()=>{_.inputBox.focus(),_.inputBox.select()},0)}disposeTemplate(t){(0,U.B9)(t.toDispose)}}return I.ID="exceptionbreakpointinput",I})();class pe{constructor(o,t){this.debugService=o,this.labelService=t}getWidgetAriaLabel(){return(0,v.NC)("breakpoints","Breakpoints")}getRole(){return"checkbox"}isChecked(o){return o.enabled}getAriaLabel(o){if(o instanceof M.hO)return o.toString();const{message:t}=he(this.debugService.state,this.debugService.getModel().areBreakpointsActivated(),o,this.labelService),d=o.toString();return t?`${d}, ${t}`:d}}function oe(I,o,t,d,_,k){return I.uri.scheme===A.lR&&0===_.state?Promise.resolve(void 0):k.openEditor({resource:I.uri,options:{preserveFocus:t,selection:I.endLineNumber?{startLineNumber:I.lineNumber,endLineNumber:I.endLineNumber,startColumn:I.column||1,endColumn:I.endColumn||1073741824}:{startLineNumber:I.lineNumber,startColumn:I.column||1,endLineNumber:I.lineNumber,endColumn:I.column||1073741824},revealIfOpened:!0,selectionRevealType:1,pinned:d}},o?de.O3:de.LP)}function he(I,o,t,d){const _=3===I||2===I,k=t instanceof M.K1?X.OZ:t instanceof M.Tp?X._0:t.logMessage?X.Ef:X.eq;if(!t.enabled||!o)return{icon:k.disabled,message:t.logMessage?(0,v.NC)("disabledLogpoint","Disabled Logpoint"):(0,v.NC)("disabledBreakpoint","Disabled Breakpoint")};const D=L=>"message"in t&&t.message?L.concat(", "+t.message):L;if(_&&!t.verified)return{icon:k.unverified,message:"message"in t&&t.message?t.message:t.logMessage?(0,v.NC)("unverifiedLogpoint","Unverified Logpoint"):(0,v.NC)("unverifiedBreakpoint","Unverified Breakpoint"),showAdapterUnverifiedMessage:!0};if(t instanceof M.K1)return t.supported?{icon:k.regular,message:t.message||(0,v.NC)("dataBreakpoint","Data Breakpoint")}:{icon:k.unverified,message:(0,v.NC)("dataBreakpointUnsupported","Data breakpoints not supported by this debug type")};if(t instanceof M.Tp){if(!t.supported)return{icon:k.unverified,message:(0,v.NC)("functionBreakpointUnsupported","Function breakpoints not supported by this debug type")};const L=[];return L.push(t.message||(0,v.NC)("functionBreakpoint","Function Breakpoint")),t.condition&&L.push((0,v.NC)("expression","Expression condition: {0}",t.condition)),t.hitCondition&&L.push((0,v.NC)("hitCount","Hit Count: {0}",t.hitCondition)),{icon:k.regular,message:D(L.join("\n"))}}if(t instanceof M.k9){if(!t.supported)return{icon:k.unverified,message:(0,v.NC)("instructionBreakpointUnsupported","Instruction breakpoints not supported by this debug type")};const L=[];return L.push(t.message?t.message:t.instructionReference?(0,v.NC)("instructionBreakpointAtAddress","Instruction breakpoint at address {0}",t.instructionReference):(0,v.NC)("instructionBreakpoint","Instruction breakpoint")),t.hitCondition&&L.push((0,v.NC)("hitCount","Hit Count: {0}",t.hitCondition)),{icon:k.regular,message:D(L.join("\n"))}}if(t.logMessage||t.condition||t.hitCondition){const L=[];return t.supported?(t.logMessage&&L.push((0,v.NC)("logMessage","Log Message: {0}",t.logMessage)),t.condition&&L.push((0,v.NC)("expression","Expression condition: {0}",t.condition)),t.hitCondition&&L.push((0,v.NC)("hitCount","Hit Count: {0}",t.hitCondition)),{icon:t.logMessage?X.Ef.regular:X.nk.regular,message:D(L.join("\n"))}):{icon:X.CI,message:(0,v.NC)("breakpointUnsupported","Breakpoints of this type are not supported by the debugger")}}const N="message"in t&&t.message?t.message:t instanceof M.Uo&&d?d.getUriLabel(t.uri):(0,v.NC)("breakpoint","Breakpoint");return{icon:k.regular,message:N}}(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.addFunctionBreakpointAction",title:{value:(0,v.NC)("addFunctionBreakpoint","Add Function Breakpoint"),original:"Add Function Breakpoint",mnemonicTitle:(0,v.NC)({key:"miFunctionBreakpoint",comment:["&& denotes a mnemonic"]},"&&Function Breakpoint...")},f1:!0,icon:X.q_,menu:[{id:w.eH.ViewTitle,group:"navigation",order:10,when:Y.Ao.equals("view",A.Ww)},{id:w.eH.MenubarNewBreakpointMenu,group:"1_breakpoints",order:3,when:A.Qe}]})}run(I){I.get(A.tn).addFunctionBreakpoint()}}),(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.toggleBreakpointsActivatedAction",title:{value:(0,v.NC)("activateBreakpoints","Toggle Activate Breakpoints"),original:"Toggle Activate Breakpoints"},f1:!0,icon:X.aE,menu:{id:w.eH.ViewTitle,group:"navigation",order:20,when:Y.Ao.equals("view",A.Ww)}})}run(I){const o=I.get(A.tn);o.setBreakpointsActivated(!o.getModel().areBreakpointsActivated())}}),(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.removeBreakpoint",title:(0,v.NC)("removeBreakpoint","Remove Breakpoint"),icon:ne.lA.removeClose,menu:[{id:w.eH.DebugBreakpointsContext,group:"3_modification",order:10,when:A.vL.notEqualsTo("exceptionBreakpoint")},{id:w.eH.DebugBreakpointsContext,group:"inline",order:20,when:A.vL.notEqualsTo("exceptionBreakpoint")}]})}run(I,o){return(0,h.Z)(function*(){const t=I.get(A.tn);o instanceof M.Uo?yield t.removeBreakpoints(o.getId()):o instanceof M.Tp?yield t.removeFunctionBreakpoints(o.getId()):o instanceof M.K1?yield t.removeDataBreakpoints(o.getId()):o instanceof M.k9&&(yield t.removeInstructionBreakpoints(o.instructionReference))})()}}),(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.removeAllBreakpoints",title:{original:"Remove All Breakpoints",value:(0,v.NC)("removeAllBreakpoints","Remove All Breakpoints"),mnemonicTitle:(0,v.NC)({key:"miRemoveAllBreakpoints",comment:["&& denotes a mnemonic"]},"Remove &&All Breakpoints")},f1:!0,icon:X.vb,menu:[{id:w.eH.ViewTitle,group:"navigation",order:30,when:Y.Ao.equals("view",A.Ww)},{id:w.eH.DebugBreakpointsContext,group:"3_modification",order:20,when:Y.Ao.and(A.LK,A.vL.notEqualsTo("exceptionBreakpoint"))},{id:w.eH.MenubarDebugMenu,group:"5_breakpoints",order:3,when:A.Qe}]})}run(I){const o=I.get(A.tn);o.removeBreakpoints(),o.removeFunctionBreakpoints(),o.removeDataBreakpoints(),o.removeInstructionBreakpoints()}}),(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.enableAllBreakpoints",title:{original:"Enable All Breakpoints",value:(0,v.NC)("enableAllBreakpoints","Enable All Breakpoints"),mnemonicTitle:(0,v.NC)({key:"miEnableAllBreakpoints",comment:["&& denotes a mnemonic"]},"&&Enable All Breakpoints")},f1:!0,precondition:A.Qe,menu:[{id:w.eH.DebugBreakpointsContext,group:"z_commands",order:10,when:Y.Ao.and(A.LK,A.vL.notEqualsTo("exceptionBreakpoint"))},{id:w.eH.MenubarDebugMenu,group:"5_breakpoints",order:1,when:A.Qe}]})}run(I){return(0,h.Z)(function*(){yield I.get(A.tn).enableOrDisableBreakpoints(!0)})()}}),(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.disableAllBreakpoints",title:{original:"Disable All Breakpoints",value:(0,v.NC)("disableAllBreakpoints","Disable All Breakpoints"),mnemonicTitle:(0,v.NC)({key:"miDisableAllBreakpoints",comment:["&& denotes a mnemonic"]},"Disable A&&ll Breakpoints")},f1:!0,precondition:A.Qe,menu:[{id:w.eH.DebugBreakpointsContext,group:"z_commands",order:20,when:Y.Ao.and(A.LK,A.vL.notEqualsTo("exceptionBreakpoint"))},{id:w.eH.MenubarDebugMenu,group:"5_breakpoints",order:2,when:A.Qe}]})}run(I){return(0,h.Z)(function*(){yield I.get(A.tn).enableOrDisableBreakpoints(!1)})()}}),(0,w.r1)(class extends w.Ke{constructor(){super({id:"workbench.debug.viewlet.action.reapplyBreakpointsAction",title:{value:(0,v.NC)("reapplyAllBreakpoints","Reapply All Breakpoints"),original:"Reapply All Breakpoints"},f1:!0,precondition:A.hO,menu:[{id:w.eH.DebugBreakpointsContext,group:"z_commands",order:30,when:Y.Ao.and(A.LK,A.vL.notEqualsTo("exceptionBreakpoint"))}]})}run(I){return(0,h.Z)(function*(){yield I.get(A.tn).setBreakpointsActivated(!0)})()}}),(0,w.r1)(class extends Se.Nx{constructor(){super({id:"debug.editBreakpoint",viewId:A.Ww,title:(0,v.NC)("editCondition","Edit Condition..."),icon:ne.lA.edit,precondition:A.tY,menu:[{id:w.eH.DebugBreakpointsContext,group:"navigation",order:10},{id:w.eH.DebugBreakpointsContext,group:"inline",order:10}]})}runInView(I,o,t){return(0,h.Z)(function*(){const d=I.get(A.tn),_=I.get(de.AR);if(t instanceof M.Uo){const k=yield oe(t,!1,!1,!0,d,_);if(k){const D=k.getControl();(0,Z.CL)(D)&&D.getContribution(A.KI)?.showBreakpointWidget(t.lineNumber,t.column)}}else if(t instanceof M.Tp){const k=I.get(me.i),D=[new ie.aU("breakpoint.editCondition",(0,v.NC)("editCondition","Edit Condition..."),void 0,!0,(0,h.Z)(function*(){return o.renderInputBox({breakpoint:t,type:"condition"})})),new ie.aU("breakpoint.editCondition",(0,v.NC)("editHitCount","Edit Hit Count..."),void 0,!0,(0,h.Z)(function*(){return o.renderInputBox({breakpoint:t,type:"hitCount"})}))],N=n.get(t.getId());N&&k.showContextMenu({getActions:()=>D,getAnchor:()=>N,onHide:()=>(0,U.B9)(D)})}else o.renderInputBox({breakpoint:t,type:"condition"})})()}}),(0,w.r1)(class extends Se.Nx{constructor(){super({id:"debug.editFunctionBreakpoint",viewId:A.Ww,title:(0,v.NC)("editBreakpoint","Edit Function Breakpoint..."),menu:[{id:w.eH.DebugBreakpointsContext,group:"1_breakpoints",order:10,when:A.vL.isEqualTo("functionBreakpoint")}]})}runInView(I,o,t){o.renderInputBox({breakpoint:t,type:"name"})}}),(0,w.r1)(class extends Se.Nx{constructor(){super({id:"debug.editFunctionBreakpointHitCount",viewId:A.Ww,title:(0,v.NC)("editHitCount","Edit Hit Count..."),precondition:A.tY,menu:[{id:w.eH.DebugBreakpointsContext,group:"navigation",order:20,when:A.vL.isEqualTo("functionBreakpoint")}]})}runInView(I,o,t){o.renderInputBox({breakpoint:t,type:"hitCount"})}})},91243:(Ne,fe,g)=>{g.d(fe,{Ee:()=>e,Py:()=>Qe,W4:()=>At,IW:()=>Ye,Hp:()=>Nt,M1:()=>Je,fD:()=>xt,QY:()=>Xe,SX:()=>wt,ZI:()=>d,pl:()=>St,p3:()=>n,w1:()=>Ue,TP:()=>re,cG:()=>Bt,OD:()=>qe,uT:()=>$e,bj:()=>ue,O0:()=>I,SI:()=>vt,Sb:()=>he,XV:()=>_t,jg:()=>Oe,Hn:()=>_,or:()=>D,M2:()=>kt,rg:()=>k,Ob:()=>Le,zr:()=>Et,ss:()=>yt,rd:()=>oe,eW:()=>bt,fH:()=>Re,vJ:()=>It,Vf:()=>Te,U8:()=>t,Yl:()=>pt,_M:()=>S,YD:()=>r,w8:()=>N,xn:()=>Dt,QE:()=>L,I4:()=>Ot,G:()=>ee,Ox:()=>Mt,Xg:()=>Me,Re:()=>Pe,rY:()=>m,Xs:()=>F,DP:()=>gt,WW:()=>q,Sf:()=>ft,GL:()=>pe,lG:()=>mt,xw:()=>x,kj:()=>ht,De:()=>o,yk:()=>Ct,ST:()=>E,NT:()=>i});var h=g(58054),p=g(12829),f=g(82553),O=g(28759),j=g(45414),B=g(86390),Q=g(33491),ie=g(54239),ae=g(73317),se=g(49311),ne=g(39459),K=g(76972),U=g(9595),W=g(51776),Z=g(5716),G=g(86682),v=g(13141),z=g(40411),w=g(42965),ye=g(31719),Y=g(79026),me=g(73059),J=g(84621),ke=g(73794),$=g(53083),be=g(43764),De=g(90290),xe=g(49698),Ce=g(12997),Ae=g(70473),_e=g(82927);function Be(){return(Be=(0,h.Z)(function*(a){const s=a.get(Y.eJ),u=a.get(B.tn),c=a.get(se.AR),l=u.getModel().getSessions(!1),b=a.get(De.q),C=a.get(xe.O),y=a.get(_e.e),V=new Ce.SL,R=s.createQuickPick();V.add(R),R.matchOnLabel=R.matchOnDescription=R.matchOnDetail=R.sortByLabel=!1,R.placeholder=p.NC("moveFocusedView.selectView","Search loaded scripts by name"),R.items=yield M(R.value,l,c,b,C,y),V.add(R.onDidChangeValue((0,h.Z)(function*(){R.items=yield M(R.value,l,c,b,C,y)}))),V.add(R.onDidAccept(()=>{R.selectedItems[0].accept(),R.hide(),V.dispose()})),R.show()})).apply(this,arguments)}function A(){return(A=(0,h.Z)(function*(a,s,u,c,l,b){const C=[];return C.push({type:"separator",label:a.name}),(yield a.getLoadedSources()).forEach(V=>{const R=function de(a,s,u,c,l,b){const C=b.getUriBasenameLabel(a.uri),y=b.getUriLabel((0,Ae.XX)(a.uri)),V=(0,$.Oh)(s,C,!0),R=(0,$.Oh)(s,y,!0);if(V||R)return{label:C,description:"."===y?void 0:y,highlights:{label:V??void 0,description:R??void 0},iconClasses:(0,be.r)(c,l,a.uri),accept:()=>{a.available&&a.openInEditor(u,{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0})}}}(V,s,u,c,l,b);R&&C.push(R)}),C})).apply(this,arguments)}function M(a,s,u,c,l,b){return le.apply(this,arguments)}function le(){return le=(0,h.Z)(function*(a,s,u,c,l,b){const C=[],y=yield Promise.all(s.map(V=>function X(a,s,u,c,l,b){return A.apply(this,arguments)}(V,a,u,c,l,b)));for(const V of y)for(const R of V)C.push(R);return C}),le.apply(this,arguments)}function T(){return(T=(0,h.Z)(function*(a,s){const u=a.get(Y.eJ),c=a.get(B.tn),l=a.get(me.qC),b=a.get(v.H),C=new Ce.SL,y=u.createQuickPick();C.add(y),y.matchOnLabel=y.matchOnDescription=y.matchOnDetail=y.sortByLabel=!1,y.placeholder=p.NC("moveFocusedView.selectView","Search debug sessions by name");const V=ce(y.value,s,c,l,b);y.items=V.picks,y.activeItems=V.activeItems,C.add(y.onDidChangeValue((0,h.Z)(function*(){y.items=ce(y.value,s,c,l,b).picks}))),C.add(y.onDidAccept(()=>{y.selectedItems[0].accept(),y.hide(),C.dispose()})),y.show()})).apply(this,arguments)}function ce(a,s,u,c,l){const b=[],C=[],y=u.getViewModel().focusedSession,V=u.getModel().getSessions(!1),R=[];V.forEach(H=>{H.compact&&H.parentSession&&C.push(H.parentSession)}),V.forEach(H=>{const ve=C.includes(H);if(H.parentSession||b.push({type:"separator",label:ve?H.name:void 0}),!ve){const we=function P(a,s,u,c,l){const b=function Ie(a){const s=a.configuration.name.length?a.configuration.name:a.name,u=a.compact?void 0:a.parentSession?.configuration.name;let c="",l="";return u&&(l=p.NC("workbench.action.debug.spawnFrom","Session {0} spawned from {1}",s,u),c=u),{label:s,description:c,ariaLabel:l}}(a),C=(0,$.Oh)(s,b.label,!0);if(C)return{label:b.label,description:b.description,ariaLabel:b.ariaLabel,highlights:{label:C},accept:()=>{u.focusStackFrame(void 0,void 0,a,{explicit:!0}),c.isViewVisible(B.FT)||c.openView(B.FT,!0)}}}(H,a,u,c);we&&(b.push(we),H.getId()===y?.getId()&&R.push(we))}}),b.length&&b.push({type:"separator"});const te=p.NC("workbench.action.debug.startDebug","Start a New Debug Session");return b.push({label:`$(plus) ${te}`,ariaLabel:te,accept:()=>l.executeCommand(s)}),{picks:b,activeItems:R}}const e="debug.addConfiguration",i="editor.debug.action.toggleInlineBreakpoint",n="debug.copyStackTrace",r="workbench.action.debug.reverseContinue",m="workbench.action.debug.stepBack",S="workbench.action.debug.restart",E="workbench.action.debug.terminateThread",x="workbench.action.debug.stepOver",F="workbench.action.debug.stepInto",q="workbench.action.debug.stepIntoTarget",pe="workbench.action.debug.stepOut",oe="workbench.action.debug.pause",he="workbench.action.debug.disconnect",I="workbench.action.debug.disconnectAndSuspend",o="workbench.action.debug.stop",t="workbench.action.debug.restartFrame",d="workbench.action.debug.continue",_="workbench.debug.action.focusRepl",k="debug.jumpToCursor",D="workbench.action.debug.focusProcess",N="workbench.action.debug.selectandstart",L="workbench.action.debug.selectDebugConsole",ee="workbench.action.debug.selectDebugSession",re="workbench.action.debug.configure",ue="workbench.action.debug.start",Oe="debug.renameWatchExpression",Me="debug.setWatchExpression",Te="debug.removeWatchExpression",Le="workbench.action.debug.nextConsole",Re="workbench.action.debug.prevConsole",Pe="workbench.action.debug.showLoadedScripts",Je="workbench.action.debug.callStackTop",Qe="workbench.action.debug.callStackBottom",Xe="workbench.action.debug.callStackUp",Ye="workbench.action.debug.callStackDown",Ue={original:"Debug",value:p.NC("debug","Debug")},pt={value:p.NC("restartDebug","Restart"),original:"Restart"},ht={value:p.NC("stepOverDebug","Step Over"),original:"Step Over"},gt={value:p.NC("stepIntoDebug","Step Into"),original:"Step Into"},ft={value:p.NC("stepIntoTargetDebug","Step Into Target"),original:"Step Into Target"},mt={value:p.NC("stepOutDebug","Step Out"),original:"Step Out"},bt={value:p.NC("pauseDebug","Pause"),original:"Pause"},_t={value:p.NC("disconnect","Disconnect"),original:"Disconnect"},vt={value:p.NC("disconnectSuspend","Disconnect and Suspend"),original:"Disconnect and Suspend"},Ct={value:p.NC("stop","Stop"),original:"Stop"},St={value:p.NC("continueDebug","Continue"),original:"Continue"},kt={value:p.NC("focusSession","Focus Session"),original:"Focus Session"},Dt={value:p.NC("selectAndStartDebugging","Select and Start Debugging"),original:"Select and Start Debugging"},Bt=p.NC("openLaunchJson","Open '{0}'","launch.json"),Et={value:p.NC("nextDebugConsole","Focus Next Debug Console"),original:"Focus Next Debug Console"},It={value:p.NC("prevDebugConsole","Focus Previous Debug Console"),original:"Focus Previous Debug Console"},yt={value:p.NC("openLoadedScript","Open Loaded Script..."),original:"Open Loaded Script..."},xt={value:p.NC("callStackTop","Navigate to Top of Call Stack"),original:"Navigate to Top of Call Stack"},At={value:p.NC("callStackBottom","Navigate to Bottom of Call Stack"),original:"Navigate to Bottom of Call Stack"},wt={value:p.NC("callStackUp","Navigate Up Call Stack"),original:"Navigate Up Call Stack"},Nt={value:p.NC("callStackDown","Navigate Down Call Stack"),original:"Navigate Down Call Stack"},Ot={value:p.NC("selectDebugConsole","Select Debug Console"),original:"Select Debug Console"},Mt={value:p.NC("selectDebugSession","Select Debug Session"),original:"Select Debug Session"},$e="debug ",qe="debug consoles ";function ge(a,s,u){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,h.Z)(function*(a,s,u){const c=a.get(B.tn);let l;if(function Tt(a){return a&&"string"==typeof a.sessionId&&"string"==typeof a.threadId}(s)){const b=c.getModel().getSession(s.sessionId);b&&(l=b.getAllThreads().find(C=>C.getId()===s.threadId))}else if(Ve(s)){const b=c.getModel().getSession(s.sessionId);if(b){const C=b.getAllThreads();l=C.length>0?C[0]:void 0}}if(!l&&(l=c.getViewModel().focusedThread,!l)){const b=c.getViewModel().focusedSession,C=b?b.getAllThreads():void 0;l=C&&C.length?C[0]:void 0}l&&(yield u(l))})).apply(this,arguments)}function et(a,s){if(!function Lt(a){return a&&"string"==typeof a.sessionId&&"string"==typeof a.threadId&&"string"==typeof a.frameId}(s))return a.getViewModel().focusedStackFrame;{const u=a.getModel().getSession(s.sessionId);if(u){const c=u.getAllThreads().find(l=>l.getId()===s.threadId);if(c)return c.getCallStack().find(l=>l.getId()===s.frameId)}}}function Ve(a){return a&&"string"==typeof a.sessionId}function tt(a,s){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(a,s){const u=a.get(B.tn),c=a.get(me.qC),l=u.getModel().getSessions(!0).filter(y=>y.hasSeparateRepl());let b=u.getViewModel().focusedSession,C=0;if(l.length>0&&b){for(;b&&!b.hasSeparateRepl();)b=b.parentSession;if(b){const y=l.indexOf(b);C=s?y===l.length-1?0:y+1:0===y?l.length-1:y-1}}yield u.focusStackFrame(void 0,void 0,l[C],{explicit:!0}),c.isViewVisible(B.FT)||(yield c.openView(B.FT,!0))})).apply(this,arguments)}function nt(a,s){return We.apply(this,arguments)}function We(){return(We=(0,h.Z)(function*(a,s){const u=a.getViewModel().focusedStackFrame;if(u){let b,c=u.thread.getCallStack(),l=c.findIndex(C=>C.frameId===u.frameId);if(s){if(l>=c.length-1){if(u.thread.reachedEndOfCallStack)return void st(a);yield a.getModel().fetchCallstack(u.thread,20),c=u.thread.getCallStack(),l=c.findIndex(C=>C.frameId===u.frameId)}b=je(!0,c,l)}else{if(l<=0)return void it(a);b=je(!1,c,l)}b&&a.focusStackFrame(b)}})).apply(this,arguments)}function it(a){return He.apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(a){const s=a.getViewModel().focusedThread;if(s){yield a.getModel().fetchCallstack(s);const u=s.getCallStack();if(u.length>0){const c=je(!1,u,0);c&&a.focusStackFrame(c)}}})).apply(this,arguments)}function st(a){const s=a.getViewModel().focusedThread;s&&a.focusStackFrame(s.getTopStackFrame())}function je(a,s,u){u>=s.length?u=s.length-1:u<0&&(u=0);let l,c=u;do{if(a?c===s.length-1?c=0:c++:0===c?c=s.length-1:c--,l=s[c],"deemphasize"!==l.source.presentationHint&&"deemphasize"!==l.presentationHint)return l}while(c!==u)}var a;v.P.registerCommand({id:n,handler:(a=(0,h.Z)(function*(s,u,c){const l=s.get(z.y),b=s.get(w.p),y=et(s.get(B.tn),c);if(y){const V=l.getEOL(y.source.uri);yield b.writeText(y.thread.getCallStack().map(R=>R.toString()).join(V))}}),function(u,c,l){return a.apply(this,arguments)})}),v.P.registerCommand({id:r,handler:function(){var a=(0,h.Z)(function*(s,u,c){yield ge(s,c,l=>l.reverseContinue())});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:m,handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(K.i6);B.oN.getValue(l)?yield ge(s,c,b=>b.stepBack("instruction")):yield ge(s,c,b=>b.stepBack())});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:E,handler:function(){var a=(0,h.Z)(function*(s,u,c){yield ge(s,c,l=>l.terminate())});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:k,handler:function(){var a=(0,h.Z)(function*(s){const c=s.get(B.tn).getViewModel().focusedStackFrame,b=s.get(se.AR).activeTextEditorControl,C=s.get(W.lT),y=s.get(Y.eJ);if(c&&(0,ie.CL)(b)&&b.hasModel()){const V=b.getPosition(),R=b.getModel().uri,te=c.thread.session.getSourceForUri(R);if(te){const ve=(yield c.thread.session.gotoTargets(te.raw,V.lineNumber,V.column))?.body.targets;if(ve&&ve.length){let we=ve[0].id;if(ve.length>1){const ze=ve.map(at=>({label:at.label,_id:at.id})),rt=yield y.pick(ze,{placeHolder:p.NC("chooseLocation","Choose the specific location")});if(!rt)return;we=rt._id}return yield c.thread.session.goto(c.thread.threadId,we).catch(ze=>C.warn(ze))}}}return C.warn(p.NC("noExecutableCode","No executable code is associated at the current cursor position."))});return function(u){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:Je,handler:function(){var a=(0,h.Z)(function*(s,u,c){st(s.get(B.tn))});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:Qe,handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(B.tn);yield it(l)});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:Xe,handler:function(){var a=(0,h.Z)(function*(s,u,c){nt(s.get(B.tn),!1)});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:Ye,handler:function(){var a=(0,h.Z)(function*(s,u,c){nt(s.get(B.tn),!0)});return function(u,c,l){return a.apply(this,arguments)}}()}),ae.BH.appendMenuItem(ae.eH.EditorContext,{command:{id:k,title:p.NC("jumpToCursor","Jump to Cursor"),category:Ue},when:K.Ao.and(B.dr,ne.u.editorTextFocus),group:"debug",order:3}),O.W.registerCommandAndKeybindingRule({id:Le,weight:201,when:B.AN,primary:2060,mac:{primary:3166},handler:function(){var a=(0,h.Z)(function*(s,u,c){tt(s,!0)});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:Re,weight:201,when:B.AN,primary:2059,mac:{primary:3164},handler:function(){var a=(0,h.Z)(function*(s,u,c){tt(s,!1)});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:S,weight:200,primary:3135,when:B.hO,handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(B.tn),b=s.get(ye.Ui);let C;if(C=Ve(c)?l.getModel().getSession(c.sessionId):l.getViewModel().focusedSession,C){const y=b.getValue("debug").showSubSessionsInToolBar;for(;!y&&C.lifecycleManagedByParent&&C.parentSession;)C=C.parentSession;C.removeReplExpressions(),yield l.restartSession(C)}else{const{launch:y,name:V}=l.getConfigurationManager().selectedConfiguration;yield l.startDebugging(y,V,{noDebug:!1,startedByUser:!0})}});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:x,weight:200,primary:68,secondary:J.$L?[580]:void 0,when:B.KA.isEqualTo("stopped"),handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(K.i6);B.oN.getValue(l)?yield ge(s,c,b=>b.next("instruction")):yield ge(s,c,b=>b.next())});return function(u,c,l){return a.apply(this,arguments)}}()});const ot=J.$L&&J.ED?581:69;function Ze(a,s,u,c,l){return Ge.apply(this,arguments)}function Ge(){return Ge=(0,h.Z)(function*(a,s,u,c,l){const b=a.get(B.tn);let C;C=Ve(u)?b.getModel().getSession(u.sessionId):b.getViewModel().focusedSession;const V=a.get(ye.Ui).getValue("debug").showSubSessionsInToolBar;for(;!V&&C&&C.lifecycleManagedByParent&&C.parentSession;)C=C.parentSession;yield b.stopSession(C,c,l)}),Ge.apply(this,arguments)}O.W.registerCommandAndKeybindingRule({id:F,weight:210,primary:ot,when:B.KA.notEqualsTo("inactive"),handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(K.i6);B.oN.getValue(l)?yield ge(s,c,b=>b.stepIn("instruction")):yield ge(s,c,b=>b.stepIn())});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:pe,weight:200,primary:1093,when:B.KA.isEqualTo("stopped"),handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(K.i6);B.oN.getValue(l)?yield ge(s,c,b=>b.stepOut("instruction")):yield ge(s,c,b=>b.stepOut())});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:oe,weight:202,primary:64,when:B.KA.isEqualTo("running"),handler:function(){var a=(0,h.Z)(function*(s,u,c){yield ge(s,c,l=>l.pause())});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:q,primary:2048|ot,when:K.Ao.and(B.o8,B.hO,B.KA.isEqualTo("stopped")),weight:200,handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(Y.eJ),b=s.get(B.tn),C=b.getViewModel().focusedSession,y=b.getViewModel().focusedStackFrame;if(!y||!C)return;const V=yield s.get(se.AR).openEditor({resource:y.source.uri,options:{revealIfOpened:!0}});let R;if(V){const H=V?.getControl();(0,ie.CL)(H)&&(R=H)}const te=l.createQuickPick();te.busy=!0,te.show(),te.onDidChangeActive(([H])=>{R&&H&&void 0!==H.target.line&&(R.revealLineInCenterIfOutsideViewport(H.target.line),R.setSelection({startLineNumber:H.target.line,startColumn:H.target.column||1,endLineNumber:H.target.endLine||H.target.line,endColumn:H.target.endColumn||H.target.column||1}))}),te.onDidAccept(()=>{te.activeItems.length&&C.stepIn(y.thread.threadId,te.activeItems[0].target.id)}),te.onDidHide(()=>te.dispose()),C.stepInTargets(y.frameId).then(H=>{te.busy=!1,H?.length?te.items=H?.map(ve=>({target:ve,label:ve.label})):te.placeholder=p.NC("editor.debug.action.stepIntoTargets.none","No step targets available")})});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:he,weight:200,primary:1087,when:K.Ao.and(B.dU,B.hO),handler:(a,s,u)=>Ze(a,s,u,!0)}),v.P.registerCommand({id:I,handler:(a,s,u)=>Ze(a,s,u,!0,!0)}),O.W.registerCommandAndKeybindingRule({id:o,weight:200,primary:1087,when:K.Ao.and(B.dU.toNegated(),B.hO),handler:(a,s,u)=>Ze(a,s,u,!1)}),v.P.registerCommand({id:t,handler:function(){var a=(0,h.Z)(function*(s,u,c){const l=s.get(B.tn),b=s.get(W.lT),C=et(l,c);if(C)try{yield C.restart()}catch(y){b.error(y)}});return function(u,c,l){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:d,weight:210,primary:63,when:B.KA.isEqualTo("stopped"),handler:function(){var a=(0,h.Z)(function*(s,u,c){yield ge(s,c,l=>l.continue())});return function(u,c,l){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:Pe,handler:function(){var a=(0,h.Z)(function*(s){yield function Se(a){return Be.apply(this,arguments)}(s)});return function(u){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:_,handler:function(){var a=(0,h.Z)(function*(s){yield s.get(me.qC).openView(B.FT,!0)});return function(u){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:"debug.startFromConfig",handler:function(){var a=(0,h.Z)(function*(s,u){yield s.get(B.tn).startDebugging(void 0,u)});return function(u,c){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:D,handler:function(){var a=(0,h.Z)(function*(s,u){const c=s.get(B.tn),l=s.get(se.AR),b=c.getModel().getSessions().find(y=>y.parentSession===u&&2===y.state);b&&2!==u.state&&(u=b),yield c.focusStackFrame(void 0,void 0,u,{explicit:!0});const C=c.getViewModel().focusedStackFrame;C&&(yield C.openInEditor(l,!0))});return function(u,c){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:N,handler:function(){var a=(0,h.Z)(function*(s){s.get(Y.eJ).quickAccess.show($e)});return function(u){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:L,handler:function(){var a=(0,h.Z)(function*(s){s.get(Y.eJ).quickAccess.show(qe)});return function(u){return a.apply(this,arguments)}}()}),v.P.registerCommand({id:ee,handler:function(){var a=(0,h.Z)(function*(s){!function Ee(a,s){T.apply(this,arguments)}(s,N)});return function(u){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:"debug.toggleBreakpoint",weight:205,when:K.Ao.and(B.Wp,Z.Ul.toNegated()),primary:10,handler:a=>{const s=a.get(j.Lw),u=a.get(B.tn),c=s.lastFocusedList;if(c instanceof f.aV){const l=c.getFocusedElements();l&&l.length&&u.enableOrDisableBreakpoints(!l[0].enabled,l[0])}}}),O.W.registerCommandAndKeybindingRule({id:"debug.enableOrDisableBreakpoint",weight:200,primary:void 0,when:ne.u.editorTextFocus,handler:a=>{const s=a.get(B.tn),c=a.get(se.AR).activeTextEditorControl;if((0,ie.CL)(c)){const l=c.getModel();if(l){const b=c.getPosition();if(b){const C=s.getModel().getBreakpoints({uri:l.uri,lineNumber:b.lineNumber});C.length&&s.enableOrDisableBreakpoints(!C[0].enabled,C[0])}}}}}),O.W.registerCommandAndKeybindingRule({id:Oe,weight:205,when:B.D5,primary:60,mac:{primary:3},handler:(a,s)=>{const u=a.get(B.tn);if(!(s instanceof Q.A2)){const l=a.get(j.Lw).lastFocusedList;if(l){const b=l.getFocus();Array.isArray(b)&&b[0]instanceof Q.A2&&(s=b[0])}}s instanceof Q.A2&&u.getViewModel().setSelectedExpression(s,!1)}}),v.P.registerCommand({id:Me,handler:function(){var a=(0,h.Z)(function*(s,u){const c=s.get(B.tn);(u instanceof Q.A2||u instanceof Q._w)&&c.getViewModel().setSelectedExpression(u,!0)});return function(u,c){return a.apply(this,arguments)}}()}),O.W.registerCommandAndKeybindingRule({id:"debug.setVariable",weight:205,when:B.$l,primary:60,mac:{primary:3},handler:a=>{const s=a.get(j.Lw),u=a.get(B.tn),c=s.lastFocusedList;if(c){const l=c.getFocus();Array.isArray(l)&&l[0]instanceof Q._w&&u.getViewModel().setSelectedExpression(l[0],!1)}}}),O.W.registerCommandAndKeybindingRule({id:Te,weight:200,when:K.Ao.and(B.D5,B.xT.toNegated()),primary:20,mac:{primary:2049},handler:(a,s)=>{const u=a.get(B.tn);if(s instanceof Q.A2)return void u.removeWatchExpressions(s.getId());const l=a.get(j.Lw).lastFocusedList;if(l){let b=l.getFocus();if(Array.isArray(b)&&b[0]instanceof Q.A2){const C=l.getSelection();C&&C.indexOf(b[0])>=0&&(b=C),b.forEach(y=>u.removeWatchExpressions(y.getId()))}}}}),O.W.registerCommandAndKeybindingRule({id:"debug.removeBreakpoint",weight:200,when:K.Ao.and(B.Wp,B.fq.toNegated()),primary:20,mac:{primary:2049},handler:a=>{const s=a.get(j.Lw),u=a.get(B.tn),c=s.lastFocusedList;if(c instanceof f.aV){const l=c.getFocusedElements(),b=l.length?l[0]:void 0;b instanceof Q.Uo?u.removeBreakpoints(b.getId()):b instanceof Q.Tp?u.removeFunctionBreakpoints(b.getId()):b instanceof Q.K1&&u.removeDataBreakpoints(b.getId())}}}),O.W.registerCommandAndKeybindingRule({weight:200,primary:1091,when:ne.u.editorTextFocus,id:i,handler:a=>{const s=a.get(B.tn),c=a.get(se.AR).activeTextEditorControl;if((0,ie.CL)(c)){const l=c.getPosition();if(l&&c.hasModel()&&s.canSetBreakpointsIn(c.getModel())){const b=c.getModel().uri;s.getModel().getBreakpoints({lineNumber:l.lineNumber,uri:b}).some(y=>y.sessionAgnosticData.column===l.column||!y.column&&l.column<=1)||s.addBreakpoints(b,[{lineNumber:l.lineNumber,column:l.column>1?l.column:void 0}])}}}}),ae.BH.appendMenuItem(ae.eH.EditorContext,{command:{id:i,title:p.NC("addInlineBreakpoint","Add Inline Breakpoint"),category:Ue},when:K.Ao.and(B.hO,G.dX.toNegated(),ne.u.editorTextFocus),group:"debug",order:1}),O.W.registerCommandAndKeybindingRule({id:"debug.openBreakpointToSide",weight:200,when:B.Wp,primary:2051,secondary:[515],handler:a=>{const u=a.get(j.Lw).lastFocusedList;if(u instanceof f.aV){const c=u.getFocusedElements();if(c.length&&c[0]instanceof Q.Uo)return(0,U.u6)(c[0],!0,!1,!0,a.get(B.tn),a.get(se.AR))}}}),O.W.registerCommandAndKeybindingRule({id:"debug.openView",weight:200,when:B.Qe.toNegated(),primary:63,secondary:[2111],handler:function(){var a=(0,h.Z)(function*(s){yield s.get(ke.c).openPaneComposite(B.f3,0,!0)});return function(u){return a.apply(this,arguments)}}()})},23811:(Ne,fe,g)=>{g.d(fe,{BU:()=>de,CI:()=>v,DI:()=>ke,Dt:()=>ie,Ef:()=>Z,Gx:()=>se,Hp:()=>xe,IO:()=>Se,K$:()=>le,Lh:()=>M,NA:()=>X,OZ:()=>W,Qx:()=>w,Tl:()=>_e,UO:()=>ae,WF:()=>Q,Wd:()=>j,Ws:()=>ye,Yi:()=>r,Z5:()=>De,_0:()=>K,_L:()=>ce,_d:()=>me,_i:()=>z,aE:()=>e,cJ:()=>Ae,eC:()=>Ee,eq:()=>ne,fC:()=>B,fR:()=>J,gv:()=>$,iO:()=>T,kc:()=>Y,kd:()=>i,l5:()=>n,nk:()=>U,oF:()=>Ce,os:()=>G,q_:()=>Ie,us:()=>A,v1:()=>O,vb:()=>P,xc:()=>Be,xv:()=>be});var h=g(62981),p=g(12829),f=g(37202);const O=(0,f.q5)("debug-console-view-icon",h.lA.debugConsole,(0,p.NC)("debugConsoleViewIcon","View icon of the debug console view.")),j=(0,f.q5)("run-view-icon",h.lA.debugAlt,(0,p.NC)("runViewIcon","View icon of the run view.")),B=(0,f.q5)("variables-view-icon",h.lA.debugAlt,(0,p.NC)("variablesViewIcon","View icon of the variables view.")),Q=(0,f.q5)("watch-view-icon",h.lA.debugAlt,(0,p.NC)("watchViewIcon","View icon of the watch view.")),ie=(0,f.q5)("callstack-view-icon",h.lA.debugAlt,(0,p.NC)("callStackViewIcon","View icon of the call stack view.")),ae=(0,f.q5)("breakpoints-view-icon",h.lA.debugAlt,(0,p.NC)("breakpointsViewIcon","View icon of the breakpoints view.")),se=(0,f.q5)("loaded-scripts-view-icon",h.lA.debugAlt,(0,p.NC)("loadedScriptsViewIcon","View icon of the loaded scripts view.")),ne={regular:(0,f.q5)("debug-breakpoint",h.lA.debugBreakpoint,(0,p.NC)("debugBreakpoint","Icon for breakpoints.")),disabled:(0,f.q5)("debug-breakpoint-disabled",h.lA.debugBreakpointDisabled,(0,p.NC)("debugBreakpointDisabled","Icon for disabled breakpoints.")),unverified:(0,f.q5)("debug-breakpoint-unverified",h.lA.debugBreakpointUnverified,(0,p.NC)("debugBreakpointUnverified","Icon for unverified breakpoints."))},K={regular:(0,f.q5)("debug-breakpoint-function",h.lA.debugBreakpointFunction,(0,p.NC)("debugBreakpointFunction","Icon for function breakpoints.")),disabled:(0,f.q5)("debug-breakpoint-function-disabled",h.lA.debugBreakpointFunctionDisabled,(0,p.NC)("debugBreakpointFunctionDisabled","Icon for disabled function breakpoints.")),unverified:(0,f.q5)("debug-breakpoint-function-unverified",h.lA.debugBreakpointFunctionUnverified,(0,p.NC)("debugBreakpointFunctionUnverified","Icon for unverified function breakpoints."))},U={regular:(0,f.q5)("debug-breakpoint-conditional",h.lA.debugBreakpointConditional,(0,p.NC)("debugBreakpointConditional","Icon for conditional breakpoints.")),disabled:(0,f.q5)("debug-breakpoint-conditional-disabled",h.lA.debugBreakpointConditionalDisabled,(0,p.NC)("debugBreakpointConditionalDisabled","Icon for disabled conditional breakpoints.")),unverified:(0,f.q5)("debug-breakpoint-conditional-unverified",h.lA.debugBreakpointConditionalUnverified,(0,p.NC)("debugBreakpointConditionalUnverified","Icon for unverified conditional breakpoints."))},W={regular:(0,f.q5)("debug-breakpoint-data",h.lA.debugBreakpointData,(0,p.NC)("debugBreakpointData","Icon for data breakpoints.")),disabled:(0,f.q5)("debug-breakpoint-data-disabled",h.lA.debugBreakpointDataDisabled,(0,p.NC)("debugBreakpointDataDisabled","Icon for disabled data breakpoints.")),unverified:(0,f.q5)("debug-breakpoint-data-unverified",h.lA.debugBreakpointDataUnverified,(0,p.NC)("debugBreakpointDataUnverified","Icon for unverified data breakpoints."))},Z={regular:(0,f.q5)("debug-breakpoint-log",h.lA.debugBreakpointLog,(0,p.NC)("debugBreakpointLog","Icon for log breakpoints.")),disabled:(0,f.q5)("debug-breakpoint-log-disabled",h.lA.debugBreakpointLogDisabled,(0,p.NC)("debugBreakpointLogDisabled","Icon for disabled log breakpoint.")),unverified:(0,f.q5)("debug-breakpoint-log-unverified",h.lA.debugBreakpointLogUnverified,(0,p.NC)("debugBreakpointLogUnverified","Icon for unverified log breakpoints."))},G=(0,f.q5)("debug-hint",h.lA.debugHint,(0,p.NC)("debugBreakpointHint","Icon for breakpoint hints shown on hover in editor glyph margin.")),v=(0,f.q5)("debug-breakpoint-unsupported",h.lA.debugBreakpointUnsupported,(0,p.NC)("debugBreakpointUnsupported","Icon for unsupported breakpoints.")),z=[ne,K,U,W,Z],w=(0,f.q5)("debug-stackframe",h.lA.debugStackframe,(0,p.NC)("debugStackframe","Icon for a stackframe shown in the editor glyph margin.")),ye=(0,f.q5)("debug-stackframe-focused",h.lA.debugStackframeFocused,(0,p.NC)("debugStackframeFocused","Icon for a focused stackframe  shown in the editor glyph margin.")),Y=(0,f.q5)("debug-gripper",h.lA.gripper,(0,p.NC)("debugGripper","Icon for the debug bar gripper.")),me=(0,f.q5)("debug-restart-frame",h.lA.debugRestartFrame,(0,p.NC)("debugRestartFrame","Icon for the debug restart frame action.")),J=(0,f.q5)("debug-stop",h.lA.debugStop,(0,p.NC)("debugStop","Icon for the debug stop action.")),ke=(0,f.q5)("debug-disconnect",h.lA.debugDisconnect,(0,p.NC)("debugDisconnect","Icon for the debug disconnect action.")),$=(0,f.q5)("debug-restart",h.lA.debugRestart,(0,p.NC)("debugRestart","Icon for the debug restart action.")),be=(0,f.q5)("debug-step-over",h.lA.debugStepOver,(0,p.NC)("debugStepOver","Icon for the debug step over action.")),De=(0,f.q5)("debug-step-into",h.lA.debugStepInto,(0,p.NC)("debugStepInto","Icon for the debug step into action.")),xe=(0,f.q5)("debug-step-out",h.lA.debugStepOut,(0,p.NC)("debugStepOut","Icon for the debug step out action.")),Ce=(0,f.q5)("debug-step-back",h.lA.debugStepBack,(0,p.NC)("debugStepBack","Icon for the debug step back action.")),Ae=(0,f.q5)("debug-pause",h.lA.debugPause,(0,p.NC)("debugPause","Icon for the debug pause action.")),_e=(0,f.q5)("debug-continue",h.lA.debugContinue,(0,p.NC)("debugContinue","Icon for the debug continue action.")),Se=(0,f.q5)("debug-reverse-continue",h.lA.debugReverseContinue,(0,p.NC)("debugReverseContinue","Icon for the debug reverse continue action.")),Be=(0,f.q5)("debug-run",h.lA.run,(0,p.NC)("debugRun","Icon for the run or debug action.")),X=(0,f.q5)("debug-start",h.lA.debugStart,(0,p.NC)("debugStart","Icon for the debug start action.")),A=(0,f.q5)("debug-configure",h.lA.gear,(0,p.NC)("debugConfigure","Icon for the debug configure action."));(0,f.q5)("debug-console",h.lA.gear,(0,p.NC)("debugConsole","Icon for the debug console open action."));const M=(0,f.q5)("debug-remove-config",h.lA.trash,(0,p.NC)("debugRemoveConfig","Icon for removing debug configurations."));(0,f.q5)("debug-collapse-all",h.lA.collapseAll,(0,p.NC)("debugCollapseAll","Icon for the collapse all action in the debug views."));const le=(0,f.q5)("callstack-view-session",h.lA.bug,(0,p.NC)("callstackViewSession","Icon for the session icon in the call stack view.")),de=(0,f.q5)("debug-console-clear-all",h.lA.clearAll,(0,p.NC)("debugConsoleClearAll","Icon for the clear all action in the debug console.")),Ee=(0,f.q5)("watch-expressions-remove-all",h.lA.closeAll,(0,p.NC)("watchExpressionsRemoveAll","Icon for the Remove All action in the watch view.")),T=(0,f.q5)("watch-expression-remove",h.lA.removeClose,(0,p.NC)("watchExpressionRemove","Icon for the Remove action in the watch view.")),ce=(0,f.q5)("watch-expressions-add",h.lA.add,(0,p.NC)("watchExpressionsAdd","Icon for the add action in the watch view.")),Ie=(0,f.q5)("watch-expressions-add-function-breakpoint",h.lA.add,(0,p.NC)("watchExpressionsAddFuncBreakpoint","Icon for the add function breakpoint action in the watch view.")),P=(0,f.q5)("breakpoints-remove-all",h.lA.closeAll,(0,p.NC)("breakpointsRemoveAll","Icon for the Remove All action in the breakpoints view.")),e=(0,f.q5)("breakpoints-activate",h.lA.activateBreakpoints,(0,p.NC)("breakpointsActivate","Icon for the activate action in the breakpoints view.")),i=(0,f.q5)("debug-console-evaluation-input",h.lA.arrowSmallRight,(0,p.NC)("debugConsoleEvaluationInput","Icon for the debug evaluation input marker.")),n=(0,f.q5)("debug-console-evaluation-prompt",h.lA.chevronRight,(0,p.NC)("debugConsoleEvaluationPrompt","Icon for the debug evaluation prompt.")),r=(0,f.q5)("debug-inspect-memory",h.lA.fileBinary,(0,p.NC)("debugInspectMemory","Icon for the inspect memory action."))},33491:(Ne,fe,g)=>{g.d(fe,{A2:()=>$,Br:()=>Se,Di:()=>Ce,FP:()=>xe,K1:()=>de,Ly:()=>J,Tp:()=>le,Uo:()=>M,_w:()=>be,hO:()=>Ee,jz:()=>Ae,k9:()=>T,ko:()=>_e,l_:()=>ce,nR:()=>Ie,sX:()=>De});var h=g(58054),p=g(55885),f=g(13686),O=g(26056),j=g(71871),B=g(19409),Q=g(61604),ie=g(13683),ae=g(12997),se=g(94927),ne=g(70473),K=g(93358),U=g(58535),W=g(4699),Z=g(84761),G=g(12829),v=g(18747),z=g(86390),w=g(7428),ye=g(89440),Y=g(4866),me=g(99740);class J{constructor(e,i,n,r,m=0,S=0,E=void 0,x=0,F=void 0){this.session=e,this.threadId=i,this._reference=n,this.id=r,this.namedVariables=m,this.indexedVariables=S,this.memoryReference=E,this.startOfVariables=x,this.presentationHint=F,this.valueChanged=!1,this._value=""}get reference(){return this._reference}set reference(e){this._reference=e,this.children=void 0}evaluateLazy(){var e=this;return(0,h.Z)(function*(){if(typeof e.reference>"u")return;const i=yield e.session.variables(e.reference,e.threadId,void 0,void 0,void 0);if(!i||!i.body||!i.body.variables||1!==i.body.variables.length)return;const n=i.body.variables[0];e.reference=n.variablesReference,e._value=n.value,e.namedVariables=n.namedVariables,e.indexedVariables=n.indexedVariables,e.memoryReference=n.memoryReference,e.presentationHint=n.presentationHint,e.adoptLazyResponse(n)})()}adoptLazyResponse(e){}getChildren(){return this.children||(this.children=this.doGetChildren()),this.children}doGetChildren(){var e=this;return(0,h.Z)(function*(){if(!e.hasChildren)return[];if(!e.getChildrenInChunks)return e.fetchVariables(void 0,void 0,void 0);const i=e.namedVariables?yield e.fetchVariables(void 0,void 0,"named"):[];let n=J.BASE_CHUNK_SIZE;for(;e.indexedVariables&&e.indexedVariables>n*J.BASE_CHUNK_SIZE;)n*=J.BASE_CHUNK_SIZE;if(e.indexedVariables&&e.indexedVariables>n){const m=Math.ceil(e.indexedVariables/n);for(let S=0;S<m;S++){const E=(e.startOfVariables||0)+S*n,x=Math.min(n,e.indexedVariables-S*n);i.push(new be(e.session,e.threadId,e,e.reference,`[${E}..${E+x-1}]`,"","",void 0,x,void 0,{kind:"virtual"},void 0,void 0,!0,E))}return i}const r=yield e.fetchVariables(e.startOfVariables,e.indexedVariables,"indexed");return i.concat(r)})()}getId(){return this.id}getSession(){return this.session}get value(){return this._value}get hasChildren(){return!!this.reference&&this.reference>0&&!this.presentationHint?.lazy}fetchVariables(e,i,n){var r=this;return(0,h.Z)(function*(){try{const m=yield r.session.variables(r.reference||0,r.threadId,n,e,i);if(!m||!m.body||!m.body.variables)return[];const S=new Map,E=m.body.variables.filter(x=>!!x).map(x=>{if((0,K.HD)(x.value)&&(0,K.HD)(x.name)&&"number"==typeof x.variablesReference){const F=S.get(x.name)||0,q=F>0?F.toString():"";return S.set(x.name,F+1),new be(r.session,r.threadId,r,x.variablesReference,x.name,x.evaluateName,x.value,x.namedVariables,x.indexedVariables,x.memoryReference,x.presentationHint,x.type,x.__vscodeVariableMenuContext,!0,0,q)}return new be(r.session,r.threadId,r,0,"",void 0,G.NC("invalidVariableAttributes","Invalid variable attributes"),0,0,void 0,{kind:"virtual"},void 0,void 0,!1)});return r.session.autoExpandLazyVariables&&(yield Promise.all(E.map(x=>x.presentationHint?.lazy&&x.evaluateLazy()))),E}catch(m){return[new be(r.session,r.threadId,r,0,"",void 0,m.message,0,0,void 0,{kind:"virtual"},void 0,void 0,!1)]}})()}get getChildrenInChunks(){return!!this.indexedVariables}set value(e){this._value=e,this.valueChanged=!!J.allValues.get(this.getId())&&J.allValues.get(this.getId())!==$.DEFAULT_VALUE&&J.allValues.get(this.getId())!==e,J.allValues.set(this.getId(),e)}toString(){return this.value}evaluateExpression(e,i,n,r,m=!1){var S=this;return(0,h.Z)(function*(){if(!i||!n&&"repl"!==r)return S.value="repl"===r?G.NC("startDebugFirst","Please start a debug session to evaluate expressions"):$.DEFAULT_VALUE,S.reference=0,!1;S.session=i;try{const E=yield i.evaluate(e,n?n.frameId:void 0,r);return!(!E||!E.body||(S.value=E.body.result||"",S.reference=E.body.variablesReference,S.namedVariables=E.body.namedVariables,S.indexedVariables=E.body.indexedVariables,S.memoryReference=E.body.memoryReference,S.type=E.body.type||S.type,S.presentationHint=E.body.presentationHint,!m&&E.body.presentationHint?.lazy&&(yield S.evaluateLazy()),0))}catch(E){return S.value=E.message||"",S.reference=0,!1}})()}}function ke(P,e){e&&e.body&&(P.value=e.body.value||"",P.type=e.body.type||P.type,P.reference=e.body.variablesReference,P.namedVariables=e.body.namedVariables,P.indexedVariables=e.body.indexedVariables)}J.allValues=new Map,J.BASE_CHUNK_SIZE=100;class $ extends J{constructor(e,i=(0,W.R)()){super(void 0,void 0,0,i),this.name=e,this.available=!1,e&&(this.value=$.DEFAULT_VALUE)}evaluate(e,i,n,r){var m=this;return(0,h.Z)(function*(){m.available=yield m.evaluateExpression(m.name,e,i,n,r)})()}toString(){return`${this.name}\n${this.value}`}setExpression(e,i){var n=this;return(0,h.Z)(function*(){if(!n.session)return;const r=yield n.session.setExpression(i.frameId,n.name,e);ke(n,r)})()}}$.DEFAULT_VALUE=G.NC("notAvailable","not available");class be extends J{constructor(e,i,n,r,m,S,E,x,F,q,pe,oe=void 0,he=void 0,I=!0,o=0,t=""){super(e,i,r,`variable:${n.getId()}:${m}:${t}`,x,F,q,o,pe),this.parent=n,this.name=m,this.evaluateName=S,this.variableMenuContext=he,this.available=I,this.value=E||"",this.type=oe}setVariable(e,i){var n=this;return(0,h.Z)(function*(){if(n.session)try{if(n.session.capabilities.supportsSetExpression&&!n.session.capabilities.supportsSetVariable&&n.evaluateName)return n.setExpression(e,i);const r=yield n.session.setVariable(n.parent.reference,n.name,e);ke(n,r)}catch(r){n.errorMessage=r.message}})()}setExpression(e,i){var n=this;return(0,h.Z)(function*(){if(!n.session||!n.evaluateName)return;const r=yield n.session.setExpression(i.frameId,n.evaluateName,e);ke(n,r)})()}toString(){return this.name?`${this.name}: ${this.value}`:this.value}adoptLazyResponse(e){this.evaluateName=e.evaluateName}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,memoryReference:this.memoryReference,value:this.value,evaluateName:this.evaluateName}}}class De extends J{constructor(e,i,n,r,m,S,E,x){super(e.thread.session,e.thread.threadId,r,`scope:${n}:${i}`,S,E),this.name=n,this.expensive=m,this.range=x}toString(){return this.name}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,expensive:this.expensive}}}class xe extends De{constructor(e,i,n){super(e,i,n,0,!1)}toString(){return this.name}}class Ce{constructor(e,i,n,r,m,S,E,x,F){this.thread=e,this.frameId=i,this.source=n,this.name=r,this.presentationHint=m,this.range=S,this.index=E,this.canRestart=x,this.instructionPointerReference=F}getId(){return`stackframe:${this.thread.getId()}:${this.index}:${this.source.name}`}getScopes(){return this.scopes||(this.scopes=this.thread.session.scopes(this.frameId,this.thread.threadId).then(e=>{if(!e||!e.body||!e.body.scopes)return[];const i=new Set;return e.body.scopes.map(n=>{let r=0;do{r=(0,Q.Cv)(`${n.name}:${n.line}:${n.column}`,r)}while(i.has(r));return i.add(r),new De(this,r,n.name,n.variablesReference,n.expensive,n.namedVariables,n.indexedVariables,n.line&&n.column&&n.endLine&&n.endColumn?new Z.e(n.line,n.column,n.endLine,n.endColumn):void 0)})},e=>[new xe(this,0,e.message)])),this.scopes}getMostSpecificScopes(e){var i=this;return(0,h.Z)(function*(){const r=(yield i.getScopes()).filter(E=>!E.expensive);if(!r.some(E=>!!E.range))return r;const S=r.filter(E=>E.range&&Z.e.containsRange(E.range,e)).sort((E,x)=>E.range.endLineNumber-E.range.startLineNumber-(x.range.endLineNumber-x.range.startLineNumber));return S.length?S:r})()}restart(){return this.thread.session.restartFrame(this.frameId,this.thread.threadId)}forgetScopes(){this.scopes=void 0}toString(){const i=`${this.source.inMemory?this.source.name:this.source.uri.fsPath}${"number"==typeof this.range.startLineNumber?`:${this.range.startLineNumber}`:""}`;return i===w.id?this.name:`${this.name} (${i})`}openInEditor(e,i,n,r){var m=this;return(0,h.Z)(function*(){const S=m.thread.stoppedDetails?.reason;return m.instructionPointerReference&&("instruction breakpoint"===S||"step"===S&&"instruction"===m.thread.lastSteppingGranularity)?e.openEditor(ye.n.instance,{pinned:!0}):m.source.available?m.source.openInEditor(e,m.range,i,n,r):void 0})()}equals(e){return this.name===e.name&&e.thread===this.thread&&this.frameId===e.frameId&&e.source===this.source&&Z.e.equalsRange(this.range,e.range)}}class Ae{constructor(e,i,n){this.session=e,this.name=i,this.threadId=n,this.callStackCancellationTokens=[],this.reachedEndOfCallStack=!1,this.callStack=[],this.staleCallStack=[],this.stopped=!1}getId(){return`thread:${this.session.getId()}:${this.threadId}`}clearCallStack(){this.callStack.length&&(this.staleCallStack=this.callStack),this.callStack=[],this.callStackCancellationTokens.forEach(e=>e.dispose(!0)),this.callStackCancellationTokens=[]}getCallStack(){return this.callStack}getStaleCallStack(){return this.staleCallStack}getTopStackFrame(){const e=this.getCallStack();return e.find(n=>!!(n&&("instruction breakpoint"===this.stoppedDetails?.reason||"step"===this.stoppedDetails?.reason&&"instruction"===this.lastSteppingGranularity)&&n.instructionPointerReference||n.source&&n.source.available&&"deemphasize"!==n.source.presentationHint))||(e.length>0?e[0]:void 0)}get stateLabel(){return this.stoppedDetails?this.stoppedDetails.description||(this.stoppedDetails.reason?G.NC({key:"pausedOn",comment:["indicates reason for program being paused"]},"Paused on {0}",this.stoppedDetails.reason):G.NC("paused","Paused")):G.NC({key:"running",comment:["indicates state"]},"Running")}fetchCallStack(e=20){var i=this;return(0,h.Z)(function*(){if(i.stopped){const n=i.callStack.length,r=yield i.getCallStackImpl(n,e);i.reachedEndOfCallStack=r.length<e,n<i.callStack.length&&i.callStack.splice(n,i.callStack.length-n),i.callStack=i.callStack.concat(r||[]),"number"==typeof i.stoppedDetails?.totalFrames&&i.stoppedDetails.totalFrames===i.callStack.length&&(i.reachedEndOfCallStack=!0)}})()}getCallStackImpl(e,i){var n=this;return(0,h.Z)(function*(){try{const r=new B.A;n.callStackCancellationTokens.push(r);const m=yield n.session.stackTrace(n.threadId,e,i,r.token);return m&&m.body&&!r.token.isCancellationRequested?(n.stoppedDetails&&(n.stoppedDetails.totalFrames=m.body.totalFrames),m.body.stackFrames.map((S,E)=>{const x=n.session.getSource(S.source);return new Ce(n,S.id,x,S.name,S.presentationHint,new Z.e(S.line,S.column,S.endLine||S.line,S.endColumn||S.column),e+E,"boolean"!=typeof S.canRestart||S.canRestart,S.instructionPointerReference)})):[]}catch(r){return n.stoppedDetails&&(n.stoppedDetails.framesErrorMessage=r.message),[]}})()}get exceptionInfo(){return this.stoppedDetails&&"exception"===this.stoppedDetails.reason?this.session.capabilities.supportsExceptionInfoRequest?this.session.exceptionInfo(this.threadId):Promise.resolve({description:this.stoppedDetails.text,breakMode:null}):Promise.resolve(void 0)}next(e){return this.session.next(this.threadId,e)}stepIn(e){return this.session.stepIn(this.threadId,void 0,e)}stepOut(e){return this.session.stepOut(this.threadId,e)}stepBack(e){return this.session.stepBack(this.threadId,e)}continue(){return this.session.continue(this.threadId)}pause(){return this.session.pause(this.threadId)}terminate(){return this.session.terminateThreads([this.threadId])}reverseContinue(){return this.session.reverseContinue(this.threadId)}}const _e=(P,e,i,n="memory")=>U.ov.from({scheme:z.Sb,authority:P,path:"/"+encodeURIComponent(e)+`/${encodeURIComponent(n)}.bin`,query:i?`?range=${i.fromOffset}:${i.toOffset}`:void 0});class Se extends ae.JT{constructor(e,i){super(),this.memoryReference=e,this.session=i,this.invalidateEmitter=this._register(new ie.Q5),this.onDidInvalidate=this.invalidateEmitter.event,this.writable=!!this.session.capabilities.supportsWriteMemoryRequest,this._register(i.onDidInvalidateMemory(n=>{n.body.memoryReference===e&&this.invalidate(n.body.offset,n.body.count-n.body.offset)}))}read(e,i){var n=this;return(0,h.Z)(function*(){const r=i-e,m=e,S=yield n.session.readMemory(n.memoryReference,m,r);if(void 0===S||!S.body?.data)return[{type:1,offset:m,length:r}];let E;try{E=(0,j.NV)(S.body.data)}catch{return[{type:2,offset:m,length:r,error:"Invalid base64 data from debug adapter"}]}const x=S.body.unreadableBytes||0,F=r-x;if(E.byteLength<F){const q=j.KN.alloc(F-E.byteLength);q.buffer.fill(0),E=j.KN.concat([E,q],F)}else E.byteLength>F&&(E=E.slice(0,F));return x?[{type:0,offset:m,length:F,data:E},{type:1,offset:m+F,length:x}]:[{type:0,offset:m,length:r,data:E}]})()}write(e,i){var n=this;return(0,h.Z)(function*(){const m=(yield n.session.writeMemory(n.memoryReference,e,(0,j.oF)(i),!0))?.body?.bytesWritten??i.byteLength;return n.invalidate(e,e+m),m})()}dispose(){super.dispose()}invalidate(e,i){this.invalidateEmitter.fire({fromOffset:e,toOffset:i})}}class Be{constructor(e,i){this.enabled=e,this.id=i}getId(){return this.id}}function X(P,e){return(0,se.jB)({supportsConditionalBreakpoints:!!e.supportsConditionalBreakpoints,supportsHitConditionalBreakpoints:!!e.supportsHitConditionalBreakpoints,supportsLogPoints:!!e.supportsLogPoints,supportsFunctionBreakpoints:!!e.supportsFunctionBreakpoints,supportsDataBreakpoints:!!e.supportsDataBreakpoints,supportsInstructionBreakpoints:!!e.supportsInstructionBreakpoints},P)}class A extends Be{constructor(e,i,n,r,m){super(e,m),this.hitCondition=i,this.condition=n,this.logMessage=r,this.sessionData=new Map,void 0===e&&(this.enabled=!0)}setSessionData(e,i){i?(i.sessionId=e,this.sessionData.set(e,i)):this.sessionData.delete(e);const n=Array.from(this.sessionData.values()),r=(0,f.EB)(n.filter(m=>m.verified),m=>`${m.line}:${m.column}`);this.data=r.length?1===r.length?r[0]:void 0:n.length?n[0]:void 0}get message(){if(this.data)return this.data.message}get verified(){return!this.data||this.data.verified}get sessionsThatVerified(){const e=[];for(const[i,n]of this.sessionData)n.verified&&e.push(i);return e}getIdFromAdapter(e){const i=this.sessionData.get(e);return i?i.id:void 0}getDebugProtocolBreakpoint(e){const i=this.sessionData.get(e);if(i)return{id:i.id,verified:i.verified,message:i.message,source:i.source,line:i.line,column:i.column,endLine:i.endLine,endColumn:i.endColumn,instructionReference:i.instructionReference,offset:i.offset}}toJSON(){const e=Object.create(null);return e.id=this.getId(),e.enabled=this.enabled,e.condition=this.condition,e.hitCondition=this.hitCondition,e.logMessage=this.logMessage,e}}class M extends A{constructor(e,i,n,r,m,S,E,x,F,q,pe,oe=(0,W.R)()){super(r,S,m,E,oe),this._uri=e,this._lineNumber=i,this._column=n,this._adapterData=x,this.textFileService=F,this.uriIdentityService=q,this.logService=pe}get originalUri(){return this._uri}get lineNumber(){return this.verified&&this.data&&"number"==typeof this.data.line?this.data.line:this._lineNumber}get verified(){return!this.data||this.data.verified&&!this.textFileService.isDirty(this._uri)}get uri(){return this.verified&&this.data&&this.data.source?(0,w.UQ)(this.data.source,this.data.source.path,this.data.sessionId,this.uriIdentityService,this.logService):this._uri}get column(){return this.verified&&this.data&&"number"==typeof this.data.column?this.data.column:this._column}get message(){return this.textFileService.isDirty(this.uri)?G.NC("breakpointDirtydHover","Unverified breakpoint. File is modified, please restart debug session."):super.message}get adapterData(){return this.data&&this.data.source&&this.data.source.adapterData?this.data.source.adapterData:this._adapterData}get endLineNumber(){return this.verified&&this.data?this.data.endLine:void 0}get endColumn(){return this.verified&&this.data?this.data.endColumn:void 0}get sessionAgnosticData(){return{lineNumber:this._lineNumber,column:this._column}}get supported(){return!this.data||!(this.logMessage&&!this.data.supportsLogPoints||this.condition&&!this.data.supportsConditionalBreakpoints||this.hitCondition&&!this.data.supportsHitConditionalBreakpoints)}setSessionData(e,i){super.setSessionData(e,i),this._adapterData||(this._adapterData=this.adapterData)}toJSON(){const e=super.toJSON();return e.uri=this._uri,e.lineNumber=this._lineNumber,e.column=this._column,e.adapterData=this.adapterData,e}toString(){return`${ne.Hx(this.uri)} ${this.lineNumber}`}update(e){(0,K.Jp)(e.lineNumber)||(this._lineNumber=e.lineNumber),(0,K.Jp)(e.column)||(this._column=e.column),(0,K.Jp)(e.condition)||(this.condition=e.condition),(0,K.Jp)(e.hitCondition)||(this.hitCondition=e.hitCondition),(0,K.Jp)(e.logMessage)||(this.logMessage=e.logMessage)}}class le extends A{constructor(e,i,n,r,m,S=(0,W.R)()){super(i,n,r,m,S),this.name=e}toJSON(){const e=super.toJSON();return e.name=this.name,e}get supported(){return!this.data||this.data.supportsFunctionBreakpoints}toString(){return this.name}}class de extends A{constructor(e,i,n,r,m,S,E,x,F,q=(0,W.R)()){super(r,m,S,E,q),this.description=e,this.dataId=i,this.canPersist=n,this.accessTypes=x,this.accessType=F}toJSON(){const e=super.toJSON();return e.description=this.description,e.dataId=this.dataId,e.accessTypes=this.accessTypes,e.accessType=this.accessType,e}get supported(){return!this.data||this.data.supportsDataBreakpoints}toString(){return this.description}}class Ee extends A{constructor(e,i,n,r,m,S,E,x=!1){super(n,void 0,m,void 0,(0,W.R)()),this.filter=e,this.label=i,this.supportsCondition=r,this.description=S,this.conditionDescription=E,this.fallback=x,this.supportedSessions=new Set}toJSON(){const e=Object.create(null);return e.filter=this.filter,e.label=this.label,e.enabled=this.enabled,e.supportsCondition=this.supportsCondition,e.conditionDescription=this.conditionDescription,e.condition=this.condition,e.fallback=this.fallback,e.description=this.description,e}setSupportedSession(e,i){i?this.supportedSessions.add(e):this.supportedSessions.delete(e)}setFallback(e){this.fallback=e}get supported(){return!0}isSupportedSession(e){return e?this.supportedSessions.has(e):this.fallback}matches(e){return this.filter===e.filter&&this.label===e.label&&this.supportsCondition===!!e.supportsCondition&&this.conditionDescription===e.conditionDescription&&this.description===e.description}toString(){return this.label}}class T extends A{constructor(e,i,n,r,m,S,E,x=(0,W.R)()){super(r,m,S,E,x),this.instructionReference=e,this.offset=i,this.canPersist=n}toJSON(){const e=super.toJSON();return e.instructionReference=this.instructionReference,e.offset=this.offset,e}get supported(){return!this.data||this.data.supportsInstructionBreakpoints}toString(){return this.instructionReference}}class ce{constructor(e,i){this.sessionId=e,this.threadId=i}getId(){return`${this.sessionId}:${this.threadId}`}}let Ie=class{constructor(e,i,n,r){this.textFileService=i,this.uriIdentityService=n,this.logService=r,this.schedulers=new Map,this.breakpointsActivated=!0,this._onDidChangeBreakpoints=new ie.Q5,this._onDidChangeCallStack=new ie.Q5,this._onDidChangeWatchExpressions=new ie.Q5,this.breakpoints=e.loadBreakpoints(),this.functionBreakpoints=e.loadFunctionBreakpoints(),this.exceptionBreakpoints=e.loadExceptionBreakpoints(),this.dataBreakpoints=e.loadDataBreakpoints(),this.watchExpressions=e.loadWatchExpressions(),this.instructionBreakpoints=[],this.sessions=[]}getId(){return"root"}getSession(e,i=!1){if(e)return this.getSessions(i).find(n=>n.getId()===e)}getSessions(e=!1){return this.sessions.filter(i=>e||0!==i.state)}addSession(e){this.sessions=this.sessions.filter(r=>!(r.getId()===e.getId()||0===r.state&&r.configuration.name===e.configuration.name));let i=1;for(;this.sessions.some(r=>r.getLabel()===e.getLabel());)e.setName(`${e.configuration.name} ${++i}`);let n=-1;e.parentSession&&(n=(0,f.vk)(this.sessions,r=>r.parentSession===e.parentSession||r===e.parentSession)),n>=0?this.sessions.splice(n+1,0,e):this.sessions.push(e),this._onDidChangeCallStack.fire(void 0)}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get onDidChangeCallStack(){return this._onDidChangeCallStack.event}get onDidChangeWatchExpressions(){return this._onDidChangeWatchExpressions.event}rawUpdate(e){const i=this.sessions.find(n=>n.getId()===e.sessionId);i&&(i.rawUpdate(e),this._onDidChangeCallStack.fire(void 0))}clearThreads(e,i,n=void 0){const r=this.sessions.find(m=>m.getId()===e);this.schedulers.forEach(m=>{m.scheduler.dispose(),m.completeDeferred.complete()}),this.schedulers.clear(),r&&(r.clearThreads(i,n),this._onDidChangeCallStack.fire(void 0))}fetchCallstack(e,i){var n=this;return(0,h.Z)(function*(){if(e.reachedEndOfCallStack)return;const r=e.stoppedDetails?.totalFrames,m="number"==typeof r?r-e.getCallStack().length:void 0;(!i||m&&i>m)&&(i=m),i&&i>0&&(yield e.fetchCallStack(i),n._onDidChangeCallStack.fire())})()}refreshTopOfCallstack(e){if(e.session.capabilities.supportsDelayedStackTraceLoading){let n=Promise.resolve();const r=new Promise((m,S)=>{n=e.fetchCallStack(1).then(()=>{if(!this.schedulers.has(e.getId())){const x=new O.CR;this.schedulers.set(e.getId(),{completeDeferred:x,scheduler:new O.pY(()=>{e.fetchCallStack(19).then(()=>{const F=e.getStaleCallStack(),q=e.getCallStack();let pe=F.length!==q.length;for(let oe=1;oe<F.length&&!pe;oe++)pe=!F[oe].equals(q[oe]);pe&&this._onDidChangeCallStack.fire()}).finally(()=>{x.complete(),this.schedulers.delete(e.getId())})},420)})}const E=this.schedulers.get(e.getId());E.scheduler.schedule(),E.completeDeferred.p.then(m,S),this._onDidChangeCallStack.fire()})});return{topCallStack:n,wholeCallStack:r}}const i=e.fetchCallStack();return{wholeCallStack:i,topCallStack:i}}getBreakpoints(e){if(e){const i=e.uri?.toString(),n=e.originalUri?.toString();return this.breakpoints.filter(r=>!(i&&r.uri.toString()!==i||n&&r.originalUri.toString()!==n||e.lineNumber&&r.lineNumber!==e.lineNumber||e.column&&r.column!==e.column||e.enabledOnly&&(!this.breakpointsActivated||!r.enabled)))}return this.breakpoints}getFunctionBreakpoints(){return this.functionBreakpoints}getDataBreakpoints(){return this.dataBreakpoints}getExceptionBreakpoints(){return this.exceptionBreakpoints}getExceptionBreakpointsForSession(e){return this.exceptionBreakpoints.filter(i=>i.isSupportedSession(e))}getInstructionBreakpoints(){return this.instructionBreakpoints}setExceptionBreakpointsForSession(e,i){if(i){let n=!1;i.forEach(r=>{let m=this.exceptionBreakpoints.filter(S=>S.matches(r)).pop();m||(n=!0,m=new Ee(r.filter,r.label,!!r.default,!!r.supportsCondition,void 0,r.description,r.conditionDescription),this.exceptionBreakpoints.push(m)),m.setSupportedSession(e,!0)}),n&&this._onDidChangeBreakpoints.fire(void 0)}}removeExceptionBreakpointsForSession(e){this.exceptionBreakpoints.forEach(i=>i.setSupportedSession(e,!1))}setExceptionBreakpointFallbackSession(e){this.exceptionBreakpoints.forEach(i=>i.setFallback(i.isSupportedSession(e)))}setExceptionBreakpointCondition(e,i){e.condition=i,this._onDidChangeBreakpoints.fire(void 0)}areBreakpointsActivated(){return this.breakpointsActivated}setBreakpointsActivated(e){this.breakpointsActivated=e,this._onDidChangeBreakpoints.fire(void 0)}addBreakpoints(e,i,n=!0){const r=i.map(m=>new M(e,m.lineNumber,m.column,!1!==m.enabled,m.condition,m.hitCondition,m.logMessage,void 0,this.textFileService,this.uriIdentityService,this.logService,m.id));return this.breakpoints=this.breakpoints.concat(r),this.breakpointsActivated=!0,this.sortAndDeDup(),n&&this._onDidChangeBreakpoints.fire({added:r,sessionOnly:!1}),r}removeBreakpoints(e){this.breakpoints=this.breakpoints.filter(i=>!e.some(n=>n.getId()===i.getId())),this._onDidChangeBreakpoints.fire({removed:e,sessionOnly:!1})}updateBreakpoints(e){const i=[];this.breakpoints.forEach(n=>{const r=e.get(n.getId());r&&(n.update(r),i.push(n))}),this.sortAndDeDup(),this._onDidChangeBreakpoints.fire({changed:i,sessionOnly:!1})}setBreakpointSessionData(e,i,n){this.breakpoints.forEach(r=>{if(n){const m=n.get(r.getId());m&&r.setSessionData(e,X(m,i))}else r.setSessionData(e,void 0)}),this.functionBreakpoints.forEach(r=>{if(n){const m=n.get(r.getId());m&&r.setSessionData(e,X(m,i))}else r.setSessionData(e,void 0)}),this.dataBreakpoints.forEach(r=>{if(n){const m=n.get(r.getId());m&&r.setSessionData(e,X(m,i))}else r.setSessionData(e,void 0)}),this.exceptionBreakpoints.forEach(r=>{if(n){const m=n.get(r.getId());m&&r.setSessionData(e,X(m,i))}else r.setSessionData(e,void 0)}),this.instructionBreakpoints.forEach(r=>{if(n){const m=n.get(r.getId());m&&r.setSessionData(e,X(m,i))}else r.setSessionData(e,void 0)}),this._onDidChangeBreakpoints.fire({sessionOnly:!0})}getDebugProtocolBreakpoint(e,i){const n=this.breakpoints.find(r=>r.getId()===e);if(n)return n.getDebugProtocolBreakpoint(i)}sortAndDeDup(){this.breakpoints=this.breakpoints.sort((e,i)=>e.uri.toString()!==i.uri.toString()?ne.Hx(e.uri).localeCompare(ne.Hx(i.uri)):e.lineNumber===i.lineNumber?e.column&&i.column?e.column-i.column:1:e.lineNumber-i.lineNumber),this.breakpoints=(0,f.EB)(this.breakpoints,e=>`${e.uri.toString()}:${e.lineNumber}:${e.column}`)}setEnablement(e,i){if(e instanceof M||e instanceof le||e instanceof Ee||e instanceof de||e instanceof T){const n=[];e.enabled!==i&&(e instanceof M||e instanceof le||e instanceof de||e instanceof T)&&n.push(e),e.enabled=i,i&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:n,sessionOnly:!1})}}enableOrDisableAllBreakpoints(e){const i=[];this.breakpoints.forEach(n=>{n.enabled!==e&&i.push(n),n.enabled=e}),this.functionBreakpoints.forEach(n=>{n.enabled!==e&&i.push(n),n.enabled=e}),this.dataBreakpoints.forEach(n=>{n.enabled!==e&&i.push(n),n.enabled=e}),this.instructionBreakpoints.forEach(n=>{n.enabled!==e&&i.push(n),n.enabled=e}),e&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:i,sessionOnly:!1})}addFunctionBreakpoint(e,i){const n=new le(e,!0,void 0,void 0,void 0,i);return this.functionBreakpoints.push(n),this._onDidChangeBreakpoints.fire({added:[n],sessionOnly:!1}),n}updateFunctionBreakpoint(e,i){const n=this.functionBreakpoints.find(r=>r.getId()===e);n&&("string"==typeof i.name&&(n.name=i.name),"string"==typeof i.condition&&(n.condition=i.condition),"string"==typeof i.hitCondition&&(n.hitCondition=i.hitCondition),this._onDidChangeBreakpoints.fire({changed:[n],sessionOnly:!1}))}removeFunctionBreakpoints(e){let i;e?(i=this.functionBreakpoints.filter(n=>n.getId()===e),this.functionBreakpoints=this.functionBreakpoints.filter(n=>n.getId()!==e)):(i=this.functionBreakpoints,this.functionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:i,sessionOnly:!1})}addDataBreakpoint(e,i,n,r,m){const S=new de(e,i,n,!0,void 0,void 0,void 0,r,m);this.dataBreakpoints.push(S),this._onDidChangeBreakpoints.fire({added:[S],sessionOnly:!1})}removeDataBreakpoints(e){let i;e?(i=this.dataBreakpoints.filter(n=>n.getId()===e),this.dataBreakpoints=this.dataBreakpoints.filter(n=>n.getId()!==e)):(i=this.dataBreakpoints,this.dataBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:i,sessionOnly:!1})}addInstructionBreakpoint(e,i,n,r){const m=new T(e,i,!1,!0,r,n,void 0);this.instructionBreakpoints.push(m),this._onDidChangeBreakpoints.fire({added:[m],sessionOnly:!0})}removeInstructionBreakpoints(e){let i;e?(i=this.instructionBreakpoints.filter(n=>n.instructionReference===e),this.instructionBreakpoints=this.instructionBreakpoints.filter(n=>n.instructionReference!==e)):(i=this.instructionBreakpoints,this.instructionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:i,sessionOnly:!1})}getWatchExpressions(){return this.watchExpressions}addWatchExpression(e){const i=new $(e||"");return this.watchExpressions.push(i),this._onDidChangeWatchExpressions.fire(i),i}renameWatchExpression(e,i){const n=this.watchExpressions.filter(r=>r.getId()===e);1===n.length&&(n[0].name=i,this._onDidChangeWatchExpressions.fire(n[0]))}removeWatchExpressions(e=null){this.watchExpressions=e?this.watchExpressions.filter(i=>i.getId()!==e):[],this._onDidChangeWatchExpressions.fire(void 0)}moveWatchExpression(e,i){const n=this.watchExpressions.find(r=>r.getId()===e);n&&(this.watchExpressions=this.watchExpressions.filter(r=>r.getId()!==e),this.watchExpressions=this.watchExpressions.slice(0,i).concat(n,this.watchExpressions.slice(i)),this._onDidChangeWatchExpressions.fire(void 0))}sourceIsNotAvailable(e){this.sessions.forEach(i=>{const n=i.getSourceForUri(e);n&&(n.available=!1)}),this._onDidChangeCallStack.fire(void 0)}};Ie=(0,p.gn)([(0,p.fM)(1,Y.MM),(0,p.fM)(2,v.v),(0,p.fM)(3,me.VZ)],Ie)},7428:(Ne,fe,g)=>{g.d(fe,{Hw:()=>se,UQ:()=>ne,id:()=>ae});var h=g(12829),p=g(58535),f=g(48601),O=g(70473),j=g(86390),B=g(49311),Q=g(29175),ie=g(23281);const ae=h.NC("unknownSource","Unknown Source");class se{constructor(U,W,Z,G){let v;U?(this.raw=U,v=this.raw.path||this.raw.name||"",this.available=!0):(this.raw={name:ae},this.available=!1,v=`${j.lR}:${ae}`),this.uri=ne(this.raw,v,W,Z,G)}get name(){return this.raw.name||O.Hx(this.uri)}get origin(){return this.raw.origin}get presentationHint(){return this.raw.presentationHint}get reference(){return this.raw.sourceReference}get inMemory(){return this.uri.scheme===j.lR}openInEditor(U,W,Z,G,v){return this.available?U.openEditor({resource:this.uri,description:this.origin,options:{preserveFocus:Z,selection:W,revealIfOpened:!0,selectionRevealType:1,pinned:v}},G?B.O3:B.LP):Promise.resolve(void 0)}static getEncodedDebugData(U){let W,Z,G;switch(U.scheme){case Q.lg.file:W=(0,f.Fv)(U.fsPath);break;case j.lR:if(W=U.path,U.query){const v=U.query.split("&");for(const z of v){const w=z.split("=");if(2===w.length)switch(w[0]){case"session":G=w[1];break;case"ref":Z=parseInt(w[1])}}}break;default:W=U.toString()}return{name:O.Hx(U),path:W,sourceReference:Z,sessionId:G}}}function ne(K,U,W,Z,G){const v=z=>"number"==typeof K.sourceReference&&K.sourceReference>0?p.ov.from({scheme:j.lR,path:z,query:`session=${W}&ref=${K.sourceReference}`}):z&&(0,ie.p3)(z)?Z.asCanonicalUri(p.ov.parse(z)):z&&(0,f.YP)(z)?Z.asCanonicalUri(p.ov.file(z)):Z.asCanonicalUri(p.ov.from({scheme:j.lR,path:z,query:`session=${W}`}));try{return v(U)}catch{return G.error("Invalid path from debug adapter: "+U),v("/invalidDebugSource")}}},89440:(Ne,fe,g)=>{g.d(fe,{n:()=>f});var h=g(92765),p=g(12829);let f=(()=>{class O extends h.Q{constructor(){super(...arguments),this.resource=void 0}get typeId(){return O.ID}static get instance(){return(!O._instance||O._instance.isDisposed())&&(O._instance=new O),O._instance}getName(){return(0,p.NC)("disassemblyInputName","Disassembly")}matches(B){return B instanceof O}}return O.ID="debug.disassemblyView.input",O})()}}]);